{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/tinymce/tinymce.js","webpack:///./src/js/tinymce.js","webpack:///./node_modules/tinymce/themes/silver/index.js","webpack:///./node_modules/tinymce/themes/silver/theme.js","webpack:///./node_modules/tinymce/plugins/code/index.js","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./node_modules/tinymce/plugins/paste/index.js","webpack:///./node_modules/tinymce/plugins/paste/plugin.js","webpack:///./node_modules/tinymce/plugins/autolink/index.js","webpack:///./node_modules/tinymce/plugins/autolink/plugin.js","webpack:///./node_modules/tinymce/plugins/fullscreen/index.js","webpack:///./node_modules/tinymce/plugins/fullscreen/plugin.js","webpack:///./node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///./node_modules/tinymce/plugins/lists/index.js","webpack:///./node_modules/tinymce/plugins/lists/plugin.js","webpack:///./node_modules/tinymce/plugins/media/index.js","webpack:///./node_modules/tinymce/plugins/media/plugin.js","webpack:///./node_modules/tinymce/skins sync ./node_modules/file-loader/dist/cjs.js","webpack:///./node_modules/tinymce/skins/content/default/content.css","webpack:///./node_modules/tinymce/skins/content/default/content.min.css","webpack:///./node_modules/tinymce/skins/content/document/content.css","webpack:///./node_modules/tinymce/skins/content/document/content.min.css","webpack:///./node_modules/tinymce/skins/content/writer/content.css","webpack:///./node_modules/tinymce/skins/content/writer/content.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/content.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/content.inline.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/content.inline.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/content.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/content.mobile.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/content.mobile.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/fonts/tinymce-mobile.woff","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/skin.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/skin.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/skin.mobile.css","webpack:///./node_modules/tinymce/skins/ui/oxide-dark/skin.mobile.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide/content.css","webpack:///./node_modules/tinymce/skins/ui/oxide/content.inline.css","webpack:///./node_modules/tinymce/skins/ui/oxide/content.inline.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide/content.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide/content.mobile.css","webpack:///./node_modules/tinymce/skins/ui/oxide/content.mobile.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide/fonts/tinymce-mobile.woff","webpack:///./node_modules/tinymce/skins/ui/oxide/skin.css","webpack:///./node_modules/tinymce/skins/ui/oxide/skin.min.css","webpack:///./node_modules/tinymce/skins/ui/oxide/skin.mobile.css","webpack:///./node_modules/tinymce/skins/ui/oxide/skin.mobile.min.css"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","domGlobals","noop","compose","fa","fb","args","_i","arguments","length","apply","constant","identity","x","curry","fn","initialArgs","restArgs","all","concat","pIndexOf","not","f","never","always","never$1","always$1","none","NONE","eq","isNone","thunk","id","me","fold","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","map","ap","each","flatten","exists","forall","filter","equals","equals_","toArray","toString","freeze","some","a","constant_a","self","v","optfab","fab","elementEq","b","Option","from","isType","type","Array","isPrototypeOf","constructor","String","typeOf","isString","isObject","isArray","isNull","isBoolean","isFunction","isNumber","slice","rawIndexOf","undefined","indexOf","xs","slowIndexOf","contains","pred","findIndex","len","partition","pass","fail","push","foldr","acc","eachr","foldl","find","difference","a1","a2","head","last","from$1","__assign","assign","webkit","ie","ie11","ie12","gecko","mac","iDevice","android","fileApi","phone","tablet","windowsPhone","nav","navigator","userAgent","matchMediaQuery","query","matchMedia","matches","test","appName","exec","URL","createObjectURL","requestAnimationFramePromise","support","Expr","getText","isXML","tokenize","compile","select","outermostContext","sortInput","hasDuplicate","setDocument","document","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","contains$1","Env","opera","iOS","contentEditable","parseInt","match","transparentSrc","caretAfter","range","getSelection","documentMode","ceFalse","cacheSuffix","container","experimentalShadowDom","canHaveCSP","desktop","promiseObj","Promise","thisArg","TypeError","_state","_value","_deferreds","doResolve","resolve","reject","asap","immediateFn","setImmediate","setTimeout","handle","deferred","cb","onFulfilled","onRejected","ret","newValue","then","finale","Handler","done","reason","ex","catch","remaining","res","val","race","values","promise","wrappedSetTimeout","callback","time","wrappedSetInterval","setInterval","debounce","timer","func","clearTimeout","stop","Delay","requestAnimationFrame","element","body","requestAnimationFrameFunc","vendors","setEditorTimeout","editor","removed","setEditorInterval","clearInterval","throttle","mouseEventRe","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","returnFalse","returnTrue","addEvent","target","capture","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","fix","originalEvent","data","event","srcElement","defaultTarget","composedPath","getTargetFromShadowDom","pageX","clientX","eventDoc","ownerDocument","doc","documentElement","scrollLeft","clientLeft","pageY","clientY","scrollTop","clientTop","preventDefault","isDefaultPrevented","stopPropagation","isPropagationStopped","cancelBubble","stopImmediatePropagation","isImmediatePropagationStopped","hasIsDefaultPrevented","metaKey","bindOnReady","win","eventUtils","domLoaded","isDocReady","readyState","readyHandler","waitForDomLoaded","tryScroll","doScroll","top","EventUtils","events","count","expando","Date","hasMouseEnterLeave","hasFocusIn","names","scope","callbackList","fakeName","nativeHandler","defaultNativeHandler","evt","executeHandlers","nodeType","namesList","split","mouseEnterLeave","current","related","currentTarget","relatedTarget","parentNode","unbind","ci","eventMap","fire","defaultView","parentWindow","clean","children","getElementsByTagName","destroy","cancel","Event","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","hasOwn","arr","pop","push_native","push$1","slice$1","indexOf$1","elem","whitespace","identifier","attributes","pseudos","rtrim","RegExp","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr","rsibling","rescape","runescape","funescape","_","escaped","escapedWhitespace","high","fromCharCode","childNodes","els","j","Sizzle","selector","context","results","seed","groups","old","nid","newContext","newSelector","getElementById","getElementsByClassName","qsa","nodeName","toLowerCase","getAttribute","replace","setAttribute","toSelector","testContext","join","querySelectorAll","qsaError","removeAttribute","keys","cache","cacheLength","shift","markFunction","siblingCheck","cur","diff","sourceIndex","nextSibling","createInputPseudo","createButtonPseudo","createPositionalPseudo","argument","matchIndexes","node","hasCompare","parent","getTop","getById","attrId","tag","tmp","className","disconnectedMatch","compareDocumentPosition","adown","bup","compare","sortDetached","aup","bp","unshift","expr","elements","matchesSelector","attr","attrHandle","getAttributeNode","specified","error","uniqueSort","duplicates","detectDuplicates","sortStable","sort","splice","textContent","firstChild","nodeValue","selectors","createPseudo","relative","dir","first","preFilter","excess","unquoted","nodeNameSelector","pattern","operator","check","result","what","simple","forward","ofType","xml","outerCache","nodeIndex","start","useCache","lastChild","pseudo","setFilters","idx","matched","input","matcher","unmatched","has","text","innerText","lang","elemLang","hash","location","root","focus","activeElement","hasFocus","href","tabIndex","enabled","disabled","checked","selected","selectedIndex","empty","header","button","even","odd","lt","gt","nth","radio","checkbox","file","password","image","submit","reset","tokens","addCombinator","combinator","base","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","filters","parseOnly","soFar","preFilters","cached","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","Math","random","matcherFromGroupMatchers","token","compiled","isArray$1","each$1","findIndex$1","array","predicate","ArrUtils","obj","out","item","index","reduce","collection","iteratee","accumulator","whiteSpaceRegExp","trim","str","walk","Tools","makeMap","items","delim","grep","inArray","prop","extend","ext","sp","cn","scn","de","createNS","onCreate","static","explode","_addCacheSuffix","url","push$2","slice$2","rquickExpr$1","skipUniques","isDefined","isString$1","createFragment","html","fragDoc","frag","createElement","createDocumentFragment","innerHTML","appendChild","domManipulate","targetNodes","sourceItem","reverse","getElementDocument","DomQuery","makeArray","hasClass","wrap","wrapper","lastParent","newWrapper","cloneNode","insertBefore","numericCssMap","booleanMap","propFix","for","class","readonly","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","init","whiteSpaceRegExp$1","trim$1","each$2","charAt","add","nodes","unique","hook","set","removeAttr","css","elm","camel","toUpperCase","dashed","style","removeProperty","currentStyle","getComputedStyle","getPropertyValue","remove","removeChild","append","host","prepend","before","after","appendTo","prependTo","replaceWith","content","wrapAll","wrapInner","contents","unwrap","clone","addClass","toggleClass","removeClass","state","existingClassName","classState","on","off","trigger","show","hide","closest","offset","docElm","pos","y","getBoundingClientRect","left","el","until","sibling","siblingName","firstSibling","parents","next","prev","contentDocument","contentWindow","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","defaults","sub","appendHooks","targetHooks","hooks","maxlength","maxLength","size","cssText","opacity","zoom","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$2","isBrowser","nu$1","info","version","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","edge","chrome","firefox","safari","isOS","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","windows","ios","linux","osx","solaris","freebsd","detect$1","candidates","candidate","search","UaString","browsers","browser","oses","os","contains$2","substr","startsWith","prefix","checkRange","trim$2","rTrim","normalVersionRegex","checkContains","uastring","PlatformInfo","PlatformDetection","deviceType","isiPad","isiPhone","isAndroid3","isAndroid4","isTablet","isTouch","isPhone","iOSwebview","isWebView","DeviceType","PlatformDetection$1","called","fromDom","dom","Element","fromHtml","div","hasChildNodes","console","fromTag","fromText","createTextNode","fromPoint","elementFromPoint","DOCUMENT","Node","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","ELEMENT","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","TEXT","TEXT_NODE","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","isType$1","isElement","isText","hasOwnProperty$1","each$3","props","k","map$2","tupleMap","tuple","bifilter","isSupported","inBody","rawSet","setAll","attrs","get$1","get$2","getUnsafeProperty","getRaw","raw","Immutable","fields","struct","Recurse","recurse","DOCUMENT_POSITION_CONTAINED_BY","ELEMENT$1","DOCUMENT$1","is$1","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","e1","e2","contains$3","d1","d2","owner","prevSibling","previousSibling","prevSiblings","nextSiblings","child","cs","browser$1","firstElement","hasChild","Position","rootElm","offsetParent","offsetLeft","offsetTop","caption","bodyTop","captionTop","captionHeight","offsetHeight","getTableCaptionDeltaY","exports$1","module$1","define","require","amd","global","EphoxContactWrapper","u","code","1","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","nextTick","title","env","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","2","setTimeoutFunc","_handled","_immediateFn","_unhandledRejectionFn","prom","err","warn","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","4","promisePolyfill","Global","boltExport","nu$3","baseFn","callbacks","nCallback","isReady","cbs","LazyValue","pure","errorReporter","make","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","par","asyncValues","asyncValue","isValue","isError","opt","onValue","mapError","toOption","message","onError","Result","fromOption","StyleSheetLoader","settings","maxLoadTime","idCount","loadedStates","appendToHead","load","loadedCallback","errorCallback","link","startTime","status","passed","failed","onload","onerror","wait","testCallback","waitCallback","getTime","waitForWebKitLinkLoaded","styleSheet","styleSheets","ownerNode","owningElement","waitForGeckoLinkLoaded","cssRules","sheet","rel","async","defer","contentCssCors","crossOrigin","webKitChunks","loadF","unbox","loadAll","urls","success","failure","futures","parts","namedEntities","baseEntities","reverseEntities","isNodeType","isElement$1","matchNodeNames","lowercasedNames","hasContentEditableState","isTextareaOrInput","isText$1","isComment","isDocument","isDocumentFragment","isBr","isContentEditableTrue","isContentEditableFalse","NodeType","isRestrictedNode","getPrototypeOf","hasPropValue","propName","propValue","hasAttribute","attrName","attrValue","hasAttributeValue","matchStyleValues","computed","isBogus","isBogusAll","isTable","tagName","TreeWalker","startNode","rootNode","prev2","shallow","findSibling","findPreviousNode","startName","lazyLookup","lookup","mapToObject","isHeading","isBlock","isInline","isBr$1","isTextBlock","isList","isListItem","isVoid","isTableSection","isTableCell","isWsPreserveElement","isBookmarkNode","trimNode","trimmedLength","previousIsSpan","nextIsSpan","surroundedBySpans","TrimNode","makeMap$1","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","128","130","131","132","133","134","135","136","137","138","139","140","142","145","146","147","148","149","150","151","152","153","154","155","156","158","159","'","buildEntitiesLookup","radix","chr","entity","encodeRaw","encodeNumeric","charCodeAt","encodeNamed","entities","Entities","encodeAllRaw","getEncodeFunc","entitiesMap","nameMap","named","numeric","decode","nativeDecode","mapCache","dummyObj","makeMap$2","each$4","extend$1","explode$1","inArray$1","compileElementMap","styles","Schema","validStyles","invalidStyles","schemaItems","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","validClasses","blockElementsMap","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","textInlineElementsMap","patternElements","customElementsMap","specialElements","createLookupTable","option","defaultValue","extendWith","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","schema","ni","attributesOrder","arrayToMap","addAttrs","schemaItem","table","script","compileSchema","verify_html","valid_elements","valid_styles","invalid_styles","valid_classes","special","patternToRegExp","addValidElements","validElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","required","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","rule","inline","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","custom_elements","valid_children","extended_valid_elements","dd","dt","li","td","th","tr","tbody","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getValidClasses","getBlockElements","getInvalidStyles","getShortEndedElements","getTextBlockElements","getTextInlineElements","getBoolAttrs","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","isValidChild","isValid","attrPatterns","getCustomElements","toHex","hex","Styles","encodingItems","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","color","parse","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","suffix","noJoin","right","bottom","box","canCompress","encode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","border","serialize","serializeStyles","styleList","styleMap","each$5","grep$1","simpleSelectorRe","whiteSpaceRegExp$2","updateInternalStyleAttr","$elm","rawValue","findNodeIndex","normalized","lastNodeType","DOMUtils","_this","addedStyles","files","counter","styleSheetLoader","boundEvents","ownEvents","$","getRoot","getElementsByName","$$","getAttrib","defaultVal","getAttribs","setAttrib","originalValue","onSetAttrib","attrElm","root_element","getPos","getStyle","getSize","w","h","offsetWidth","clientWidth","clientHeight","elms","getParents","collect","selectorVal","_findSib","setAttribs","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","cls","oldElm","replaceChild","createRng","createRange","rv","getContentEditable","stdMode","boxModel","deep","clone_1","getViewPort","argWin","actWin","pageXOffset","pageYOffset","innerWidth","innerHeight","getRect","getParent","getNext","getPrev","createHTML","outHtml","setStyle","update_styles","setStyles","stylesArg","removeAllAttribs","removeAttributeNode","parseStyle","serializeStyle","addStyle","styleElm","DOM","loadCSS","isHidden","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","ps","rgbVal","isEmpty","brCount","walker","bogusVal","splitElm","replacementElm","bef","aft","pa","setStart","setEnd","extractContents","getContentEditableParent","isChildOf","dumpRng","startContainer","startOffset","endContainer","endOffset","getContext","keepValues","keep_values","keepUrlHook","src","setupAttrHooks","DOMUtils$1","each$6","grep$2","ScriptLoader","states","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","onreadystatechange","log","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","Cell","initial","currentCode","I18n","getData","setCode","newCode","getCode","langData","translate","getLangData","textstr","lowercaseTextstr","removeContext","isTokenised","values_1","$1","$2","isRtl","hasCode","each$7","AddOnManager","_listeners","dependencies","createUrl","baseUrl","dep","resource","loadDependencies","addOnUrl","deps","newUrl","urlString","baseURL","substring","lastIndexOf","instance","requireLangPack","languages","language","languageLoad","addOn","listener","addComponents","pluginName","pluginUrl","waitFor","PluginManager","ThemeManager","AddOnManager$1","append$1","rogue","remove$1","children$1","rate","read","supports","classList","add$2","clazz","add$1","remove$3","remove$2","add$3","cleanClass","get$3","has$2","descendants","descendants$1","ClosestOrAncestor","ancestor","isRoot","ancestor$1","descendant","querySelector","one","closest$1","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","rng","selection","getRng","getBody","an","newStart","getAttr","has$1","uid","findMarkers","setup","registry","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","previous","onNodeChange","comparator","copy","annotations","fireNoAnnotation","_a","fireCallbacks","setup$1","serializer","addNodeFilter","spans","span","identifyParserNode","persistent","original","isDeep","set$1","docDom","fragment","contentElements","Zwsp","isElement$2","isText$2","isCaretContainerBlock","isCaretContainerInline","isCaretContainer","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","insertBlock","blockName","blockNode","br","startsWithCaretContainer","endsWithCaretContainer","showCaretContainerBlock","caretContainer","brs","lastBr","isContentEditableTrue$1","isContentEditableFalse$1","isBr$2","isText$3","isInvalidTextElement","isAtomicInline","isTable$2","isCaretContainer$1","isCaretCandidate","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate","isInEditable","round","clone$1","rect","width","height","collapse","toStart","isValidOverflow","overflowY","rect1","rect2","min","isAbove","isBelow","containsXY","getSelectedNode","getNode","extendingChars","isExtendingChar","ch","liftN","slice$3","Predicate","isElement$3","isCaretCandidate$1","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$3","resolveIndex","isWhiteSpace","isRange","isHiddenWhiteSpaceRange","isZeroRect","clientRect","clientRects","getClientRects","brNode","nbsp","getBrClientRect","sc","ec","so","eo","newRng","cloneRange","setEndAfter","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","beforeNode","addUniqueAndValidRect","addCharacterOffset","CaretPosition","toRange","isVisible","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","HDirection","CaretPosition$1","isText$5","isBogus$1","nodeIndex$1","normalizedParent","getChildNodes","equal","createPathItem","numTextFragments","normalizedNodeIndex","create$2","outputOffset","path","normalizedTextOffset","resolve$1","resolvePathItem","dataLen","targetOffset","findTextPosition","trimEmptyTextNode","rangeInsertNode","insertNode","insertFragment","isContentEditableFalse$2","getPoint","point","trimmedOffset","getNormalizedTextOffset","max","findIndex$2","moveEndPoint","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","bookmark","isCollapsed","end","getLocation","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","moveToBookmark","keep","GetBookmark","getBookmark","getCaretBookmark","getRangeBookmark","getUndoBookmark","isCaretNode","getParentCaretContainer","isElement$4","isText$6","removeNode","setNodeValue","trimCount","trimmedText","removeUnchanged","remove$5","removeElementAndReposition","newPosition","removeTextCaretContainer","removeTextAndReposition","caretContainerNode","getNodeValue","CaretContainerRemove","removeAndReposition","removeElementCaretContainer","browser$2","isContentEditableFalse$3","getAbsoluteClientRect","scrollX","scrollY","margin","rootRect","FakeCaret","cursorInterval","lastVisualCaret","contentEditableFalseNodes","deleteData","trimInlineCaretContainers","caretState","caret","startBlink","textNode","splitText","insertInline","getCss","reposition","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$4","isBlockLike","isCaretContainer$2","isCaretContainerBlock$1","isElement$5","isCaretCandidate$2","isForwards","direction","isBackwards","skipCaretContainers","findNode","predicateFn","getParentBlock","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","setStartBefore","setEndBefore","setStartAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$1","normalizeRange","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","to","inSameBlock","isContentEditableFalse$5","isText$7","isElement$6","isBr$4","isCaretCandidate$3","isAtomic$1","isAtomicContentEditableFalse","isEditableCaretCandidate$1","nodeAtIndex","getCaretCandidatePosition","findCaretPosition","startPos","nextNode","innerNode","rootContentEditableFalseElm","Forwards","moveForwardFromBr","CaretWalker","Backwards","isBeforeOrStart","position","isAfterOrEnd","isBeforeAfterSameElement","shouldSkipPosition","fromPosition","navigate","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","CaretFinder","firstPositionIn","lastPositionIn","addBogus","tryFindRangePosition","padEmptyCaretContainer","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","ResolveBookmark","isPathBookmark","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","o1","o2","endPos","spos","epos","resolveId","isIndexBookmark","selectNode","resolveIndex$1","isRangeBookmark","Bookmarks","setRng","isInlineBlock","isWhiteSpaceNode","normalizeStyleValue","FormatUtils","moveStart","getNonWhiteSpaceSibling","inc","ed","replaceVars","vars","isEq","str1","getTextDecoration","decoration","isBookmarkNode$2","getParents$2","isWhiteSpaceNode$1","isTextBlock$2","findLeaf","findParentContentEditable","findSpace","findWordEndPoint","lastTextNode","findSelectorEndPoint","format","curFormat","findBlockEndPoint","block","scopeRoot","findParentContainer","block_expand","ExpandRange","endPoint","leaf","excludeTrailingWhitespace","expand","each$8","RangeWalk","startPoint","siblings","exclude","collectSiblings","endNode","findEndPoint","walkBoundary","api","getOption","NodeValue","get$5","wrapName","isZeroWidth","isAnnotation","makeAnnotation","eDoc","decorate","_b","floor","getOwnPropertySymbols","propertyIsEnumerable","__rest","master","_c","_d","_e","classes","add$4","annotate","newWrappers","getDoc","finishWrapper","processElements","processElement","wrap$1","processNodes","annotateWithBookmark","undoManager","transact","initialRng","shouldApplyToTrailingSpaces","applyWordGrab","Annotator","register","changes","annotationChanged","getAll","directory","markers","nodesAlready","findAll","whiteSpaceRegExp$3","typeLookup","walk$2","Node$1","insert","selfAttrs","cloneAttrs","selfAttr","shortEnded","refNode","trimComments","findEndTagIndex","startIndex","tokenRegExp","shortEndedElements","checkBogusAttribute","regExp","attrString","SaxParser","fix_self_closing","comment","cdata","pi","doctype","endRegExp","attrList","textData","isInternalElement","removeInternalElements","fillAttrsMap","isShortEnded","validate","elementRule","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","processHtml","selfClosing","attrRegExp","fixSelfClosing","stack","filteredUrlAttrs","scriptUriRegExp","processEndTag","valid","parseAttribute","val2","val3","attrRule","isValidPrefixAttrName","uri","decodeURIComponent","unescape","allow_html_data_urls","isInvalidUri","self_closing_elements","remove_internals","bogusValue","allow_conditional_comments","findEndTag","documentFocusInHandler","SaxParser$1","trimInternal","endTagIndex","matchLength","bogusAllRegExp","tempAttrs","trimContentRegExp","trimHtml","getTempAttrs","trimExternal","TrimHtml","getBodySetting","getParam","bodyObj","Settings","contentCss","content_css","getContentFromBody","getInner","no_events","emptyRegExp","trimEmptyContents","makeMap$3","Writer","indent","indentBefore","indentAfter","htmlOutput","indent_before","indent_after","entity_encoding","element_format","getContent","Serializer","writer","handlers","8","7","10","11","sortedAttrs","handler","inner","traverse","filter$2","nodeFilters","attributeFilters","nodeMatches","attrMatches","findMatchingNodes","_doc","Adt","cases","constructors","adt","acase","keys$1","argLength","branches","branchKeys","reqKey","label","params","SimRange","Situ","situ","adt$1","domRange","exact","Selection","exactFromRange","simRange","soffset","finish","foffset","getWin","startSitu","finishSitu","getStart$1","browser$3","clamp","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","readRange","rangeCount","getRangeAt","getBookmark$2","bookmarkToNativeRng","SelectionBookmark","newBookmark","FocusManager","isEditorUIElement","registerEditorEvents","throttledStore","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","SelectionRestore","mouseUpPage","registerPageMouseUp","DOM$1","isEditorUIElement$1","isUIElement","customSelector","custom_ui_selector","registerEvents","editorManager","focusedEditor","setActive","blurredEditor","getActiveElement","activeEditor","unregisterDocumentEvents","FocusController","getFocusInElement","getCollapsedNode","normalizeSelection","normalize","caretPos","focusBody","hasElementFocus","hasFocus$1","rawBody","hasInlineFocus","iframeElement","hasIframeFocus","activateEditor","EditorFocus","skipFocus","quirks","refreshContentEditable","bookmarkRng","contentEditableHost","getContentEditableHost","focusEditor","hasUiFocus","isTreeNode","setEditorHtml","moveSelection","setContent","parser","getNodeFilters","getAttributeFilters","setContentTree","forcedRootBlockName","padd","forced_root_block_attrs","isRootContent","setContentString","Events","DOM$2","safeDestroy","remove$6","_selectionOverrides","editorUpload","getElement","save","is_removing","unbindAllNativeEvents","hasHiddenInput","orgDisplay","restoreOriginalStyles","getContainer","automatic","destroyed","_beforeUnload","theme","form","formElement","_mceOldSubmit","formEventDelegate","restoreForm","contentAreaContainer","editorContainer","bodyElement","targetElm","clearDomReferences","hasOwnProperty$2","baseMerge","merger","objects","curObject","deepMerge","merge","sectionResult","detection","mobilePlugins","defaultMobileSettings","normalizePlugins","plugins","pluginNames","trimmedPlugins","filterMobilePlugins","extractSections","hasSection","sections","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isTouchDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","section","isSectionTheme","combineSettings","defaultSettings","mobile","extendedSettings","isOnMobile","sectionSettings","getSection","getFiltered","output","getParamObject","getProp","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","EditorView","bodyElm","transposedPoint","getBoundingClientRect$1","transpose","isInsideElementContentArea","rawContainer","getContentAreaContainer","NotificationManager","notifications","getImplementation","unimplemented","getNotificationManagerImpl","open","getArgs","closeNotification","notification","otherNotification","spec","progressBar","addNotification","serviceMessage","service_message","getNotifications","WindowManager","dialogs","getWindowManagerImpl","openUrl","alert","confirm","getParams","setParams","funcBind","addDialog","dialog","fireOpenEvent","closeDialog","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","openDialog","displayNotification","notificationManager","displayError","_skinLoaded","logError","createLoadError","initError","ErrorReporter","pluginLoadError","iconsLoadError","languageLoadError","pluginInitError","uploadError","IconManager","iconPack","icons","Uploader","uploadStatus","pendingPromises","defaultHandler","blobInfo","progress","xhr","formData","XMLHttpRequest","withCredentials","credentials","upload","onprogress","loaded","total","json","path1","path2","JSON","responseText","basePath","FormData","blob","filename","send","handlerSuccess","handlerFailure","resolvePending","blobUri","uploadBlobs","blobInfos","openNotification","isUploaded","isPending","pendingUploadBlobInfo","markPending","closeNotification_1","markUploaded","removeFailed","percent","uploadBlobInfo","parseDataUri","uriParts","Conversions","rejectWithError","responseType","response","blobUriToBlob","atob","Blob","Uint8Array","reader","FileReader","onloadend","readAsDataURL","ImageScanner","blobCache","cachedPromises","images","getAllImages","img","promises","imageInfo","newPromise","base64","findFirst","cachedBlobInfo","getByUri","dataUri","imageToBlobInfo","count$1","Uuid","rnd","VDirection","EditorUpload","uploader","imageScanner","blobUriStatuses","createStatus","hasBlobUri","toBlobInfo","mime","removeByUri","revokeObjectURL","BlobCache","resultUri","getResultUri","urlFilters","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replaceUrlInUndoStack","level","fragments","uploadImages","scanForImages","imageInfos","filteredResult","uploadInfo","convertURL","replaceImageUri","uploadImagesAuto","isValidDataUriImage","imgElm","dataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","parentsUntil$1","rawParent","parents$1","Parents","isBlockElement","blockElements","isValidTarget","shouldRemoveTextNode","addRootBlocks","rootBlockNode","tempNode","wrapped","restoreSelection","rootNodeName","getStart","forcedRootBlock","hasBlockParent","nodeChanged","ForceBlocks","RangeCompare","rng1","getStartNode","getEndNode","getFirstChildren","getLastChildren","moveEndPoint$1","hasAnyRanges","sel","getSel","NodeChange","lastRng","lastPath","nativeRng","fakeRng","startElm","isSameElementPath","initialized","disable_nodechange","currentPath","getAbsolutePosition","MousePosition","bodyPosition","scrollPosition","mousePosition","calculatePosition","getBodyPosition","getScrollPosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","isContentEditableFalse$6","isContentEditableTrue$2","removeElement","isLeftMouseButtonPressed","ceElm","elmPos","screenX","screenY","maxX","scrollWidth","maxY","scrollHeight","relX","relY","ghost","clonedElm","ghostElm","overflow","padding","boxSizing","createGhost","drop","dragging","targetElement","dragElement","isValidDropTarget","targetClone_1","cloneElm","targetClone","insertContent","hideFakeCaret","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","dropHandler","dragEndHandler","rootDocument","throttledPlaceCaretAt","placeCaretAt","movement","abs","hasDraggableElement","targetPos","applyRelPos","overflowX","moveGhost","move","DragDropOverrides","realTarget","blockIeDrop","toArrayWithNode","getNodeClientRects","expected","walkUntil","isAboveFn","isBeflowFn","targetClientRect","line","findUntil","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$7","findNode$1","distanceToRectLeft","distanceToRectRight","isInside","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil$1","closestCaret","closestNodeRect","contentEditableFalseNodeRects","getFakeCaretTargets","targetNodeRects","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","RangePoint","isContentEditableTrue$3","isContentEditableFalse$8","showCaret","scrollIntoView","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","caretRange","CefFocus","renderFocusCaret","VK","BACKSPACE","DELETE","DOWN","ENTER","LEFT","RIGHT","SPACEBAR","TAB","UP","END","HOME","modifierPressed","shiftKey","ctrlKey","altKey","metaKeyPressed","isNbsp","actual","isWhiteSpace$1","isContent","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBeforeImageBlock","isAfterImageBlock","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","isContentEditableTrue$4","isContentEditableFalse$9","getContentEditableRoot","SelectionOverrides","selectedContentEditableNode","fakeCaret","realSelectionId","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","setContentEditableSelection","$realSelectionContainer","origTargetClone","removeAllRanges","addRange","removeContentEditableSelection","contentEditableRoot","hasBetterMouseTarget","targetNode","caretNode","targetBlock","caretBlock","caretWalker","newPos","hasNormalCaretPosition","moved","handleTouchSelect","keyCode","clipboardData","realSelectionElement","clearData","setData","outerText","showBlockCaretContainer","blockCaretContainer","Diff","vDown","vUp","buildScript","start1","end1","start2","end2","middle","getMiddleSnake","diag","i2","buildSnake","snake","sum","getOuterHtml","insertAt","createFragment$1","Fragments","currentFragments","action","removeAt","applyDiff","undoLevelDocument","createFragmentedLevel","beforeBookmark","createCompleteLevel","getLevelContent","getCleanLevelContent","implementation","createHTMLDocument","Levels","trimmedFragments","trimmed","level1","level2","hasEqualContent","hasEqualCleanedContent","UndoManager","isFirstTypedCharacter","locks","isUnlocked","setTyping","typing","setDirty","addNonTypingUndoLevel","endTyping","cmd","command","beforeChange","isDirty","lastLevel","modKey","inputType","isInsertTextDataNull","addShortcut","currentLevel","custom_undo_redo_levels","undo","redo","clear","hasUndo","hasRedo","ignore","extra","callback1","callback2","PaddingBr","allBrs","rawNode","getLastChildren$1","lastChildPrevSibling","isEq$3","matchesUnInheritedFormatSelector","formatList","formatter","inherit","matchParents","matchNode","matchName","matchItems","itemName","similar","onmatch","MatchFormat","matchAll","startElement","matchedFormatNames","checkedMap","canApply","defaultBlock","split$1","isEndOfContent","isStartOfContent","replaceData","isCollapsibleWhitespace","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","hasWhitespacePreserveParent","rootElement","isContent$1","isWhitespace","isNamedAnchor","isBookmark","isBogus$2","isBogusAll$1","Empty","isEmptyNode","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwards","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionForward","findCaretPositionForwardsFromElm","findCaretPosOutsideElmAfterDelete","findCaretPosition$1","setSelection","isBlock$2","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","normalizeWhitespace","prevTextOpt","nextTextOpt","prevNode","whitespaceOffset","mergeTextNodes","DeleteElement","moveCaret","afterDeletePos","parentBlock","normalizedAfterDeletePos","isInlineElement","setCursorLocation","paddPos","ZWSP$1","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","insertCaretContainerNode","formatNode","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","setup$5","disableCaretContainer","isFormatElement","postProcessHooks","filter$3","each$9","addPostProcessHook","isPre","blocks","getSelectedBlocks","pre","pre1","pre2","Hooks","each$a","ElementUtils","attribs","compareObjects","obj1","obj2","MCE_ATTR_RE","each$b","isEq$4","isChildOfInlineParent","lastIdx","wrap$2","wrapWithSiblings","find$3","removeFormat","compareNode","stylesModified","matchName$1","links","isColorFormatAndAnchor","remove_similar","valueOut","rootBlockElm","list_block","removeNode$1","RemoveFormat","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","lastContentEditable","isRemoveBookmarkNode","removeRngStyle","commonAncestorContainer","isTableCell$2","textDecoration","hasContentAfter","expandedRng","newCaretContainer","removeCaretFormat","ceFalseOverride","each$c","isElementNode","findElementSibling","mergeSiblingsNodes","tmpSibling","elementUtils","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","processUnderlineAndColor","MergeFormats","clear_child_styles","clearChildStyles","backgroundColor","merge_siblings","merge_with_parents","normalizeBlockSelectionRange","newEndPos","createRange$1","RangeNormalizer","each$d","applyFormat","setElementFormat","fmt","onformat","styleVal","applyNodeStyle","found","applyRngStyle","nodeSpecific","wrapElm","currentWrapElm","parentName","childCount","getChildElementNode","isElementNode$1","getChildCount","mergeStyles","wordcharRegex","importNode","applyCaretFormat","curSelNode","forced_root_block","ApplyFormat","updateAndFireChangeCallbacks","currentFormats","formatChangeData","formatsList","newFormats","matchedFormats","remainingFormats","filterRemainingFormats","formatChanged","registeredFormatListeners","formats","setup$6","formatChangeItems","addListeners","removeListeners","DefaultFormats","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","preview","textAlign","aligncenter","display","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","toggle","fontFamily","fontsize","fontSize","fontsize_class","blockquote","subscript","superscript","removeformat","each$e","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","parentRequired","ancestorName","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","parseSelector","Preview","previewFrag","previewElm","parentFontSize","previewStyles","previewCss","preview_styles","removeVars","parseFloat","ToggleFormat","FormatShortcuts","Formatter","unregister","FormatRegistry","formatChangeState","getCssText","DomSerializerFilters","htmlParser","addAttributeFilter","internalName","cleanup","brNode1","brNode2","DomSerializerPreProcess","hasEventListeners","shouldFireEvent","impl","oldDoc","preProcess","addFontToSpansFilter","domParser","fontSizes","face","removeAttrs","addFilters","convert_fonts_to_spans","font_size_legacy_values","addStrikeToSpanFilter","LegacyFilter","inline_styles","paddEmptyNode","padd_empty_with_br","hasOnlyChild","isEmpty$2","nonEmptyElements","whitespaceElements","isPadded","makeMap$4","each$f","explode$2","extend$2","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","list","fi","fl","isInWhiteSpacePreservedElement","invalidChildren","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","createNode","removeWhitespaceBefore","textNodeNext","textVal","cloneAndExcludeBlocks","isLineBreakNode","newNode","attrFiltersLen","isPaddedWithNbsp","invalid","newParent","currentNode","childNode","nonSplitableElements","textBlockElements","fixed","fixInvalidChildren","remove_trailing_brs","prevName","newRel","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","register$3","addTempAttr","toHtml","postProcess$1","serializeNode","DomSerializer","parserArgs","getHtmlFromNode","parseHtml","addRules","rules","setRules","Serializer$1","domSerializer","BookmarkManager","BookmarkManager$1","isContentEditableFalse$a","isContentEditableTrue$5","ControlSelection","selectedElm","selectedElmGhost","resizeHelper","resizeHandles","selectedHandle","startX","startY","selectedElmX","selectedElmY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","editableDoc","nw","ne","se","sw","isImage","contextMenuSelectImage","isEventOnImageOutsideRange","getResizeTarget","isResizable","object_resizing","resizeGhostElement","deltaX","deltaY","resizeHelperX","resizeHelperY","resize_img_proportional","endGhostResize","setSizeProp","showResizeRect","targetWidth","targetHeight","hideResizeRect","unbindResizeHandleEvents","handleElm","unSelectabe","startDrag","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","getEnd","isWithinContentEditableFalse","getContentEditableRoot$1","execCommand","delayedSelect","throttledUpdateResizeRect","composing","api$1","getOffset","aggregate","properties","isNaN","getOuter","cumulativeInclusions","Dimension","Position$1","firstDefinedOrZero","viewport","boxPosition","get$8","_DOC","scrollTo","intoView","alignToTop","scrollIntoViewIfNeeded","walkUp","navigation","view","rest","Navigation","frameElement","find$4","scroll","frames","pathTo","loc","excludeFromDescend","markerInfo","cleanupFun","absolute","get$7","createMarker","descend","elementMarker","withMarker","preserveWith","_s","applyWithMarker","withElement","endElement","viewHeight","intoWindowIfNeeded","intoWindow","intoFrame","frameViewHeight","op","viewTop","viewBot","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","ScrollIntoView","fireScrollIntoViewEvent","hasCeProperty","CaretRangeFromPoint","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","rects","moveToElementText","findClosestIeRange","parentElement","findParent","moveOutOfContentEditableFalse","EventProcessRanges","ranges","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","rows","cells","getWidth","row","findElementPos","extractRows","sx","sy","ey","newRows","SimpleTableModel","tableElm","rowspan","colspan","y2","x2","fillout","skipCellsX","tableElement","tableBody","createDomTable","cell","modelRowsToDomRows","subTable","getRanges","MultiRange","getCellsFromRanges","getCellsFromElement","getCellsFromElementOrRanges","selectedCells","rangeCells","TableCellSelection","getFullySelectedListWrappers","hasAllContentsSelected","findParentListContainer","listCont","getWrapElements","commonAnchorContainer","wrapElements","listWrappers","allWrappers","listElm","directListWrappers","emptyFragment","getFragmentFromRange","innerElm","cloneContents","getTableFragment","selectedTableCells","firstCell","lastCell","fullTableModel","sectionedTableModel","FragmentReader","getSelectionFragment","GetSelectionContent","bin","getTextContent","tmpElm","contextual","getHtmlContent","hasParent","findParent$1","hasParentWithName","isTable$3","isTableCell$3","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","NormalizeRange","normRng","SetSelectionContent","setupArgs","deleteContents","prevText","nextText","insertData","prependData","oldLength","rngSetContent","createContextualFragment","getEndpointElement","real","getStart$2","skipEmptyTextNodes","forwards","orig","deleteFromCallbackMap","newCallbacks","BreakType","isNativeIeSelection","isAttachedToDom","Selection$1","bookmarkManager","controlSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","matchedSelectors","SelectorChanged","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","anchorNode","START_TO_START","END_TO_END","isValidRange","ieRange","setBaseAndExtent","focusNode","isForward","anchorRange","focusRange","anchorOffset","focusOffset","select$1","compareEndPoints","setNode","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","isText$8","startsWithCaretContainer$1","endsWithCaretContainer$1","createZwsp","insertInline$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","BoundaryCaret","strongRtl","normalizePosition","InlineUtils","isInlineTarget","findRootInline","findInlineParents","isAtZwsp","normalizeForwards","normalizeBackwards","hasSameParentBlock","block1","block2","LazyEvaluator","fns","Location","rescope","before$4","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","after$3","isValidLocation","readLocation","getName","outside","betweenInlines","fromInline","toInline","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation","findLocationTraverse","BoundaryLocation","hasSelectionModifyApi","modify","moveRel","WordSelection","setCaretPosition","isFeatureEnabled","inline_boundaries","setSelected","renderCaretLocation","moveWord","BoundarySelection","findLocation$1","moveNextWord","movePrevWord","setupSelectedState","selectedInlines","targetInlines","toggleInlines","safeRemoveCaretContainer","inlines","renderInsideInlineCaret","customEventRootDelegates","beforeUnloadDelegate","flip","positions","walk$3","getBreakType","currentPos","nextPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastPos","lastRect","newRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","isContentEditableFalse$b","getSelectedNode$1","moveToCeFalseHorizontally","getNextPosFn","isBeforeContentEditableFalseFn","rangeIsInContainerBlock","isRangeInCaretContainerBlock","nextCaretPosition","peekCaretPosition","moveToCeFalseVertically","walkerFn","linePositions","nextLinePositions","closestNextLineRect","caretClientRect","dist1","dist2","contentEditableFalseNode","caretPositions","isBelowFn","getClientRect","positionsUntil","exitPreBlock","newBlock","getNextVisualCaretPosition","getPrevVisualCaretPosition","textBlock","createTextBlock","moveH","newRange","getHorizontalRange","moveV","down","getVerticalRange","moveToLineEndPoint","isCefPosition","getClosestCell","getYAxisValue","isTargetCorner","corners","newCorner","oldCorner","oldDist","sqrt","newDist","findClosestCorner","tds","deflate","getCorners","corner","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","moveToRange","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","isCaretAtStartOrEndOfTable","getTable","renderBlock","navigateVertically","getClosestAbovePosition","getClosestBelowPosition","moveH$1","moveV$1","isTarget","rangeBefore","insertElement","insertEmptyLine","insertBr","insertBlock$1","isAtFirstOrLastLine","isAtLastLine","isAtFirstLine","moveCaretToNewEmptyLine","rootBlock","rootBlockAttrs","getClosestTargetBlock","moveV$2","match$1","patterns","defaultPatterns","matchesEvent","MatchKeys","ArrowKeys","executeKeydownOverride","DeleteUtils","isBeforeRoot","placeCaretInEmptyBody","fromPos","firstPos","normalizedFirstPos","normalizedLastPos","normalizedFromPos","prevPos","BlockPosition","BlockBoundary","getBlockPosition","containerElm","readFromRange","fromBlockPos","toBlockPos","blockPos","blockPosition","lastPositionInBlock","skipLastBr","blockBoundary","isDifferentBlocks","parent1","parent2","hasSameParent","isEditable","BlockMergeBoundary","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","fromBlock","toBlock","insertionPoint","sidelongBlockMerge","getInsertionPoint","parentsAndSelf","findInsertionPoint","trimBr","mergeBlockInto","MergeBlocks","BlockBoundaryDelete","isRawNodeInTable","isEverythingSelected","noPrevious","noNext","isSelectionInTable","deleteRange","emptyEditor","deleteRangeMergeBlocks","BlockRangeDelete","isBr$5","findBr","parentBlocks","isBeforeBr","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","DeleteAction","moveToElement","moveToPosition","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","isDeleteFromCefDifferentBlocks","getContentEditableAction","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","deleteAction","skipMoveToActionFromInlineCefToContent","getAncestorCe","getContentEditableRoot$2","backspaceDeleteCaret","selectedNode","read$4","deleteElement$1","backspaceDeleteRange","CefDelete","deleteContentAndShowCaret","trimEmptyTextNode$1","CefBoundaryDelete","deleteCefBoundaryText","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDeleteCollapsed","rescope$1","toPosition","hasOnlyTwoOrLessPositionsLeft","BoundaryDelete","isFeatureEnabled$1","hasOnlyOneChild","deleteLastPosition","parentInlines","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteCaret","getParentInlines","InlineFormatDelete","tableCellRng","tableSelection","removeTable","emptyCells","getClosestCell$1","getClosestTable","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableCells","partialSelection","startCell","endCell","isWithinSameTable","getCellRangeFromStartTable","getTableSelectionFromRng","isRootFromElement","getCellRng","getTableSelectionFromCellRng","getCellIndex","getAction","endIndex","getSelectedCells","TableDeleteAction","deleteTableElement","deleteTableRange","getParentCaption","deleteCellRange","emptyElement","deleteCaptionRange","getParentCell","deleteCaretInsideCaption","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretCells","fromCell","toCell","deleteBetweenCells","isNearTable","deleteCaret$1","isBeforeOrAfterTable","deleteCaretCaption","TableDelete","deleteRange$1","PageBreakDelete","deleteCaret$2","parseIndentValue","number","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","indentUnit","indentValue","queryCommandState","unit","styleValue","indentElement","navigateIgnoreEmptyTextNodes","getClosestBlock","isAtBeforeAfterBlockBoundary","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","Outdent","_caret","_forward","DeleteBackspaceKeys","executeKeydownOverride$1","executeKeyupOverride","getParentBlock$2","NewLineUtils","lastNode","firstNonWhiteSpaceNodeSibling","editableRoot","hasParent$1","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","InsertLi","createNewBlock","newBlockName","tmpRng","hasFirstChild","isEmptyAnchor","emptyBlock","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot$1","setForcedBlockAttrs","InsertBlock","parentBlockName","containerBlockName","isAfterLastNodeInContainer","clonedNode","textInlineElements","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","isTableCell$4","wrapSelfAndSiblingsInDefaultBlock","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","scrollToBr","brElm","moveSelectionToBr","extraBr","insertBrAtCaret","isControlKey","hasRightSideContent","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","InsertBr","anchorLocation","readInlineAnchorLocation","ContextSelectors","newLineAction","shouldBlockNewLine$1","isBrMode","requiredState","inListBlock","inBlock","inPreBlock","shouldPutBrInPre$1","inBrContext","hasShiftKey","canInsertIntoEditableRoot","rootEditable","match$2","predicates","NewLineAction","InsertNewLine","EnterKey","handleEnterKeyEvent","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","isInMiddleOfText","getClosestBlock$1","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","isAtLineBoundary","isAtBeginningOfBody","isAtEndOfBody","needsToBeNbspRight","afterPos","needsToBeNbsp","needsToBeNbspLeft","isNbspAt","hasNbsp","normalizeNbspInMiddleOfTextNode","newText","chars","normalizeNbspMiddle","normalizeNbsps","normalizeNbspAtStart","normalizeNbspAtEnd","normalizeNbspsInEditor","insertInlineBoundarySpaceOrNbsp","checkPos","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection$1","SpaceKey","executeKeydownOverride$2","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","CaretContainerInput","browser$4","setup$d","keypressThrotter","setupIeInput","isComposing","HomeEndKeys","executeKeydownOverride$3","KeyboardOverrides","Quirks","serializeRng","getAttributeApplyFunction","isSelectionAcrossElements","isGecko","isWebKit","mceInternalDataType","setEditorCommandState","selectAll","shortcuts","disableBackspaceIntoATable","bodyHeight","contentStyles","allRng","allContentsSelected","selectionHtml","internalContent","dataTransfer","escape","setMceInternalContent","getMceInternalContent","internal","queryCommandSupported","Range","body_1","blur","template","setAttributeNode","applyAttributes","isTextBlockNode","setup$g","detail","normalizeSelection$1","setup$h","preventSummaryToggle","details","filterDetails","DOM$3","initEditor","bindPendingEventDelegates","execCallback","auto_focus","autoFocus","InitContentBody","skipWrite","contentCssText","visibility","orgVisibility","write","iframeHTML","bodyEl","hex_colors","force_hex_style_colors","createParser","annotator","_nodeChangeDispatcher","browser_spellcheck","gecko_spellcheck","spellcheck","directionality","protect","addVisual","startContent","getStyleSheetLoader","contentCSS","content_style","appendStyle","DOM$4","createIframe","ifr","customAttrs","iframe","frameBorder","allowTransparency","createIframeElement","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","iframeContainer","bodyId","bodyClass","documentBaseUrl","documentBaseURI","getURI","getIframeHtml","InitIframe","boxInfo","hidden","appendContentCssFromSettings","skinUrl","contentCssFile","isContentCssSkinName","toAbsolute","getContentCssUrls","DOM$5","initPlugin","initializedPlugins","plugin","Plugin","pluginInstance","trimLegacyPrefix","createThemeFalseResult","renderThemeFalse","renderThemeFalseIframe","Init","iconPackName","currentIcons","ui","loadIcons","svgData","icon","addIcon","initIcons","Theme","initTheme","initPlugins","renderUI","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeUi","DOM$6","hasSkipLoadPrefix","scriptLoader","getIconsUrlMetaFromUrl","getIconsUrlMetaFromName","urlMeta","themeUrl","theme_url","loadTheme","languageCode","languageUrl","url_1","loadLanguage","url_2","loadPlugins","Render","render","hidden_input","resetContent","submit_patch","triggerSave","windowManager","encoding","add_form_submit_trigger","add_unload_trigger","set_dirty","remove$4","setContentEditable","toggleReadOnly","removeFakeSelection","switchOnContentEditableTrue","restoreFakeSelection","isReadOnly","registerFilters","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","activate","deactivate","editorReadOnly","create$4","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","setMode","registerMode","listItems$1","isListItemPadded","isPadding","trimListItems","getParentLi","findLastOf","newCaretPos","insertBefore$1","findFirstIn","InsertList","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","insertAfter$1","beforeRng","afterRng","getSplit","insertMiddle","isTableCell$5","selectionSetContent","isAfterNbsp","insertHtmlAtCaret","bookmarkHtml","hasSiblingText","trimOrPadLeftRight","paste","caretElement","canHaveChildren","trimNbspAfterDeleteAndPadValue","markFragmentElements","validInsertion","root_1","elementUtils_1","testNode","reduceInlineTextElements","parentEditableFalseElm","nextRng","getContentEditableFalseParent","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","InsertContent","processValue","nativeCommand","DeleteCommands","getFontProp","getProperty","getSpecifiedFontProp","getComputedFontProp","FontInfo","getFontSize","getFontFamily","toPt","precision","factor","pow","round$1","findFirstCaretElement","getCaretElement","isRangeAtStartOfNode","fromFontSizeNumber","fontSizeNumber","fontClasses","normalizeFontNames","font","fonts","each$g","map$3","inArray$2","EditorCommands","commands","setupCommands","customCommand","skip_focus","queryCommandValue","addCommands","commandList","addCommand","addQueryStateHandler","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","toggleFormat","storeSelection","selectionBookmark","queryCommandEnabled","align","listParent","fontNameAction","fontSizeAction","hasVisual","anchor","editingHost","selectNodeContents","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","beforeFire","wrappedCallback","bindingName","hi","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","bubble","dispatcherArgs","DOM$7","getEventTarget","eventName","event_root","eventRoot","fireEvent","isListening","preventReadOnlyEvents","bindEventDelegate","eventRootElm","delegate","delegates","editors","EditorObservable","_pendingNativeEvents","each$h","explode$3","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","shortcut","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","createShortcut","parseShortcut","charCode","access","alt","ctrl","meta","each$i","trim$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","base_uri","source","isProtocolRelative","protocol","toAbsPath","urlMatch","part","userInfo","port","uriComponents","getDocumentBaseUrl","pathname","setPath","pathMatch","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","isSameOrigin","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","bridge","buttons","menuItems","popups","contextMenus","contextToolbars","sidebars","addButton","addToggleButton","addMenuButton","addSplitButton","addMenuItem","addNestedMenuItem","addToggleMenuItem","addAutocompleter","addContextMenu","addContextToolbar","addContextForm","addSidebar","create$5","DOM$8","extend$3","each$j","resolve$3","ie$2","Editor","loadedCSS","isNotDirty","documentBaseURL","document_base_url","convert_urls","relative_urls","remove_script_host","visual","getDefaultSettings","getEditorSettings","base_url","_setBaseUrl","baseURI","language_load","editorCommands","cache_suffix","modeInstance","callbackLookup","setProgressState","initialContent","oldState","urlconverter_callback","visual_table_class","visual_anchor_class","_scanForImages","DOM$9","explode$4","each$k","extend$4","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","preInit","tinymce","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","invalidInlineTargets","createId","provideResults","initEditors","targets","initCount","createEditor","types","forms","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","RangeUtils","normalizedRng","compareRanges","getCaretRangeFromPoint","tasks","resultFns","extendClass","initializing","RangeUtils$1","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","complete","completer","awaiter","round$2","relativePosition","targetW","targetH","create$7","Rect","inflate","findBestRelativePosition","constrainRect","rels","intersect","cropRect","x1","y1","clampRect","fixedSize","underflowX1","underflowY1","overflowX2","overflowY2","cx2","cy2","fromClientRect","each$l","extend$5","Class","member","_super","mixins","mixin","Mixins","dummy","createMethod","name_1","Methods","Properties","fieldName","Statics","Defaults","localStorage","min$1","max$1","round$3","JSONUtils","stringify","hexCode","JSONP","XHR","ready","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","extend$6","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","storage","getItem","setItem","removeItem","configurable","publicApi","geom","util","LocalStorage","Color","hue","saturation","brightness","side","chroma","hsvToRgb","toRgb","toHsv","minRGB","maxRGB","rgb2hsv","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders","toolbar","menubar","paste_as_text","branding","target_list","image_class_list","image_dimensions","block_formats","origin","draggable_modal","tooltip","onAction","dataset","medias","statusbar","die","global$1","SimpleResultType","isArrayOf","chunk","map$1","mapToArray","strict","defaultedThunk","asOption","asDefaultedOptionThunk","mergeWithThunk","defaulted","fallback","mergeWith","readOpt","readOptFrom","exclude$1","bothErrors","firstError","secondError","bothValues","readOpt$1","readOr$1","readOr","readOptFrom$1","wrapAll$1","keyvalues","kv","consolidate","objs","errors","partitions","partition$1","mergeValues","hasKey$1","hasKey","stype","serror","svalue","Value","SimpleResult","mergeErrors$1","ResultCombine","mergeValues$1","typeAdt","setOf","arrOf","objOf","itemOf","choiceOf","fieldAdt","field","formatObj","getErrorInfo","strictAccess","missingStrict","fallbackAccess","fallbackThunk","cExtractOne","strength","okey","presence","bundle","av","extract","bundleAsOption","optValue","outcome","ov","optionAccess","optionDefaultedAccess","baseThunk","instantiator","value$1","validator","custom","toDsl","getSetKeys","objOfOnly","fieldNames","unsupported","unsupportedFields","cExtract","validatedKeys","validateKeys","validKeys","vk","anyValue","arrOfObj","chooseFrom","branch","missingBranch","vp","choose","missingKey","chosen","_anyValue","valueThunkOf","getDelegate","valueOf","setOf$1","asRaw","errs","extraction","errInfo","formatError","asRawOrDie","es","chooseProcessor","choose$1","anyValue$1","typedValue","expectedType","actualType","string","boolean","functionProcessor","isPostMessageable","every","iter","callbackFn","postMessageable","validateEnum","strict$1","strictOf","strictNumber","strictString","strictStringEnum","strictFunction","strictObjOf","objSchema","strictArrayOfObj","objFields","strictArrayOf","optionOf","optionNumber","optionString","optionFunction","optionObjOf","defaulted$1","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedObjOf","state$1","isSource","component","simulatedEvent","nu$4","fuse","can","all$1","abort","any","touchstart","touchmove","touchend","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitionend","selectstart","alloy","tap","postBlur","postPaste","receive","execute","focusItem","tapOrClick","longpress","sandboxClose","typeaheadCancel","systemInit","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight","dehighlight","dispatchWith","emitWith","emitExecute","dispatch","getSystem","triggerEvent","dispatchEvent","EventConfiguration","child_1","transform","derive","configs","prevent","runActionExtra","runOnSourceName","redirectToPart","partName","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","cut","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute","runOnName","sort$1","validateStrArr","MixedBag","optional","everything","sorted","checkDupes","req","reqMessage","unsuppMessage","shallow$1","getHtml","originator","isRecursive","DefaultEvents","generate$1","idAttr","prefix$1","idAttr$1","writeOnly","writable","read$1","generate$2","NoContextApi","getComp","debugInfo","triggerFocus","triggerEscape","build","addToWorld","removeFromWorld","addToGui","removeFromGui","broadcast","broadcastOn","broadcastEvent","isConnected","singleton","cleanParameters","parameters","endsWith","markAsExtraApi","extraName","openBracketIndex","toFunctionAnnotation","premadeTag","premade","comp","makeApi","apiFunction","markAsSketchApi","getApis","NoState","nu$5","readState","byInnerKey","indexKey","chain","nu$6","curryArgs","descHandler","extraArgs","purpose","cHandler","getCurried","behaviourTuple","groupByEvents","behaviours","behaviourEvents","behaviour","nameToHandlers","assemble","rawHandler","fuse$1","tuples","eventOrder","order","keyName","sliced","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","missingOrderError","combineGroups","byEventName","assembled","uncurried","toEvents","read$2","internalSet","setProperty","internalRemove","set$2","setAll$1","get$4","isValidValue","reflow","set$3","generateFrom$1","validated","optBlobThunk","config","generateFrom","generate$3","getBehaviours$1","getDomDefinition","bList","bData","defnA","mod","definition","domChildren","components","infoModification","domModification","toModification","baseModification","modification","baseMod","modsByBehaviour","exhibit","byAspect","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine","getEvents","baseEvents","combine$1","getMe","systemApi","toInfo","bBlob","getBehaviours","subject","innerHtml","renderToDom","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","buildFromSpec","userSpec","specEvents","build$1","buildSubcomponents","completeSpec","external","extSpec","uids","getPremade","userSpecWithUid","prebuilt","premade$1","descendant$1","closest$3","manager","ariaId","unlink","isAriaPartOf","queryElem","isPartOf","cat","findMap","eventConfig","processEvent","initialTarget","NORMAL","noLogger","LOGGING","logger","sequence","logEventCut","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","finishTime","makeEventLogger","STOP","monitorEvent","menuFields","itemFields","itemSchema","_initSize","tieredMenuMarkers","onPresenceHandler","lines","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","snapshot","initSize","loadEvent","bConfig","bState","wrapApi","bName","apiName","markAsBehaviourApi","revokeBehaviour","doCreate","configSchema","schemaSchema","getConfig","wrappedApis","apiF","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$1","modeSchema","createModes$1","modes","createModes","branchKey","ActiveReceiving","receiveConfig","channelMap","channels","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","Receiving","ActivePosition","posConfig","useFixed","get$6","getOuter$1","getOuter$2","paths","pointed","bounds","xy","allAlignments","nu$7","yoffset","getClasses","xDelta","yDelta","alignmentsOn","alignmentsOff","classesOn","classesOff","southeast","southwest","south","northeast","northwest","north","east","west","innerNorthwest","innerNortheast","innerNorth","innerSouthwest","innerSoutheast","innerSouth","innerWest","innerEast","nu$8","adt$2","eastX","middleX","westX","northY","southY","centreY","southeast$1","bubbles","southwest$1","northeast$1","northwest$1","north$1","south$1","east$1","eastEdgeX","west$1","westEdgeX","all$2","allRtl","decision","adt$3","positionWithDirection","posName","decisionX","decisionY","decisionRight","decisionBottom","cata","toBox","viewport$1","getBounds","onDirection","isLtr","getDirection","schema$1","get$9","defaultLtr","defaultRtl","ltr","layouts","ls","onLtr","rtl","onRtl","HotspotAnchor","anchorInfo","hotspot","anchorBox","overrides","placer","MakeshiftAnchor","adt$4","adt$5","relativeToNative","setFinish","exactToNative","toRect","adt$6","fromRange","diagnose","rev","doDiagnose","inRect","api$2","get$a","locateOffset","textnode","rangeForOffset","rectForOffset","curDeltaX","searchForPoint","locateNode","locate","searchInChildren","elementsWithCursorPosition","isCursorPosition","last$1","descendantRtl","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","searchTextNodes","boundedX","boundedY","locate$1","after$2","makeRange","same","doGetExact","firstRng","getFirstRect$1","getFirstRect","asLtrRange","adt$7","screen","toFixed","points","sumAsAbsolute","absolute$1","getRootPoint","outerScroll","frame","frameOwner","compOwner","ContentAnchorCommon","newLeft","newTop","newWidth","newHeight","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","showAbove","point$1","descendOnce$1","descendOnce","getAnchorSelection","getExact","modStart","modFinish","SelectionAnchor","selectionBox","rawRect","NodeAnchor","nodeBox","eastX$1","westX$1","northY$1","southY$1","southeast$2","southwest$2","northeast$2","northwest$2","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","box$1","adt$8","fit","nofit","attempts","elementBox","panelWidth","panelHeight","attemptBestFit","layout","deltaW","deltaH","candidateX","candidateY","bubbleLeft","bubbleTop","boundsX","boundsY","boundsWidth","boundsHeight","newX","newY","xInBounds","yInBounds","originInBounds","sizeInBounds","minX","limitX","limitY","upAvailable","downAvailable","maxHeight","cataVertical","candidateYforTest","attempt","newReposition","newDeltaW","newDeltaH","bestNext","options","preference","addPx","num","setOptions","setMaxHeight","absMax","setMax","anchored","available","expandable","reparteeOptions","go","classInfo","setClasses","maxHeightFunction","setHeight","place","anchoring","placee","overrideOptions","dephault","defaultOr","positionWithin","posState","boxElement","boundsBox","positionWithinBounds","anchorage","oldVisibility","getRelativeOrigin","placement","doPlace","vis","PositionApis","getMode","pConfig","pState","PositionSchema","Positioning","fireDetaching","fireAttaching","attach","attachWith","insertion","doDetach","detach","parent$1","detachChildren","attachSystem","guiSystem","attachSystemInternal","inserter","detachSystem","sandbox","sConfig","sState","newState","getAttachPoint","built","rebuild","onOpen","onClose","isOpen","cloak","sink","cssKey","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","getState","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","Sandboxing","dismissPopups","mouseReleased","schema$2","receivingConfig","rawSpec","receiving","isExtraPart","fireEventInstead","fe","field$1","forbidden","get$b","dump","augment","SketchBehaviours","adt$9","single","multiple","scan","compSpec","placeholders","uiType","newSpec","subPlaceholder","substitute","valueThunk","childSpecs","substituted","valuesThunk","preprocess","preprocessor","substitutePlaces","ph","replacements","used","substituteAll","placeholder","adt$a","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","name$1","convert","adtConstructor","partSchema","external$1","PartType","asCommon","combine$2","partSpec","partValidated","generate$4","np","doGenerateOne","pname","generateOne","schemas","substitutes","internals","externals","factory","_partSpec","_partValidated","units","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","asRawOrDie$1","partSchemas","partUidsSchemas","baseS","composite","specWithUid","supplyUid","partUidsSchema","FocusInsideModes","singleSchema","compositeSchema","single$2","rawConfig","extraApis","partFields","configFields","single$1","composite$1","inside","ComposeApis","getCurrent","composeConfig","composeState","ComposeSchema","Composing","cycleBy","cap","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight$1","isHighlighted","onHighlight","queryTarget","getByIndex","itemClass","getFirst","getLast","getDelta","dest","getCandidates","HighlightApis","dehighlightAll","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","highlightBy","getHighlighted","getPrevious","HighlightSchema","Highlighting","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","isControl","isNotShift","classification","focus$1","search$1","reportFocusShifting","prevFocus","newFocus","focusee","highlights","initialState","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$3","cyclicField","tabbingConfig","visibilitySelector","tabstops","visibles","firstTabstop","findInitial","focusManager","goFromTabstop","stopIndex","cycle","useTabstopAt","isTabstop","cyclic","findCurrent","tabstop","tabbingState","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","focused","doDefaultExecute","stopEventForFirefox","schema$3","execute$1","executeConfig","ExecutionType","executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","useH","use","west$2","moveLeft","moveRight","east$2","useV","north$2","south$2","indexInfo","locateVisible","locate$2","withGrid","numCols","address","newIndex","column","cycleHorizontal","oldRow","oldColumn","colsInRow","newColumn","cycleVertical","newRow","newCol","schema$4","gridConfig","gridState","doMove","identified","handleTab","captureTab","moveNorth","moveSouth","getKeydownRules$1","getKeyupRules$1","FlatgridType","horizontal","tryCycle","schema$5","execute$3","flowConfig","findCurrent$1","focusIn$1","getInitial","moveLeft$1","moveRight$1","doMove$1","executeOnMove","doEscape$1","_flowState","getKeyupRules$2","FlowType","_component","_se","westMovers","allowVertical","eastMovers","matrix","rowIndex","columnIndex","cycleHorizontal$1","startCol","deltaCol","newColIndex","cycleVertical$1","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$6","focusIn$2","matrixConfig","previousSelector","doMove$2","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","toMatrix","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$3","getKeyupRules$3","MatrixType","schema$7","execute$5","menuConfig","focusIn$3","moveUp$1","moveDown$1","getKeydownRules$4","moveOnTab","getKeyupRules$4","MenuType","schema$8","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","flatgrid$1","execution","menu","Keying","keyConfig","keyState","sendFocusIn","replaceConfig","childSpec","remove$7","replaceState","removee","replaceAt","replaceeIndex","replacer","replacee","appendAt","Replacing","appendee","prependee","replaceBy","replaceePred","ownerDoc","refocus","oldFocus","onLoad","repConfig","repState","onUnload","RepresentApis","setValue","getValue","ActiveRepresenting","resetOnDom","memory","isNotSet","dataByValue","dataByText","itemString","update","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","manual","setValue$1","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","eventHandlers","events$4","focus$2","focusConfig","onFocus","FocusApis","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","toggleState","ariaInfo","aria","updateClass","set$6","on$1","onLoad$4","ToggleApis","isOn","ActiveToggle","executor","toggleOnExecute","updateExpanded","ToggleSchema","pressed","syncWithExpanded","expanded","Toggling","onHover","hover","focus$3","schema$9","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$a","schema$b","components$1","focusWidget","widget","onHorizontalArrow","autofocus","setSource","widgetBehaviours","itemSchema$1","separator","parts$1","itemInfo","builder","fakeFocus","schema$c","grid","movementInfo","rowSelector","focus$4","Menu","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","generate$5","menus","expansions","menuPaths","_triggerItem","LayeredState","primary","lookupMenu","menuValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","itemValue","refresh","otherMenus","menuValues","getPrimary","primaryName","prep","getMenus","isClear","collapseItem","tieredMenu","collapseMenu","tmenu","highlightPrimary","rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","componentMap","makeSketch","nbMenu","buildMenus","toDirectory","getItemValue","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","currentMenu","currentItem","tmenuBehaviours","keyInfo","selectedMenu","tieredData","singleData","InlineView","showWithin","thing","lazySink","onShow","showAt","showWithinBounds","showMenuAt","menuSpec","menuSandbox","makeMenu","onHide","inlineBehaviours","getRelated","isPartOfRelated","fireDismissalEventInstead","events$7","optAction","onClick","pointerEvents","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","record","isSketchSpec","anyInSystem","getOpt","asSpec","defaultIcon","get$c","getFirst$1","notificationIconMap","warning","Notification","memBannerText","translationProvider","renderPercentBar","renderPercentText","memBannerProgress","updateProgress","updateText","text$1","banner","iconChoices","iconProvider","global$2","NotificationManagerImpl","extras","uiMothership","backstage","closeCallback","notificationWrapper","shared","providers","getSink","moveTo","anchors","nuText","getEl","prePositionNotifications","firstItem","getEditorContainer","positionNotifications","ItemResponse","last$2","global$3","outcome$1","aborted","phase","kontinue","repeat","recent","terminate","repeatLeft","detect$4","whiteSpace","findStart","initRange","minChars","optOffset","char","triggerChar","AutocompleterEditorEvents","onKeypress","redirectKeyToItem","getView","isActive","cancelIfNecessary","isMenuOpen","global$4","point$2","toLast","toLeaf","getDatabase","database","triggerChars","getTriggerContext","lookupWithContext","fetchOptions","startText","autocompleters","lookupByChar","autocompleter","isStartOfWord","lookupData","ac","fetch","maxResults","matchText","columns","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","popup","createAutocompleter","stringArray","datasetValues","dv","commonMenuItemFields","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","choiceMenuItemSchema","fancyMenuItemSchema","detectSize","selectorClass","columnLength","thisTop","cTop","ceil","namedEvents","SimpleBehaviours","TooltippingSchema","TooltippingState","clearTimer","getTooltip","isShowing","setTooltip","clearTooltip","resetTimer","delay","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","tState","TooltippingApis","setComponents","specs","Tooltipping","tooltipConfig","tooltipDom","tooltipComponents","fromHtml$2","getAttrs","global$5","navClass","selectableClass","presetClasses","normal","textClass","activeClass","classForPreset","presets","global$6","ConvertShortcut","updated","segment","renderIcon","iconHtml","renderText","renderStyledText","styleAttr","renderShortcut","renderCheckmark","renderNormalItemStructure","renderIcons","textRender","rtlClass","leftIcon","checkMark","domTitle","ariaLabel","optComponents","htmlContent","renderHtml","shortcutContent","rtlIcon","rtlTransform","renderItemStructure","providersBackstage","fallbackIcon","iconName","needRtlClass","iconContent","itemText","iconSvg","providerBackstage","renderColorStructure","nativeDisabled","onLoad$5","disableConfig","disableState","disable","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","disableClass","onDisabled","enable","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","ActiveDisable","DisableSchema","Disabling","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onSetup","onControlDetached","ItemResponse$1","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","structure","buildData","global$7","tooltipBehaviour","sharedBackstage","tooltipWorker","_tooltip","replaceText","encoded","encodeText","escapedMatchRegex","escapeRegExp","parts$2","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","makeComponents","cellRow","makeLabelText","hexColour","hexString","shorthandRegex","longformRegex","isHexString","extractValues","longForm","getLongForm","splitForm","fromRgba","rgbaColour","red","green","blue","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","fromHex","fromStringValues","rgba","redColour","global$8","choiceItem","defaultColors","colorCache","storageString","localstorage","ColorCache","mapColors","colorMap","colors","canvas","ctx","byteAsHex","colorByte","alphaByte","asHexColor","clearRect","fillStyle","fillRect","getImageData","getColorMap","defaultCols","unmapped","getCurrentColor","calcCols","getColorCols$1","applyColor","onChoice","colorPickerDialog","colorOpt","getMenuColors","hasCustom","getAdditionalColors","getFetch","setIconColor","splitButtonApi","newColor","pathId","setIconFill","setIconStroke","registerTextColorButton","lastColor","currentRgb","rgbaString","rgbMatch","rgbaMatch","fromString","currentHex","onItemAction","registerTextColorMenuItem","getSubmenuItems","fancytype","initialData","colorpicker","getOnSubmit","onSubmit","onCancel","ColorSwatch","registerCommands","lastForeColor","lastBackColor","getColors","getColorCols","chunk$1","rowDom","chunks","forCollection","initItems","hasIcons","isSeparator","allSplits","currentSplit","preprocessCollection","forMenu","markers$1","menuClasses","dom$1","hasIcon","handleError","createPartialMenuWithAlloyItems","forSwatch","forToolbar","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","createChoiceMenuItem","useText","isSelected","setDisabled","_api","renderChoiceItem","deriveMenuMovement","menuMarkers","FocusMode","fancyMenuItems","inserttable","sizeLabelId","makeCells","memLabel","selectedRow","selectedColumn","selectCells","colorswatch","colorinput","hasCustomColors","widgetSpec","autocomplete","nested","toggle$1","fancy","hasIcon$1","menuHasIcons$1","createMenuItemFromBridge","menuHasIcons","createMenuItem","createNestedMenuItem","createToggleMenuItem","createSeparatorMenuItem","createFancyMenuItem","createAutocompleteItems","createSeparatorItem","createAutocompleterItem","createPartialMenu","createItem","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","hideIfNecessary","lastElement","getAutocompleters","ld","focusMode","ContentFocus","createMenuFrom","doLookup","lookupInfo","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","rawEvent","kill","mkEvent","binder","useCapture","filter$1","bind$3","bind$2","capture$1","closest$4","DelayedFunction","schedule","getTouch","touches","monitor","startData","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","settingsSchema","rawSettings","tapEvent","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","stopBackspace","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive$2","rawTarget","getTarget","adt$b","stopped","resume","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","fromExternal","triggerOnUntilStopped","EventRegistry","registerId","unregisterId","handlersById","filterByType","broadcastHandler","isAboveRoot","readType","findHandler","Registry","readOrTag","tagId","conflict","failOnDuplicate","ToolbarDrawer","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","global$9","getMinWidthSetting","min_width","getMinHeightSetting","min_height","isMenubarEnabled","isToolbarEnabled","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbarKeys","toolbars","toolbarArray","getToolbarDrawer","fixedContainerElement","fixedContainerSelector","useFixedContainer","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","schema$d","parts$3","excludeFactory","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","Coupling","coupled","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","HighlightOnOpen","nu$a","make$3","partType","getAnchor","getHotspot","getAnchorOverrides","open$1","mapFetch","onOpenSync","highlightOnOpen","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","close$1","_externals","_onOpenSync","_highlightOnOpen","togglePopup","matchWidth","useMinWidth","buttonWidth","set$4","sinkDetail","internalSink","lazySinkFn","makeSandbox","ariaOwner","sandboxClasses","sandboxBehaviours","setValueFromItem","model","itemData","setCursorAtEnd","setSelectionOn","setSelectionRange","attemptSelectOver","selectsOver","currentValue","inputDisplay_1","getDisplayText","setSelectionToEnd","schema$e","focusBehaviours","selectOnFocus","inputBehaviours","dom$2","inputAttributes","inputStyles","inputClasses","itemExecute","sandboxFields","schema$f","parts$4","previewing","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","_sandbox","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormField","renderFormFieldDomWith","renderLabel","separator$1","unwrapReferences","realItems","isMenuItemReference","getFromItem","isExpandingMenuItem","submenuItems","getFromExpandingItem","itemWithValue","generateValueIfRequired","newData","build$2","mainMenu","submenus","Input","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","validHtml","onValid","markInvalid","invalidState","onInvalid","validatorInfo","run$1","onValidate","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","schema$g","parts$5","Dropdown","_spec","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","ActiveUnselecting","unselectConfig","unselectable","Unselecting","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","valueOpt","colorButton","hsvColour","fieldsUpdate","sliderUpdate","paletteUpdate","platform","labelPart","edgePart","edgeActions","touchEvents","mouseEvents","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","SliderParts","getValueFromEvent","spectrum","isTouch$1","sliderChangeEvent","getEventSource","touchEvent","mouseEvent","minY","min1X","min1Y","max1X","max1Y","range$2","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","xValue","yValue","xyValue","fireSliderChange","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","initValue","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$1","sliderValue","findValueOfOffset","handleMovement","moveBy","findPositionOfValue","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","HorizontalModel","sliderVal","setToMin","setToMax","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$2","sliderValue$1","findValueOfOffset$1","handleMovement$1","moveBy$1","findPositionOfValue$1","findOffsetOfValue$2","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange$3","sliderValue$2","handleMovement$2","isVerticalMovement","moveBy$2","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","isTouch$2","SliderSchema","isTouch$3","Slider","getThumb","modelDetail","changeValue","onChange","_simulatedEvent","onDragStart","onDragEnd","uiEventsArr","sliderBehaviours","wasDown","onChoose","getInitialValue","onInit","resetToMin","resetToMax","HueSlider","getClass","_thumb","schema$h","getPartName","make$5","formBehaviours","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","RgbForm","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","translatePrefix","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","setValueRgb","onInvalidInput","onValidRgb","hexField","copyRgbToHex","onValidInput","isHexInputEvent","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","SaturationBrightnessPalette","_translate","spectrumPart","thumbPart","setColour","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_slider","setRgba","_apis","setSliderColour","ColourPicker","updates","rgbForm","onInvalidHex","sbPalette","paletteRgba","memPalette","memRgb","updatePalette","palette","updateFields","runUpdates","hsvColour$1","fromRgb","newHsvColour","nuHex","calcHex","sliderUpdates","ComposingConfigs","mem","english","getEnglishText","global$a","processors","withComp","optInitialValue","setter","RepresentingConfigs","rawProcessors","other","postprocess","renderDropZone","actions","onDrop","transferEvent","handleFiles","onSelect","re","filterByExtension","memInput","accept","beforeObject","afterObject","craftWithClasses","outline","triggerTab","NavigableObject","targetComp","platformNeedsSandboxing","renderIFrame","isSandbox","sandboxed","sourcing","cachedValue","frameComponent","getDynamicSource","resize","tCanvas","get2dContext","drawImage","naturalWidth","getHeight","naturalHeight","Promise$1","dataUriToBlob","mimetype","byteCharacters","bytesLength","slicesCount","byteArrays","sliceIndex","begin","bytes","dataUriToBlobSync","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","blobToCanvas","blobUrl","Image","blobToImage","revokeImageUrl","create$6","getCanvas","initialType","toAdjustedDataURL","canvasToDataURL","getType","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","blobToDataUri","fromCanvas","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","colorFilter","ir","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","applyColorFilter","convoluteFilter","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","applyConvoluteFilter","complexAdjustableColorFilter","matrixAdjustFn","adjust","kernel","colorFn","invert","basicColorFilter","contrast","colorize","adjustR","adjustG","adjustB","adjustColors","sharpen","gamma","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","rotate","angle","translateX","translateY","PI","applyRotate","axis","applyFlip","crop","applyCrop","invert$1","sharpen$1","gamma$1","brightness$1","contrast$1","flip$1","resize$2","newCanvas","resize$1","rotate$1","renderIcon$1","renderIconFromPack","iconsProvider","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayText","displayIcon","getMenuButtonApi","renderMenuButton","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","buttonType","renderFooterButton","isMenuFooterButtonSpec","isNormalFooterButtonSpec","schema$i","coupledPart","selfName","otherName","lock","onLockedChange","parts$6","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","supported","noSizeConversion","makeRatioConverter","currentFieldText","otherFieldText","cSize","oSize","ratioSizeConversion","renderSizeInput","converter","ratioEvent","pLock","formGroup","getFieldPart","isField1","widthField","heightField","newSize","unitDec","numText","formatSize","optCurrent","optOther","value1","value2","back","swap","tempTransform","transformApply","saveState","disable$1","enable$1","external$2","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","createSpacer","createApplyButton","makeCropTransform","crop$1","cropPanelComponents","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","makeResizeTransform","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","colorize$1","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","global$b","global$c","global$d","global$e","global$f","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","drag","handleElement","cursor","docSize","getDocumentSize","runtimeStyle","zIndex","renderImagePanel","initialUrl","memBg","zoomState","rectState","viewRectState","repaintImg","panelW","panelH","bg","cRect","setRect","setClampRect","setViewPortRect","updateSrc","aImg","lastViewRect","viewRect","zoomFit","currentRect","viewPortRect","handles","dragHelpers","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","setInnerRect","repaint","updateElementRect","xMul","yMul","relativeRect","blocker","activeHandle","moveAndBlock","toggleVisibility","getInnerRect","helper","CropRect","currentZoom","newZoom","setButtonEnabled","Delimiter","makeState","blobState","tempState","undoStack","canUndo","canRedo","UndoStack","setBlobState","createState","destroyState","destroyTempState","addBlobState","getBlobState","getTempState","updateTempState","newTempState","addTempState","applyTempState","postApply","currentState","getHistoryStates","undoEnabled","redoEnabled","renderImageTools","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","unblock","editPanel","applyButton","blobManipulate","blobToImageResult","oImg","manipulate","currentUrl","memUndo","memRedo","renderSideBar","tempManipulate","manipulateApply","disableUndoRedo","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","classname","extraClasses2","flex","maximized","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","nu$c","worker","FutureResult","separator$2","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","getLinkInformation","history","historyTargets","getHistory","errorId","renderCollection","runOnItem","collectionEvents","tgt","currentActive","htmlLines","mapItemName","make$6","factories","bar","interpreter","renderBar","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","listbox","renderListbox","backstageShared","renderLabel$2","iframeSpec","makeIframe","renderAutocomplete","renderDialogButton","repBehaviour","toggleCheckboxHandler","makeIcon","memIcons","renderCheckbox","colourPickerFactory","memPicker","picker","dropzone","renderGrid","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","updateHistory","urlEntry","addToHistory","filetype","memUrlBox","getValidationHandler","memInvalidIcon","invalidComp","_menu","_entry","_item","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","urlData","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","ea","cvalue","htmlpanel","imagetools","renderTh","renderTd","renderTr","renderTable","renderPanel","noFormParts","_name","interpretInForm","oldBackstage","newBackstage","interpretParts","westEdgeX$1","middleX$1","eastEdgeX$1","northY$2","southY$2","southeast$3","southwest$3","northeast$3","northwest$3","north$3","south$3","bubbleAlignments","valignCentre","alignCentre","alignLeft","alignRight","getToolbarAnchor","lazyAnchorbar","useFixedToolbarContainer","getBannerAnchor","getToolbarOverflowAnchor","lazyMoreButton","getCursorAnchor","getNodeAnchor","Anchors","toolbarOverflow","hasCustomColors$1","getColors$1","getColorCols$2","ColorInputBackstage","defaultStyleFormats","mapFormats","userFormats","customFormats","isInlineFormat","isBlockFormat","isSelectorFormat","formatName","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","doEnrich","newItems_1","submenuSpec","enrichMenu","getStyleItems","enrichSupported","customSpec","newItem","enrichCustom","init$7","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","getElementText","isValidAnchor","isAnchor","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","getTargetElements","hasTitle","LinkTargets","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","find$1","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","getTextSetting","getPicker","file_picker_callback","getPickerSetting","pickerTypes","optFileTypes","file_picker_types","optLegacyTypes","file_browser_callback_types","optTypes","_picker","getPickerTypes","UrlInputBackstage","typeahead_urls","validatorHandler","filepicker_validator_handler","entry","isDraggableModal$1","isDraggableModal","DialogBackstage","init$8","interpretWithoutForm","styleselect","schema$j","parts$7","Toolbar","getGroupContainer","shell","toolbarBehaviours","setGroups","output$1","apportion","parray","within","withinWidth","toUnit","partition$3","overflower","divide","tryFit","fits","fitLast","fitAll","setStoredGroups","storedGroups","bGroups","overflowButton","overflowGroup","focusedComp","overf","focusedElm","findFocusedComp","builtGroups","overflows","schema$k","parts$8","ToolbarGroup","tgroupBehaviours","itemSelector","schema$l","splitToolbarBehaviours","coupling","_button","toggleToolbar","doSetGroups","getMoreButton","getOverflow","schema$m","parts$9","overflowToggledClass","isOpen$1","over","refresh$1","SplitFloatingToolbar","spec$1","makeSandbox$1","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isTransitioning","toggleGrow","ActiveSliding","propertyName","onGrown","SlidingSchema","Sliding","schema$n","parts$a","toggleToolbar$1","refresh$3","isOpen$2","SplitSlidingToolbar","ReadOnlyDataSchema","toggleToReadOnly","uiComponents","outerContainer","mothership","broadcastReadonly","forEach","setupReadonlyModeSwitch","createReadonlyReceivingForOverflow","setDisabledAll","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","renderSlidingMoreToolbar","renderToolbar","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","ReflectingApis","reflectState","ActiveReflecting","reflectingConfig","reflectingState","updateState","renderComponents","newComponents","channel","rawData","ReflectingState","optS","ReflectingSchema","Reflecting","schema$o","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$b","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","rtlIcon$1","rtlTransform$1","renderCommonStructure","getIconName","needsRtlClass","renderCommonToolbarButton","specialisation","itemApi","buttonApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","runOnExecute$1","formApi","getFormApi","generateOne$1","bridged","renderContextToggleButton","renderContextButton","ContextForm","findPrimary","mementos","asSpecs","compInSystem","generate$7","forwardSlideEvent","backSlideEvent","changeSlideEvent","getHorizontalBounds","contentAreaBox","contentBoxWidth","maxViewportWidth","matchTargetWith","toolbarApi","ToolbarLookup","scopes","inNodeScope","inEditorScope","transformed","ancestor$2","ToolbarScopes","formNavigators","lookupTable","registerForm","contextForm","createContextForm","launch","registerToolbar","createContextToolbar","contextToolbar","onSetupFormatToggle","unbindCell","onActionToggleFormat","rawItem","generateSelectItems","generateItem","si","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","setInitialValue","getComponent","nodeChangeHandler","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","getSpec","updateSelectMenuIcon","alignment","systemStackFonts","splitFonts","getSpec$1","getMatchingValue","getFirstFont","matchOpt","isSystemFontStack","updateSelectMenuText","legacyFontSizes","getSpec$2","px","_loop_1","pt","legacy","Space","findNearest","getStyles","getCurrentSelectionParents","getSpec$3","getSpec$4","getFormatItems","flattenedItems","defaultToolbar","renderFromBridge","bridgeBuilder","renderToolbarButton","togglebutton","renderToolbarToggleButton","menubutton","splitbutton","displayChannel","underlinePath","buttonComp","renderSplitButton","styleSelectButton","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","createToolbar","toolbarConfig","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","lookupButton","toolbarItem","prefixes","extractFrom","identifyButtons","toolbarGroups","ContextToolbar","registryContextToolbars","contextbar","currentWidth","newContents","oldContents","forwardContents","renderContextToolbar","toolbarOrMenubarEnabled","getDistractionFreeBounds","containerBox","windowHeight","getInlineBounds","contentBoxHeight","maxViewportHeight","getIframeBounds","shouldContextToolbarHide","isToolbarDocked","nodeBounds","ele","viewportHeight","aboveViewport","belowViewport","hideOrRepositionIfNecessary","lastAnchor","contextBarEle","scroller","onScroll_1","wrapInPopDialog","getScopes","alloySpec","buildToolbar","allButtons","toolbarKey","launchContext","anchorOverrides","lineAnchorSpec","anchorSpec","sElem","launchContextToolbar","Events$1","onMousedown","ship","onTouchstart","onMouseup","onContentMousedown","onContentMouseup","onWindowScroll","onWindowResize","schema$p","itemsPart","parts$c","CustomList","name$2","getListContainer","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","parts$d","partType$1","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","schema$q","getPartName$1","make$7","getSlotNames","onSlot","def","slot","doShowing","hideSlot","visible","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","createSidebar","sidepanel","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","renderSpinner","lazyThrobber","throbberState","toggleThrobber","timerId","partMenubar","partMultipleToolbar","mToolbar","tc","partToolbar","sliding","floating","toolbarFactory","renderer","moreDrawerData","lazyToolbar","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getToolbar","setToolbar","setToolbars","refreshToolbar","getThrobber","focusToolbar","setMenubar","focusMenubar","grps","grp","ts","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","menuData","removedMenuItems","getRemovedMenuItems","removedMenuItem","make$8","SkinLoaded","loadSkin","skinUiCss","skin","skin_url","skinName","getSkinUrl","isSkinDisabled","rawUiConfig","toolbarButtonsConfig","isTouch$4","Iframe","lastToolbarWidth","attachSystemAfter","initialDocEle","lastWindowDimensions","lastDocumentDimensions","docEle","outer","elementLoad","setupEvents","socket","drawer","getOrigin","offsetParent$1","offsetP","adt$c","subtract","transform$1","asFixed","coord","asAbsolute","asOffset","toStyles","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","absolute$2","fixed$1","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isCompletelyVisible","morphToAbsolute","dockInfo","leftAttr","topAttr","getPrior","clearPrior","morphToFixed","absLeft","absTop","setPrior","asFixed$1","viewportPt","fixedViewport","fixedY","refresh$4","lazyViewport","contextInfo","lazyContext","isPartiallyVisible","getMorph","morph","DockingApis","ActiveDocking","dockState","DockingSchema","Docking","Inline","floatContainer","splitSetting","setChromePosition","isDocked","calcPosition","tbar","updateChromeUi","uiContainer","getUiContainer","AlignmentButtons","alignNoneToolbarButton","registerButtons","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","SimpleControls","registerMenuItems","toggleUndoRedoState","checkState","onUndoStateChange","UndoRedo","registerMenuItems$1","registerButtons$1","VisualAid","registerToolbarButton","onVisualAid","toggleVisualAidState","registerMenuItems$2","IndentOutdent","toggleOutdentState","registerButtons$2","ComplexControls","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","FormatControls","nu$d","transposeContentAreaContainer","containerPos","dx","dy","transpose$1","getPointAnchor","fromPageXY","fromClientXY","getSelectionAnchor","patchPipeConfig","Settings$1","contextmenu_never_use_native","defaultItems","getMenuItems","isSeparator$1","separator$3","makeContextItem","addContextMenuGroup","groupItems","setup$7","contextmenu","isNativeOverrideKeyEvent","isTriggeredByKeyboardEvent","getNodeAnchor$1","selectedElement","items_1","allItems","generateContextMenu","Utils","instigate","anyComponent","zindex","changeZIndex","discard","initZIndex","resetZIndex","getCoords","snapInfo","snapsInfo","get$d","moveOrSnap","newCoord","findSnap","fixedCoord","set$8","spanned","stopDrag","snaps","getSnapPoints","sensor","coord1","coord2","withinRange","calcNewCoord","optSnaps","currentCoord","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","dragBy","dragConfig","repositionTarget","getCurrentCoord","onDrag","calcStartData","SnapSchema","init$b","dragApi","forceDrop","delayDrop","MouseData","schema$r","dragState","updateStartState","setStartData","dragStartData","getStartData","dlt","blockerClass","TouchData","getDataFrom","mouse","DraggingBranches","DragState","dragEvent","nuData","calculateDelta","Dragging","dragger","calcCappedSize","originalSize","minSize","maxSize","minOverride","maxOverride","getDimensions","deltas","resizeType","originalHeight","originalWidth","getMaxHeightSetting","Both","getMaxWidthSetting","isHidden$1","ElementPath","newPathElements","divider","newPath","updatePath","newAcc","renderStatusbar","renderResizeHandlerIcon","dim","resize$3","getTextComponents","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","None","Vertical","getResizeType","getComponents","lazyOuterContainer","platformClasses","dirAttributes","memAnchorBar","toolbarDrawer","throbber","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","hasToolbarDrawer","default","editorComponents","containerComponents","setEditorSize","baseWidth","baseHeight","getHeightSetting","minWidth","minHeight","parsedWidth","mw","parsedHeight","mh","stringWidth","stringHeight","handleToggle","setup$4","toolbarOpt","getUi","broadcastAll","AriaLabel","labelledElement","labelElement","schema$t","basic","parts$e","dragBlockClass","getDragBounds","ModalDialog","dialogBusyEvent","dialogIdleEvent","busyBehaviours","modalEventsId","busyComp","externalBlocker","bc","getBusySpec","busySpec","busy","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","describedElement","describeElement","describeId","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","iframeFields","iframeSchema","iframeDataProcessor","inputFields","inputSchema","inputDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","customEditorFields","defaultedPostMsg","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","htmlPanelFields","htmlPanelSchema","imageToolsFields","imageToolsSchema","collectionFields","collectionSchema","collectionDataProcessor","createLabelFields","tableFields","tableSchema","createItemsField","itemSchema$2","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","baseButtonFields","dialogButtonFields","normalButtonFields","menuButtonFields","dialogButtonSchema","dialogSchema","tabpanel","getAllObjects","isNamedItem","dataProcessors","createDataValidator","getNamedItems","getDataProcessor","urlDialogButtonSchema","urlDialogSchema","optionArrayOf","extract$1","internalDialog","createDialog","dataValidator","DialogManager","createUrlDialog","redial","toValidValues","renderBodyPanel","memForm","formValue","vals","TabButton","tabButtonBehaviours","schema$u","tabsPart","barDetail","tabSpec","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$f","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","schema$v","barPart","tabs","viewPart","parts$g","TabSection","changeTabBy","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","getMaxHeight","heights","updateTabviewHeight","dialogBody","maxTabHeight","getMaxTabviewHeight","allTabs","smartTabHeight","extraEvents","tabviewComp","measureHeights","maxTabHeightOpt","oldHeight","naiveTabHeight","renderTabPanel","storedValue","updateDataWithForm","validData","currentData","setDataOnForm","oldTab","tabMode","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","_comp","incoming","isTabPanel","initCommonEvents","fireApiEvent","_event","onUnblock","onBlock","SilverDialogEvents","getInstanceApi","withSpec","currentDialog","currentDialogInit","onTabChange","newTabName","oldTabName","_data","buttonGroups","footerButtons","makeGroup","memento","renderFooter","initSpec","memButton","makeButton","lookupByName","buttonName","lookup$2","renderModalFooter","footer","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","withRoot","instanceApi","valueComp","prevData","mergedData","newInternalData","dialogState","validateData","tabSection","dialogInit","renderClose","renderTitle","renderDragHandle","getHeader","pTitle","pHandle","draghandle","pClose","draggable","renderModalHeader","getEventExtras","lazyDialog","closeWindow","blockEvent","bs","renderModalDialog","dialogEvents","extraStyles","renderDialog","bodySpec","renderModalBody","dialogSize","outerForm","global$g","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","renderIframeBody","iframeUri","iframeDomain","messageHandlerUnbinder","handleMessage","isCustomMessage","onMessage","unbinder","iframeEle","postMessage","sendMessage","renderInlineDialog","dialogLabelId","dialogContentId","memHeader","titleId","renderInlineHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","hiddenHeader","defaultHeader","pUntitled","pBodyMessage","pFooter","pFooterGroup","startButtons","endButtons","renderDialog$1","headerOverride","partSpecs","alertDialog","memFooterClose","footerCloseButton","setup$9","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$a","openModalUrlDialog","openModalDialog","internalInitialData","openInlineDialog","config$1","dialogUi","inlineDialog","windowMgr","Content","Dialog","editorContent","Commands","Buttons","DetectProPlugin","Api","clipboard","isWordHtml","wordContent","ieFake","Actions","pasteFormat","pasteHtml","pasteText","mapM","par$1","InternalHtml","toBRs","toBlockElements","rootTag","rootAttrs","tagOpen","openContainer","tagClose","paragraphs","Newlines","ignoreElements","s1","s2","createIdGenerator","isMsEdge","isNumericList","convertFakeListsToProperLists","currentListNode","prevListNode","txt","trimListStart","convertParagraphToLi","paragraphNode","listName","_listLevel","removeIgnoredNodes","_listIgnore","nodeText","filterStyles","outputStyles","WordFilter","retainStyleProperties","spaces","filterWordContent","isWordContent","processResult","cancelled","filterContent","preProcessArgs","tempBody","postProcessArgs","postProcessFilter","ProcessFilters","removeMeta","isAbsoluteUrl","isImageUrl","linkSelection","pasteHtmlFn","createLink","insertImage","createImage","SmartPaste","smartInsertContent","isNewLineChar","pcIsSpace","isNewline","pasteHtml$1","internalFlag","encodedText","normalizedText","getDataTransferItems","legacyText","contentType","hasContentType","clipboardContent","mimeType","hasHtmlOrText","pasteImageData","paste_data_images","getAsFile","getImagesFromDataTransfer","blobResults","imageItem","images_reuse_filename","extractFilename","images_dataimg_filter","existingBlobInfo","pasteImage","isKeyboardPasteEvent","registerEventHandlers","pasteBin","keyboardPastePlainTextState","keyboardPasteEvent","isSet","insertClipboardContent","isKeyBoardPaste","plainTextMode","isPlainTextHtml","isDefaultContent","removePasteBinOnKeyUp","clipboardEvent","getClipboardContent","isBrokenAndroidClipboardEvent","getLastRng","getPasteBinParent","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isExternalPasteBin","isDefault","PasteBin","lastRngCell","pasteBinClone","pasteBinClones","dirtyWrappers","cleanWrapper","copyAndRemove","toElm","fromElm","Clipboard","isWebKitFakeUrl","isDataUri","isPasteInsert","registerEventsAndFilters","setHtml5Clipboard","hasWorkingClipboardApi","setClipboardData","markedHtml","contenteditable","offscreenRange","hasSelectedContent","isTableSelection","CutCopy","getCaretRangeFromEvent","setFocusedRange","DragDrop","draggingInternallyState","dropContent","plainTextContent","content_1","PrePostProcess","postProcess","addPreProcessFilter","filterFunc","removeExplorerBrElementsAfterBlocks","explorerBlocksRegExp","removeWebKitStyles","webKitStyles","webKitStylesSetting","dom_1","node_1","removeUnderlineAndFontInAnchor","addPostProcessFilter","makeSetupHandler","pastePlainTextToggleHandler","scopeIndex","parseCurrentLine","rngText","autoLinkPattern","defaultLinkTarget","rangeString","rangeEqualsDelimiterOrSpace","Keys","autoUrlDetectState","handleEnter","handleEclipse","handleSpacebar","fullscreenState","isFullscreen","visualViewport","viewportUpdate","editorContainerStyle","iframeStyle","fullscreenInfo","iframeWidth","containerWidth","containerHeight","scrollPos","newFullScreenInfo","editorEventCallback","externalTargets","OpenUrl","createEvent","initMouseEvent","appendClickRemove","opener","hasProtocol","applyRelTargetRules","isUnsafe","removeTargetRules","newRels","addTargetRules","getAnchorElement","isImageFigure","isLink","getLinkAttrs","unlinkImageFigure","fig","linkImageFigure","attachState","anchorElm","linkAttrs","assumeExternalTargets","handleExternalTargets","updateLink","trimCaretContainers","sanitizeWith","extracter","extractValue","sanitizeList","ListOptions","sanitize","createUi","persistentText","catalog","hasPersistentText","findTextByValue","DialogChanges","linkSettings","onCatalogChange","catalogs","urlText","onUrlChange","tryEmailTransform","oldData","tryProtocolTransform","DialogConfirms","delayedConfirm","AnchorListOptions","anchorNodes","ClassListOptions","LinkListOptions","extractor","linkList","parseJson","optItems","RelOptions","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","DialogInfo","linkNode","linkClass","extractFromAnchor","optNode","flags","titleEnabled","collectData","getChangedValue","changedData","pData","handleSubmit","titleText","getInitialData","dialogDelta","makeDialog","getLink","getSelectedLink","gotoLink","targetEl","hasOnlyAltModifier","Keyboard","Controls","onSetupLink","collapseSelectionToEnd","detect$3","fireListEvent","Global$1","unsafe","HTMLElement","htmlElement","keepBookmarks","getParentList","selectionStart","getClosestListRootElm","getSelectedListItems","listItemsElms","parentLi","findParentListItemsNodes","parentTableCell","findLastParentListNode","parentLists","getUniqueListRoots","lists","listRoots","getSelectedSubLists","parentList","isParentListSelected","findSubLists","getSelectedDlItems","getSelectedListRoots","selectedLists","firstList","subsequentLists","getSelectedLists","contentNode","hasContentNode","mutate","shallowAs","joinSegment","createSegment","listType","writeShallow","cast","newCast","depth","appendItem","itemAttributes","listAttributes","normalizeSegment","writeDeep","tail","segments","createSegments","joinSegments","populateSegments","isList$1","hasFirstChildList","isIndented","cloneItemContent","normalizeEntries","entries","previousSiblingEntry","matchingEntry","parseItem","itemSelection","selectionState","currentItemEntry","createEntry","childListEntries","parseList","outdentedComposer","indentedComposer","composeList","listIndentation","entrySets","sourceList","parseLists","selectedListItems","getItemSelection","entrySet","indentEntry","indentSelectedEntries","composedLists","wasType","groupBy","composeEntries","composedList","SplitList","ul","bookmarks","indentDlItem","dlIndentation","dlItems","dl","outdentDlItem","getNormalizedPoint","outRng","rangeStart","rangeEnd","selectionIndentation","isHandled","indentListSelection","outdentListSelection","flattenListSelection","Bookmark","setupEndPoint","isCustomList","listToggleActionFromListName","updateListWithDetails","updateListStyle","updateListAttrs","getEndPointNode","applyList","listItemName","textBlocks","getSelectedTextBlocks","listBlock","sib","sibStyle","detailStyle","hasCompatibleStyle","removeStyles","mergeWithAdjacentLists","shouldMerge","list1","list2","isValidLists","hasSameListStyle","elm2","toggleMultipleLists","hasListStyleDetail","newList","updateList","ToggleList","toggleList","selectedSubLists","toggleSingleList","normalizeList","NormalizeLists","findNextCaretContainer","nonEmptyBlocks","hasOnlyOneBlockChild","moveChildren","unwrapSingleBlockChild","mergeLiElements","listNode","nestedLists","mergeForward","fromLi","toLi","mergeIntoEmptyLi","backspaceDeleteFromListToListCaret","selectionStartElm","rng_1","otherLi_1","resolvedBookmark","mergeBackward","otherLi_2","removeBlock","backspaceDeleteIntoListCaret","backspaceDelete","Delete","queryListCommandState","setupTabKey","listState","tableCellIndex","hasPlugin","setSize","Size","getMaxWidth","setMaxWidth","getVideoScriptMatch","getEphoxEmbedIri","htmlToData","isEphoxEmbed","source1","source2","poster","ephoxEmbedHtmlToData","movie","videoScript","htmlToDataSax","Mime","mp3","m4a","wav","mp4","webm","ogg","swf","setAttributes","updatedAttrs","updateEphoxEmbed","normalizeHtml","UpdateHtml","updateAll","isEphoxEmbed$1","hasImage","sourceCount","imgAttrs","updateHtmlSax","urlPatterns","regex","allowFullscreen","getUrl","dataToHtml","dataIn","embed","source1mime","source2mime","matchPattern","audioTemplateCallback","videoTemplateCallback","getFlashHtml","getAudioHtml","getScriptHtml","getVideoHtml","loadedData","Service","embedHandler","rej","wrappedResolve","embedPromise","defaultPromise","unwrapped","errorMessage","snippetToData","embedSnippet","addEmbedHtml","snippetData","handleInsert","beforeObjects","afterObjects","selectPlaceholder","editorData","snippet","isMediaElement","getEditorData","getSourceData","generalTab","embedTab","advancedFormItems","advancedTab","serviceData","submitForm","handleSource1","dataFromEmbed","handleEmbed","showDialog","Sanitize","blocked","createPlaceholderNode","placeHolder","retainAttributesAndInnerHtml","createPreviewIframeNode","previewWrapper","previewNode","shimNode","allowfullscreen","frameborder","sourceNode","isPageEmbedWrapper","nodeClass","isWithinEmbedWrapper","Nodes","FilterContent","boolAttrs","realElm","realElmName","ResolveName","objectType","stateSelectorAdapter","webpackContext","webpackContextResolve"],"mappings":"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EAAcvlK,GAETulK,EA+BT,IAAIC,GAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEF,SAASC,GAASC,EAASC,GAIzB,IAHA,IAEI5+M,EAFAmtL,EAAM,GACNl2K,EAAM,IAAIjf,MAAM,IAEX3G,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAIuZ,EAAI,EAAGA,EAAI,EAAGA,IACrBuiL,EAAIviL,GAAKg0M,EAAQh0M,EAAQ,EAAJvZ,GAEvB,IAASuZ,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B5K,EAAM,EACN,IAAK,IAAIwnB,EAAI,EAAGA,EAAI,EAAGA,IACrBxnB,GAAO2+M,EAAQ/zM,EAAQ,EAAJ4c,GAAS2lK,EAAI3lK,GAElCvQ,EAAIrM,EAAQ,EAAJvZ,GAAS2O,GAGrB,OAAOiX,EA4GT,SAAS4nM,GAAYC,EAAIjyC,GACvB,OAAOiyC,EAAGV,WAAW7+M,MAAK,SAAUmwL,GAClC,OAGJ,SAA0BA,EAAQ33L,EAAM80K,GACtC,IAAI9hK,EAAUixM,GAAatsB,GAgB3B,IAAIqvB,EAfJ,SAAqBC,EAAYvtN,GAG/B,IAFA,IAAIU,EAAGkB,EAAGsE,EAAGP,EACT4L,EAAOg8M,EAAWh8M,KAAMi8M,EAAKxtN,EAAE,GAAIytN,EAAKztN,EAAE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","file":"tinymce.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = isType('null');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var slice = Array.prototype.slice;\n    var rawIndexOf = function () {\n      var pIndexOf = Array.prototype.indexOf;\n      var fastIndex = function (xs, x) {\n        return pIndexOf.call(xs, x);\n      };\n      var slowIndex = function (xs, x) {\n        return slowIndexOf(xs, x);\n      };\n      return pIndexOf === undefined ? slowIndex : fastIndex;\n    }();\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      return findIndex(xs, pred).isSome();\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i, xs) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var slowIndexOf = function (xs, x) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (xs[i] === x) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i, xs) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = slice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = slice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n\n    var nav = domGlobals.navigator, userAgent = nav.userAgent;\n    var opera, webkit, ie, ie11, ie12, gecko, mac, iDevice, android, fileApi, phone, tablet, windowsPhone;\n    var matchMediaQuery = function (query) {\n      return 'matchMedia' in domGlobals.window ? domGlobals.matchMedia(query).matches : false;\n    };\n    opera = false;\n    android = /Android/.test(userAgent);\n    webkit = /WebKit/.test(userAgent);\n    ie = !webkit && !opera && /MSIE/gi.test(userAgent) && /Explorer/gi.test(nav.appName);\n    ie = ie && /MSIE (\\w+)\\./.exec(userAgent)[1];\n    ie11 = userAgent.indexOf('Trident/') !== -1 && (userAgent.indexOf('rv:') !== -1 || nav.appName.indexOf('Netscape') !== -1) ? 11 : false;\n    ie12 = userAgent.indexOf('Edge/') !== -1 && !ie && !ie11 ? 12 : false;\n    ie = ie || ie11 || ie12;\n    gecko = !webkit && !ie11 && /Gecko/.test(userAgent);\n    mac = userAgent.indexOf('Mac') !== -1;\n    iDevice = /(iPad|iPhone)/.test(userAgent);\n    fileApi = 'FormData' in domGlobals.window && 'FileReader' in domGlobals.window && 'URL' in domGlobals.window && !!domGlobals.URL.createObjectURL;\n    phone = matchMediaQuery('only screen and (max-device-width: 480px)') && (android || iDevice);\n    tablet = matchMediaQuery('only screen and (min-width: 800px)') && (android || iDevice);\n    windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    if (ie12) {\n      webkit = false;\n    }\n    var contentEditable = !iDevice || fileApi || parseInt(userAgent.match(/AppleWebKit\\/(\\d*)/)[1], 10) >= 534;\n    var Env = {\n      opera: opera,\n      webkit: webkit,\n      ie: ie,\n      gecko: gecko,\n      mac: mac,\n      iOS: iDevice,\n      android: android,\n      contentEditable: contentEditable,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: ie !== 8,\n      range: domGlobals.window.getSelection && 'Range' in domGlobals.window,\n      documentMode: ie && !ie12 ? domGlobals.document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: ie === false || ie > 8,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: ie === false || ie > 11,\n      desktop: !phone && !tablet,\n      windowsPhone: windowsPhone\n    };\n\n    var promise = function () {\n      function bind(fn, thisArg) {\n        return function () {\n          fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof domGlobals.setImmediate === 'function' && domGlobals.setImmediate || function (fn) {\n        domGlobals.setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var i, requestAnimationFrameFunc = domGlobals.window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (callback) {\n        domGlobals.window.setTimeout(callback, 0);\n      };\n      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = domGlobals.window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return domGlobals.setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return domGlobals.setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return domGlobals.clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return domGlobals.clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer, func;\n      func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        domGlobals.clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        domGlobals.clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = domGlobals.document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer;\n        timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            domGlobals.clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var deprecated = {\n      keyLocation: 1,\n      layerX: 1,\n      layerY: 1,\n      returnValue: 1,\n      webkitMovementX: 1,\n      webkitMovementY: 1,\n      keyIdentifier: 1,\n      mozPressure: 1\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;\n    };\n    var returnFalse = function () {\n      return false;\n    };\n    var returnTrue = function () {\n      return true;\n    };\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var getTargetFromShadowDom = function (event, defaultTarget) {\n      if (event.composedPath) {\n        var composedPath = event.composedPath();\n        if (composedPath && composedPath.length > 0) {\n          return composedPath[0];\n        }\n      }\n      return defaultTarget;\n    };\n    var fix = function (originalEvent, data) {\n      var name;\n      var event = data || {};\n      for (name in originalEvent) {\n        if (!deprecated[name]) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (!event.target) {\n        event.target = event.srcElement || domGlobals.document;\n      }\n      if (Env.experimentalShadowDom) {\n        event.target = getTargetFromShadowDom(originalEvent, event.target);\n      }\n      if (originalEvent && mouseEventRe.test(originalEvent.type) && originalEvent.pageX === undefined && originalEvent.clientX !== undefined) {\n        var eventDoc = event.target.ownerDocument || domGlobals.document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event.preventDefault = function () {\n        event.isDefaultPrevented = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.preventDefault) {\n            originalEvent.preventDefault();\n          } else {\n            originalEvent.returnValue = false;\n          }\n        }\n      };\n      event.stopPropagation = function () {\n        event.isPropagationStopped = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.stopPropagation) {\n            originalEvent.stopPropagation();\n          } else {\n            originalEvent.cancelBubble = true;\n          }\n        }\n      };\n      event.stopImmediatePropagation = function () {\n        event.isImmediatePropagationStopped = returnTrue;\n        event.stopPropagation();\n      };\n      if (hasIsDefaultPrevented(event) === false) {\n        event.isDefaultPrevented = returnFalse;\n        event.isPropagationStopped = returnFalse;\n        event.isImmediatePropagationStopped = returnFalse;\n      }\n      if (typeof event.metaKey === 'undefined') {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n      };\n      var waitForDomLoaded = function () {\n        if (isDocReady()) {\n          removeEvent(doc, 'readystatechange', waitForDomLoaded);\n          readyHandler();\n        }\n      };\n      var tryScroll = function () {\n        try {\n          doc.documentElement.doScroll('left');\n        } catch (ex) {\n          Delay.setTimeout(tryScroll);\n          return;\n        }\n        readyHandler();\n      };\n      if (doc.addEventListener && !(Env.ie && Env.ie < 11)) {\n        if (isDocReady()) {\n          readyHandler();\n        } else {\n          addEvent(win, 'DOMContentLoaded', readyHandler);\n        }\n      } else {\n        addEvent(doc, 'readystatechange', waitForDomLoaded);\n        if (doc.documentElement.doScroll && win.self === win.top) {\n          tryScroll();\n        }\n      }\n      addEvent(win, 'load', readyHandler);\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in domGlobals.document.documentElement;\n        this.hasFocusIn = 'onfocusin' in domGlobals.document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = domGlobals.window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current, related;\n                current = evt.currentTarget;\n                related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = 0;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var id, callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            for (name in eventMap) {\n              callbackList = eventMap[name];\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            }\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            return this;\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix(null, args);\n        event.type = name;\n        event.target = target;\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var callbackList, i, l, callback;\n        var container = this.events[id];\n        callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (i = 0, l = callbackList.length; i < l; i++) {\n            callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains$1, expando = 'sizzle' + -new Date(), preferredDoc = domGlobals.window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf$1 = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document) {\n        setDocument(context);\n      }\n      context = context || document;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains$1(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {\n        return document;\n      }\n      document = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains$1 = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains$1(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains$1(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document) {\n        setDocument(context);\n      }\n      return contains$1(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf$1.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = domGlobals.window.location && domGlobals.window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    for (i in {\n        radio: true,\n        checkbox: true,\n        file: true,\n        password: true,\n        image: true\n      }) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    }\n    for (i in {\n        submit: true,\n        reset: true\n      }) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    }\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type))\n            continue;\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf$1.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf$1.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var isArray$1 = Array.isArray;\n    var toArray = function (obj) {\n      var array = obj, i, l;\n      if (!isArray$1(obj)) {\n        array = [];\n        for (i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n      }\n      return array;\n    };\n    var each$1 = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return 0;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return 0;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (o.hasOwnProperty(n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return 0;\n            }\n          }\n        }\n      }\n      return 1;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$1(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$1 = function (a, f) {\n      var o = [];\n      each$1(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$2 = function (a, v) {\n      var i, l;\n      if (a) {\n        for (i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var i = 0;\n      if (arguments.length < 3) {\n        accumulator = collection[0];\n      }\n      for (; i < collection.length; i++) {\n        accumulator = iteratee.call(thisArg, accumulator, collection[i], i);\n      }\n      return accumulator;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var find$1 = function (array, predicate, thisArg) {\n      var idx = findIndex$1(array, predicate, thisArg);\n      if (idx !== -1) {\n        return array[idx];\n      }\n      return undefined;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n    var ArrUtils = {\n      isArray: isArray$1,\n      toArray: toArray,\n      each: each$1,\n      map: map$1,\n      filter: filter$1,\n      indexOf: indexOf$2,\n      reduce: reduce,\n      findIndex: findIndex$1,\n      find: find$1,\n      last: last$1\n    };\n\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var is = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && ArrUtils.isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    var create = function (s, p, root) {\n      var self = this;\n      var sp, ns, cn, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend = function (obj, ext) {\n      var x = [];\n      for (var _i = 2; _i < arguments.length; _i++) {\n        x[_i - 2] = arguments[_i];\n      }\n      var i, l, name;\n      var args = arguments;\n      var value;\n      for (i = 1, l = args.length; i < l; i++) {\n        ext = args[i];\n        for (name in ext) {\n          if (ext.hasOwnProperty(name)) {\n            value = ext[name];\n            if (value !== undefined) {\n              obj[name] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        ArrUtils.each(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve = function (n, o) {\n      var i, l;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode = function (s, d) {\n      if (!s || is(s, 'array')) {\n        return s;\n      }\n      return ArrUtils.map(s.split(d || ','), trim);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim,\n      isArray: ArrUtils.isArray,\n      is: is,\n      toArray: ArrUtils.toArray,\n      makeMap: makeMap,\n      each: ArrUtils.each,\n      map: ArrUtils.map,\n      grep: ArrUtils.filter,\n      inArray: ArrUtils.indexOf,\n      hasOwn: hasOwnProperty,\n      extend: extend,\n      create: create,\n      walk: walk,\n      createNS: createNS,\n      resolve: resolve,\n      explode: explode,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var doc = domGlobals.document, push$2 = Array.prototype.push, slice$2 = Array.prototype.slice;\n    var rquickExpr$1 = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString$1 = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment = function (html, fragDoc) {\n      var frag, node, container;\n      fragDoc = fragDoc || doc;\n      container = fragDoc.createElement('div');\n      frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString$1(sourceItem)) {\n        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    var each$2 = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep = function (array, callback) {\n      var out = [];\n      each$2(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = domGlobals.document;\n        }\n        if (isString$1(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr$1.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push$2.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString$1(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push$2.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$2(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var existingClassName, classState;\n            classState = hasClass(node, className);\n            if (classState !== state) {\n              existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$2(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event.fire(this, name.type, name);\n          } else {\n            Event.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return new DomQuery(slice$2.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push$2,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray,\n      isArray: Tools.isArray,\n      each: each$2,\n      trim: trim$1,\n      grep: grep,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$2({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$2({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    var appendHooks = function (targetHooks, prop, hooks) {\n      each$2(hooks, function (name, func) {\n        targetHooks[name] = targetHooks[name] || {};\n        targetHooks[name][prop] = func;\n      });\n    };\n    if (Env.ie && Env.ie < 8) {\n      appendHooks(attrHooks, 'get', {\n        maxlength: function (elm) {\n          var value = elm.maxLength;\n          if (value === 2147483647) {\n            return undefined;\n          }\n          return value;\n        },\n        size: function (elm) {\n          var value = elm.size;\n          if (value === 20) {\n            return undefined;\n          }\n          return value;\n        },\n        class: function (elm) {\n          return elm.className;\n        },\n        style: function (elm) {\n          var value = elm.style.cssText;\n          if (value.length === 0) {\n            return undefined;\n          }\n          return value;\n        }\n      });\n      appendHooks(attrHooks, 'set', {\n        class: function (elm, value) {\n          elm.className = value;\n        },\n        style: function (elm, value) {\n          elm.style.cssText = value;\n        }\n      });\n    }\n    if (Env.ie && Env.ie < 9) {\n      cssFix.float = 'styleFloat';\n      appendHooks(cssHooks, 'set', {\n        opacity: function (elm, value) {\n          var style = elm.style;\n          if (value === null || value === '') {\n            style.removeAttribute('filter');\n          } else {\n            style.zoom = 1;\n            style.filter = 'alpha(opacity=' + value * 100 + ')';\n          }\n        }\n      });\n    }\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera$1 = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie$1, current),\n        isOpera: isBrowser(opera$1, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera$1),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android$1 = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android$1, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android$1),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') {\n        return true;\n      }\n      if (str.length < substr.length) {\n        return false;\n      }\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var trim$2 = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n    var lTrim = function (str) {\n      return str.replace(/^\\s+/g, '');\n    };\n    var rTrim = function (str) {\n      return str.replace(/\\s+$/g, '');\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$3 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i, obj) {\n        return {\n          k: i,\n          v: f(x, i, obj)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$3(obj, function (x, i) {\n        var tuple = f(x, i, obj);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      each$3(obj, function (x, i) {\n        var branch = pred(x, i) ? t : f;\n        branch[i] = x;\n      });\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$3(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var get$2 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var reflow = function (e) {\n      return e.dom().offsetWidth;\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var toArray$1 = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n    var Recurse = { toArray: toArray$1 };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is$1 = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$3 = browser.isIE() ? ieContains : regularContains;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var documentElement = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.documentElement);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(Recurse.toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return Recurse.toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom().childNodes.length;\n    };\n    var spot = Immutable('element', 'offset');\n\n    var browser$1 = PlatformDetection$1.detect().browser;\n    var firstElement = function (nodes) {\n      return find(nodes, isElement);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$1.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom().offsetTop;\n            var captionTop = caption.dom().offsetTop;\n            var captionHeight = caption.dom().offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0, offsetParent;\n      var doc = body.ownerDocument;\n      var pos;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$2(Element.fromDom(body), 'position') === 'static') {\n          pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x += offsetParent.offsetLeft || 0;\n          y += offsetParent.offsetTop || 0;\n          offsetParent = offsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(Element.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var Position = { getPos: getPos };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise = module$1.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$4 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$4,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    function StyleSheetLoader(document, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var maxLoadTime;\n      maxLoadTime = settings.maxLoadTime || 5000;\n      var appendToHead = function (node) {\n        document.getElementsByTagName('head')[0].appendChild(node);\n      };\n      var load = function (url, loadedCallback, errorCallback) {\n        var link, style, startTime, state;\n        var resolve = function (status) {\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          var callbacks = state.passed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          resolve(2);\n        };\n        var failed = function () {\n          var callbacks = state.failed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          resolve(3);\n        };\n        var isOldWebKit = function () {\n          var webKitChunks = domGlobals.navigator.userAgent.match(/WebKit\\/(\\d*)/);\n          return !!(webKitChunks && parseInt(webKitChunks[1], 10) < 536);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (new Date().getTime() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = document.styleSheets;\n            var styleSheet, i = styleSheets.length, owner;\n            while (i--) {\n              styleSheet = styleSheets[i];\n              owner = styleSheet.ownerNode ? styleSheet.ownerNode : styleSheet.owningElement;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n          }, waitForWebKitLinkLoaded);\n        };\n        var waitForGeckoLinkLoaded = function () {\n          wait(function () {\n            try {\n              var cssRules = style.sheet.cssRules;\n              passed();\n              return !!cssRules;\n            } catch (ex) {\n            }\n          }, waitForGeckoLinkLoaded);\n        };\n        url = Tools._addCacheSuffix(url);\n        if (!loadedStates[url]) {\n          state = {\n            passed: [],\n            failed: []\n          };\n          loadedStates[url] = state;\n        } else {\n          state = loadedStates[url];\n        }\n        if (loadedCallback) {\n          state.passed.push(loadedCallback);\n        }\n        if (errorCallback) {\n          state.failed.push(errorCallback);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        link.id = 'u' + idCount++;\n        link.async = false;\n        link.defer = false;\n        startTime = new Date().getTime();\n        if (settings.contentCssCors) {\n          link.crossOrigin = 'anonymous';\n        }\n        if ('onload' in link && !isOldWebKit()) {\n          link.onload = waitForWebKitLinkLoaded;\n          link.onerror = failed;\n        } else {\n          if (domGlobals.navigator.userAgent.indexOf('Firefox') > 0) {\n            style = document.createElement('style');\n            style.textContent = '@import \"' + url + '\"';\n            waitForGeckoLinkLoaded();\n            appendToHead(style);\n            return;\n          }\n          waitForWebKitLinkLoaded();\n        }\n        appendToHead(link);\n        link.href = url;\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var unbox = function (result) {\n        return result.fold(identity, identity);\n      };\n      var loadAll = function (urls, success, failure) {\n        par$1(map(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unbox));\n          } else {\n            success(parts.pass.map(unbox));\n          }\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll\n      };\n    }\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$1 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        var i, cssValue;\n        if (isElement$1(node)) {\n          for (i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasPropValue = function (propName, propValue) {\n      return function (node) {\n        return isElement$1(node) && node[propName] === propValue;\n      };\n    };\n    var hasAttribute = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus = function (node) {\n      return isElement$1(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll = function (node) {\n      return isElement$1(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable = function (node) {\n      return isElement$1(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$1(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$1 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr = matchNodeNames(['br']);\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var NodeType = {\n      isText: isText$1,\n      isElement: isElement$1,\n      isComment: isComment,\n      isDocument: isDocument,\n      isDocumentFragment: isDocumentFragment,\n      isBr: isBr,\n      isContentEditableTrue: isContentEditableTrue,\n      isContentEditableFalse: isContentEditableFalse,\n      isRestrictedNode: isRestrictedNode,\n      matchNodeNames: matchNodeNames,\n      hasPropValue: hasPropValue,\n      hasAttribute: hasAttribute,\n      hasAttributeValue: hasAttributeValue,\n      matchStyleValues: matchStyleValues,\n      isBogus: isBogus,\n      isBogusAll: isBogusAll,\n      isTable: isTable,\n      isTextareaOrInput: isTextareaOrInput\n    };\n\n    var TreeWalker = function () {\n      function TreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      TreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      TreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      TreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      TreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      TreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      TreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return TreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var voids = [\n      'area',\n      'base',\n      'basefont',\n      'br',\n      'col',\n      'frame',\n      'hr',\n      'img',\n      'input',\n      'isindex',\n      'link',\n      'meta',\n      'param',\n      'embed',\n      'source',\n      'wbr',\n      'track'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, constant(true));\n        return lookup.hasOwnProperty(name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock = lazyLookup(blocks);\n    var isTable$1 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline = function (node) {\n      return isElement(node) && !isBlock(node);\n    };\n    var isBr$1 = function (node) {\n      return isElement(node) && name(node) === 'br';\n    };\n    var isTextBlock = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems);\n    var isVoid = lazyLookup(voids);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var surroundedBySpans = function (node) {\n      var previousIsSpan = node.previousSibling && node.previousSibling.nodeName === 'SPAN';\n      var nextIsSpan = node.nextSibling && node.nextSibling.nodeName === 'SPAN';\n      return previousIsSpan && nextIsSpan;\n    };\n    var isBookmarkNode = function (node) {\n      return node && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var trimNode = function (dom, node) {\n      var i, children = node.childNodes;\n      if (NodeType.isElement(node) && isBookmarkNode(node)) {\n        return;\n      }\n      for (i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i]);\n      }\n      if (NodeType.isDocument(node) === false) {\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          var trimmedLength = Tools.trim(node.nodeValue).length;\n          if (dom.isBlock(node.parentNode) || trimmedLength > 0) {\n            return;\n          }\n          if (trimmedLength === 0 && surroundedBySpans(node)) {\n            return;\n          }\n        } else if (NodeType.isElement(node)) {\n          children = node.childNodes;\n          if (children.length === 1 && isBookmarkNode(children[0])) {\n            node.parentNode.insertBefore(children[0], node);\n          }\n          if (children.length || isVoid(Element.fromDom(node))) {\n            return;\n          }\n        }\n        dom.remove(node);\n      }\n      return node;\n    };\n    var TrimNode = { trimNode: trimNode };\n\n    var makeMap$1 = Tools.makeMap;\n    var namedEntities, baseEntities, reverseEntities;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm;\n      elm = Element.fromTag('div').dom();\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$1(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$4 = Tools.each, extend$1 = Tools.extend, explode$1 = Tools.explode, inArray$1 = Tools.inArray;\n    var split = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split(children);\n        }\n        name = split(name);\n        ni = name.length;\n        while (ni--) {\n          attributesOrder = split([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[name[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        name = split(name);\n        ni = name.length;\n        attributes = split(attributes);\n        while (ni--) {\n          schemaItem = schema[name[ni]];\n          for (i = 0, l = attributes.length; i < l; i++) {\n            schemaItem.attributes[attributes[i]] = {};\n            schemaItem.attributesOrder.push(attributes[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$4(split(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$4(split(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select', 'onchange');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen');\n      }\n      each$4(split('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$4(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$1(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    function Schema(settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var validStyles;\n      var invalidStyles;\n      var schemaItems;\n      var whiteSpaceElementsMap, selfClosingElementsMap, shortEndedElementsMap, boolAttrMap, validClasses;\n      var blockElementsMap, nonEmptyElementsMap, moveCaretBeforeOnEnterElementsMap, textBlockElementsMap, textInlineElementsMap;\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$1(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      validStyles = compileElementMap(settings.valid_styles);\n      invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      validClasses = compileElementMap(settings.valid_classes, 'map');\n      whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      nonEmptyElementsMap = createLookupTable('non_empty_elements', 'td th iframe video audio object ' + 'script pre code', shortEndedElementsMap);\n      moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', 'table', nonEmptyElementsMap);\n      textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$4((settings.special || 'script noscript noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, key, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)\\])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          validElements = split(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElements.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElements[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                for (key in globalAttributes) {\n                  attributes[key] = globalAttributes[key];\n                }\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$1(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$4(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$4(split(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$1({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$4(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$1({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)(\\w+)\\[([^\\]]+)\\]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$4(split(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$4(split(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$4(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$4(split('strong/b em/i'), function (item) {\n            item = split(item, '/');\n            elements[item[1]].outputName = item[0];\n          });\n        }\n        each$4(split('ol ul sub sup blockquote span font a table tbody tr strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$4(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$4(split('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$4({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$4(explode$1(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = function () {\n        return validStyles;\n      };\n      var getInvalidStyles = function () {\n        return invalidStyles;\n      };\n      var getValidClasses = function () {\n        return validClasses;\n      };\n      var getBoolAttrs = function () {\n        return boolAttrMap;\n      };\n      var getBlockElements = function () {\n        return blockElementsMap;\n      };\n      var getTextBlockElements = function () {\n        return textBlockElementsMap;\n      };\n      var getTextInlineElements = function () {\n        return textInlineElementsMap;\n      };\n      var getShortEndedElements = function () {\n        return shortEndedElementsMap;\n      };\n      var getSelfClosingElements = function () {\n        return selfClosingElementsMap;\n      };\n      var getNonEmptyElements = function () {\n        return nonEmptyElementsMap;\n      };\n      var getMoveCaretBeforeOnEnterElements = function () {\n        return moveCaretBeforeOnEnterElementsMap;\n      };\n      var getWhiteSpaceElements = function () {\n        return whiteSpaceElementsMap;\n      };\n      var getSpecialElements = function () {\n        return specialElements;\n      };\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = function () {\n        return customElementsMap;\n      };\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    }\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var encodingItems;\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = '\\uFEFF';\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top, right, bottom, left;\n            top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '', name, value;\n          var serializeStyles = function (name) {\n            var styleList, i, l, value;\n            styleList = validStyles[name];\n            if (styleList) {\n              for (i = 0, l = styleList.length; i < l; i++) {\n                name = styleList[i];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap;\n            styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            return true;\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            for (name in styles) {\n              value = styles[name];\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            }\n          }\n          return css;\n        }\n      };\n    };\n\n    var each$5 = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var whiteSpaceRegExp$2 = /^[ \\t\\r\\n]*$/;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            $elm.attr('style', value);\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    function DOMUtils(doc, settings) {\n      var _this = this;\n      if (settings === void 0) {\n        settings = {};\n      }\n      var attrHooks;\n      var addedStyles = {};\n      var win = domGlobals.window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = StyleSheetLoader(doc, { contentCssCors: settings.contentCssCors });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        if (elm && doc && typeof elm === 'string') {\n          var node = doc.getElementById(elm);\n          if (node && node.id !== elm) {\n            return doc.getElementsByName(elm)[1];\n          } else {\n            return node;\n          }\n        }\n        return elm;\n      };\n      var $$ = function (elm) {\n        if (typeof elm === 'string') {\n          elm = get(elm);\n        }\n        return $(elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        var originalValue, hook;\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        }\n        if (!deep) {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$5(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n        return null;\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var actWin = !argWin ? win : argWin;\n        var doc = actWin.document;\n        var rootElm =  doc.documentElement ;\n        return {\n          x: actWin.pageXOffset || rootElm.scrollLeft,\n          y: actWin.pageYOffset || rootElm.scrollTop,\n          w: actWin.innerWidth || rootElm.clientWidth,\n          h: actWin.innerHeight || rootElm.clientHeight\n        };\n      };\n      var getPos = function (elm, rootElm) {\n        return Position.getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.ie && Env.ie < 12 ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        var pos, size;\n        elm = get(elm);\n        pos = getPos(elm);\n        size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || !node.nodeType || node.nodeType === 9) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$5(node, function (elm, i) {\n            if (elm) {\n              if (typeof elm === 'string') {\n                elm = get(elm);\n              }\n              result.push(func.call(scope, elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : _this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$5(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (attrs.hasOwnProperty(key) && attrs[key] !== null && typeof attrs[key] !== 'undefined') {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (url) {\n        var head;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          DOMUtils.DOM.loadCSS(url);\n          return;\n        }\n        if (!url) {\n          url = '';\n        }\n        head = doc.getElementsByTagName('head')[0];\n        each$5(url.split(','), function (url) {\n          var link;\n          url = Tools._addCacheSuffix(url);\n          if (files[url]) {\n            return;\n          }\n          files[url] = true;\n          link = create('link', __assign({\n            rel: 'stylesheet',\n            type: 'text/css',\n            href: url\n          }, settings.contentCssCors ? { crossOrigin: 'anonymous' } : {}));\n          head.appendChild(link);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return NodeType.isElement(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent, nextSibling;\n          parent = referenceNode.parentNode;\n          nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$5(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$5(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isEmpty = function (node, elements) {\n        var i, attributes, type, name, brCount = 0;\n        node = node.firstChild;\n        if (node) {\n          var walker = new TreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (NodeType.isElement(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              attributes = getAttribs(node);\n              i = attributes.length;\n              while (i--) {\n                name = attributes[i].nodeName;\n                if (name === 'name' || name === 'data-mce-bookmark') {\n                  return false;\n                }\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var r = createRng(), bef, aft, pa;\n        if (parentElm && splitElm) {\n          r.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          r.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          bef = r.extractContents();\n          r = createRng();\n          r.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          r.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          aft = r.extractContents();\n          pa = parentElm.parentNode;\n          pa.insertBefore(TrimNode.trimNode(self, bef), parentElm);\n          if (replacementElm) {\n            pa.insertBefore(replacementElm, parentElm);\n          } else {\n            pa.insertBefore(splitElm, parentElm);\n          }\n          pa.insertBefore(TrimNode.trimNode(self, aft), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        return events.bind(target, name, func, scope || self);\n      };\n      var unbind = function (target, name, func) {\n        var i;\n        if (Tools.isArray(target)) {\n          i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        }\n        if (boundEvents && (target === doc || target === win)) {\n          i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n              events.unbind(item[0], item[1], item[2]);\n            }\n          }\n        }\n        return events.unbind(target, name, func);\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && NodeType.isElement(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        while (node) {\n          if (parent === node) {\n            return true;\n          }\n          node = node.parentNode;\n        }\n        return false;\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      attrHooks = setupAttrHooks(styles, settings, function () {\n        return self;\n      });\n      return self;\n    }\n    (function (DOMUtils) {\n      DOMUtils.DOM = DOMUtils(domGlobals.document);\n      DOMUtils.nodeIndex = findNodeIndex;\n    }(DOMUtils || (DOMUtils = {})));\n    var DOMUtils$1 = DOMUtils;\n\n    var DOM = DOMUtils$1.DOM;\n    var each$6 = Tools.each, grep$2 = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader() {\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n      }\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM;\n        var elm, id;\n        var done = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onreadystatechange = elm.onload = elm = null;\n          }\n          success();\n        };\n        var error = function () {\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof domGlobals.console !== 'undefined' && domGlobals.console.log) {\n              domGlobals.console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        id = dom.uniqueId();\n        elm = domGlobals.document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        elm.onload = done;\n        elm.onerror = error;\n        (domGlobals.document.getElementsByTagName('head')[0] || domGlobals.document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        if (state === undefined) {\n          this.queue.push(url);\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var loadScripts;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$6(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        loadScripts = function () {\n          var loadingScripts = grep$2(scripts);\n          scripts.length = 0;\n          each$6(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$6(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getData = function () {\n      return map$2(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      for (var name in items) {\n        langData[name.toLowerCase()] = items[name];\n      }\n    };\n    var translate = function (text) {\n      var langData = data[currentCode.get()] || {};\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        var lowercaseTextstr = textstr.toLowerCase();\n        return has(langData, lowercaseTextstr) ? toString(langData[lowercaseTextstr]) : textstr;\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      var translated = function (text) {\n        return text;\n      };\n      if (isEmpty(text)) {\n        return translated('');\n      }\n      if (isRaw(text)) {\n        return translated(toString(text.raw));\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return translated(removeContext(substitued));\n      }\n      return translated(removeContext(getLangData(text)));\n    };\n    var isRtl = function () {\n      return get(data, currentCode.get()).bind(function (items) {\n        return get(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add,\n      translate: translate,\n      isRtl: isRtl,\n      hasCode: hasCode\n    };\n\n    var each$7 = Tools.each;\n    function AddOnManager() {\n      var _this = this;\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        var language = I18n.getCode();\n        if (language && AddOnManager.languageLoad !== false) {\n          if (languages) {\n            languages = ',' + languages + ',';\n            if (languages.indexOf(',' + language.substr(0, 2) + ',') !== -1) {\n              language = language.substr(0, 2);\n            } else if (languages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n          }\n          ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        items.push(addOn);\n        lookup[id] = {\n          instance: addOn,\n          dependencies: dependencies\n        };\n        var result = partition(_listeners, function (listener) {\n          return listener.name === id;\n        });\n        _listeners = result.fail;\n        each$7(result.pass, function (listener) {\n          listener.callback();\n        });\n        return addOn;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = _this.urls[pluginName];\n        each$7(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$7(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        if (lookup[name]) {\n          loadDependencies(name, addOnUrl, success, scope);\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, function () {\n            return loadDependencies(name, addOnUrl, success, scope);\n          }, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback) {\n        if (lookup.hasOwnProperty(name)) {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    }\n    (function (AddOnManager) {\n      AddOnManager.PluginManager = AddOnManager();\n      AddOnManager.ThemeManager = AddOnManager();\n    }(AddOnManager || (AddOnManager = {})));\n    var AddOnManager$1 = AddOnManager;\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap$1 = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$1(rogue);\n      });\n    };\n    var remove$1 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$1(wrapper);\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read = function (element, attr) {\n      var value = get$1(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$3 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$3(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is$1(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = Element.fromDom(rng.startContainer);\n      var root = Element.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child(start, rng.startOffset).getOr(start);\n      var closest = closest$1(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Option.some(get$1(c, property));\n        } else {\n          return Option.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement(elem) && has$2(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = Element.fromDom(editor.getBody());\n      return descendants$1(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = Element.fromDom(editor.getBody());\n      var markers = descendants$1(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each(markers, function (m) {\n        var uid = get$1(m, dataAnnotationId());\n        var nodesAlready = directory.hasOwnProperty(uid) ? directory[uid] : [];\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup = function (editor, registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: Cell(Option.none())\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = callbackMap.hasOwnProperty(name) ? callbackMap[name] : initData();\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map(elements, function (elem) {\n                return elem.dom();\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last$2(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Option.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.set(Option.none());\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!prev.is(uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(Option.some(uid));\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$1 = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Option.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$1 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return annotations.hasOwnProperty(name) ? Option.from(annotations[name]).map(function (a) {\n          return a.settings;\n        }) : Option.none();\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add$4 = function (element, classes) {\n      each(classes, function (x) {\n        add$3(element, x);\n      });\n    };\n\n    var clone = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone(original, false);\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var get$4 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set$1 = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n\n    var ZWSP = '\\uFEFF';\n    var isZwsp = function (chr) {\n      return chr === ZWSP;\n    };\n    var trim$3 = function (text) {\n      return text.replace(new RegExp(ZWSP, 'g'), '');\n    };\n    var Zwsp = {\n      isZwsp: isZwsp,\n      ZWSP: ZWSP,\n      trim: trim$3\n    };\n\n    var isElement$2 = NodeType.isElement;\n    var isText$2 = NodeType.isText;\n    var isCaretContainerBlock = function (node) {\n      if (isText$2(node)) {\n        node = node.parentNode;\n      }\n      return isElement$2(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$2(node) && Zwsp.isZwsp(node.data);\n    };\n    var isCaretContainer = function (node) {\n      return isCaretContainerBlock(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !NodeType.isBr(node.firstChild);\n    };\n    var insertInline = function (node, before) {\n      var doc, sibling, textNode, parentNode;\n      doc = node.ownerDocument;\n      textNode = doc.createTextNode(Zwsp.ZWSP);\n      parentNode = node.parentNode;\n      if (!before) {\n        sibling = node.nextSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        sibling = node.previousSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === Zwsp.ZWSP || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === Zwsp.ZWSP || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = domGlobals.document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock = function (blockName, node, before) {\n      var doc, blockNode, parentNode;\n      doc = node.ownerDocument;\n      blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (NodeType.isBogus(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock(range.startContainer);\n    };\n\n    var isContentEditableTrue$1 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$1 = NodeType.isContentEditableFalse;\n    var isBr$2 = NodeType.isBr;\n    var isText$3 = NodeType.isText;\n    var isInvalidTextElement = NodeType.matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = NodeType.matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object'\n    ]);\n    var isTable$2 = NodeType.matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer;\n    var isCaretCandidate = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$3(node)) {\n        if (isInvalidTextElement(node.parentNode)) {\n          return false;\n        }\n        return true;\n      }\n      return isAtomicInline(node) || isBr$2(node) || isTable$2(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return NodeType.isElement(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$1(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$1(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from$1(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$1(elm);\n      }, false) !== true;\n    };\n    var isAtomic = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate = function (node, root) {\n      return isCaretCandidate(node) && isInEditable(node, root);\n    };\n\n    var round = Math.round;\n    var clone$1 = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round(rect.left),\n        top: round(rect.top),\n        bottom: round(rect.bottom),\n        right: round(rect.right),\n        width: round(rect.width),\n        height: round(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone$1(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove = function (rect1, rect2) {\n      if (rect1.bottom - rect1.height / 2 < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode = function (container, offset) {\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        if (offset >= container.childNodes.length) {\n          offset = container.childNodes.length - 1;\n        }\n        container = container.childNodes[offset];\n      }\n      return container;\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08E3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\uA69E-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\uFE2F\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var liftN = function (arr, f) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Option.none();\n        }\n      }\n      return Option.some(f.apply(null, r));\n    };\n\n    var slice$3 = [].slice;\n    var or = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$3.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$3.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n    var Predicate = {\n      and: and,\n      or: or\n    };\n\n    var isElement$3 = NodeType.isElement;\n    var isCaretCandidate$1 = isCaretCandidate;\n    var isBlock$1 = NodeType.matchStyleValues('display', 'block table');\n    var isFloated = NodeType.matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = Predicate.and(isElement$3, isCaretCandidate$1, not(isFloated));\n    var isNotPre = not(NodeType.matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = NodeType.isText;\n    var isBr$3 = NodeType.isBr;\n    var nodeIndex = DOMUtils$1.nodeIndex;\n    var resolveIndex = getNode;\n    var createRange = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils$1.DOM.createRng();\n    };\n    var isWhiteSpace = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      var text;\n      if (isWhiteSpace(range.toString()) && isNotPre(container.parentNode) && NodeType.isText(container)) {\n        text = container.data;\n        if (isWhiteSpace(text[offset - 1]) || isWhiteSpace(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange(doc);\n      var nbsp = doc.createTextNode('\\xA0');\n      var parentNode = brNode.parentNode;\n      var clientRect;\n      parentNode.insertBefore(nbsp, brNode);\n      rng.setStart(nbsp, 0);\n      rng.setEnd(nbsp, 1);\n      clientRect = clone$1(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && NodeType.isText(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect = function (item) {\n      var clientRect, clientRects;\n      clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$1(clientRects[0]);\n      } else {\n        clientRect = clone$1(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var beforeNode, node;\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), true));\n          }\n        }\n      };\n      if (isText$4(caretPosition.container())) {\n        addCharacterOffset(caretPosition.container(), caretPosition.offset());\n        return clientRects;\n      }\n      if (isElement$3(caretPosition.container())) {\n        if (caretPosition.isAtEnd()) {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n          }\n        } else {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n            return clientRects;\n          }\n          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    function CaretPosition(container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range;\n        range = createRange(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    }\n    (function (CaretPosition) {\n      CaretPosition.fromRangeStart = function (range) {\n        return CaretPosition(range.startContainer, range.startOffset);\n      };\n      CaretPosition.fromRangeEnd = function (range) {\n        return CaretPosition(range.endContainer, range.endOffset);\n      };\n      CaretPosition.after = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node) + 1);\n      };\n      CaretPosition.before = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node));\n      };\n      CaretPosition.isAbove = function (pos1, pos2) {\n        return liftN([\n          head(pos2.getClientRects()),\n          last(pos1.getClientRects())\n        ], isAbove).getOr(false);\n      };\n      CaretPosition.isBelow = function (pos1, pos2) {\n        return liftN([\n          last(pos2.getClientRects()),\n          head(pos1.getClientRects())\n        ], isBelow).getOr(false);\n      };\n      CaretPosition.isAtStart = function (pos) {\n        return pos ? pos.isAtStart() : false;\n      };\n      CaretPosition.isAtEnd = function (pos) {\n        return pos ? pos.isAtEnd() : false;\n      };\n      CaretPosition.isTextPosition = function (pos) {\n        return pos ? NodeType.isText(pos.container()) : false;\n      };\n      CaretPosition.isElementPosition = function (pos) {\n        return CaretPosition.isTextPosition(pos) === false;\n      };\n    }(CaretPosition || (CaretPosition = {})));\n    var CaretPosition$1 = CaretPosition;\n\n    var isText$5 = NodeType.isText;\n    var isBogus$1 = NodeType.isBogus;\n    var nodeIndex$1 = DOMUtils$1.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus$1(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return ArrUtils.reduce(node.childNodes, function (result, node) {\n        if (isBogus$1(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$5(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index, numTextFragments;\n      nodes = getChildNodes(normalizedParent(node));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      numTextFragments = ArrUtils.reduce(nodes, function (result, node, i) {\n        if (isText$5(node) && isText$5(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames([node.nodeName]));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$5(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$2 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$5(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil(root, container);\n      parents = ArrUtils.filter(parents, not(NodeType.isBogus));\n      path = path.concat(ArrUtils.map(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = ArrUtils.filter(nodes, function (node, index) {\n        return !isText$5(node) || !isText$5(nodes[index - 1]);\n      });\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$5(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$5(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$5(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition$1(container, offset);\n    };\n    var resolve$1 = function (root, path) {\n      var parts, container, offset;\n      if (!path) {\n        return null;\n      }\n      parts = path.split(',');\n      path = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      container = ArrUtils.reduce(path, function (result, value) {\n        value = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!value) {\n          return null;\n        }\n        if (value[1] === 'text()') {\n          value[1] = '#text';\n        }\n        return resolvePathItem(result, value[1], parseInt(value[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$5(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex$1(container) + 1;\n        } else {\n          offset = nodeIndex$1(container);\n        }\n        return CaretPosition$1(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var trimEmptyTextNode = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode(dom, node.previousSibling);\n      trimEmptyTextNode(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Option.from(frag.firstChild);\n      var lastChild = Option.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (NodeType.isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isContentEditableFalse$2 = NodeType.isContentEditableFalse;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && NodeType.isText(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (NodeType.isText(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      return bookmark;\n    };\n    var findIndex$2 = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (NodeType.isElement(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint(rng, true);\n      moveEndPoint(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (NodeType.isElement(node)) {\n        node = getNode(node, offset);\n        if (isContentEditableFalse$2(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer(node)) {\n        if (NodeType.isText(node) && isCaretContainerBlock(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$2(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeStart(rng)),\n        end: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        'id': id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: 1\n      });\n      return { id: id };\n    };\n    var getBookmark = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(Zwsp.trim, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var GetBookmark = {\n      getBookmark: getBookmark,\n      getUndoBookmark: curry(getOffsetBookmark, identity, true),\n      getPersistentBookmark: getPersistentBookmark\n    };\n\n    var CARET_ID = '_mce_caret';\n    var isCaretNode = function (node) {\n      return NodeType.isElement(node) && node.id === CARET_ID;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isElement$4 = NodeType.isElement;\n    var isText$6 = NodeType.isText;\n    var removeNode = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var getNodeValue = function (node) {\n      try {\n        return node.nodeValue;\n      } catch (ex) {\n        return '';\n      }\n    };\n    var setNodeValue = function (node, text) {\n      if (text.length === 0) {\n        removeNode(node);\n      } else {\n        node.nodeValue = text;\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = Zwsp.trim(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$5(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        setNodeValue(caretContainer, text);\n        return CaretPosition$1(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf(from$1(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition$1(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$5(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$6(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition$1.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$5 = function (caretContainerNode) {\n      if (isElement$4(caretContainerNode) && isCaretContainer(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode(caretContainerNode);\n        }\n      }\n      if (isText$6(caretContainerNode)) {\n        var text = Zwsp.trim(getNodeValue(caretContainerNode));\n        setNodeValue(caretContainerNode, text);\n      }\n    };\n    var CaretContainerRemove = {\n      removeAndReposition: removeAndReposition,\n      remove: remove$5\n    };\n\n    var browser$2 = PlatformDetection$1.detect().browser;\n    var isContentEditableFalse$3 = NodeType.isContentEditableFalse;\n    var isTableCell$1 = function (node) {\n      return NodeType.isElement(node) && /^(TD|TH)$/i.test(node.tagName);\n    };\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var docElm, scrollX, scrollY, margin, rootRect;\n      if (root.tagName === 'BODY') {\n        docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var contentEditableFalseNodes, node, sibling, i, data;\n      contentEditableFalseNodes = DomQuery('*[contentEditable=false]', root);\n      for (i = 0; i < contentEditableFalseNodes.length; i++) {\n        node = contentEditableFalseNodes[i];\n        sibling = node.previousSibling;\n        if (endsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (root, isBlock, hasFocus) {\n      var lastVisualCaret = Cell(Option.none());\n      var cursorInterval, caretContainerNode;\n      var show = function (before, element) {\n        var clientRect, rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock('p', element, before);\n          clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(clientRect).appendTo(root)[0];\n          lastVisualCaret.set(Option.some({\n            caret: caret,\n            element: element,\n            before: before\n          }));\n          lastVisualCaret.get().each(function (caretState) {\n            if (before) {\n              DomQuery(caretState.caret).addClass('mce-visual-caret-before');\n            }\n          });\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isContentEditableFalse$3(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          CaretContainerRemove.remove(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.get().each(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.set(Option.none());\n        });\n        Delay.clearInterval(cursorInterval);\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.get().each(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isFakeCaretTarget = function (node) {\n      return isContentEditableFalse$3(node) || NodeType.isTable(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$4 = NodeType.isContentEditableFalse;\n    var isBlockLike = NodeType.matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer$2 = isCaretContainer;\n    var isCaretContainerBlock$1 = isCaretContainerBlock;\n    var isElement$5 = NodeType.isElement;\n    var isCaretCandidate$2 = isCaretCandidate;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock$1(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new TreeWalker(node, rootNode);\n      if (isBackwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.prev, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.next, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock(caretPosition1.container(), rootNode) === getParentBlock(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      var container, offset;\n      if (!caretPosition) {\n        return null;\n      }\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (!isElement$5(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock(node1, root) === getParentBlock(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var sibling, siblingName;\n      if (left) {\n        siblingName = 'previousSibling';\n      } else {\n        siblingName = 'nextSibling';\n      }\n      while (node && node !== root) {\n        sibling = node[siblingName];\n        if (isCaretContainer$2(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$4(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$2(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$1 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node, container, offset, location;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      container = range.startContainer;\n      offset = range.startOffset;\n      if (isCaretContainerBlock(container)) {\n        if (!isElement$5(container)) {\n          container = container.parentNode;\n        }\n        location = container.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$1(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (NodeType.isText(container)) {\n        if (isCaretContainer$2(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$1(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Option.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$4);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Option.from(pos.getNode()).map(Element.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Option.from(pos.getNode(true)).map(Element.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && NodeType.isBr(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$5 = NodeType.isContentEditableFalse;\n    var isText$7 = NodeType.isText;\n    var isElement$6 = NodeType.isElement;\n    var isBr$4 = NodeType.isBr;\n    var isCaretCandidate$3 = isCaretCandidate;\n    var isAtomic$1 = isAtomic;\n    var isEditableCaretCandidate$1 = isEditableCaretCandidate;\n    var getParents = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate$3(node.previousSibling) && !isText$7(node.previousSibling)) {\n          return CaretPosition$1.before(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate$3(node.nextSibling) && !isText$7(node.nextSibling)) {\n          return CaretPosition$1.after(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$4(node)) {\n          return CaretPosition$1.before(node);\n        }\n        return CaretPosition$1.after(node);\n      }\n      return CaretPosition$1.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate$3(nextSibling)) {\n        if (isText$7(nextSibling)) {\n          return CaretPosition$1(nextSibling, 0);\n        } else {\n          return CaretPosition$1.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition(HDirection.Forwards, CaretPosition$1.after(nextNode), root);\n      }\n    };\n    var findCaretPosition = function (direction, startPos, root) {\n      var node, nextNode, innerNode;\n      var rootContentEditableFalseElm, caretPosition;\n      if (!isElement$6(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition$1.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition$1.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate$3(root.lastChild) && isElement$6(root.lastChild)) {\n          return isBr$4(root.lastChild) ? CaretPosition$1.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$7(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition$1(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition$1(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate$3(nextNode)) {\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, innerNode.data.length);\n                }\n                return CaretPosition$1.after(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, nextNode.data.length);\n            }\n            return CaretPosition$1.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate$3(nextNode)) {\n            if (isBr$4(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, 0);\n                }\n                return CaretPosition$1.before(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, 0);\n            }\n            return CaretPosition$1.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode(node, direction, constant(true), root, true);\n        if (isEditableCaretCandidate$1(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode(node, direction, isEditableCaretCandidate$1, root);\n      rootContentEditableFalseElm = ArrUtils.last(filter(getParents(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition$1.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition$1.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition$1.before(start) : CaretPosition$1.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return NodeType.isBr(node) ? CaretPosition$1.before(node) : CaretPosition$1.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition$1.isTextPosition(from) && !CaretPosition$1.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition$1.isTextPosition(position) && NodeType.isBr(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Option.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Option.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Option.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (NodeType.isText(startNode)) {\n        return Option.some(CaretPosition$1(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate(startNode)) {\n          return Option.some(forward ? CaretPosition$1.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var CaretFinder = {\n      fromPosition: fromPosition,\n      nextPosition: nextPosition,\n      prevPosition: prevPosition,\n      navigate: navigate,\n      navigateIgnore: navigateIgnore,\n      positionIn: positionIn,\n      firstPositionIn: curry(positionIn, true),\n      lastPositionIn: curry(positionIn, false)\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return typeof bookmark.start === 'string';\n    };\n    var isRangeBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var rng, pos;\n      rng = dom.createRng();\n      pos = resolve$1(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$1(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(Zwsp.ZWSP);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return CaretFinder.lastPositionIn(node).fold(function () {\n        return false;\n      }, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return NodeType.isText(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (NodeType.isText(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && NodeType.isText(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            if (suffix === 'start') {\n              container = prev;\n              offset = idx;\n            } else {\n              container = prev;\n              offset = idx;\n            }\n          }\n        }\n        return Option.some(CaretPosition$1(container, offset));\n      } else {\n        return Option.none();\n      }\n    };\n    var alt = function (o1, o2) {\n      return o1.isSome() ? o1 : o2;\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Option.some(rng);\n      } else {\n        return Option.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return liftN([\n        startPos,\n        alt(endPos, startPos)\n      ], function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex$1 = function (dom, bookmark) {\n      return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$2 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Option.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex$1(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Option.some(bookmark.rng);\n        }\n      }\n      return Option.none();\n    };\n    var ResolveBookmark = { resolve: resolve$2 };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return GetBookmark.getBookmark(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      ResolveBookmark.resolve(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return NodeType.isElement(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var Bookmarks = {\n      getBookmark: getBookmark$1,\n      moveToBookmark: moveToBookmark,\n      isBookmarkNode: isBookmarkNode$1\n    };\n\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer, walker, node, nodes;\n      if (rng.startContainer === rng.endContainer) {\n        if (isInlineBlock(rng.startContainer.childNodes[rng.startOffset])) {\n          return;\n        }\n      }\n      if (container.nodeType === 1) {\n        nodes = container.childNodes;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3 && !isWhiteSpaceNode(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        next = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[next]; node; node = node[next]) {\n          if (node.nodeType === 1 || !isWhiteSpaceNode(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (name.nodeType) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode = function (node) {\n      return node && node.nodeType === 3 && /^([\\t \\r\\n]+|)$/.test(node.nodeValue);\n    };\n    var replaceVars = function (value, vars) {\n      if (typeof value !== 'string') {\n        value = value(vars);\n      } else if (vars) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$1 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var FormatUtils = {\n      isInlineBlock: isInlineBlock,\n      moveStart: moveStart,\n      getNonWhiteSpaceSibling: getNonWhiteSpaceSibling,\n      isTextBlock: isTextBlock$1,\n      isValid: isValid,\n      isWhiteSpaceNode: isWhiteSpaceNode,\n      replaceVars: replaceVars,\n      isEq: isEq,\n      normalizeStyleValue: normalizeStyleValue,\n      getStyle: getStyle,\n      getTextDecoration: getTextDecoration,\n      getParents: getParents$1\n    };\n\n    var isBookmarkNode$2 = Bookmarks.isBookmarkNode;\n    var getParents$2 = FormatUtils.getParents, isWhiteSpaceNode$1 = FormatUtils.isWhiteSpaceNode, isTextBlock$2 = FormatUtils.isTextBlock;\n    var findLeaf = function (node, offset) {\n      if (typeof offset === 'undefined') {\n        offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n      }\n      while (node && node.hasChildNodes()) {\n        node = node.childNodes[offset];\n        if (node) {\n          offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n        }\n      }\n      return {\n        node: node,\n        offset: offset\n      };\n    };\n    var excludeTrailingWhitespace = function (endContainer, endOffset) {\n      var leaf = findLeaf(endContainer, endOffset);\n      if (leaf.node) {\n        while (leaf.node && leaf.offset === 0 && leaf.node.previousSibling) {\n          leaf = findLeaf(leaf.node.previousSibling);\n        }\n        if (leaf.node && leaf.offset > 0 && leaf.node.nodeType === 3 && leaf.node.nodeValue.charAt(leaf.offset - 1) === ' ') {\n          if (leaf.offset > 1) {\n            endContainer = leaf.node;\n            endContainer.splitText(leaf.offset - 1);\n          }\n        }\n      }\n      return endContainer;\n    };\n    var isBogusBr = function (node) {\n      return node.nodeName === 'BR' && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (parent.nodeType === 1 && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var findSpace = function (start, remove, node, offset) {\n      var pos, pos2;\n      var str = node.nodeValue;\n      if (typeof offset === 'undefined') {\n        offset = start ? str.length : 0;\n      }\n      if (start) {\n        pos = str.lastIndexOf(' ', offset);\n        pos2 = str.lastIndexOf('\\xA0', offset);\n        pos = pos > pos2 ? pos : pos2;\n        if (pos !== -1 && !remove && (pos < offset || !start) && pos <= str.length) {\n          pos++;\n        }\n      } else {\n        pos = str.indexOf(' ', offset);\n        pos2 = str.indexOf('\\xA0', offset);\n        pos = pos !== -1 && (pos2 === -1 || pos < pos2) ? pos : pos2;\n      }\n      return pos;\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, remove) {\n      var node, pos, lastTextNode;\n      if (container.nodeType === 3) {\n        pos = findSpace(start, remove, container, offset);\n        if (pos !== -1) {\n          return {\n            container: container,\n            offset: pos\n          };\n        }\n        lastTextNode = container;\n      }\n      var walker = new TreeWalker(container, dom.getParent(container, dom.isBlock) || body);\n      while (node = walker[start ? 'prev' : 'next']()) {\n        if (node.nodeType === 3 && !isBookmarkNode$2(node.parentNode)) {\n          lastTextNode = node;\n          pos = findSpace(start, remove, node);\n          if (pos !== -1) {\n            return {\n              container: node,\n              offset: pos\n            };\n          }\n        } else if (dom.isBlock(node) || FormatUtils.isEq(node, 'BR')) {\n          break;\n        }\n      }\n      if (lastTextNode) {\n        if (start) {\n          offset = 0;\n        } else {\n          offset = lastTextNode.length;\n        }\n        return {\n          container: lastTextNode,\n          offset: offset\n        };\n      }\n    };\n    var findSelectorEndPoint = function (dom, format, rng, container, siblingName) {\n      var parents, i, y, curFormat;\n      if (container.nodeType === 3 && container.nodeValue.length === 0 && container[siblingName]) {\n        container = container[siblingName];\n      }\n      parents = getParents$2(dom, container);\n      for (i = 0; i < parents.length; i++) {\n        for (y = 0; y < format.length; y++) {\n          curFormat = format[y];\n          if ('collapsed' in curFormat && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, format, container, siblingName) {\n      var node;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      if (!format[0].wrapper) {\n        node = dom.getParent(container, format[0].block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(container.nodeType === 3 ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock$2(editor, node);\n        }, scopeRoot);\n      }\n      if (node && format[0].wrapper) {\n        node = getParents$2(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (FormatUtils.isEq(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var findParentContainer = function (dom, format, startContainer, startOffset, endContainer, endOffset, start) {\n      var container, parent, sibling, siblingName, root;\n      container = parent = start ? startContainer : endContainer;\n      siblingName = start ? 'previousSibling' : 'nextSibling';\n      root = dom.getRoot();\n      if (container.nodeType === 3 && !isWhiteSpaceNode$1(container)) {\n        if (start ? startOffset > 0 : endOffset < container.nodeValue.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!format[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          if (!isBookmarkNode$2(sibling) && !isWhiteSpaceNode$1(sibling) && !isBogusBr(sibling)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var expandRng = function (editor, rng, format, remove) {\n      var endPoint, startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = getNode(startContainer, startOffset);\n        if (startContainer.nodeType === 3) {\n          startOffset = 0;\n        }\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getNode(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (endContainer.nodeType === 3) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isBookmarkNode$2(startContainer.parentNode) || isBookmarkNode$2(startContainer)) {\n        startContainer = isBookmarkNode$2(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (startContainer.nodeType === 3) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isBookmarkNode$2(endContainer.parentNode) || isBookmarkNode$2(endContainer)) {\n        endContainer = isBookmarkNode$2(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (endContainer.nodeType === 3) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        endPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, remove);\n        if (endPoint) {\n          startContainer = endPoint.container;\n          startOffset = endPoint.offset;\n        }\n        endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, remove);\n        if (endPoint) {\n          endContainer = endPoint.container;\n          endOffset = endPoint.offset;\n        }\n      }\n      if (format[0].inline) {\n        endContainer = remove ? endContainer : excludeTrailingWhitespace(endContainer, endOffset);\n      }\n      if (format[0].inline || format[0].block_expand) {\n        if (!format[0].inline || (startContainer.nodeType !== 3 || startOffset === 0)) {\n          startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n        }\n        if (!format[0].inline || (endContainer.nodeType !== 3 || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n        }\n      }\n      if (format[0].selector && format[0].expand !== false && !format[0].inline) {\n        startContainer = findSelectorEndPoint(dom, format, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, format, rng, endContainer, 'nextSibling');\n      }\n      if (format[0].block || format[0].selector) {\n        startContainer = findBlockEndPoint(editor, format, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, format, endContainer, 'nextSibling');\n        if (format[0].block) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (startContainer.nodeType === 1) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (endContainer.nodeType === 1) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n    var ExpandRange = { expandRng: expandRng };\n\n    var each$8 = Tools.each;\n    var getEndChild = function (container, index) {\n      var childNodes = container.childNodes;\n      index--;\n      if (index > childNodes.length - 1) {\n        index = childNodes.length - 1;\n      } else if (index < 0) {\n        index = 0;\n      }\n      return childNodes[index] || container;\n    };\n    var walk$1 = function (dom, rng, callback) {\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var ancestor;\n      var startPoint;\n      var endPoint;\n      var node;\n      var parent;\n      var siblings;\n      var nodes;\n      nodes = dom.select('td[data-mce-selected],th[data-mce-selected]');\n      if (nodes.length > 0) {\n        each$8(nodes, function (node) {\n          callback([node]);\n        });\n        return;\n      }\n      var exclude = function (nodes) {\n        var node;\n        node = nodes[0];\n        if (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n          nodes.splice(0, 1);\n        }\n        node = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        do {\n          if (node.parentNode === root) {\n            return node;\n          }\n          node = node.parentNode;\n        } while (node);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (node = startNode, parent = node.parentNode; node && node !== endNode; node = parent) {\n          parent = node.parentNode;\n          siblings = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings.length) {\n            if (!next) {\n              siblings.reverse();\n            }\n            callback(exclude(siblings));\n          }\n        }\n      };\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = startContainer.childNodes[startOffset];\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getEndChild(endContainer, endOffset);\n      }\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      for (node = startContainer; node; node = node.parentNode) {\n        if (node === endContainer) {\n          return walkBoundary(startContainer, ancestor, true);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      for (node = endContainer; node; node = node.parentNode) {\n        if (node === startContainer) {\n          return walkBoundary(endContainer, ancestor);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n    var RangeWalk = { walk: walk$1 };\n\n    var zeroWidth = function () {\n      return '\\uFEFF';\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$5 = function (element) {\n      return api.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText(elem) && get$5(elem) === zeroWidth();\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem)) {\n          return 'caret';\n        } else if (!FormatUtils.isValid(editor, wrapName, nodeName) || !FormatUtils.isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var shouldApplyToTrailingSpaces = function (rng) {\n      return rng.startContainer.nodeType === 3 && rng.startContainer.nodeValue.length >= rng.startOffset && rng.startContainer.nodeValue[rng.startOffset] === '\\xA0';\n    };\n    var applyWordGrab = function (editor, rng) {\n      var r = ExpandRange.expandRng(editor, rng, [{ inline: true }], shouldApplyToTrailingSpaces(rng));\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = Element.fromTag('span', eDoc);\n      add$3(master, annotation());\n      set(master, '' + dataAnnotationId(), uid);\n      set(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll(master, attributes);\n      add$4(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = Cell(Option.none());\n      var finishWrapper = function () {\n        wrapper.set(Option.none());\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(Option.some(nu));\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$1(elem, w);\n            break;\n          }\n        case 'skipping':\n        case 'existing':\n        case 'caret':\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map(nodes, Element.fromDom);\n        processElements(elems);\n      };\n      RangeWalk.walk(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var initialRng = editor.selection.getRng();\n        if (initialRng.collapsed) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (editor.selection.getRng().collapsed) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set$1(wrapper, '\\xA0');\n          editor.selection.getRng().insertNode(wrapper.dom());\n          editor.selection.select(wrapper.dom());\n        } else {\n          var bookmark = GetBookmark.getPersistentBookmark(editor.selection, false);\n          var rng = editor.selection.getRng();\n          annotate(editor, rng, name, settings.decorate, data);\n          editor.selection.moveToBookmark(bookmark);\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$1();\n      setup$1(editor, registry);\n      var changes = setup(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Option.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map(elems, function (elem) {\n              return elem.dom();\n            });\n          });\n        }\n      };\n    };\n\n    var whiteSpaceRegExp$3 = /^[ \\t\\r\\n]*$/;\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$2 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent = node.parent; parent && parent !== root; parent = parent.parent) {\n          sibling = parent[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var Node$1 = function () {\n      function Node(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      Node.create = function (name, attrs) {\n        var node = new Node(name, typeLookup[name] || 1);\n        if (attrs) {\n          for (var attrName in attrs) {\n            node.attr(attrName, attrs[attrName]);\n          }\n        }\n        return node;\n      };\n      Node.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      Node.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          for (var key in name) {\n            self.attr(key, name[key]);\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      Node.prototype.clone = function () {\n        var self = this;\n        var clone = new Node(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      Node.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      Node.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      Node.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      Node.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      Node.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      Node.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      Node.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      Node.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              var i = node.attributes.length;\n              while (i--) {\n                var name = node.attributes[i].name;\n                if (name === 'name' || name.indexOf('data-mce-bookmark') === 0) {\n                  return false;\n                }\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      };\n      Node.prototype.walk = function (prev) {\n        return walk$2(this, null, prev);\n      };\n      return Node;\n    }();\n\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var trimComments = function (text) {\n      return text.replace(/<!--|-->/g, '');\n    };\n    var isInvalidUri = function (settings, uri) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return settings.allow_svg_data_urls === false && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findEndTagIndex = function (schema, html, startIndex) {\n      var count = 1, index, matches, tokenRegExp, shortEndedElements;\n      shortEndedElements = schema.getShortEndedElements();\n      tokenRegExp = /<([!?\\/])?([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\/|\\s+)>/g;\n      tokenRegExp.lastIndex = index = startIndex;\n      while (matches = tokenRegExp.exec(html)) {\n        index = tokenRegExp.lastIndex;\n        if (matches[1] === '/') {\n          count--;\n        } else if (!matches[1]) {\n          if (matches[2] in shortEndedElements) {\n            continue;\n          }\n          count++;\n        }\n        if (count === 0) {\n          break;\n        }\n      }\n      return index;\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name = matches[1];\n        var value = matches[2];\n        return typeof name === 'string' && name.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    function SaxParser(settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var noop = function () {\n      };\n      settings = settings || {};\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parse = function (html) {\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, removeInternalElements, shortEndedElements, fillAttrsMap, isShortEnded;\n        var validate, elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced, processHtml;\n        var anyAttributesRequired, selfClosing, tokenRegExp, attrRegExp, specialElements, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var fixSelfClosing;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var parseAttribute = function (match, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = name in fillAttrsMap ? name : decode(value || val2 || val3 || '');\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)-->)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:!DOCTYPE([\\\\w\\\\W]*?)>)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/|\\\\s+)>)' + ')', 'g');\n        attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        shortEndedElements = schema.getShortEndedElements();\n        selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        fillAttrsMap = schema.getBoolAttrs();\n        validate = settings.validate;\n        removeInternalElements = settings.remove_internals;\n        fixSelfClosing = settings.fix_self_closing;\n        specialElements = schema.getSpecialElements();\n        processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          if (index < matches.index) {\n            text(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[6]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[7]) {\n            if (matches.index + matches[0].length > html.length) {\n              text(decode(html.substr(matches.index)));\n              index = matches.index + matches[0].length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[8]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[8]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, parseAttribute);\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matches[0].length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  text(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            if (value.charAt(0) === '>') {\n              value = ' ' + value;\n            }\n            if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n              value = ' ' + value;\n            }\n            comment(value);\n          } else if (value = matches[2]) {\n            cdata(trimComments(value));\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if (value = matches[4]) {\n            pi(value, matches[5]);\n          }\n          index = matches.index + matches[0].length;\n        }\n        if (index < html.length) {\n          text(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      return { parse: parse };\n    }\n    (function (SaxParser) {\n      SaxParser.findEndTag = findEndTagIndex;\n    }(SaxParser || (SaxParser = {})));\n    var SaxParser$1 = SaxParser;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var content = html;\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var endTagIndex, index, matchLength, matches, shortEndedElements;\n      var schema = serializer.schema;\n      content = trimHtml(serializer.getTempAttrs(), content);\n      shortEndedElements = schema.getShortEndedElements();\n      while (matches = bogusAllRegExp.exec(content)) {\n        index = bogusAllRegExp.lastIndex;\n        matchLength = matches[0].length;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser$1.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return Zwsp.trim(content);\n    };\n    var trimExternal = trimInternal;\n    var TrimHtml = {\n      trimExternal: trimExternal,\n      trimInternal: trimInternal\n    };\n\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return bodyObj.hasOwnProperty(editor.id) ? bodyObj[editor.id] : defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', constant(true), 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.settings.content_css;\n      if (isString(contentCss)) {\n        return map(contentCss.split(','), trim$2);\n      } else if (isArray(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var Settings = {\n      getIframeAttrs: getIframeAttrs,\n      getDocType: getDocType,\n      getDocumentBaseUrl: getDocumentBaseUrl,\n      getBodyId: getBodyId,\n      getBodyClass: getBodyClass,\n      getContentSecurityPolicy: getContentSecurityPolicy,\n      shouldPutBrInPre: shouldPutBrInPre,\n      getForcedRootBlock: getForcedRootBlock,\n      getForcedRootBlockAttrs: getForcedRootBlockAttrs,\n      getBrNewLineSelector: getBrNewLineSelector,\n      getNoNewLineSelector: getNoNewLineSelector,\n      shouldKeepStyles: shouldKeepStyles,\n      shouldEndContainerOnEmptyBlock: shouldEndContainerOnEmptyBlock,\n      getFontStyleValues: getFontStyleValues,\n      getFontSizeClasses: getFontSizeClasses,\n      getIconPackName: getIconPackName,\n      getIconsUrl: getIconsUrl,\n      getImagesDataImgFilter: getImagesDataImgFilter,\n      isAutomaticUploadsEnabled: isAutomaticUploadsEnabled,\n      shouldReuseFileName: shouldReuseFileName,\n      shouldReplaceBlobUris: shouldReplaceBlobUris,\n      getImageUploadUrl: getImageUploadUrl,\n      getImageUploadBasePath: getImageUploadBasePath,\n      getImagesUploadCredentials: getImagesUploadCredentials,\n      getImagesUploadHandler: getImagesUploadHandler,\n      shouldUseContentCssCors: shouldUseContentCssCors,\n      getLanguageCode: getLanguageCode,\n      getLanguageUrl: getLanguageUrl,\n      shouldIndentUseMargin: shouldIndentUseMargin,\n      getIndentation: getIndentation,\n      getContentCss: getContentCss,\n      getDirectionality: getDirectionality,\n      getInlineBoundarySelector: getInlineBoundarySelector\n    };\n\n    var defaultFormat = 'html';\n    var trimEmptyContents = function (editor, html) {\n      var blockName = Settings.getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var getContentFromBody = function (editor, args, body) {\n      var content;\n      args.format = args.format ? args.format : defaultFormat;\n      args.get = true;\n      args.getInner = true;\n      if (!args.no_events) {\n        editor.fire('BeforeGetContent', args);\n      }\n      if (args.format === 'raw') {\n        content = Tools.trim(TrimHtml.trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = Zwsp.trim(body.innerText || body.textContent);\n      } else if (args.format === 'tree') {\n        return editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      if (args.format !== 'text' && !isWsPreserveElement(Element.fromDom(body))) {\n        args.content = Tools.trim(content);\n      } else {\n        args.content = content;\n      }\n      if (!args.no_events) {\n        editor.fire('GetContent', args);\n      }\n      return args.content;\n    };\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return Option.from(editor.getBody()).fold(constant(args.format === 'tree' ? new Node$1('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, body);\n      });\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      var indent, indentBefore, indentAfter, encode, htmlOutput;\n      settings = settings || {};\n      indent = settings.indent;\n      indentBefore = makeMap$3(settings.indent_before || '');\n      indentAfter = makeMap$3(settings.indent_after || '');\n      encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var Serializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var handlers, validate;\n        validate = settings.validate;\n        handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          var name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n          if (!handler) {\n            name = node.name;\n            isEmpty = node.shortEnded;\n            attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              sortedAttrs = [];\n              sortedAttrs.map = {};\n              elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (i = 0, l = attrs.length; i < l; i++) {\n                  attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name in nodeMatches) {\n        if (nodeMatches.hasOwnProperty(name)) {\n          matches.push(nodeMatches[name]);\n        }\n      }\n      for (var name in attrMatches) {\n        if (attrMatches.hasOwnProperty(name)) {\n          matches.push(attrMatches[name]);\n        }\n      }\n      return matches;\n    };\n    var filter$2 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each(matches, function (match) {\n        each(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var hasFocus = function (element) {\n      var doc = owner(element).dom();\n      return element.dom() === doc.activeElement;\n    };\n    var active = function (_doc) {\n      var doc = _doc !== undefined ? _doc.dom() : domGlobals.document;\n      return Option.from(doc.activeElement).map(Element.fromDom);\n    };\n    var search = function (element) {\n      return active(owner(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$3 };\n\n    var adt = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$3 = adt.before;\n    var on = adt.on;\n    var after$2 = adt.after;\n    var Situ = {\n      before: before$3,\n      on: on,\n      after: after$2,\n      cata: cata,\n      getStart: getStart\n    };\n\n    var adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$1.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$1.domRange;\n    var relative = adt$1.relative;\n    var exact = adt$1.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$3 = PlatformDetection$1.detect().browser;\n    var clamp = function (offset, element) {\n      var max = isText(element) ? get$5(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return Selection.range(rng.start(), clamp(rng.soffset(), rng.start()), rng.finish(), clamp(rng.foffset(), rng.finish()));\n    };\n    var isOrContains = function (root, elm) {\n      return !NodeType.isRestrictedNode(elm.dom()) && (contains$3(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start()) && isOrContains(root, rng.finish());\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$3.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return Selection.range(Element.fromDom(r.startContainer), r.startOffset, Element.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Option.none() : Option.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark$2 = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom()).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = domGlobals.document.createRange();\n      try {\n        rng.setStart(bookmark.start().dom(), bookmark.soffset());\n        rng.setEnd(bookmark.finish().dom(), bookmark.foffset());\n        return Option.some(rng);\n      } catch (_) {\n        return Option.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark$2(Element.fromDom(editor.getBody())) : Option.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = Element.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Option.from(rng) : Option.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Option.none();\n      return bookmark.bind(curry(validate, Element.fromDom(editor.getBody()))).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        editor.selection.setRng(rng);\n      });\n    };\n    var SelectionBookmark = {\n      store: store,\n      storeNative: storeNative,\n      readRange: readRange,\n      restore: restore,\n      getRng: getRng,\n      getBookmark: getBookmark$2,\n      validate: validate\n    };\n\n    var isEditorUIElement = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils$1.DOM.bind(domGlobals.document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils$1.DOM.unbind(domGlobals.document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        SelectionBookmark.store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = PlatformDetection$1.detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          SelectionBookmark.store(editor);\n        }\n      });\n    };\n    var register = function (editor) {\n      var throttledStore = first(function () {\n        SelectionBookmark.store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n    var SelectionRestore = { register: register };\n\n    var documentFocusInHandler;\n    var DOM$1 = DOMUtils$1.DOM;\n    var isEditorUIElement$1 = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = editor ? editor.settings.custom_ui_selector : '';\n      var parent = DOM$1.getParent(elm, function (elm) {\n        return isEditorUIElement$1(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function () {\n      try {\n        return domGlobals.document.activeElement;\n      } catch (ex) {\n        return domGlobals.document.body;\n      }\n    };\n    var registerEvents = function (editorManager, e) {\n      var editor = e.editor;\n      SelectionRestore.register(editor);\n      editor.on('focusin', function () {\n        var self = this;\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== self) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: self });\n          }\n          editorManager.setActive(self);\n          editorManager.focusedEditor = self;\n          self.fire('focus', { blurredEditor: focusedEditor });\n          self.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        var self = this;\n        Delay.setEditorTimeout(self, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(self, getActiveElement()) && focusedEditor === self) {\n            self.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          var target;\n          target = e.target;\n          if (activeEditor && target.ownerDocument === domGlobals.document) {\n            if (target !== domGlobals.document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n              activeEditor.fire('blur', { focusedEditor: null });\n              editorManager.focusedEditor = null;\n            }\n          }\n        };\n        DOM$1.bind(domGlobals.document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$1.unbind(domGlobals.document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$2 = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n    var FocusController = {\n      setup: setup$2,\n      isEditorUIElement: isEditorUIElement$1,\n      isEditorContentAreaElement: isEditorContentAreaElement,\n      isUIElement: isUIElement\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Option.from(getNode(rng.startContainer, rng.startOffset)).map(Element.fromDom) : Option.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Option.some(node);\n        } else if (contains$3(root, node) === false) {\n          return Option.some(root);\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var normalizeSelection = function (editor, rng) {\n      getFocusInElement(Element.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return CaretFinder.firstPositionIn(elm.dom());\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus(Element.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(Element.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      return active().filter(function (elem) {\n        return !FocusController.isEditorContentAreaElement(elem.dom()) && FocusController.isUIElement(editor, elem.dom());\n      }).isSome();\n    };\n    var hasFocus$1 = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus$1(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n        SelectionBookmark.getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      skipFocus ? activateEditor(editor) : focusEditor(editor);\n    };\n    var EditorFocus = {\n      focus: focus,\n      hasFocus: hasFocus$1,\n      hasEditorOrUiFocus: hasEditorOrUiFocus\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof Node$1;\n    };\n    var moveSelection = function (editor) {\n      if (EditorFocus.hasFocus(editor)) {\n        CaretFinder.firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = NodeType.isTable(node) ? CaretFinder.firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html) {\n      editor.dom.setHTML(editor.getBody(), html);\n      moveSelection(editor);\n    };\n    var setContentString = function (editor, body, content, args) {\n      var forcedRootBlockName, padd;\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        forcedRootBlockName = Settings.getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, editor.settings.forced_root_block_attrs, content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = Serializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(Element.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$2(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = Serializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(Element.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setContent = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.format = args.format ? args.format : defaultFormat$1;\n      args.set = true;\n      args.content = isTreeNode(content) ? '' : content;\n      if (!isTreeNode(content) && !args.no_events) {\n        editor.fire('BeforeSetContent', args);\n        content = args.content;\n      }\n      return Option.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, args) : setContentString(editor, body, content, args);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var Events = {\n      firePreProcess: firePreProcess,\n      firePostProcess: firePostProcess,\n      fireRemove: fireRemove,\n      fireDetach: fireDetach,\n      fireSwitchMode: fireSwitchMode,\n      fireObjectResizeStart: fireObjectResizeStart,\n      fireObjectResized: fireObjectResized\n    };\n\n    var DOM$2 = DOMUtils$1.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$2.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Option.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$2.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove$6 = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$2.remove(element.nextSibling);\n        }\n        Events.fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        Events.fireDetach(editor);\n        DOM$2.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var deep$1 = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$2.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep$1);\n    var merge = baseMerge(shallow$1);\n\n    var sectionResult = Immutable('sections', 'settings');\n    var detection = PlatformDetection$1.detect();\n    var isTouch = detection.deviceType.isTouch();\n    var isPhone = detection.deviceType.isPhone();\n    var mobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultMobileSettings = { theme: 'mobile' };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map(isString(pluginNames) ? pluginNames.split(' ') : [], trim$2);\n      return filter(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterMobilePlugins = function (plugins) {\n      return filter(plugins, curry(contains, mobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = sections.hasOwnProperty(name) ? sections[name] : {};\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return sectionResult.sections().hasOwnProperty(name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getDefaultSettings = function (id, documentBaseUrl, editor) {\n      return {\n        id: id,\n        theme: 'silver',\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var processPlugins = function (isTouchDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = isTouchDevice && isSectionTheme(sectionResult, 'mobile', 'mobile') ? filterMobilePlugins(mobilePlugins) : isTouchDevice && hasSection(sectionResult, 'mobile') ? mobilePlugins : desktopPlugins;\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isTouchDevice, sectionResult) {\n      var isInline = sectionResult.settings().inline;\n      return isTouchDevice && hasSection(sectionResult, 'mobile') && !isInline;\n    };\n    var combineSettings = function (isTouchDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isPhone ? { mobile: defaultMobileSettings } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isTouchDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isTouchDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(id, documentBaseUrl, editor);\n      return combineSettings(isTouch, isPhone, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Option.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom();\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$2(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect$1 = function (elm) {\n      return elm.dom().getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect$1(elm);\n      var deltaX = inline ? clientRect.left + elm.dom().clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom().clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = Element.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Option.from(node).map(Element.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(function (container) {\n        return contains$3(owner(container), container);\n      }).getOr(false);\n    };\n    var EditorView = {\n      isXYInContentArea: isXYInContentArea,\n      isEditorAttachedToDom: isEditorAttachedToDom\n    };\n\n    function NotificationManagerImpl() {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    }\n\n    function NotificationManager(editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Option.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec) {\n        if (editor.removed || !EditorView.isEditorAttachedToDom(editor)) {\n          return;\n        }\n        return find(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n          });\n          addNotification(notification);\n          reposition();\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = function () {\n        return notifications;\n      };\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = editor.settings.service_message;\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warn',\n              timeout: 0\n            });\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    }\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          return f ? f.apply(scope, arguments) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Option.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        SelectionBookmark.store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        getImplementation().alert(message, funcBind(scope ? scope : this, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        getImplementation().confirm(message, funcBind(scope ? scope : this, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (msg) {\n      domGlobals.console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (url, name) {\n      logError(createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (url, name) {\n      logError(createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (url, name) {\n      logError(createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = domGlobals.window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, arguments);\n        } else {\n          console.log.apply(console, arguments);\n        }\n      }\n    };\n    var ErrorReporter = {\n      pluginLoadError: pluginLoadError,\n      iconsLoadError: iconsLoadError,\n      languageLoadError: languageLoadError,\n      pluginInitError: pluginInitError,\n      uploadError: uploadError,\n      displayError: displayError,\n      initError: initError\n    };\n\n    var getAll = function () {\n      return {\n        'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n        'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n        'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n        'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z\" fill-rule=\"evenodd\"/></svg>',\n        'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z\" fill-rule=\"evenodd\"/></svg>',\n        'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z\" fill-rule=\"evenodd\"/></svg>',\n        'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 1 1 0-2h9.2zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h6.8zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h4.4zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 0 1 0-2h2zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n        'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z\" fill-rule=\"evenodd\"/></svg>',\n        'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8z\" fill-rule=\"evenodd\"/></svg>',\n        'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8z\" fill-rule=\"evenodd\"/></svg>',\n        'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n        'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1z\" fill-rule=\"nonzero\"/></svg>',\n        'border-width': '<svg width=\"24\" height=\"24\"><path d=\"M5 14.8h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 1 1 0-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 0 1-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1z\" fill-rule=\"evenodd\"/></svg>',\n        'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0zm-10-7l-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n        'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n        'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8zM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n        'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 1 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n        'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n        'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n        'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n        'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n        'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n        'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n        'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n        'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n        'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n        'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n        'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n        'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" fill-rule=\"nonzero\"/></svg>',\n        'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n        'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n        'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2z\"/></g></svg>',\n        'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z\"/></svg>',\n        'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6z\" fill-rule=\"evenodd\"/></svg>',\n        'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n        'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n        'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n        'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n        'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n        'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2z\"/><path d=\"M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1z\"/></g></svg>',\n        'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n        'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9zM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n        'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0 1 19 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n        'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4z\" fill-rule=\"nonzero\"/></svg>',\n        'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13z\" fill-rule=\"nonzero\"/></svg>',\n        'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n        'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2zm14-2v2h2a2 2 0 0 0-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 0 0 2-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n        'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2zm2 14h-2v2a2 2 0 0 0 2-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n        'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n        'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n        'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1z\"/></svg>',\n        'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n        'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1zM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4z\"/><path d=\"M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n        'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n        'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n        'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n        'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z\" fill-rule=\"nonzero\"/></svg>',\n        'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\" fill-rule=\"nonzero\"/></svg>',\n        'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n        'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n        'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n        'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n        'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n        'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n        'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n        'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 0 1 1.4 1.4l-2.1 2a2 2 0 1 0 2.7 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n        'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n        'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n        'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n        'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n        'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n        'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n        'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n        'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n        'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n        'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n        'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n        'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n        'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n        'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n        'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n        'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n        'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n        'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z\" fill-rule=\"nonzero\"/></svg>',\n        'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n        'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n        'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n        'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n        'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19zm-1 8.8l.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n        'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n        'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n        'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n        'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n        'paragraph': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n        'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n        'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n        'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n        'plus': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke=\"#000\" stroke-width=\"2\"><path d=\"M12 5v14M5 12h14\"/></g></svg>',\n        'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\" fill-rule=\"evenodd\"/></svg>',\n        'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n        'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n        'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n        'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n        'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1z\"/></g></svg>',\n        'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8zM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1z\" fill-rule=\"evenodd\"/></svg>',\n        'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n        'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7zM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3z\"/></g></svg>',\n        'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5z\" fill-rule=\"evenodd\"/></svg>',\n        'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n        'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n        'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n        'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n        'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n        'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12z\" fill-rule=\"nonzero\"/></svg>',\n        'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 0 0-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 0 0-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 0 0 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n        'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3z\"/></svg>',\n        'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n        'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n        'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n        'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n        'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z\" fill-rule=\"nonzero\"/></g></svg>',\n        'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n        'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n        'table-cell-properties': '<svg width=\"24\" height=\"24\"><path d=\"M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z\" fill-rule=\"evenodd\"/></svg>',\n        'table-cell-select-all': '<svg width=\"24\" height=\"24\"><path d=\"M12.5 5.5v6h6v-6h-6zm-1 0h-6v6h6v-6zm1 13h6v-6h-6v6zm-1 0v-6h-6v6h6zm-7-14h15v15h-15v-15z\" fill-rule=\"nonzero\"/></svg>',\n        'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5.5 5.5v13h13v-13h-13zm-1-1h15v15h-15v-15z\" opacity=\".2\"/><path d=\"M11.5 11.5v-7h1v7h7v1h-7v7h-1v-7h-7v-1h7z\"/></g></svg>',\n        'table-delete-column': '<svg width=\"24\" height=\"24\"><path d=\"M9 11.2l1 1v.2l-1 1v-2.2zm5 1l1-1v2.2l-1-1v-.2zM20 5v14H4V5h16zm-1 2h-4v.8l-.2-.2-.8.8V7h-4v1.4l-.8-.8-.2.2V7H5v11h4v-1.8l.5.5.5-.4V18h4v-1.8l.8.8.2-.3V18h4V7zm-3.9 3.4l-1.8 1.9 1.8 1.9c.4.3.4.9 0 1.2-.3.3-.8.3-1.2 0L12 13.5l-1.8 1.9a.8.8 0 0 1-1.2 0 .9.9 0 0 1 0-1.2l1.8-1.9-1.9-2a.9.9 0 0 1 1.2-1.2l2 2 1.8-1.8c.3-.4.9-.4 1.2 0a.8.8 0 0 1 0 1.1z\" fill-rule=\"evenodd\"/></svg>',\n        'table-delete-row': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 8.8l1.1 1.2-2.4 2.5L18 15l-1.2 1.2-2.5-2.5-2.4 2.5-1.3-1.2 2.5-2.5-2.5-2.5 1.2-1.3 2.6 2.6 2.4-2.5zM4 5h16v14H4V5zm15 5V7H5v3h4.8l1 1H5v3h5.8l-1 1H5v3h14v-3h-.4l-1-1H19v-3h-1.3l1-1h.3z\" fill-rule=\"evenodd\"/></svg>',\n        'table-delete-table': '<svg width=\"24\" height=\"26\"><path d=\"M4 6h16v14H4V6zm1 2v11h14V8H5zm11.7 8.7l-1.5 1.5L12 15l-3.3 3.2-1.4-1.5 3.2-3.2-3.3-3.2 1.5-1.5L12 12l3.2-3.2 1.5 1.5-3.2 3.2 3.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n        'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path d=\"M14.3 9c.4 0 .7.3.7.6v2.2h2.1c.4 0 .7.3.7.7 0 .4-.3.7-.7.7H15v2.2c0 .3-.3.6-.7.6a.7.7 0 0 1-.6-.6v-2.2h-2.2a.7.7 0 0 1 0-1.4h2.2V9.6c0-.3.3-.6.6-.6zM4 5h16v14H4V5zm5 13v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8V7h-9v11h9z\" fill-rule=\"evenodd\"/></svg>',\n        'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path d=\"M9.7 16a.7.7 0 0 1-.7-.6v-2.2H6.9a.7.7 0 0 1 0-1.4H9V9.6c0-.3.3-.6.7-.6.3 0 .6.3.6.6v2.2h2.2c.4 0 .8.3.8.7 0 .4-.4.7-.8.7h-2.2v2.2c0 .3-.3.6-.6.6zM4 5h16v14H4V5zm10 13V7H5v11h9zm5 0v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V7h-4v3h4z\" fill-rule=\"evenodd\"/></svg>',\n        'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path d=\"M14.8 10.5c0 .3-.2.5-.5.5h-1.8v1.8c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.6V11H9.7a.5.5 0 0 1 0-1h1.8V8.3c0-.3.2-.6.5-.6s.5.3.5.6V10h1.8c.3 0 .5.2.5.5zM4 5h16v14H4V5zm5 13v-3H5v3h4zm5 0v-3h-4v3h4zm5 0v-3h-4v3h4zm0-4V7H5v7h14z\" fill-rule=\"evenodd\"/></svg>',\n        'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path d=\"M9.2 14.5c0-.3.2-.5.5-.5h1.8v-1.8c0-.3.2-.5.5-.5s.5.2.5.6V14h1.8c.3 0 .5.2.5.5s-.2.5-.5.5h-1.8v1.7c0 .3-.2.6-.5.6a.5.5 0 0 1-.5-.6V15H9.7a.5.5 0 0 1-.5-.5zM4 5h16v14H4V5zm6 2v3h4V7h-4zM5 7v3h4V7H5zm14 11v-7H5v7h14zm0-8V7h-4v3h4z\" fill-rule=\"evenodd\"/></svg>',\n        'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M4 5h16v13H4V5zm10 12v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4zm5 8v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4z\" fill-rule=\"evenodd\"/></svg>',\n        'table-merge-cells': '<svg width=\"24\" height=\"24\"><path d=\"M4 5h16v14H4V5zm6 13h9v-7h-9v7zm4-11h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10-1h4V7h-4v3zM5 15v3h4v-3H5z\" fill-rule=\"evenodd\"/></svg>',\n        'table-row-properties': '<svg width=\"24\" height=\"24\"><path d=\"M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm6 3h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z\" fill-rule=\"evenodd\"/></svg>',\n        'table-split-cells': '<svg width=\"24\" height=\"24\"><path d=\"M4 5h16v14H4V5zm6 2v3h4V7h-4zM9 18v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8v-7h-9v7h9zm0-8V7h-4v3h4zm-3.5 4.5l1.5 1.6c.3.2.3.7 0 1-.2.2-.7.2-1 0l-1.5-1.6-1.6 1.5c-.2.3-.7.3-1 0a.7.7 0 0 1 0-1l1.6-1.5-1.5-1.6a.7.7 0 0 1 1-1l1.5 1.6 1.6-1.5c.2-.3.7-.3 1 0 .2.2.2.7 0 1l-1.6 1.5z\" fill-rule=\"evenodd\"/></svg>',\n        'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M4 5h16v13H4V5zm5 12v-3H5v3h4zm0-4v-3H5v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4z\" fill-rule=\"evenodd\"/></svg>',\n        'table': '<svg width=\"24\" height=\"24\"><path d=\"M4 5h16v14H4V5zm6 9h4v-3h-4v3zm4 1h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z\" fill-rule=\"evenodd\"/></svg>',\n        'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n        'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n        'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n        'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2z\" fill-rule=\"evenodd\"/></svg>',\n        'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 1 1 2 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n        'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2z\" fill-rule=\"evenodd\"/></svg>',\n        'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n        'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2zM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1zM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n        'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n        'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n        'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n        'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12zM11 6.4L8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n        'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n        'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n        'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z\" fill-rule=\"nonzero\"/></svg>',\n        'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z\" fill-rule=\"nonzero\"/></svg>'\n      };\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has$1 = function (id) {\n        return has(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has$1\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var PluginManager = AddOnManager$1.PluginManager;\n\n    var ThemeManager = AddOnManager$1.ThemeManager;\n\n    function Uploader(uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = new domGlobals.XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, error) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: error\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          var noop = function () {\n          };\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error) {\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              if (!notification) {\n                notification = openNotification();\n              }\n              notification.progressBar.value(percent);\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    }\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr = new domGlobals.XMLHttpRequest();\n          xhr.open('GET', url, true);\n          xhr.responseType = 'blob';\n          xhr.onload = function () {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr.onerror = rejectWithError;\n          xhr.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type, matches;\n      var uriParts = decodeURIComponent(uri).split(',');\n      matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var str, arr, i;\n        var uriParts = parseDataUri(uri);\n        try {\n          str = domGlobals.atob(uriParts.data);\n        } catch (e) {\n          resolve(new domGlobals.Blob([]));\n          return;\n        }\n        arr = new Uint8Array(str.length);\n        for (i = 0; i < arr.length; i++) {\n          arr[i] = str.charCodeAt(i);\n        }\n        resolve(new domGlobals.Blob([arr], { type: uriParts.type }));\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Conversions = {\n      uriToBlob: uriToBlob,\n      blobToDataUri: blobToDataUri,\n      parseDataUri: parseDataUri\n    };\n\n    var count = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          Conversions.uriToBlob(img.src).then(function (blob) {\n            Conversions.blobToDataUri(blob).then(function (dataUri) {\n              base64 = Conversions.parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      base64 = Conversions.parseDataUri(img.src).data;\n      blobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n        return cachedBlobInfo.base64() === base64;\n      });\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        Conversions.uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from$1(elm.getElementsByTagName('img')) : [];\n    };\n    function ImageScanner(uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        var images;\n        if (!predicate) {\n          predicate = constant(true);\n        }\n        images = filter(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map(images, function (img) {\n          if (cachedPromises[img.src]) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    }\n\n    var count$1 = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count$1++ + seed();\n    };\n    var Uuid = { uuid: uuid };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, filename) {\n        if (isString(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        var id, name;\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        id = o.id || Uuid.uuid('blobid');\n        name = o.name || id;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(name + '.' + mimeToExt(o.blob.type)),\n          blob: constant(o.blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || domGlobals.URL.createObjectURL(o.blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var findFirst = function (predicate) {\n        return filter(cache, predicate)[0];\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            domGlobals.URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each(cache, function (cachedBlobInfo) {\n          domGlobals.URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    function UploadStatus () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    }\n\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function () {\n        return '?' + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', 'src=\"' + replacementUrl + '\"');\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var openNotification = function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n      var replaceImageUri = function (image, resultUri) {\n        blobCache.removeByUri(image.src);\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': Settings.shouldReuseFileName(editor) ? resultUri + cacheInvalidator() : resultUri,\n          'data-mce-src': editor.convertURL(resultUri, 'src')\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = Uploader(uploadStatus, {\n            url: Settings.getImageUploadUrl(editor),\n            basePath: Settings.getImageUploadBasePath(editor),\n            credentials: Settings.getImagesUploadCredentials(editor),\n            handler: Settings.getImagesUploadHandler(editor)\n          });\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos;\n          blobInfos = map(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {\n            var filteredResult = map(result, function (uploadInfo, index) {\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && Settings.shouldReplaceBlobUris(editor)) {\n                replaceImageUri(image, uploadInfo.url);\n              } else if (uploadInfo.error) {\n                ErrorReporter.uploadError(editor, uploadInfo.error);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status\n              };\n            });\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = Settings.getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              ErrorReporter.displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          each(result, function (resultItem) {\n            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n            resultItem.image.src = resultItem.blobInfo.blobUri();\n            resultItem.image.removeAttribute('data-mce-src');\n          });\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil$1 = function (start, root, predicate) {\n      if (contains$3(root, start)) {\n        return dropLast(parents(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents$1 = function (start, root) {\n      return parentsUntil$1(start, root, constant(false));\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents$1(start, root));\n    };\n    var Parents = {\n      parentsUntil: parentsUntil$1,\n      parents: parents$1,\n      parentsAndSelf: parentsAndSelf\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return blockElements.hasOwnProperty(node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        return true;\n      } else if (NodeType.isElement(node)) {\n        return !isBlockElement(blockElements, node) && !Bookmarks.isBookmarkNode(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(Parents.parents(Element.fromDom(node), Element.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom());\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rng;\n      var startContainer, startOffset, endContainer, endOffset, rootBlockNode;\n      var tempNode, wrapped, restoreSelection;\n      var rootNodeName;\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      if (!node || !NodeType.isElement(node) || !forcedRootBlock) {\n        return;\n      }\n      rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      rng = selection.getRng();\n      startContainer = rng.startContainer;\n      startOffset = rng.startOffset;\n      endContainer = rng.endContainer;\n      endOffset = rng.endOffset;\n      restoreSelection = EditorFocus.hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, Settings.getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$3 = function (editor) {\n      if (Settings.getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n    var ForceBlocks = { setup: setup$3 };\n\n    var isEq$1 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n    var RangeCompare = { isEq: isEq$1 };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (NodeType.isText(sc)) {\n        return so === 0 ? Option.some(Element.fromDom(sc)) : Option.none();\n      } else {\n        return Option.from(sc.childNodes[so]).map(Element.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (NodeType.isText(ec)) {\n        return eo === ec.data.length ? Option.some(Element.fromDom(ec)) : Option.none();\n      } else {\n        return Option.from(ec.childNodes[eo - 1]).map(Element.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return liftN([\n        getStartNode(rng),\n        getEndNode(rng)\n      ], function (startNode, endNode) {\n        var start = find(getFirstChildren(elm), curry(eq, startNode));\n        var end = find(getLastChildren(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint$1 = function (dom, rng, node, start) {\n      var root = node, walker = new TreeWalker(node, root);\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      do {\n        if (node.nodeType === 3 && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (nonEmptyElementsMap[node.nodeName] && !/^(TD|TH)$/.test(node.nodeName)) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n        if (Env.ie && Env.ie < 11 && dom.isBlock(node) && dom.isEmpty(node)) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, 0);\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng, fakeRng;\n            nativeRng = editor.selection.getRng();\n            fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !RangeCompare.isEq(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !this.editor.settings.disable_nodechange && !this.editor.readonly) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i, currentPath;\n        currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var getAbsolutePosition = function (elm) {\n      var doc, docElem, win, clientRect;\n      clientRect = elm.getBoundingClientRect();\n      doc = elm.ownerDocument;\n      docElem = doc.documentElement;\n      win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n    var MousePosition = { calc: calc };\n\n    var isContentEditableFalse$6 = NodeType.isContentEditableFalse, isContentEditableTrue$2 = NodeType.isContentEditableTrue;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$6(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$6(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var clonedElm = elm.cloneNode(true);\n      editor.dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      editor.dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = editor.dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      editor.dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      editor.dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var hasDraggableElement = function (state) {\n      return state.element;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find(editor.dom.getParents(e.target), Predicate.or(isContentEditableFalse$6, isContentEditableTrue$2)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.element = ceElm;\n            state.screenX = e.screenX;\n            state.screenY = e.screenY;\n            state.maxX = (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2;\n            state.maxY = (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2;\n            state.relX = e.pageX - elmPos.x;\n            state.relY = e.pageY - elmPos.y;\n            state.width = ceElm.offsetWidth;\n            state.height = ceElm.offsetHeight;\n            state.ghost = createGhost(editor, ceElm, state.width, state.height);\n          }\n        }\n      };\n    };\n    var move = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      return function (e) {\n        var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (hasDraggableElement(state) && !state.dragging && movement > 10) {\n          var args = editor.fire('dragstart', { target: state.element });\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          var targetPos = applyRelPos(state, MousePosition.calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n          throttledPlaceCaretAt(e.clientX, e.clientY);\n        }\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            var targetClone_1 = cloneElement(state.element);\n            var args = editor.fire('drop', {\n              targetClone: targetClone_1,\n              clientX: e.clientX,\n              clientY: e.clientY\n            });\n            if (!args.isDefaultPrevented()) {\n              targetClone_1 = args.targetClone;\n              editor.undoManager.transact(function () {\n                removeElement(state.element);\n                editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n        }\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        if (state.dragging) {\n          editor.fire('dragend');\n        }\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.dragging = false;\n      state.element = null;\n      removeElement(state.ghost);\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = {};\n      var pageDom, dragStartHandler, dragHandler, dropHandler, dragEndHandler, rootDocument;\n      pageDom = DOMUtils$1.DOM;\n      rootDocument = domGlobals.document;\n      dragStartHandler = start(state, editor);\n      dragHandler = move(state, editor);\n      dropHandler = drop(state, editor);\n      dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$6(realTarget) || isContentEditableFalse$6(editor.dom.getContentEditableParent(realTarget))) {\n          e.preventDefault();\n        }\n      });\n    };\n    var init = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n    };\n    var DragDropOverrides = { init: init };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map(clientRects, function (clientRect) {\n          clientRect = clone$1(clientRect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (NodeType.isElement(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (NodeType.isText(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (node) {\n      return foldl(node, function (result, node) {\n        return result.concat(getNodeClientRects(node));\n      }, []);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0, node;\n      var result = [];\n      var targetClientRect;\n      var add = function (node) {\n        var i, clientRect, clientRects;\n        clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (i = 0; i < clientRects.length; i++) {\n          clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, ArrUtils.last(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      targetClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil, VDirection.Up, isAbove, isBelow);\n    var downUntil = curry(walkUntil, VDirection.Down, isBelow, isAbove);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn, isBelowFn, isAboveFn, caretPosition;\n      var result = [];\n      var line = 0, clientRect, targetClientRect;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return ArrUtils.last(caretPosition.getClientRects());\n        }\n        return ArrUtils.last(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow;\n        isAboveFn = isAbove;\n        caretPosition = CaretPosition$1.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove;\n        isAboveFn = isBelow;\n        caretPosition = CaretPosition$1.before(node);\n      }\n      targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        clientRect = getClientRect(caretPosition);\n        if (isAboveFn(clientRect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(clientRect, ArrUtils.last(result))) {\n          line++;\n        }\n        clientRect = clone$1(clientRect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$7 = NodeType.isContentEditableFalse;\n    var findNode$1 = findNode;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInside = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return ArrUtils.reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance, newDistance;\n        oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInside(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInside(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$7(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil$1 = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var findLineNodeRects = function (root, targetNodeRect) {\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects;\n        lineRects = filter(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil$1(VDirection.Up, root, curry(collect, isAbove), targetNodeRect.node);\n      walkUntil$1(VDirection.Down, root, curry(collect, isBelow), targetNodeRect.node);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter(from$1(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestCaret = function (root, clientX, clientY) {\n      var closestNodeRect;\n      var contentEditableFalseNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter(contentEditableFalseNodeRects, function (rect) {\n        return clientY >= rect.top && clientY <= rect.bottom;\n      });\n      closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.ie && Env.ie <= 11 && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (NodeType.isElement(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n    var RangePoint = { isXYWithinRange: isXYWithinRange };\n\n    var isContentEditableTrue$3 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$8 = NodeType.isContentEditableFalse;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView);\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return null;\n      }\n      return getNodeRange(node);\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition$1.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isContentEditableFalse$8(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isContentEditableFalse$8(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$8(node) || isContentEditableTrue$3(node);\n      });\n      if (isContentEditableFalse$8(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return null;\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      if (!range || !range.collapsed) {\n        return range;\n      }\n      var caretRange = renderCaretAtRange(editor, range, scrollIntoView);\n      if (caretRange) {\n        return caretRange;\n      }\n      return range;\n    };\n\n    var setup$4 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(domGlobals.document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, editor.selection.getRng(), false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n    var CefFocus = { setup: setup$4 };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var is$2 = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is$2('\\xA0');\n    var isWhiteSpace$1 = function (chr) {\n      return /^[\\r\\n\\t ]$/.test(chr);\n    };\n    var isContent = function (chr) {\n      return !isWhiteSpace$1(chr) && !isNbsp(chr);\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Option.from(pos.container()).filter(NodeType.isText).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace$1);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace$1);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && container.data.length === 0;\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Option.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return node.nodeName === 'IMG' && get$2(Element.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return NodeType.isContentEditableFalse(node) && !NodeType.isBogusAll(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeTable = matchesElementPosition(true, NodeType.isTable);\n    var isAfterTable = matchesElementPosition(false, NodeType.isTable);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var isContentEditableTrue$4 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$9 = NodeType.isContentEditableFalse;\n    var getContentEditableRoot = function (editor, node) {\n      var root = editor.getBody();\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$9(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var SelectionOverrides = function (editor) {\n      var isBlock = function (node) {\n        return editor.dom.isBlock(node);\n      };\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor.getBody(), isBlock, function () {\n        return EditorFocus.hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + editor.dom.uniqueId();\n      var selectedContentEditableNode;\n      var isFakeSelectionElement = function (elm) {\n        return editor.dom.hasClass(elm, 'mce-offscreen-selection');\n      };\n      var getRealSelectionElement = function () {\n        var container = editor.dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          editor.selection.setRng(range);\n        }\n      };\n      var getRange = function () {\n        return editor.selection.getRng();\n      };\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e;\n        e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          editor.selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var getNormalizedRangeEndPoint = function (direction, range) {\n        range = normalizeRange(direction, rootNode, range);\n        if (direction === -1) {\n          return CaretPosition$1.fromRangeStart(range);\n        }\n        return CaretPosition$1.fromRangeEnd(range);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          editor.selection.scrollIntoView(blockCaretContainer[0]);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && EditorView.isXYInContentArea(editor, e.clientX, e.clientY)) {\n            setRange(renderCaretAtRange(editor, range, false));\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot;\n          contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue$4(contentEditableRoot)) {\n              if (editor.dom.isChildOf(contentEditableRoot, editor.selection.getNode())) {\n                removeContentEditableSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', function () {\n          removeContentEditableSelection();\n        });\n        editor.on('ResizeWindow FullscreenStateChanged', function () {\n          return fakeCaret.reposition();\n        });\n        var handleTouchSelect = function (editor) {\n          var moved = false;\n          editor.on('touchstart', function () {\n            moved = false;\n          });\n          editor.on('touchmove', function () {\n            moved = true;\n          });\n          editor.on('touchend', function (e) {\n            var contentEditableRoot = getContentEditableRoot(editor, e.target);\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              if (!moved) {\n                e.preventDefault();\n                setContentEditableSelection(selectNode(editor, contentEditableRoot));\n              }\n            }\n          });\n        };\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition$1.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isBeforeContentEditableFalse(newPos) && !isAfterContentEditableFalse(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = editor.dom.getParent(node1, editor.dom.isBlock);\n          var block2 = editor.dom.getParent(node2, editor.dom.isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = editor.dom.getParent(targetNode, editor.dom.isBlock);\n          var caretBlock = editor.dom.getParent(caretNode, editor.dom.isBlock);\n          if (targetBlock && editor.dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse$9(getContentEditableRoot(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        handleTouchSelect(editor);\n        editor.on('mousedown', function (e) {\n          var contentEditableRoot;\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !editor.dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (EditorView.isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              setContentEditableSelection(selectNode(editor, contentEditableRoot));\n            } else {\n              removeContentEditableSelection();\n              if (!(isContentEditableTrue$4(contentEditableRoot) && e.shiftKey) && !RangePoint.isXYWithinRange(e.clientX, e.clientY, editor.selection.getRng())) {\n                hideFakeCaret();\n                editor.selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeContentEditableSelection();\n            hideFakeCaret();\n            var caretInfo = closestCaret(rootNode, e.clientX, e.clientY);\n            if (caretInfo) {\n              if (!hasBetterMouseTarget(e.target, caretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, caretInfo.node, caretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          switch (e.keyCode) {\n          default:\n            if (isContentEditableFalse$9(editor.selection.getNode())) {\n              e.preventDefault();\n            }\n            break;\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedContentEditableNode) {\n            if (!selectedContentEditableNode.parentNode) {\n              selectedContentEditableNode = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedContentEditableNode);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          var rng;\n          rng = setContentEditableSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(rng.startContainer.parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(rng.startContainer.parentNode)) {\n            removeContentEditableSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText);\n            }\n          }\n        });\n        DragDropOverrides.init(editor);\n        CefFocus.setup(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer(node) || startsWithCaretContainer(node) || endsWithCaretContainer(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var setContentEditableSelection = function (range, forward) {\n        var node;\n        var $ = editor.$;\n        var dom = editor.dom;\n        var $realSelectionContainer, sel, startContainer, startOffset, endOffset, e, caretPosition, targetClone, origTargetClone;\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            if (forward === false) {\n              caretPosition = getNormalizedRangeEndPoint(-1, range);\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(-1, caretPosition.getNode(true), false, false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(-1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n            } else {\n              caretPosition = getNormalizedRangeEndPoint(1, range);\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(1, caretPosition.getNode(true), false, false);\n              }\n            }\n          }\n          return null;\n        }\n        startContainer = range.startContainer;\n        startOffset = range.startOffset;\n        endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse$9(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          node = startContainer.childNodes[startOffset];\n        }\n        if (!isContentEditableFalse$9(node)) {\n          return null;\n        }\n        targetClone = origTargetClone = node.cloneNode(true);\n        e = editor.fire('ObjectSelected', {\n          target: node,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        $realSelectionContainer = descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom()]);\n        });\n        targetClone = e.targetClone;\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        range = editor.dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          range.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          range.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append('\\xA0').append(targetClone).append('\\xA0');\n          range.setStart($realSelectionContainer[0].firstChild, 1);\n          range.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        sel = editor.selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(range);\n        each(descendants$1(Element.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          remove(elm, 'data-mce-selected');\n        });\n        node.setAttribute('data-mce-selected', '1');\n        selectedContentEditableNode = node;\n        hideFakeCaret();\n        return range;\n      };\n      var removeContentEditableSelection = function () {\n        if (selectedContentEditableNode) {\n          selectedContentEditableNode.removeAttribute('data-mce-selected');\n          descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n          selectedContentEditableNode = null;\n        }\n        descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n        selectedContentEditableNode = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedContentEditableNode = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n    var Diff = {\n      KEEP: KEEP,\n      DELETE: DELETE,\n      INSERT: INSERT,\n      diff: diff\n    };\n\n    var getOuterHtml = function (elm) {\n      if (NodeType.isElement(elm)) {\n        return elm.outerHTML;\n      } else if (NodeType.isText(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (NodeType.isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment$1 = function (html) {\n      var frag, node, container;\n      container = domGlobals.document.createElement('div');\n      frag = domGlobals.document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment$1(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each(diff, function (action) {\n        if (action[0] === Diff.KEEP) {\n          index++;\n        } else if (action[0] === Diff.INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === Diff.DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$1 = function (elm) {\n      return filter(map(from$1(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map(from$1(elm.childNodes), getOuterHtml);\n      applyDiff(Diff.diff(currentFragments, fragments), elm);\n      return elm;\n    };\n    var Fragments = {\n      read: read$1,\n      write: write\n    };\n\n    var undoLevelDocument = Cell(Option.none());\n    var lazyTempDocument = function () {\n      return undoLevelDocument.get().getOrThunk(function () {\n        var doc = domGlobals.document.implementation.createHTMLDocument('undo');\n        undoLevelDocument.set(Option.some(doc));\n        return doc;\n      });\n    };\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments, content, trimmedFragments;\n      fragments = Fragments.read(editor.getBody());\n      trimmedFragments = bind(fragments, function (html) {\n        var trimmed = TrimHtml.trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      if (level.type === 'fragmented') {\n        Fragments.write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, { format: 'raw' });\n      }\n      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = Element.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each(descendants$1(elm, '*[data-mce-bogus]'), unwrap);\n      return get$4(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$2 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n    var Levels = {\n      createFragmentedLevel: createFragmentedLevel,\n      createCompleteLevel: createCompleteLevel,\n      createFromEditor: createFromEditor,\n      applyToEditor: applyToEditor,\n      isEq: isEq$2\n    };\n\n    var UndoManager = function (editor) {\n      var self = this, index = 0, data = [], beforeBookmark, isFirstTypedCharacter, locks = 0;\n      var isUnlocked = function () {\n        return locks === 0;\n      };\n      var setTyping = function (typing) {\n        if (isUnlocked()) {\n          self.typing = typing;\n        }\n      };\n      var setDirty = function (state) {\n        editor.setDirty(state);\n      };\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(false);\n        self.add({}, e);\n      };\n      var endTyping = function () {\n        if (self.typing) {\n          setTyping(false);\n          self.add();\n        }\n      };\n      editor.on('init', function () {\n        self.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          endTyping();\n          self.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        self.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter && self.typing && Levels.isEq(Levels.createFromEditor(editor), data[0]) === false) {\n          if (editor.isDirty() === false) {\n            setDirty(true);\n            editor.fire('change', {\n              level: data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter = false;\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (self.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !self.typing && !modKey) {\n          self.beforeChange();\n          setTyping(true);\n          self.add({}, e);\n          isFirstTypedCharacter = true;\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (self.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n      self = {\n        data: data,\n        typing: false,\n        beforeChange: function () {\n          if (isUnlocked()) {\n            beforeBookmark = GetBookmark.getUndoBookmark(editor.selection);\n          }\n        },\n        add: function (level, event) {\n          var i;\n          var settings = editor.settings;\n          var lastLevel, currentLevel;\n          currentLevel = Levels.createFromEditor(editor);\n          level = level || {};\n          level = Tools.extend(level, currentLevel);\n          if (isUnlocked() === false || editor.removed) {\n            return null;\n          }\n          lastLevel = data[index];\n          if (editor.fire('BeforeAddUndo', {\n              level: level,\n              lastLevel: lastLevel,\n              originalEvent: event\n            }).isDefaultPrevented()) {\n            return null;\n          }\n          if (lastLevel && Levels.isEq(lastLevel, level)) {\n            return null;\n          }\n          if (data[index]) {\n            data[index].beforeBookmark = beforeBookmark;\n          }\n          if (settings.custom_undo_redo_levels) {\n            if (data.length > settings.custom_undo_redo_levels) {\n              for (i = 0; i < data.length - 1; i++) {\n                data[i] = data[i + 1];\n              }\n              data.length--;\n              index = data.length;\n            }\n          }\n          level.bookmark = GetBookmark.getUndoBookmark(editor.selection);\n          if (index < data.length - 1) {\n            data.length = index + 1;\n          }\n          data.push(level);\n          index = data.length - 1;\n          var args = {\n            level: level,\n            lastLevel: lastLevel,\n            originalEvent: event\n          };\n          editor.fire('AddUndo', args);\n          if (index > 0) {\n            setDirty(true);\n            editor.fire('change', args);\n          }\n          return level;\n        },\n        undo: function () {\n          var level;\n          if (self.typing) {\n            self.add();\n            self.typing = false;\n            setTyping(false);\n          }\n          if (index > 0) {\n            level = data[--index];\n            Levels.applyToEditor(editor, level, true);\n            setDirty(true);\n            editor.fire('Undo', { level: level });\n          }\n          return level;\n        },\n        redo: function () {\n          var level;\n          if (index < data.length - 1) {\n            level = data[++index];\n            Levels.applyToEditor(editor, level, false);\n            setDirty(true);\n            editor.fire('Redo', { level: level });\n          }\n          return level;\n        },\n        clear: function () {\n          data = [];\n          index = 0;\n          self.typing = false;\n          self.data = data;\n          editor.fire('ClearUndos');\n        },\n        reset: function () {\n          self.clear();\n          self.add();\n        },\n        hasUndo: function () {\n          return index > 0 || self.typing && data[0] && !Levels.isEq(Levels.createFromEditor(editor), data[0]);\n        },\n        hasRedo: function () {\n          return index < data.length - 1 && !self.typing;\n        },\n        transact: function (callback) {\n          endTyping();\n          self.beforeChange();\n          self.ignore(callback);\n          return self.add();\n        },\n        ignore: function (callback) {\n          try {\n            locks++;\n            callback();\n          } finally {\n            locks--;\n          }\n        },\n        extra: function (callback1, callback2) {\n          var lastLevel, bookmark;\n          if (self.transact(callback1)) {\n            bookmark = data[index].bookmark;\n            lastLevel = data[index - 1];\n            Levels.applyToEditor(editor, lastLevel, true);\n            if (self.transact(callback2)) {\n              data[index - 1].beforeBookmark = bookmark;\n            }\n          }\n        }\n      };\n      return self;\n    };\n\n    var getLastChildren$1 = function (elm) {\n      var children = [];\n      var rawNode = elm.dom();\n      while (rawNode) {\n        children.push(Element.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants$1(elm, 'br');\n      var brs = filter(getLastChildren$1(elm).slice(-1), isBr$1);\n      if (allBrs.length === brs.length) {\n        each(brs, remove$1);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append(elm, Element.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var isPaddingContents = function (elm) {\n      return isText(elm) ? get$5(elm) === '\\xA0' : isBr$1(elm);\n    };\n    var isPaddedElement = function (elm) {\n      return filter(children(elm), isPaddingContents).length === 1;\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock(elm) && isBr$1(lastChild) && isBlock(lastChildPrevSibling)) {\n            remove$1(lastChild);\n          }\n        });\n      });\n    };\n    var PaddingBr = {\n      removeTrailingBr: removeTrailingBr,\n      fillWithPaddingBr: fillWithPaddingBr,\n      isPaddedElement: isPaddedElement,\n      trimBlockTrailingBr: trimBlockTrailingBr\n    };\n\n    var isEq$3 = FormatUtils.isEq;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].inherit === false && ed.dom.is(node, formatList[i].selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return matchNode(editor, node, name, vars);\n    };\n    var matchName = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var key, value;\n      var items = format[itemName];\n      var i;\n      if (format.onmatch) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (typeof items.length === 'undefined') {\n          for (key in items) {\n            if (items.hasOwnProperty(key)) {\n              if (itemName === 'attributes') {\n                value = dom.getAttrib(node, key);\n              } else {\n                value = FormatUtils.getStyle(dom, node, key);\n              }\n              if (similar && !value && !format.exact) {\n                return;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(items[key], vars), key))) {\n                return;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : FormatUtils.getStyle(dom, node, items[i])) {\n              return format;\n            }\n          }\n        }\n      }\n      return format;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var format, i, x, classes;\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (i = 0; i < formatList.length; i++) {\n          format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            if (classes = format.classes) {\n              for (x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, classes[x])) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match = function (editor, name, vars, node) {\n      var startNode;\n      if (node) {\n        return matchParents(editor, node, name, vars);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars)) {\n        return true;\n      }\n      startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var startElement;\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        var i, name;\n        for (i = 0; i < names.length; i++) {\n          name = names[i];\n          if (!checkedMap[name] && matchNode(editor, node, name, vars)) {\n            checkedMap[name] = true;\n            matchedFormatNames.push(name);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var startNode, parents, i, x, selector;\n      var dom = editor.dom;\n      if (formatList) {\n        startNode = editor.selection.getStart();\n        parents = FormatUtils.getParents(dom, startNode);\n        for (x = formatList.length - 1; x >= 0; x--) {\n          selector = formatList[x].selector;\n          if (!selector || formatList[x].defaultBlock) {\n            return true;\n          }\n          for (i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var MatchFormat = {\n      matchNode: matchNode,\n      matchName: matchName,\n      match: match,\n      matchAll: matchAll,\n      canApply: canApply,\n      matchesUnInheritedFormatSelector: matchesUnInheritedFormatSelector\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split$1 = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && NodeType.isText(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (NodeType.isText(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (NodeType.isText(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\n\\r\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === '\\xA0') {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + '\\xA0'\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length;\n      var isStartOfContent = offset === 0;\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      return normalize(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      return normalize(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace) {\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      prevNode.appendData(nextNode.data);\n      remove$1(Element.fromDom(nextNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(prevNode, whitespaceOffset);\n      }\n      return prevNode;\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, selector, isRoot).isSome();\n    };\n\n    var hasWhitespacePreserveParent = function (rootNode, node) {\n      var rootElement = Element.fromDom(rootNode);\n      var startNode = Element.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (rootNode, node) {\n      return NodeType.isText(node) && /^[ \\t\\r\\n]*$/.test(node.data) && hasWhitespacePreserveParent(rootNode, node) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return NodeType.isElement(node) && node.nodeName === 'A' && node.hasAttribute('name');\n    };\n    var isContent$1 = function (rootNode, node) {\n      return isCaretCandidate(node) && isWhitespace(rootNode, node) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = NodeType.hasAttribute('data-mce-bookmark');\n    var isBogus$2 = NodeType.hasAttribute('data-mce-bogus');\n    var isBogusAll$1 = NodeType.hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode) {\n      var node, brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new TreeWalker(node, targetNode);\n        do {\n          if (isBogusAll$1(node)) {\n            node = walker.next(true);\n            continue;\n          }\n          if (isBogus$2(node)) {\n            node = walker.next();\n            continue;\n          }\n          if (NodeType.isBr(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(targetNode, node)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$1 = function (elm) {\n      return isEmptyNode(elm.dom());\n    };\n    var Empty = { isEmpty: isEmpty$1 };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition$1.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition$1.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition$1(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, 0) : CaretPosition$1.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, node.data.length) : CaretPosition$1.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.previousSibling)) {\n        return Option.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? CaretFinder.lastPositionIn(elm.previousSibling) : Option.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.nextSibling)) {\n        return Option.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? CaretFinder.firstPositionIn(elm.nextSibling) : Option.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition$1.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return CaretFinder.prevPosition(rootElement, startPosition).fold(function () {\n        return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm));\n      }, Option.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm)).fold(function () {\n        return CaretFinder.prevPosition(rootElement, CaretPosition$1.before(elm));\n      }, Option.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition$1 = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition$1(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom() === rawNode;\n      };\n    };\n    var isBlock$2 = function (editor, elm) {\n      return elm && editor.schema.getBlockElements().hasOwnProperty(name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (Empty.isEmpty(elm)) {\n        var br = Element.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append(elm, br);\n        return Option.some(CaretPosition$1.before(br.dom()));\n      } else {\n        return Option.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText);\n      var nextTextOpt = nextSibling(elm).filter(isText);\n      remove$1(elm);\n      return liftN([\n        prevTextOpt,\n        nextTextOpt,\n        afterDeletePosOpt\n      ], function (prev, next, pos) {\n        var prevNode = prev.dom(), nextNode = next.dom();\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition$1(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom(), elm.dom().length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom(), 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom());\n      var parentBlock = ancestor(elm, curry(isBlock$2, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection(editor, forward, Option.some(paddPos));\n          }\n        });\n      }\n    };\n    var DeleteElement = { deleteElement: deleteElement };\n\n    var ZWSP$1 = Zwsp.ZWSP, CARET_ID$1 = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP$1 || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new TreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = Element.fromTag('span');\n      setAll(caretContainer, {\n        'id': CARET_ID$1,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append(caretContainer, Element.fromText(ZWSP$1));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP$1) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        DeleteElement.deleteElement(editor, false, Element.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var textNode = trimZwspFromCaretContainer(node);\n        if (rng.startContainer === textNode && rng.startOffset > 0) {\n          rng.setStart(textNode, rng.startOffset - 1);\n        }\n        if (rng.endContainer === textNode && rng.endOffset > 0) {\n          rng.setEnd(textNode, rng.endOffset - 1);\n        }\n        dom.remove(node, true);\n        if (block && dom.isEmpty(block)) {\n          PaddingBr.fillWithPaddingBr(Element.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID$1)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(FormatUtils.isTextBlock, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        PaddingBr.removeTrailingBr(Element.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1));\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var rng, caretContainer, textNode, offset, bookmark, container, text;\n      var selection = editor.selection;\n      rng = selection.getRng();\n      offset = rng.startOffset;\n      container = rng.startContainer;\n      text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        rng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name));\n        rng = split$1(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP$1) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom());\n          textNode = caretContainer.firstChild;\n          rng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom, selection = editor.selection;\n      var container, offset, bookmark;\n      var hasContentAfter, node, formatNode;\n      var parents = [], rng = selection.getRng();\n      var caretContainer;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (MatchFormat.matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split$1(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom();\n        var caretNode = insertFormatNodesIntoCaretContainer(parents, newCaretContainer);\n        if (caretContainer) {\n          insertCaretContainerNode(editor, newCaretContainer, caretContainer);\n        } else {\n          insertCaretContainerNode(editor, newCaretContainer, formatNode);\n        }\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP$1) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$5 = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom());\n      before(Element.fromDom(targetNode), caretContainer);\n      remove$1(Element.fromDom(targetNode));\n      return CaretPosition$1(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return inlineElements.hasOwnProperty(name(element)) && !isCaretNode(element.dom()) && !NodeType.isBogus(element.dom());\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom()) && isCaretContainerEmpty(element.dom());\n    };\n\n    var postProcessHooks = {}, filter$3 = ArrUtils.filter, each$9 = ArrUtils.each;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = hooks = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess = function (name, editor) {\n      each$9(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var isPre, blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && ArrUtils.indexOf(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      isPre = NodeType.matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$9(filter$3(filter$3(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n    var Hooks = { postProcess: postProcess };\n\n    var each$a = Tools.each;\n    var ElementUtils = function (dom) {\n      this.compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$a(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (obj1.hasOwnProperty(name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (obj2.hasOwnProperty(name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !Bookmarks.isBookmarkNode(node1) && !Bookmarks.isBookmarkNode(node2);\n      };\n    };\n\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$b = Tools.each;\n    var isEq$4 = FormatUtils.isEq;\n    var isTableCell$2 = function (node) {\n      return /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container, offset, lastIdx;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (NodeType.isElement(container)) {\n        lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (NodeType.isText(container) && start && offset >= container.nodeValue.length) {\n        container = new TreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (NodeType.isText(container) && !start && offset === 0) {\n        container = new TreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var wrap$2 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = Element.fromDom(node);\n      var wrapper = Element.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append$1(wrapper, siblings);\n      if (next) {\n        before(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after(start, wrapper);\n        append(wrapper, start);\n      }\n      return wrapper.dom();\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$4(node, format.inline)) {\n        return true;\n      }\n      if (isEq$4(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return NodeType.isElement(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.tagName === 'A';\n    };\n    var find$3 = function (dom, node, next, inc) {\n      node = FormatUtils.getNonWhiteSpaceSibling(node, next, inc);\n      return !node || (node.nodeName === 'BR' || dom.isBlock(node));\n    };\n    var removeNode$1 = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = Settings.getForcedRootBlock(ed);\n      if (format.block) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find$3(dom, node, false) && !find$3(dom, node.firstChild, true, 1)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find$3(dom, node, true) && !find$3(dom, node.lastChild, false, 1)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$4(node, format.list_block)) {\n              each$b(Tools.grep(node.childNodes), function (node) {\n                if (FormatUtils.isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$2(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = 0;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (format.selector && format.inline && !isEq$4(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, 1);\n    };\n    var removeFormat = function (ed, format, vars, node, compareNode) {\n      var i, attrs, stylesModified;\n      var dom = ed.dom;\n      if (!matchName$1(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return false;\n      }\n      if (format.remove !== 'all') {\n        each$b(format.styles, function (value, name) {\n          value = FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(value, vars), name);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (format.remove_similar || (!compareNode || isEq$4(FormatUtils.getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(node, name, '');\n          }\n          stylesModified = 1;\n        });\n        if (stylesModified && dom.getAttrib(node, 'style') === '') {\n          node.removeAttribute('style');\n          node.removeAttribute('data-mce-style');\n        }\n        each$b(format.attributes, function (value, name) {\n          var valueOut;\n          value = FormatUtils.replaceVars(value, vars);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (format.remove_similar || (!compareNode || isEq$4(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(node, name);\n              if (value) {\n                valueOut = '';\n                each$b(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(node, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (name === 'class') {\n              node.removeAttribute('className');\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              node.removeAttribute('data-mce-' + name);\n            }\n            node.removeAttribute(name);\n          }\n        });\n        each$b(format.classes, function (value) {\n          value = FormatUtils.replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(node, value);\n          }\n        });\n        attrs = dom.getAttribs(node);\n        for (i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return false;\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode$1(ed, node, format);\n        return true;\n      }\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$b(FormatUtils.getParents(editor.dom, container.parentNode).reverse(), function (parent) {\n        var format;\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          format = MatchFormat.matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var parent, clone, lastClone, firstClone, i, formatRootParent;\n      var dom = editor.dom;\n      if (formatRoot) {\n        formatRootParent = formatRoot.parentNode;\n        for (parent = container.parentNode; parent && parent !== formatRootParent; parent = parent.parentNode) {\n          clone = dom.clone(parent, false);\n          for (i = 0; i < formatList.length; i++) {\n            if (removeFormat(editor, formatList[i], vars, clone, clone)) {\n              clone = 0;\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n        }\n      }\n      return container;\n    };\n    var remove$7 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name), format = formatList[0];\n      var bookmark, rng, contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return Bookmarks.isBookmarkNode(node) && NodeType.isElement(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var process = function (node) {\n        var children, i, l, lastContentEditable, hasContentEditableState;\n        if (NodeType.isElement(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        children = Tools.grep(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          for (i = 0, l = formatList.length; i < l; i++) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (i = 0, l = children.length; i < l; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (NodeType.isText(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var commonAncestorContainer = rng.commonAncestorContainer;\n        rng = ExpandRange.expandRng(ed, rng, formatList, true);\n        if (format.split) {\n          rng = split$1(rng);\n          startContainer = getContainer(ed, rng, true);\n          endContainer = getContainer(ed, rng);\n          if (startContainer !== endContainer) {\n            if (/^(TR|TH|TD)$/.test(startContainer.nodeName) && startContainer.firstChild) {\n              if (startContainer.nodeName === 'TR') {\n                startContainer = startContainer.firstChild.firstChild || startContainer;\n              } else {\n                startContainer = startContainer.firstChild || startContainer;\n              }\n            }\n            if (commonAncestorContainer && /^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName) && isTableCell$2(endContainer) && endContainer.firstChild) {\n              endContainer = endContainer.firstChild || endContainer;\n            }\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Option.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Option.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$2(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$2(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          rng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          rng.startOffset = dom.nodeIndex(startContainer);\n          rng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          rng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        RangeWalk.walk(dom, rng, function (nodes) {\n          each$b(nodes, function (node) {\n            process(node);\n            if (NodeType.isElement(node) && ed.dom.getStyle(node, 'text-decoration') === 'underline' && node.parentNode && FormatUtils.getTextDecoration(dom, node.parentNode) === 'underline') {\n              removeFormat(ed, {\n                deep: false,\n                exact: true,\n                inline: 'span',\n                styles: { textDecoration: 'underline' }\n              }, null, node);\n            }\n          });\n        });\n      };\n      if (node) {\n        if (node.nodeType) {\n          rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        return;\n      }\n      if (!selection.isCollapsed() || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n        bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n        removeRngStyle(selection.getRng());\n        selection.moveToBookmark(bookmark);\n        if (format.inline && MatchFormat.match(ed, name, vars, selection.getStart())) {\n          FormatUtils.moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n    };\n    var RemoveFormat = {\n      removeFormat: removeFormat,\n      remove: remove$7\n    };\n\n    var each$c = Tools.each;\n    var isElementNode = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      var sibling;\n      for (sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (sibling.nodeType === 3 && sibling.nodeValue.length !== 0) {\n          return node;\n        }\n        if (sibling.nodeType === 1 && !Bookmarks.isBookmarkNode(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var sibling, tmpSibling;\n      var elementUtils = new ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (sibling = prev.nextSibling; sibling && sibling !== next;) {\n            tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var processChildElements = function (node, filter, process) {\n      each$c(node.childNodes, function (node) {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var hasStyle = function (dom, name) {\n      return curry(function (name, node) {\n        return !!(node && FormatUtils.getStyle(dom, node, name));\n      }, name);\n    };\n    var applyStyle = function (dom, name, value) {\n      return curry(function (name, value, node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      }, name, value);\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var processUnderlineAndColor = function (dom, node) {\n      var textDecoration;\n      if (node.nodeType === 1 && node.parentNode && node.parentNode.nodeType === 1) {\n        textDecoration = FormatUtils.getTextDecoration(dom, node.parentNode);\n        if (dom.getStyle(node, 'color') && textDecoration) {\n          dom.setStyle(node, 'text-decoration', textDecoration);\n        } else if (dom.getStyle(node, 'text-decoration') === textDecoration) {\n          dom.setStyle(node, 'text-decoration', null);\n        }\n      }\n    };\n    var mergeUnderlineAndColor = function (dom, format, vars, node) {\n      if (format.styles.color || format.styles.textDecoration) {\n        Tools.walk(node, curry(processUnderlineAndColor, dom), 'childNodes');\n        processUnderlineAndColor(dom, node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', FormatUtils.replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (format.inline === 'sub' || format.inline === 'sup') {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        node = mergeSiblingsNodes(dom, FormatUtils.getNonWhiteSpaceSibling(node), node);\n        node = mergeSiblingsNodes(dom, node, FormatUtils.getNonWhiteSpaceSibling(node, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$c(dom.select(selector, node), function (node) {\n          if (isElementNode(node)) {\n            each$c(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$c(formatList, function (format) {\n        each$c(editor.dom.select(format.inline, node), function (child) {\n          if (!isElementNode(child)) {\n            return;\n          }\n          RemoveFormat.removeFormat(editor, format, vars, child, format.exact ? child : null);\n        });\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (MatchFormat.matchNode(editor, node.parentNode, name, vars)) {\n        if (RemoveFormat.removeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (MatchFormat.matchNode(editor, parent, name, vars)) {\n            RemoveFormat.removeFormat(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n    var MergeFormats = {\n      mergeWithChildren: mergeWithChildren,\n      mergeUnderlineAndColor: mergeUnderlineAndColor,\n      mergeBackgroundColorAndFontSize: mergeBackgroundColorAndFontSize,\n      mergeSubSup: mergeSubSup,\n      mergeSiblings: mergeSiblings,\n      mergeWithParents: mergeWithParents\n    };\n\n    var createRange$1 = function (sc, so, ec, eo) {\n      var rng = domGlobals.document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition$1.fromRangeStart(rng);\n      var endPos = CaretPosition$1.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return CaretFinder.fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange$1(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize$1 = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n    var RangeNormalizer = { normalize: normalize$1 };\n\n    var each$d = Tools.each;\n    var isElementNode$1 = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var applyFormat = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var bookmark, rng;\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom, selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        fmt = fmt || format;\n        if (elm) {\n          if (fmt.onformat) {\n            fmt.onformat(elm, fmt, vars, node);\n          }\n          each$d(fmt.styles, function (value, name) {\n            dom.setStyle(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          if (fmt.styles) {\n            var styleVal = dom.getAttrib(elm, 'style');\n            if (styleVal) {\n              elm.setAttribute('data-mce-style', styleVal);\n            }\n          }\n          each$d(fmt.attributes, function (value, name) {\n            dom.setAttrib(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          each$d(fmt.classes, function (value) {\n            value = FormatUtils.replaceVars(value, vars);\n            if (!dom.hasClass(elm, value)) {\n              dom.addClass(elm, value);\n            }\n          });\n        }\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        if (!format.selector) {\n          return false;\n        }\n        each$d(formatList, function (format) {\n          if ('collapsed' in format && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var applyRngStyle = function (dom, rng, bookmark, nodeSpecific) {\n        var newWrappers = [];\n        var wrapName, wrapElm, contentEditable = true;\n        wrapName = format.inline || format.block;\n        wrapElm = dom.create(wrapName);\n        setElementFormat(wrapElm);\n        RangeWalk.walk(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var nodeName, parentName, hasContentEditableState, lastContentEditable;\n            lastContentEditable = contentEditable;\n            nodeName = node.nodeName.toLowerCase();\n            parentName = node.parentNode.nodeName.toLowerCase();\n            if (node.nodeType === 1 && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (FormatUtils.isEq(nodeName, 'br')) {\n              currentWrapElm = 0;\n              if (format.block) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (format.wrapper && MatchFormat.matchNode(ed, node, name, vars)) {\n              currentWrapElm = 0;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && format.block && !format.wrapper && FormatUtils.isTextBlock(ed, nodeName) && FormatUtils.isValid(ed, parentName, wrapName)) {\n              node = dom.rename(node, wrapName);\n              setElementFormat(node);\n              newWrappers.push(node);\n              currentWrapElm = 0;\n              return;\n            }\n            if (format.selector) {\n              var found = applyNodeStyle(formatList, node);\n              if (!format.inline || found) {\n                currentWrapElm = 0;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && FormatUtils.isValid(ed, wrapName, nodeName) && FormatUtils.isValid(ed, parentName, wrapName) && !(!nodeSpecific && node.nodeType === 3 && node.nodeValue.length === 1 && node.nodeValue.charCodeAt(0) === 65279) && !isCaretNode(node) && (!format.inline || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = 0;\n              each$d(Tools.grep(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = 0;\n            }\n          };\n          each$d(nodes, process);\n        });\n        if (format.links === true) {\n          each$d(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$d(Tools.grep(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$d(newWrappers, function (node) {\n          var childCount;\n          var getChildCount = function (node) {\n            var count = 0;\n            each$d(node.childNodes, function (node) {\n              if (!FormatUtils.isWhiteSpaceNode(node) && !Bookmarks.isBookmarkNode(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var getChildElementNode = function (root) {\n            var child = false;\n            each$d(root.childNodes, function (node) {\n              if (isElementNode$1(node)) {\n                child = node;\n                return false;\n              }\n            });\n            return child;\n          };\n          var mergeStyles = function (node) {\n            var child, clone;\n            child = getChildElementNode(node);\n            if (child && !Bookmarks.isBookmarkNode(child) && MatchFormat.matchName(dom, child, format)) {\n              clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, 1);\n            }\n            return clone || node;\n          };\n          childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, 1);\n            return;\n          }\n          if (format.inline || format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            MergeFormats.mergeWithChildren(ed, formatList, vars, node);\n            MergeFormats.mergeWithParents(ed, format, name, vars, node);\n            MergeFormats.mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            MergeFormats.mergeSubSup(dom, format, vars, node);\n            MergeFormats.mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride && dom.is(node, formatList[i].selector)) {\n            setElementFormat(node, formatList[i]);\n            return;\n          }\n        }\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (node.nodeType) {\n            if (!applyNodeStyle(formatList, node)) {\n              rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, ExpandRange.expandRng(ed, rng, formatList), null, true);\n            }\n          } else {\n            applyRngStyle(dom, node, null, true);\n          }\n        } else {\n          if (!isCollapsed || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n            var curSelNode = ed.selection.getNode();\n            if (!ed.settings.forced_root_block && formatList[0].defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat(ed, formatList[0].defaultBlock);\n            }\n            ed.selection.setRng(RangeNormalizer.normalize(ed.selection.getRng()));\n            bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n            applyRngStyle(dom, ExpandRange.expandRng(ed, selection.getRng(), formatList));\n            if (format.styles) {\n              MergeFormats.mergeUnderlineAndColor(dom, format, vars, curSelNode);\n            }\n            selection.moveToBookmark(bookmark);\n            FormatUtils.moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        Hooks.postProcess(name, ed);\n      }\n    };\n    var ApplyFormat = { applyFormat: applyFormat };\n\n    var setup$6 = function (registeredFormatListeners, editor) {\n      var currentFormats = Cell({});\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, currentFormats, registeredFormatListeners.get());\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, currentFormats, formatChangeData) {\n      var formatsList = keys(currentFormats.get());\n      var newFormats = {};\n      var matchedFormats = {};\n      var parents = filter(FormatUtils.getParents(editor.dom, elm), function (node) {\n        return node.nodeType === 1 && !node.getAttribute('data-mce-bogus');\n      });\n      each$3(formatChangeData, function (data, format) {\n        Tools.each(parents, function (node) {\n          if (editor.formatter.matchNode(node, format, {}, data.similar)) {\n            if (formatsList.indexOf(format) === -1) {\n              each(data.callbacks, function (callback) {\n                callback(true, {\n                  node: node,\n                  format: format,\n                  parents: parents\n                });\n              });\n              newFormats[format] = data.callbacks;\n            }\n            matchedFormats[format] = data.callbacks;\n            return false;\n          }\n          if (MatchFormat.matchesUnInheritedFormatSelector(editor, node, format)) {\n            return false;\n          }\n        });\n      });\n      var remainingFormats = filterRemainingFormats(currentFormats.get(), matchedFormats, elm, parents);\n      currentFormats.set(__assign({}, newFormats, remainingFormats));\n    };\n    var filterRemainingFormats = function (currentFormats, matchedFormats, elm, parents) {\n      return bifilter(currentFormats, function (callbacks, format) {\n        if (!has(matchedFormats, format)) {\n          each(callbacks, function (callback) {\n            callback(false, {\n              node: elm,\n              format: format,\n              parents: parents\n            });\n          });\n          return false;\n        } else {\n          return true;\n        }\n      }).t;\n    };\n    var addListeners = function (registeredFormatListeners, formats, callback, similar) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        if (!formatChangeItems[format]) {\n          formatChangeItems[format] = {\n            similar: similar,\n            callbacks: []\n          };\n        }\n        formatChangeItems[format].callbacks.push(callback);\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        formatChangeItems[format].callbacks = filter(formatChangeItems[format].callbacks, function (c) {\n          return c !== callback;\n        });\n        if (formatChangeItems[format].callbacks.length === 0) {\n          delete formatChangeItems[format];\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar) {\n      if (registeredFormatListeners.get() === null) {\n        setup$6(registeredFormatListeners, editor);\n      }\n      addListeners(registeredFormatListeners, formats, callback, similar);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var get$6 = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all'\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all'\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all'\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all'\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function () {\n            return true;\n          },\n          onformat: function (elm, fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n    var DefaultFormats = { get: get$6 };\n\n    function FormatRegistry(editor) {\n      var formats = {};\n      var get = function (name) {\n        return name ? formats[name] : formats;\n      };\n      var has$1 = function (name) {\n        return has(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (typeof name !== 'string') {\n            Tools.each(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray(format)) {\n              format = [format];\n            }\n            Tools.each(format, function (format) {\n              if (typeof format.deep === 'undefined') {\n                format.deep = !format.selector;\n              }\n              if (typeof format.split === 'undefined') {\n                format.split = !format.selector || format.inline;\n              }\n              if (typeof format.remove === 'undefined' && format.selector && !format.inline) {\n                format.remove = 'none';\n              }\n              if (format.selector && format.inline) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (typeof format.classes === 'string') {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(DefaultFormats.get(editor.dom));\n      register(editor.settings.formats);\n      return {\n        get: get,\n        has: has$1,\n        register: register,\n        unregister: unregister\n      };\n    }\n\n    var each$e = Tools.each;\n    var dom = DOMUtils$1.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        var elm;\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate, parentRequired;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var selectorToHtml = function (selector, editor) {\n      return parsedSelectorToHtml(parseSelector(selector), editor);\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag, previewElm, items;\n      var previewCss = '', parentFontSize, previewStyles;\n      previewStyles = editor.settings.preview_styles;\n      if (previewStyles === false) {\n        return '';\n      }\n      if (typeof previewStyles !== 'string') {\n        previewStyles = 'font-family font-size font-weight font-style text-decoration ' + 'text-transform color background-color border border-radius outline text-shadow';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        previewStyles = format.preview;\n        if (previewStyles === false) {\n          return '';\n        }\n      }\n      name = format.block || format.inline || 'span';\n      items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$e(format.styles, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setStyle(previewElm, name, value);\n        }\n      });\n      each$e(format.attributes, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setAttrib(previewElm, name, value);\n        }\n      });\n      each$e(format.classes, function (value) {\n        value = removeVars(value);\n        if (!dom.hasClass(previewElm, value)) {\n          dom.addClass(previewElm, value);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$e(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n    var Preview = {\n      getCssText: getCssText,\n      parseSelector: parseSelector,\n      selectorToHtml: selectorToHtml\n    };\n\n    var toggle = function (editor, formats, name, vars, node) {\n      var fmt = formats.get(name);\n      if (MatchFormat.match(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        RemoveFormat.remove(editor, name, vars, node);\n      } else {\n        ApplyFormat.applyFormat(editor, name, vars, node);\n      }\n    };\n    var ToggleFormat = { toggle: toggle };\n\n    var setup$7 = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n    var FormatShortcuts = { setup: setup$7 };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      FormatShortcuts.setup(editor);\n      setup$5(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: curry(ApplyFormat.applyFormat, editor),\n        remove: curry(RemoveFormat.remove, editor),\n        toggle: curry(ToggleFormat.toggle, editor, formats),\n        match: curry(MatchFormat.match, editor),\n        matchAll: curry(MatchFormat.matchAll, editor),\n        matchNode: curry(MatchFormat.matchNode, editor),\n        canApply: curry(MatchFormat.canApply, editor),\n        formatChanged: curry(formatChanged, editor, formatChangeState),\n        getCssText: curry(Preview.getCssText, editor)\n      };\n    };\n\n    var register$1 = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, value;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Option.from(node.firstChild).exists(function (firstChild) {\n              return !Zwsp.isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var i = nodes.length, node, value, type;\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        while (i--) {\n          node = nodes[i];\n          value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, '');\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var brNode1, brNode2;\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n    var DomSerializerFilters = {\n      register: register$1,\n      trimTrailingBr: trimTrailingBr\n    };\n\n    var preProcess = function (editor, node, args) {\n      var impl, doc, oldDoc;\n      var dom = editor.dom;\n      node = node.cloneNode(true);\n      impl = domGlobals.document.implementation;\n      if (impl.createHTMLDocument) {\n        doc = impl.createHTMLDocument('');\n        Tools.each(node.nodeName === 'BODY' ? node.childNodes : [node], function (node) {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (node.nodeName !== 'BODY') {\n          node = doc.body.firstChild;\n        } else {\n          node = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      Events.firePreProcess(editor, merge(args, { node: node }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return node;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n    var DomSerializerPreProcess = { process: process };\n\n    var removeAttrs = function (node, names) {\n      each(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$2 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n    var LegacyFilter = { register: register$2 };\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new Node$1('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new Node$1('#text', 3)).value = '\\xA0';\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === '\\xA0';\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty$2 = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (blockElements[node.name] || node.name === 'br');\n    };\n\n    var register$3 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getNonEmptyElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName !== 'br') {\n                    break;\n                  }\n                  if (prevName === 'br') {\n                    node = null;\n                    break;\n                  }\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new Node$1('#text', 3);\n                textNode.value = '\\xA0';\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length, node;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new Node$1('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node, classList, ci, className, classValue;\n          var validClasses = schema.getValidClasses();\n          var validClassesMap, valid;\n          while (i--) {\n            node = nodes[i];\n            classList = node.attr('class').split(' ');\n            classValue = '';\n            for (ci = 0; ci < classList.length; ci++) {\n              className = classList[ci];\n              valid = false;\n              validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n    };\n\n    var makeMap$4 = Tools.makeMap, each$f = Tools.each, explode$2 = Tools.explode, extend$2 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i;\n        var nonEmptyElements, whitespaceElements, nonSplitableElements, textBlockElements, specialElements, sibling, nextNode;\n        nonSplitableElements = makeMap$4('tr,td,th,tbody,thead,tfoot,table');\n        nonEmptyElements = schema.getNonEmptyElements();\n        whitespaceElements = schema.getWhiteSpaceElements();\n        textBlockElements = schema.getTextBlockElements();\n        specialElements = schema.getSpecialElements();\n        for (ni = 0; ni < nodes.length; ni++) {\n          node = nodes[ni];\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap(node);\n            continue;\n          }\n          parents = [node];\n          for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent) {\n            parents.push(parent);\n          }\n          if (parent && parents.length > 1) {\n            parents.reverse();\n            newParent = currentNode = filterNode(parents[0].clone());\n            for (i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = filterNode(parents[i].clone());\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty$2(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty$2(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new Node$1('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new Node$1('div', 1)));\n            } else {\n              if (specialElements[node.name]) {\n                node.empty().remove();\n              } else {\n                node.unwrap();\n              }\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var i, name, list;\n        name = node.name;\n        if (name in nodeFilters) {\n          list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        i = attributeFilters.length;\n        while (i--) {\n          name = attributeFilters[i].name;\n          if (name in node.attributes.map) {\n            list = matchedAttributes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[name] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$f(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name in nodeFilters) {\n          if (nodeFilters.hasOwnProperty(name)) {\n            out.push({\n              name: name,\n              callbacks: nodeFilters[name]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$f(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var parser, nodes, i, l, fi, fl, list, name;\n        var blockElements;\n        var invalidChildren = [];\n        var isInWhiteSpacePreservedElement;\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        blockElements = extend$2(makeMap$4('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        isInWhiteSpacePreservedElement = whiteSpaceElements.hasOwnProperty(args.context) || whiteSpaceElements.hasOwnProperty(settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, next, rootBlockNode;\n          var trim = function (rootBlockNode) {\n            if (rootBlockNode) {\n              node = rootBlockNode.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlockNode.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new Node$1(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var textNode, textNodeNext, textVal, sibling;\n          var blockElements = schema.getBlockElements();\n          for (textNode = node.prev; textNode && textNode.type === 3;) {\n            textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var name;\n          var output = {};\n          for (name in input) {\n            if (name !== 'li' && name !== 'p') {\n              output[name] = input[name];\n            }\n          }\n          return output;\n        };\n        parser = SaxParser$1({\n          validate: validate,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode;\n            newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var newNode, attrFiltersLen, elementRule, attrName, parent;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              parent = children[node.name];\n              if (parent && children[newNode.name] && !parent[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, elementRule, text, sibling, tempNode;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                if (!node.attr('name') && !node.attr('id')) {\n                  tempNode = node.parent;\n                  if (blockElements[node.name]) {\n                    node.empty().remove();\n                  } else {\n                    node.unwrap();\n                  }\n                  node = tempNode;\n                  return;\n                }\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new Node$1(args.context || settings.root_name, 11);\n        parser.parse(html);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!matchedNodes.hasOwnProperty(name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$3(exports, settings);\n      LegacyFilter.register(exports, settings);\n      return exports;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess$1 = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = Events.firePostProcess(editor, merge(args, { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = Zwsp.trim(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(Element.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? merge({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      DomSerializerFilters.trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = Serializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess$1(editor, args, content);\n    };\n    var DomSerializer = function (settings, editor) {\n      var dom, schema, htmlParser;\n      var tempAttrs = ['data-mce-selected'];\n      dom = editor && editor.dom ? editor.dom : DOMUtils$1.DOM;\n      schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      htmlParser = DomParser(settings, schema);\n      DomSerializerFilters.register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        var args = merge({ format: 'html' }, parserArgs ? parserArgs : {});\n        var targetNode = DomSerializerPreProcess.process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: function (rules) {\n          schema.addValidElements(rules);\n        },\n        setRules: function (rules) {\n          schema.setValidElements(rules);\n        },\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: function () {\n          return tempAttrs;\n        }\n      };\n    };\n\n    var Serializer$1 = function (settings, editor) {\n      var domSerializer = DomSerializer(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs\n      };\n    };\n\n    function BookmarkManager(selection) {\n      return {\n        getBookmark: curry(Bookmarks.getBookmark, selection),\n        moveToBookmark: curry(Bookmarks.moveToBookmark, selection)\n      };\n    }\n    (function (BookmarkManager) {\n      BookmarkManager.isBookmarkNode = Bookmarks.isBookmarkNode;\n    }(BookmarkManager || (BookmarkManager = {})));\n    var BookmarkManager$1 = BookmarkManager;\n\n    var isContentEditableFalse$a = NodeType.isContentEditableFalse;\n    var isContentEditableTrue$5 = NodeType.isContentEditableTrue;\n    var getContentEditableRoot$1 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$5(node) || isContentEditableFalse$a(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var ControlSelection = function (selection, editor) {\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, resizeHandles, selectedHandle;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = domGlobals.document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        return isImage(evt.target) && !RangePoint.isXYWithinRange(evt.clientX, evt.clientY, range);\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTarget = function (elm) {\n        return editor.dom.is(elm, 'figure.image') ? elm.querySelector('img') : elm;\n      };\n      var isResizable = function (elm) {\n        var selector = editor.settings.object_resizing;\n        if (selector === false || Env.iOS) {\n          return false;\n        }\n        if (typeof selector !== 'string') {\n          selector = 'table,img,figure.image,div';\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        return is$1(Element.fromDom(elm), selector);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if (isImage(selectedElm) && editor.settings.resize_img_proportional !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e) || isImage(selectedElm) && selectedHandle[2] * selectedHandle[3] !== 0;\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        dom.setStyles(getResizeTarget(selectedElmGhost), {\n          width: width,\n          height: height\n        });\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          Events.fireObjectResizeStart(editor, selectedElm, startW, startH);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        resizeStarted = false;\n        var setSizeProp = function (name, value) {\n          if (value) {\n            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {\n              dom.setStyle(getResizeTarget(selectedElm), name, value);\n            } else {\n              dom.setAttrib(getResizeTarget(selectedElm), name, value);\n            }\n          }\n        };\n        setSizeProp('width', width);\n        setSizeProp('height', height);\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        showResizeRect(selectedElm);\n        Events.fireObjectResized(editor, selectedElm, width, height);\n        dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        var position, targetWidth, targetHeight, e, rect;\n        hideResizeRect();\n        unbindResizeHandleEvents();\n        position = dom.getPos(targetElm, rootElement);\n        selectedElmX = position.x;\n        selectedElmY = position.y;\n        rect = targetElm.getBoundingClientRect();\n        targetWidth = rect.width || rect.right - rect.left;\n        targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        e = editor.fire('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = getResizeTarget(selectedElm).clientWidth;\n              startH = getResizeTarget(selectedElm).clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              handle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              selectedElmGhost = selectedElm.cloneNode(true);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = false;\n              selectedElmGhost.unSelectabe = true;\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              selectedElmGhost.removeAttribute('data-mce-selected');\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        selectedElm.setAttribute('data-mce-selected', '1');\n      };\n      var hideResizeRect = function () {\n        var name, handleElm;\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute('data-mce-selected');\n        }\n        for (name in resizeHandles) {\n          handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        }\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute('data-mce-selected');\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$a(getContentEditableRoot$1(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        for (var name in resizeHandles) {\n          var handle = resizeHandles[name];\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        }\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, false);\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.ie && Env.ie >= 11) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          editor.dom.bind(rootElement, 'mscontrolselect', function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$2(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$2(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$7 = function (element) {\n      return api$1.get(element);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position$1 = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position$1(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position$1(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position$1(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var isSafari = PlatformDetection$1.detect().browser.isSafari();\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position$1(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var win = doc.defaultView;\n      win.scrollTo(x, y);\n    };\n    var intoView = function (element, alignToTop) {\n      if (isSafari && isFunction(element.dom().scrollIntoViewIfNeeded)) {\n        element.dom().scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom().scrollIntoView(alignToTop);\n      }\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var element = doc.dom() === domGlobals.document ? Option.none() : Option.from(doc.dom().defaultView.frameElement);\n      return element.map(Element.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        view: view,\n        owner: owner$1\n    });\n\n    var find$4 = function (element) {\n      var doc = Element.fromDom(domGlobals.document);\n      var scroll = get$8(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left(),\n          top: b.top + loc.top()\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return Position$1(r.left + offset.left() + scroll.left(), r.top + offset.top() + scroll.top());\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText(last)) {\n            return {\n              element: last,\n              offset: get$5(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$7(element);\n      return {\n        element: element,\n        bottom: pos.top() + height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = Element.fromHtml('<span data-mce-bogus=\"all\">' + Zwsp.ZWSP + '</span>');\n      before(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove$1(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(Element.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = Element.fromDom(editor.getBody());\n      var doc = Element.fromDom(editor.getDoc());\n      reflow(body);\n      var scrollTop = get$8(doc).top();\n      var marker = createMarker(Element.fromDom(rng.startContainer), rng.startOffset);\n      f(doc, scrollTop, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = Element.fromDom(editor.getDoc());\n      var scrollTop = get$8(doc).top();\n      f(doc, scrollTop, element, alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(Element.fromDom(startElement), Element.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var fireScrollIntoViewEvent = function (editor, elm, alignToTop) {\n      var scrollEvent = editor.fire('ScrollIntoView', {\n        elm: elm,\n        alignToTop: alignToTop\n      });\n      return scrollEvent.isDefaultPrevented();\n    };\n    var scrollTo = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left(), pos.top(), doc);\n      } else {\n        var y = pos.top() - viewHeight + (marker.bottom - pos.top());\n        to(pos.left(), y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      if (marker.pos.top() < scrollTop) {\n        scrollTo(marker, viewHeight, alignToTop !== false, doc);\n      } else if (marker.bottom > viewHeight + scrollTop) {\n        scrollTo(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom().defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (editor, doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom().defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$4(marker.element);\n      var viewTop = get$8().top();\n      var viewBot = domGlobals.window.innerHeight + viewTop;\n      if (op.top() < viewTop) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top() > viewBot) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, curry(intoWindow), rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, elementMarker(element), curry(intoWindow), alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, curry(intoFrame, editor), rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, elementMarker(element), curry(intoFrame, editor), alignToTop);\n    };\n    var elementIntoView = function (editor, element, alignToTop) {\n      if (fireScrollIntoViewEvent(editor, element, alignToTop)) {\n        return;\n      }\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var rangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n    var ScrollIntoView = {\n      scrollElementIntoView: elementIntoView,\n      scrollRangeIntoView: rangeIntoView\n    };\n\n    var hasCeProperty = function (node) {\n      return NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node);\n    };\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var element, rng, rects;\n      element = doc.elementFromPoint(clientX, clientY);\n      rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return NodeType.isContentEditableFalse(findParent(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint$1 = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (doc.caretRangeFromPoint) {\n        rng = doc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n    var CaretRangeFromPoint = { fromPoint: fromPoint$1 };\n\n    var processRanges = function (editor, ranges) {\n      return map(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n    var EventProcessRanges = { processRanges: processRanges };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var tableModel = Immutable('element', 'width', 'rows');\n    var tableRow = Immutable('element', 'cells');\n    var cellPosition = Immutable('x', 'y');\n    var getSpan = function (td, key) {\n      var value = parseInt(get$1(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows();\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells();\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows();\n      var cells = rows[y] ? rows[y].cells() : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells().length > acc ? row.cells().length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows();\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells();\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Option.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Option.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows();\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells();\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element(), slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x(), sy = startPos.y();\n      var ex = endPos.x(), ey = endPos.y();\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element(), getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element());\n      var tableBody = Element.fromTag('tbody');\n      append$1(tableBody, rows);\n      append(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map(table.rows(), function (row) {\n        var cells = map(row.cells(), function (cell) {\n          var td = deep(cell);\n          remove(td, 'colspan');\n          remove(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element());\n        append$1(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom$1 = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each(descendants$1(tableElm, 'tr'), function (tr, y) {\n        each(descendants$1(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element(), getWidth(table.rows()), table.rows());\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n    var SimpleTableModel = {\n      fromDom: fromDom$1,\n      toDom: toDom,\n      subsection: subsection\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [Element.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n    var MultiRange = {\n      getRanges: getRanges,\n      getSelectedNodes: getSelectedNodes,\n      hasMultipleRanges: hasMultipleRanges\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter(MultiRange.getSelectedNodes(ranges), isTableCell);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants$1(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      var rangeCells = getCellsFromRanges(ranges);\n      return selectedCells.length > 0 ? selectedCells : rangeCells;\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(MultiRange.getRanges(editor.selection.getSel()), Element.fromDom(editor.getBody()));\n    };\n    var TableCellSelection = {\n      getCellsFromRanges: getCellsFromRanges,\n      getCellsFromElement: getCellsFromElement,\n      getCellsFromElementOrRanges: getCellsFromElementOrRanges,\n      getCellsFromEditor: getCellsFromEditor\n    };\n\n    var findParentListContainer = function (parents) {\n      return find(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          return [\n            Element.fromTag('li'),\n            Element.fromTag(name(listCont))\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap$3 = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = Element.fromDom(rng.commonAncestorContainer);\n      var parents = Parents.parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter(parents, function (elm) {\n        return isInline(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap$3(Element.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$1(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = SimpleTableModel.fromDom(tableElm);\n        return SimpleTableModel.subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([SimpleTableModel.toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$2 = function (rootNode, ranges) {\n      var selectedCells = TableCellSelection.getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n    var FragmentReader = { read: read$2 };\n\n    var getTextContent = function (editor) {\n      return Option.from(editor.selection.getRng()).map(function (rng) {\n        var bin = editor.dom.add(editor.getBody(), 'div', {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = Zwsp.trim(bin.innerText);\n        editor.dom.remove(bin);\n        return text;\n      }).getOr('');\n    };\n    var getHtmlContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var fragment;\n      var ranges = EventProcessRanges.processRanges(editor, MultiRange.getRanges(sel));\n      fragment = args.contextual ? FragmentReader.read(Element.fromDom(editor.getBody()), ranges).dom() : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.get = true;\n      args.format = args.format || 'html';\n      args.selection = true;\n      args = editor.fire('BeforeGetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('GetContent', args);\n        return args.content;\n      }\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        args.getInner = true;\n        var content = getHtmlContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          args.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', args);\n          return args.content;\n        }\n      }\n    };\n    var GetSelectionContent = { getContent: getContent$1 };\n\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent = function (node, rootNode, predicate) {\n      return findParent$1(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable$3 = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$3 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer(node) && hasParent(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new TreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (NodeType.isBr(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (NodeType.isContentEditableFalse(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && NodeType.isBr(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Option.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new TreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Option.none();\n        }\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Option.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Option.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Option.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Option.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Option.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node, nonEmptyElementsMap;\n      var directionLeft, isAfterNode, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      isAfterNode = NodeType.isElement(container) && offset === container.childNodes.length;\n      nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer(container)) {\n        return Option.none();\n      }\n      if (NodeType.isElement(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (NodeType.isDocument(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer(node)) {\n              return Option.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$3(node)) {\n              return Option.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = NodeType.isText(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$3(container)) {\n            return Option.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer(container)) {\n            return Option.none();\n          }\n          if (container.hasChildNodes() && isTable$3(container) === false) {\n            node = container;\n            var walker = new TreeWalker(container, body);\n            do {\n              if (NodeType.isContentEditableFalse(node) || isCaretContainer(node)) {\n                normalized = false;\n                break;\n              }\n              if (NodeType.isText(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$3(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (NodeType.isText(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (NodeType.isElement(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && NodeType.isBr(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && NodeType.isText(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Option.some(CaretPosition(container, offset)) : Option.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return RangeCompare.isEq(rng, normRng) ? Option.none() : Option.some(normRng);\n    };\n    var NormalizeRange = { normalize: normalize$2 };\n\n    var prependData = function (target, data) {\n      target.insertData(0, data);\n    };\n    var removeEmpty = function (text) {\n      if (text.dom().length === 0) {\n        remove$1(text);\n        return Option.none();\n      }\n      return Option.some(text);\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Option.from(fragment.firstChild).map(Element.fromDom);\n      var lastChild = Option.from(fragment.lastChild).map(Element.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText).bind(removeEmpty);\n      liftN([\n        prevText,\n        firstChild.filter(isText)\n      ], function (prev, start) {\n        prependData(start.dom(), prev.dom().data);\n        remove$1(prev);\n      });\n      liftN([\n        nextText,\n        lastChild.filter(isText)\n      ], function (next, end) {\n        var oldLength = end.dom().length;\n        end.dom().appendData(next.dom().data);\n        rng.setEnd(end.dom(), oldLength);\n        remove$1(next);\n      });\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      args = args || { format: 'html' };\n      args.set = true;\n      args.selection = true;\n      args.content = content;\n      return args;\n    };\n    var setContent$1 = function (editor, content, args) {\n      args = setupArgs(args, content);\n      if (!args.no_events) {\n        args = editor.fire('BeforeSetContent', args);\n        if (args.isDefaultPrevented()) {\n          editor.fire('SetContent', args);\n          return;\n        }\n      }\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(args.content));\n      editor.selection.setRng(rng);\n      ScrollIntoView.scrollRangeIntoView(editor, rng);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n    };\n    var SetSelectionContent = { setContent: setContent$1 };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Option.from(container).map(Element.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement(elm) ? Option.some(elm) : parent(elm);\n      }).map(function (elm) {\n        return elm.dom();\n      }).getOr(root);\n    };\n    var getStart$2 = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && NodeType.isText(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode$1 = function (root, rng) {\n      var elm, startContainer, endContainer, startOffset, endOffset;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      startOffset = rng.startOffset;\n      endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node, root;\n      var selectedBlocks = [];\n      root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart$2(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new TreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select$1 = function (dom, node, content) {\n      return Option.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint$1(dom, rng, node, true);\n          moveEndPoint$1(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && callbackMap.hasOwnProperty(selector)) {\n        var newCallbacks = filter(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                Tools.each(parents, function (node) {\n                  if (dom.is(node, selector)) {\n                    if (!currentSelectors[selector]) {\n                      Tools.each(callbacks, function (callback) {\n                        callback(true, {\n                          node: node,\n                          selector: selector,\n                          parents: parents\n                        });\n                      });\n                      currentSelectors[selector] = callbacks;\n                    }\n                    matchedSelectors[selector] = callbacks;\n                    return false;\n                  }\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$3(Element.fromDom(node.ownerDocument), Element.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var Selection$1 = function (dom, win, serializer, editor) {\n      var bookmarkManager;\n      var controlSelection;\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (!node) {\n          moveEndPoint$1(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        } else {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        }\n      };\n      var getContent = function (args) {\n        return GetSelectionContent.getContent(editor, args);\n      };\n      var setContent = function (content, args) {\n        return SetSelectionContent.setContent(editor, content, args);\n      };\n      var getStart = function (real) {\n        return getStart$2(editor.getBody(), getRng(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select = function (node, content) {\n        select$1(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng = function () {\n        var selection, rng, elm, doc;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        if (!win) {\n          return null;\n        }\n        doc = win.document;\n        if (typeof doc === 'undefined' || doc === null) {\n          return null;\n        }\n        if (editor.bookmark !== undefined && EditorFocus.hasFocus(editor) === false) {\n          var bookmark = SelectionBookmark.getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return EventProcessRanges.processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !NodeType.isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n          }\n        } catch (ex) {\n        }\n        rng = EventProcessRanges.processRanges(editor, [rng])[0];\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var sel, node, evt;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        sel = getSel();\n        evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode = function () {\n        return getNode$1(editor.getBody(), getRng());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorRange, focusRange;\n        if (!sel || !sel.anchorNode || !sel.focusNode) {\n          return true;\n        }\n        anchorRange = dom.createRng();\n        anchorRange.setStart(sel.anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        focusRange = dom.createRng();\n        focusRange.setStart(sel.focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng();\n        var sel = getSel();\n        if (!MultiRange.hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = NormalizeRange.normalize(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return ScrollIntoView.scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(CaretRangeFromPoint.fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng();\n        return rng.collapsed ? CaretPosition$1.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng,\n        getStart: getStart,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      bookmarkManager = BookmarkManager$1(exports);\n      controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var isText$8 = NodeType.isText;\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(Zwsp.ZWSP);\n    };\n    var insertBefore = function (node) {\n      if (isText$8(node.previousSibling)) {\n        if (endsWithCaretContainer$1(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(Zwsp.ZWSP);\n          return node.previousSibling;\n        }\n      } else if (isText$8(node)) {\n        if (startsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.insertData(0, Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter = function (node) {\n      if (isText$8(node.nextSibling)) {\n        if (startsWithCaretContainer$1(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, Zwsp.ZWSP);\n          return node.nextSibling;\n        }\n      } else if (isText$8(node)) {\n        if (endsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.appendData(Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline$1 = function (before, node) {\n      return before ? insertBefore(node) : insertAfter(node);\n    };\n    var insertInlineBefore = curry(insertInline$1, true);\n    var insertInlineAfter = curry(insertInline$1, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (NodeType.isText(pos.container())) {\n        return insertInline$1(before, pos.container());\n      } else {\n        return insertInline$1(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, text.length - 1));\n      }, function (element) {\n        return CaretFinder.firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition$1(text, 1);\n          } else {\n            return CaretPosition$1(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return CaretFinder.lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition$1(text, text.length - 1);\n          } else {\n            return CaretPosition$1(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, 1));\n      });\n    };\n    var BoundaryCaret = { renderCaret: renderCaret };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$1(Element.fromDom(elm), Settings.getInlineBoundarySelector(editor));\n    };\n    var isRtl$1 = function (element) {\n      return DOMUtils$1.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter(DOMUtils$1.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Option.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock(node1, rootNode);\n      var block2 = getParentBlock(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.nextSibling)) {\n            return CaretPosition$1(container.nextSibling, 0);\n          } else {\n            return CaretPosition$1.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition$1(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.previousSibling)) {\n            return CaretPosition$1(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition$1.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition$1(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n    var InlineUtils = {\n      isInlineTarget: isInlineTarget,\n      findRootInline: findRootInline,\n      isRtl: isRtl$1,\n      isAtZwsp: isAtZwsp,\n      normalizePosition: normalizePosition,\n      normalizeForwards: normalizeForwards,\n      normalizeBackwards: normalizeBackwards,\n      hasSameParentBlock: hasSameParentBlock\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Option.none();\n    };\n    var LazyEvaluator = { evaluateUntil: evaluateUntil };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before$4 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.nextPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Option.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return InlineUtils.findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start$1 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = CaretFinder.prevPosition(inline, nPos);\n        return prevPos.isNone() ? Option.some(Location.start(inline)) : Option.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = CaretFinder.nextPosition(inline, nPos);\n        return nextPos.isNone() ? Option.some(Location.end(inline)) : Option.none();\n      });\n    };\n    var after$3 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.prevPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Option.none);\n    };\n    var isValidLocation = function (location) {\n      return InlineUtils.isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = LazyEvaluator.evaluateUntil([\n        before$4,\n        start$1,\n        end,\n        after$3\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq$5 = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return liftN([\n        InlineUtils.findRootInline(isInlineTarget, rootNode, from),\n        InlineUtils.findRootInline(isInlineTarget, rootNode, to)\n      ], function (fromInline, toInline) {\n        if (fromInline !== toInline && InlineUtils.hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(constant(true), function (fromLocation) {\n        return !isEq$5(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var to = CaretFinder.fromPosition(forward, rootNode, from).map(curry(InlineUtils.normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Option.some, Location.start), Option.none, compose(Option.some, Location.after), Option.none);\n      } else {\n        return location.fold(Option.none, compose(Option.some, Location.before), Option.none, compose(Option.some, Location.end));\n      }\n    };\n    var findLocation = function (forward, isInlineTarget, rootNode, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    var BoundaryLocation = {\n      readLocation: readLocation,\n      findLocation: findLocation,\n      prevLocation: curry(findLocation, false),\n      nextLocation: curry(findLocation, true),\n      getElement: getElement,\n      outside: outside,\n      inside: inside\n    };\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition$1(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition$1.fromRangeEnd(rng) : CaretPosition$1.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n    var WordSelection = {\n      hasSelectionModifyApi: hasSelectionModifyApi,\n      moveByWord: moveByWord\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var isFeatureEnabled = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation$1 = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var location = BoundaryLocation.findLocation(forward, isInlineTarget, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var selectedInlines = filter(dom.select('*[data-mce-selected=\"inline-boundary\"]'), isInlineTarget);\n      var targetInlines = filter(elms, isInlineTarget);\n      each(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition$1.isTextPosition(pos) && InlineUtils.isAtZwsp(pos) === false) {\n          setCaretPosition(editor, CaretContainerRemove.removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter(elms, isInlineTarget);\n        each(inlines, function (inline) {\n          var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n          BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move$1 = function (editor, caret, forward) {\n      return function () {\n        return isFeatureEnabled(editor) ? findLocation$1(editor, caret, forward).isSome() : false;\n      };\n    };\n    var moveWord = function (forward, editor, caret) {\n      return function () {\n        return isFeatureEnabled(editor) ? WordSelection.moveByWord(forward, editor) : false;\n      };\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isFeatureEnabled(editor)) {\n          toggleInlines(isInlineTarget, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var BoundarySelection = {\n      move: move$1,\n      moveNextWord: moveNextWord,\n      movePrevWord: movePrevWord,\n      setupSelectedState: setupSelectedState,\n      setCaretPosition: setCaretPosition\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? positions.reverse() : positions;\n    };\n    var walk$3 = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (NodeType.isBr(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start, nextPos;\n      var positions = [];\n      while (currentPos) {\n        nextPos = walk$3(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (NodeType.isBr(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Option.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Option.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Option.some(newPos);\n        }, function (lastPos) {\n          return liftN([\n            head(lastPos.getClientRects()),\n            head(newPos.getClientRects())\n          ], function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Option.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var getFirstLinePositions = function (scope) {\n      return CaretFinder.firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return CaretFinder.lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var isContentEditableFalse$b = NodeType.isContentEditableFalse;\n    var getSelectedNode$1 = getSelectedNode;\n    var moveToCeFalseHorizontally = function (direction, editor, getNextPosFn, range) {\n      var forwards = direction === HDirection.Forwards;\n      var isBeforeContentEditableFalseFn = forwards ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      if (!range.collapsed) {\n        var node = getSelectedNode$1(range);\n        if (isContentEditableFalse$b(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, true);\n        }\n      }\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeContentEditableFalseFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = InlineUtils.normalizePosition(forwards, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        if (rangeIsInContainerBlock) {\n          return range;\n        }\n        return null;\n      }\n      if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, true);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, true);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaret(editor, nextCaretPosition.toRange(), true);\n      }\n      return null;\n    };\n    var moveToCeFalseVertically = function (direction, editor, walkerFn, range) {\n      var caretPosition, linePositions, nextLinePositions;\n      var closestNextLineRect, caretClientRect, clientX;\n      var dist1, dist2, contentEditableFalseNode;\n      contentEditableFalseNode = getSelectedNode$1(range);\n      caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      nextLinePositions = filter(linePositions, isLine(1));\n      caretClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode();\n      }\n      if (isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode(true);\n      }\n      if (!caretClientRect) {\n        return null;\n      }\n      clientX = caretClientRect.left;\n      closestNextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (closestNextLineRect) {\n        if (isContentEditableFalse$b(closestNextLineRect.node)) {\n          dist1 = Math.abs(clientX - closestNextLineRect.left);\n          dist2 = Math.abs(clientX - closestNextLineRect.right);\n          return showCaret(direction, editor, closestNextLineRect.node, dist1 < dist2, true);\n        }\n      }\n      if (contentEditableFalseNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), contentEditableFalseNode);\n        closestNextLineRect = findClosestClientRect(filter(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n        closestNextLineRect = ArrUtils.last(filter(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n      }\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(Settings.getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var pre, caretPos, newBlock;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      if (range.collapsed && editor.settings.forced_root_block) {\n        pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        if (direction === 1) {\n          caretPos = getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        } else {\n          caretPos = getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        }\n        if (!caretPos) {\n          newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var newRange;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseHorizontally(direction, editor, getNextPosFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var getVerticalRange = function (editor, down) {\n      var newRange;\n      var direction = down ? 1 : -1;\n      var walkerFn = down ? downUntil : upUntil;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseVertically(direction, editor, walkerFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var moveH = function (editor, forward) {\n      return function () {\n        var newRng = getHorizontalRange(editor, forward);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var moveV = function (editor, down) {\n      return function () {\n        var newRng = getVerticalRange(editor, down);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var isCefPosition = function (forward) {\n      return function (pos) {\n        return forward ? isAfterContentEditableFalse(pos) : isBeforeContentEditableFalse(pos);\n      };\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      return function () {\n        var from = forward ? CaretPosition$1.fromRangeEnd(editor.selection.getRng()) : CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        var result = forward ? getPositionsUntilNextLine(editor.getBody(), from) : getPositionsUntilPreviousLine(editor.getBody(), from);\n        var to = forward ? last(result.positions) : head(result.positions);\n        return to.filter(isCefPosition(forward)).fold(constant(false), function (pos) {\n          editor.selection.setRng(pos.toRange());\n          return true;\n        });\n      };\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone$1(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Option.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Option.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Option.none());\n    };\n    var getClosestCell = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants$1(Element.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom();\n      });\n      var corners = filter(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove$1 = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow$1 = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove$1);\n    var getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow$1);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      ScrollIntoView.scrollRangeIntoView(editor, rng);\n    };\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.map(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      }).getOr(false);\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !NodeType.isBr(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition$1.fromRangeStart(rng);\n      return CaretFinder.positionIn(!forward, table).map(function (pos) {\n        return pos.isEqual(caretPos);\n      }).getOr(false);\n    };\n    var navigateHorizontally = function (editor, forward, table, td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        var newRng = showCaret(direction, editor, table, !forward, true);\n        moveToRange(editor, newRng);\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition$1.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition$1.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return NodeType.isElement(node) && node.nodeName === 'TABLE' ? Option.some(node) : Option.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = Element.fromTag(forcedRootBlock);\n          setAll(element, Settings.getForcedRootBlockAttrs(editor));\n          append(element, Element.fromTag('br'));\n          if (down) {\n            after(Element.fromDom(table), element);\n          } else {\n            before(Element.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom(), 0);\n          rng.setEnd(element.dom(), 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return CaretFinder.positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition$1.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var moveH$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateHorizontally(editor, forward, table);\n          });\n        }).getOr(false);\n      };\n    };\n    var moveV$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateVertically(editor, forward, table, td);\n          });\n        }).getOr(false);\n      };\n    };\n\n    var isTarget = function (node) {\n      return contains(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = domGlobals.document.createRange();\n      rng.setStartBefore(target.dom());\n      rng.setEndBefore(target.dom());\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = Element.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock$1 = function (root, forward, blockName, attrs) {\n      var block = Element.fromTag(blockName);\n      var br = Element.fromTag('br');\n      setAll(block, attrs);\n      append(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock$1(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest(Element.fromDom(pos.container()), isBlock, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom(), pos) : isAtFirstLine(root.dom(), pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = Element.fromDom(editor.getBody());\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var rootBlock = Settings.getForcedRootBlock(editor);\n      var rootBlockAttrs = Settings.getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      return function () {\n        if (editor.selection.isCollapsed()) {\n          return moveCaretToNewEmptyLine(editor, forward);\n        } else {\n          return false;\n        }\n      };\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map(patterns, function (pattern) {\n        return merge({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var args = Array.prototype.slice.call(arguments, 1);\n      return function () {\n        return f.apply(null, args);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n    var MatchKeys = {\n      match: match$1,\n      action: action,\n      execute: execute\n    };\n\n    var executeKeydownOverride = function (editor, caret, evt) {\n      var os = PlatformDetection$1.detect().os;\n      MatchKeys.execute([\n        {\n          keyCode: VK.RIGHT,\n          action: moveH(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: moveH$1(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH$1(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$1(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$1(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: BoundarySelection.move(editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: BoundarySelection.move(editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.moveNextWord(editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.movePrevWord(editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$2(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$2(editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, caret, evt);\n        }\n      });\n    };\n    var ArrowKeys = { setup: setup$8 };\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, Element.fromDom(elm.dom().parentNode));\n      };\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      return contains$3(rootNode, elm) ? closest(elm, function (element) {\n        return isTextBlock(element) || isListItem(element);\n      }, isBeforeRoot(rootNode)) : Option.none();\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return liftN([\n        CaretFinder.firstPositionIn(elm),\n        CaretFinder.lastPositionIn(elm)\n      ], function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        var normalizedFromPos = InlineUtils.normalizePosition(false, fromPos);\n        if (forward) {\n          return CaretFinder.nextPosition(elm, normalizedFromPos).map(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          }).getOr(false);\n        } else {\n          return CaretFinder.prevPosition(elm, normalizedFromPos).map(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          }).getOr(false);\n        }\n      }).getOr(true);\n    };\n    var DeleteUtils = {\n      getParentBlock: getParentBlock$1,\n      paddEmptyBody: paddEmptyBody,\n      willDeleteLastPositionInElement: willDeleteLastPositionInElement\n    };\n\n    var BlockPosition = Immutable('block', 'position');\n    var BlockBoundary = Immutable('from', 'to');\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = Element.fromDom(rootNode);\n      var containerElm = Element.fromDom(pos.container());\n      return DeleteUtils.getParentBlock(rootElm, containerElm).map(function (block) {\n        return BlockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from().block(), blockBoundary.to().block()) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from().block()).bind(function (parent1) {\n        return parent(blockBoundary.to().block()).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable = function (blockBoundary) {\n      return NodeType.isContentEditableFalse(blockBoundary.from().block()) === false && NodeType.isContentEditableFalse(blockBoundary.to().block()) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (NodeType.isBr(blockPosition.position().getNode()) && Empty.isEmpty(blockPosition.block()) === false) {\n        return CaretFinder.positionIn(false, blockPosition.block().dom()).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position())) {\n            return CaretFinder.fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Option.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition$1.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return CaretFinder.fromPosition(forward, rootNode, blockPos.position()).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return liftN([\n        fromBlockPos,\n        toBlockPos\n      ], BlockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable(blockBoundary);\n      });\n    };\n    var read$3 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Option.none();\n    };\n    var BlockMergeBoundary = { read: read$3 };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex(children$1, isBlock).fold(function () {\n        return children$1;\n      }, function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each(children, remove$1);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = Parents.parentsAndSelf(block, rootNode);\n      return find(parents.reverse(), Empty.isEmpty).each(remove$1);\n    };\n    var isEmptyBefore = function (el) {\n      return filter(prevSiblings(el), function (el) {\n        return !Empty.isEmpty(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (Empty.isEmpty(toBlock)) {\n        PaddingBr.fillWithPaddingBr(toBlock);\n        return CaretFinder.firstPositionIn(toBlock.dom());\n      }\n      if (isEmptyBefore(insertionPoint) && Empty.isEmpty(fromBlock)) {\n        before(insertionPoint, Element.fromTag('br'));\n      }\n      var position = CaretFinder.prevPosition(toBlock.dom(), CaretPosition$1.before(insertionPoint.dom()));\n      each(extractChildren(fromBlock), function (child) {\n        before(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (Empty.isEmpty(toBlock)) {\n        remove$1(toBlock);\n        if (Empty.isEmpty(fromBlock)) {\n          PaddingBr.fillWithPaddingBr(fromBlock);\n        }\n        return CaretFinder.firstPositionIn(fromBlock.dom());\n      }\n      var position = CaretFinder.lastPositionIn(toBlock.dom());\n      each(extractChildren(fromBlock), function (child) {\n        append(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf = Parents.parentsAndSelf(block, toBlock);\n      return Option.from(parentsAndSelf[parentsAndSelf.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$3(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Option.none();\n    };\n    var trimBr = function (first, block) {\n      CaretFinder.positionIn(first, block.dom()).map(function (position) {\n        return position.getNode();\n      }).map(Element.fromDom).filter(isBr$1).each(remove$1);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n    var MergeBlocks = { mergeBlocks: mergeBlocks };\n\n    var backspaceDelete = function (editor, forward) {\n      var position;\n      var rootNode = Element.fromDom(editor.getBody());\n      position = BlockMergeBoundary.read(rootNode.dom(), forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return MergeBlocks.mergeBlocks(rootNode, forward, blockBoundary.from().block(), blockBoundary.to().block());\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n    var BlockBoundaryDelete = { backspaceDelete: backspaceDelete };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return liftN([\n        DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.startContainer)),\n        DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.endContainer))\n      ], function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          MergeBlocks.mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = Element.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor(node, isTableCell, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = CaretFinder.prevPosition(root.dom(), CaretPosition$1.fromRangeStart(rng)).isNone();\n      var noNext = CaretFinder.nextPosition(root.dom(), CaretPosition$1.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange = function (editor) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange(editor);\n    };\n    var BlockRangeDelete = { backspaceDelete: backspaceDelete$1 };\n\n    var isBr$5 = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$1);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      var scope = head(parentBlocks).getOr(root);\n      return CaretFinder.fromPosition(forward, scope.dom(), pos).filter(isBr$5);\n    };\n    var isBeforeBr = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$1) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$1) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isCompoundElement = function (node) {\n      return isTableCell(Element.fromDom(node)) || isListItem(Element.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return NodeType.isElement(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline(Element.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(constant(false), inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return DeleteUtils.getParentBlock(Element.fromDom(root), Element.fromDom(from.getNode())).map(function (blockElm) {\n        return Empty.isEmpty(blockElm) ? DeleteAction.remove(blockElm.dom()) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Option.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return CaretFinder.fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Option.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Option.none();\n        } else if (forward && NodeType.isContentEditableFalse(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && NodeType.isContentEditableFalse(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && NodeType.isContentEditableFalse(elm.nextSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && NodeType.isContentEditableFalse(elm.previousSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Option.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Option.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Option.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Option.none();\n        } else {\n          return Option.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Option.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read$4 = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition$1.fromRangeStart(normalizedRange);\n      var rootElement = Element.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        DeleteElement.deleteElement(editor, forward, Element.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition$1.before(element) : CaretPosition$1.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Option.from(getContentEditableRoot$2(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(NodeType.isContentEditableFalse).fold(function () {\n        var result = read$4(editor.getBody(), forward, editor.selection.getRng()).map(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n        return result.getOr(false);\n      }, function () {\n        return true;\n      });\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each(descendants$1(rootElement, '.mce-offscreen-selection'), remove$1);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (NodeType.isContentEditableFalse(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(NodeType.isContentEditableFalse);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(Element.fromDom(editor.getBody()));\n          DeleteElement.deleteElement(editor, forward, Element.fromDom(editor.selection.getNode()));\n          DeleteUtils.paddEmptyBody(editor);\n          return true;\n        }, function () {\n          return true;\n        });\n      }\n      return false;\n    };\n    var getContentEditableRoot$2 = function (root, node) {\n      while (node && node !== root) {\n        if (NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var paddEmptyElement = function (editor) {\n      var br;\n      var ceRoot = getContentEditableRoot$2(editor.getBody(), editor.selection.getNode());\n      if (NodeType.isContentEditableTrue(ceRoot) && editor.dom.isBlock(ceRoot) && editor.dom.isEmpty(ceRoot)) {\n        br = editor.dom.create('br', { 'data-mce-bogus': '1' });\n        editor.dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        editor.selection.setRng(CaretPosition$1.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n    var CefDelete = {\n      backspaceDelete: backspaceDelete$2,\n      paddEmptyElement: paddEmptyElement\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      var caretRange = showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true);\n      if (range.collapsed) {\n        var deleteRange = range.cloneRange();\n        if (forward) {\n          deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n        } else {\n          deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n        }\n        deleteRange.deleteContents();\n      } else {\n        range.deleteContents();\n      }\n      editor.selection.setRng(caretRange);\n      trimEmptyTextNode$1(editor.dom, node);\n      return true;\n    };\n    var deleteCefBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!NodeType.isText(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var isBeforeContentEditableFalseFn = forward ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = InlineUtils.normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        return false;\n      } else if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$3 = function (editor, forward) {\n      return deleteCefBoundaryText(editor, forward);\n    };\n    var CefBoundaryDelete = { backspaceDelete: backspaceDelete$3 };\n\n    var isFeatureEnabled$1 = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var rangeFromPositions = function (from, to) {\n      var range = domGlobals.document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return liftN([\n        CaretFinder.firstPositionIn(elm),\n        CaretFinder.lastPositionIn(elm)\n      ], function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        return CaretFinder.nextPosition(elm, normalizedFirstPos).map(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        }).getOr(true);\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n          BoundarySelection.setCaretPosition(editor, pos);\n          return true;\n        }).getOr(false);\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        BoundaryLocation.readLocation(isInlineTarget, rootNode, CaretPosition$1.fromRangeStart(editor.selection.getRng())).map(BoundaryLocation.inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope$1(editor.getBody(), from.container());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var fromLocation = BoundaryLocation.readLocation(isInlineTarget, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Option.some(BoundaryLocation.inside(location))), Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none);\n        } else {\n          return location.fold(Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none, constant(Option.some(BoundaryLocation.inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = CaretFinder.navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return BoundaryLocation.readLocation(isInlineTarget, rootNode, pos);\n        });\n        if (fromLocation.isSome() && toLocation.isSome()) {\n          return InlineUtils.findRootInline(isInlineTarget, rootNode, from).map(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              DeleteElement.deleteElement(editor, forward, Element.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          }).getOr(false);\n        } else {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          }).getOr(false);\n        }\n      });\n    };\n    var backspaceDelete$4 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isFeatureEnabled$1(editor)) {\n        var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n    var BoundaryDelete = { backspaceDelete: backspaceDelete$4 };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = Parents.parentsAndSelf(startElm, rootElm);\n      return findIndex(parents, isBlock).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild = function (elm) {\n      return children(elm).length === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map(filter(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom();\n      });\n      if (formatNodes.length === 0) {\n        DeleteElement.deleteElement(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom(), formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret = function (editor, forward) {\n      var rootElm = Element.fromDom(editor.getBody());\n      var startElm = Element.fromDom(editor.selection.getStart());\n      var parentInlines = filter(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last(parentInlines).map(function (target) {\n        var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (DeleteUtils.willDeleteLastPositionInElement(forward, fromPos, target.dom()) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret(editor, forward) : false;\n    };\n    var InlineFormatDelete = { backspaceDelete: backspaceDelete$5 };\n\n    var tableCellRng = Immutable('start', 'end');\n    var tableSelection = Immutable('rng', 'table', 'cells');\n    var deleteAction = Adt.generate([\n      { removeTable: ['element'] },\n      { emptyCells: ['cells'] }\n    ]);\n    var isRootFromElement = function (root) {\n      return curry(eq, root);\n    };\n    var getClosestCell$1 = function (container, isRoot) {\n      return closest$1(Element.fromDom(container), 'td,th', isRoot);\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$1(cell, 'table', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return eq(cellRng.start(), cellRng.end()) === false;\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end(), isRoot).bind(function (endParentTable) {\n          return eq(startParentTable, endParentTable) ? Option.some(startParentTable) : Option.none();\n        });\n      });\n    };\n    var getTableCells = function (table) {\n      return descendants$1(table, 'td,th');\n    };\n    var getCellRangeFromStartTable = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (table) {\n        return last(getTableCells(table)).map(function (endCell) {\n          return tableCellRng(cellRng.start(), endCell);\n        });\n      });\n    };\n    var partialSelection = function (isRoot, rng) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return rng.collapsed ? Option.none() : liftN([\n        startCell,\n        endCell\n      ], tableCellRng).fold(function () {\n        return startCell.fold(function () {\n          return endCell.bind(function (endCell) {\n            return getClosestTable(endCell, isRoot).bind(function (table) {\n              return head(getTableCells(table)).map(function (startCell) {\n                return tableCellRng(startCell, endCell);\n              });\n            });\n          });\n        }, function (startCell) {\n          return getClosestTable(startCell, isRoot).bind(function (table) {\n            return last(getTableCells(table)).map(function (endCell) {\n              return tableCellRng(startCell, endCell);\n            });\n          });\n        });\n      }, function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng) ? Option.none() : getCellRangeFromStartTable(cellRng, isRoot);\n      });\n    };\n    var isWithinSameTable = function (isRoot, cellRng) {\n      return getTableFromCellRng(cellRng, isRoot).isSome();\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell$1(rng.startContainer, isRoot);\n      var endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return liftN([\n        startCell,\n        endCell\n      ], tableCellRng).filter(isExpandedCellRng).filter(function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng);\n      }).orThunk(function () {\n        return partialSelection(isRoot, rng);\n      });\n    };\n    var getTableSelectionFromCellRng = function (cellRng, isRoot) {\n      return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n        return tableSelection(cellRng, table, getTableCells(table));\n      });\n    };\n    var getTableSelectionFromRng = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      return getCellRng(rng, isRoot).bind(function (cellRng) {\n        return getTableSelectionFromCellRng(cellRng, isRoot);\n      });\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return liftN([\n        getCellIndex(tableSelection.cells(), tableSelection.rng().start()),\n        getCellIndex(tableSelection.cells(), tableSelection.rng().end())\n      ], function (startIndex, endIndex) {\n        return tableSelection.cells().slice(startIndex, endIndex + 1);\n      });\n    };\n    var getAction = function (tableSelection) {\n      return getSelectedCells(tableSelection).map(function (selected) {\n        var cells = tableSelection.cells();\n        return selected.length === cells.length ? deleteAction.removeTable(tableSelection.table()) : deleteAction.emptyCells(selected);\n      });\n    };\n    var getActionFromCells = function (cells) {\n      return deleteAction.emptyCells(cells);\n    };\n    var getActionFromRange = function (root, rng) {\n      return getTableSelectionFromRng(root, rng).bind(getAction);\n    };\n    var TableDeleteAction = {\n      getActionFromRange: getActionFromRange,\n      getActionFromCells: getActionFromCells\n    };\n\n    var emptyCells = function (editor, cells) {\n      each(cells, PaddingBr.fillWithPaddingBr);\n      editor.selection.setCursorLocation(cells[0].dom(), 0);\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      DeleteElement.deleteElement(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return TableDeleteAction.getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteTableElement, editor), curry(emptyCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$1 = function (editor, startElm) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      var selectedCells = TableCellSelection.getCellsFromEditor(editor);\n      return selectedCells.length !== 0 ? emptyCells(editor, selectedCells) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), isTableCell);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), function (elm) {\n        return name(elm) === 'caption';\n      });\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, Element.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      PaddingBr.fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom(), 0);\n      return Option.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return CaretFinder.firstPositionIn(fromCaption.dom()).bind(function (first) {\n        return CaretFinder.lastPositionIn(fromCaption.dom()).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, Element.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Option.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return Empty.isEmpty(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return Empty.isEmpty(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || CaretFinder.fromPosition(forward, editor.getBody(), fromPos).map(function (pos) {\n        return isNearTable(forward, pos);\n      }).getOr(false);\n    };\n    var deleteCaret$1 = function (editor, forward, startElm) {\n      var rootElm = Element.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      var startElm = Element.fromDom(editor.selection.getStart(true));\n      var cells = TableCellSelection.getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$1(editor, forward, startElm) : deleteRange$1(editor, startElm);\n    };\n    var TableDelete = { backspaceDelete: backspaceDelete$6 };\n\n    var deleteCaret$2 = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return CaretFinder.fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Option.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).map(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      }).getOr(false);\n    };\n    var backspaceDelete$7 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n    var PageBreakDelete = { backspaceDelete: backspaceDelete$7 };\n\n    var isEditable$1 = function (target) {\n      return closest(target, function (elm) {\n        return NodeType.isContentEditableTrue(elm.dom()) || NodeType.isContentEditableFalse(elm.dom());\n      }).exists(function (elm) {\n        return NodeType.isContentEditableTrue(elm.dom());\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$1(element) ? 'margin' : 'padding';\n      var suffix = get$2(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, Element.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(Settings.shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom());\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return editor.readonly !== true && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).map(isListComponent).getOr(false);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter(map(editor.selection.getSelectedBlocks(), Element.fromDom), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable$1(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = Settings.getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = Settings.shouldIndentUseMargin(editor);\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom());\n      });\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return CaretFinder.navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock = function (root, pos) {\n      return find(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n        return getClosestBlock(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom()) === false && contains$3(fromBlock, Element.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom(), pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var backspaceDelete$8 = function (editor, _caret, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition$1.fromRangeStart(rng);\n        var block = Element.fromDom(dom.getParent(rng.startContainer, dom.isBlock));\n        if (isAtStartOfBlock(block, pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n    var Outdent = { backspaceDelete: backspaceDelete$8 };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(Outdent.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BoundaryDelete.backspaceDelete, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BoundaryDelete.backspaceDelete, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(PageBreakDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(PageBreakDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$9 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n    var DeleteBackspaceKeys = { setup: setup$9 };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, rng, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode('\\xA0'), root.firstChild);\n        }\n      }\n      rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new TreeWalker(root, root);\n        while (node = walker.current()) {\n          if (NodeType.isText(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (NodeType.isBr(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      editor.selection.scrollIntoView(root);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock$2 = function (editor) {\n      return Option.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock$2(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock$2(editor).filter(function (elm) {\n        return isListItem(Element.fromDom(elm));\n      }).isSome();\n    };\n    var NewLineUtils = {\n      moveToCaretPosition: moveToCaretPosition,\n      getEditableRoot: getEditableRoot,\n      getParentBlock: getParentBlock$2,\n      getParentBlockName: getParentBlockName,\n      isListItemParentBlock: isListItemParentBlock\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var hasParent$1 = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (NodeType.isElement(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n      }\n      dom.remove(parentBlock);\n      NewLineUtils.moveToCaretPosition(editor, newBlock);\n    };\n    var InsertLi = { insert: insert };\n\n    var trimZwsp = function (fragment) {\n      each(descendants(Element.fromDom(fragment), isText), function (text) {\n        var rawNode = text.dom();\n        rawNode.nodeValue = Zwsp.trim(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell$4 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (NodeType.isElement(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (NodeType.isText(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === Zwsp.ZWSP ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === Zwsp.ZWSP ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (NodeType.isText(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        editor.dom.setAttribs(node, Settings.getForcedRootBlockAttrs(editor));\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot$1(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell$4(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      var lastChild;\n      block.normalize();\n      lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$1 = function (editor, evt) {\n      var tmpRng, editableRoot, container, offset, parentBlock, shiftKey;\n      var newBlock, fragment, containerBlock, parentBlockName, containerBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n          setForcedBlockAttrs(editor, block);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (Settings.shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || Bookmarks.isBookmarkNode(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (NodeType.isText(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && NodeType.isElement(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new TreeWalker(container, parentBlock);\n        if (NodeType.isText(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (NodeType.isElement(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (NodeType.isText(node) && !/^[ \\t\\r\\n]*$/.test(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (Settings.shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      };\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = Settings.getForcedRootBlock(editor);\n      shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (NodeType.isElement(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && NodeType.isText(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      editableRoot = getEditableRoot$1(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          InsertLi.insert(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        NewLineUtils.moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          NewLineUtils.moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n    var InsertBlock = { insert: insert$1 };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new TreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var scrollToBr = function (dom, selection, brElm) {\n      var marker = dom.create('span', {}, '&nbsp;');\n      brElm.parentNode.insertBefore(marker, brElm);\n      selection.scrollIntoView(marker);\n      dom.remove(marker);\n    };\n    var moveSelectionToBr = function (dom, selection, brElm, extraBr) {\n      var rng = dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      selection.setRng(rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      scrollToBr(dom, selection, brElm);\n      moveSelectionToBr(dom, selection, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = Element.fromTag('br');\n      before(Element.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after(Element.fromDom(inline), Element.fromTag('br'));\n      }\n      var br = Element.fromTag('br');\n      after(Element.fromDom(inline), br);\n      scrollToBr(editor.dom, editor.selection, br.dom());\n      moveSelectionToBr(editor.dom, editor.selection, br.dom(), false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr$1 = function (pos) {\n      return NodeType.isBr(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr$1(CaretPosition$1.after(startNode))) {\n        return true;\n      } else {\n        return CaretFinder.nextPosition(rootNode, CaretPosition$1.after(startNode)).map(function (pos) {\n          return NodeType.isBr(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(constant(false), isAnchorLink, isAnchorLink, constant(false));\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var position = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$2 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n    var InsertBr = { insert: insert$2 };\n\n    var matchesSelector = function (editor, selector) {\n      return NewLineUtils.getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$1(Element.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, Settings.getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine = function (editor) {\n      return matchesSelector(editor, Settings.getNoNewLineSelector(editor));\n    };\n    var ContextSelectors = {\n      shouldInsertBr: shouldInsertBr,\n      shouldBlockNewLine: shouldBlockNewLine\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine$1 = function (editor, shiftKey) {\n      return ContextSelectors.shouldBlockNewLine(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, shiftKey) {\n        var brMode = Settings.getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, shiftKey) {\n        return NewLineUtils.isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, shiftKey) {\n        var state = NewLineUtils.getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre$1 = function (requiredState) {\n      return function (editor, shiftKey) {\n        return Settings.shouldPutBrInPre(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, shiftKey) {\n      return ContextSelectors.shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      var rootEditable = NewLineUtils.getEditableRoot(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match$2 = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Option.some(action) : Option.none();\n      };\n    };\n    var getAction$1 = function (editor, evt) {\n      return LazyEvaluator.evaluateUntil([\n        match$2([shouldBlockNewLine$1], newLineAction.none()),\n        match$2([inSummaryBlock()], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false)\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true)\n        ], newLineAction.br()),\n        match$2([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([inListBlock(true)], newLineAction.block()),\n        match$2([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match$2([isBrMode(true)], newLineAction.br()),\n        match$2([inBrContext], newLineAction.br()),\n        match$2([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n    var NewLineAction = { getAction: getAction$1 };\n\n    var insert$3 = function (editor, evt) {\n      NewLineAction.getAction(editor, evt).fold(function () {\n        InsertBr.insert(editor, evt);\n      }, function () {\n        InsertBlock.insert(editor, evt);\n      }, noop);\n    };\n    var InsertNewLine = { insert: insert$3 };\n\n    var endTypingLevel = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevel(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        InsertNewLine.insert(editor, event);\n      });\n    };\n    var setup$a = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n    var EnterKey = { setup: setup$a };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container)) {\n        container.insertData(offset, text);\n        return Option.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = Element.fromText(text);\n          if (pos.isAtEnd()) {\n            after(elm, textNode);\n          } else {\n            before(elm, textNode);\n          }\n          return CaretPosition(textNode.dom(), text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, '\\xA0');\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var nbsp = '\\xA0';\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || CaretFinder.prevPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || CaretFinder.nextPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest(elm, isElement);\n      }).exists(function (elm) {\n        return isPreValue(get$2(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return CaretFinder.prevPosition(root.dom(), pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return CaretFinder.nextPosition(root.dom(), pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      var afterPos = leanRight(pos);\n      if (isInPre(afterPos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, afterPos) || isAfterBlock(root, afterPos) || isBeforeBr(root, afterPos) || hasSpaceAfter(root, afterPos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, pos);\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      return map(text.split(''), function (chr, i, chars) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Option.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Option.some(pos) : Option.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return CaretFinder.prevPosition(root.dom(), CaretPosition$1.before(element));\n        }, function (element) {\n          return CaretFinder.firstPositionIn(element);\n        }, function (element) {\n          return CaretFinder.lastPositionIn(element);\n        }, function (element) {\n          return CaretFinder.nextPosition(root.dom(), CaretPosition$1.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection$1 = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n        var caretPosition = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection$1(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride$2 = function (editor, evt) {\n      MatchKeys.execute([{\n          keyCode: VK.SPACEBAR,\n          action: MatchKeys.action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$b = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, evt);\n        }\n      });\n    };\n    var SpaceKey = { setup: setup$b };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(Element.fromDom(editor.getBody()), '*[data-mce-caret]').fold(constant(null), function (elm) {\n        return elm.dom();\n      });\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$c = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n    var CaretContainerInput = { setup: setup$c };\n\n    var browser$4 = PlatformDetection$1.detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser$4.isIE()) {\n        editor.on('keypress', function (e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$d = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var executeKeydownOverride$3 = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.END,\n          action: moveToLineEndPoint(editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: moveToLineEndPoint(editor, false)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$e = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, evt);\n        }\n      });\n    };\n    var HomeEndKeys = { setup: setup$e };\n\n    var setup$f = function (editor) {\n      var caret = BoundarySelection.setupSelectedState(editor);\n      CaretContainerInput.setup(editor);\n      ArrowKeys.setup(editor, caret);\n      DeleteBackspaceKeys.setup(editor, caret);\n      EnterKey.setup(editor);\n      SpaceKey.setup(editor);\n      setup$d(editor);\n      HomeEndKeys.setup(editor);\n    };\n    var KeyboardOverrides = { setup: setup$f };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, settings = editor.settings, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var inputMethodFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!domGlobals.Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, container, offset, root, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          container = rng.startContainer;\n          offset = rng.startOffset;\n          root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!settings.object_resizing) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!settings.readonly) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (settings.forced_root_block) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', Settings.getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (domGlobals.document.activeElement === domGlobals.document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = CaretRangeFromPoint.fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = function () {\n      };\n      var isHidden = function () {\n        var sel;\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      removeBlockQuoteOnBackSpace();\n      emptyEditorWhenDeleting();\n      if (!Env.windowsPhone) {\n        normalizeSelection();\n      }\n      if (isWebKit) {\n        inputMethodFocus();\n        selectControlElements();\n        setDefaultBlockType();\n        blockFormSubmitInsideEditor();\n        disableBackspaceIntoATable();\n        removeAppleInterchangeBrs();\n        if (Env.iOS) {\n          restoreFocusOnKeyDown();\n          bodyHeight();\n          tapLinksAndImages();\n        } else {\n          selectAll();\n        }\n      }\n      if (Env.ie >= 11) {\n        bodyHeight();\n        disableBackspaceIntoATable();\n      }\n      if (Env.ie) {\n        selectAll();\n        disableAutoUrlDetect();\n        ieInternalDragAndDrop();\n      }\n      if (isGecko) {\n        removeHrOnBackspace();\n        focusBody();\n        removeStylesWhenDeletingAcrossBlockElements();\n        setGeckoEditingOptions();\n        addBrAfterLastLinks();\n        showBrokenImageIcon();\n        blockCmdArrowNavigation();\n        disableBackspaceIntoATable();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var isTextBlockNode = function (node) {\n      return NodeType.isElement(node) && isTextBlock(Element.fromDom(node));\n    };\n    var normalizeSelection$1 = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(RangeNormalizer.normalize(rng));\n    };\n    var setup$g = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection$1(editor);\n        }\n      });\n    };\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$h = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var DOM$3 = DOMUtils$1.DOM;\n    var appendStyle = function (editor, text) {\n      var head = Element.fromDom(editor.getDoc().head);\n      var tag = Element.fromTag('style');\n      set(tag, 'type', 'text/css');\n      append(tag, Element.fromText(text));\n      append(head, tag);\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(editor.settings, editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        var dom = editor.dom;\n        var value, internalName;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          internalName = 'data-mce-' + name;\n          if (!node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length, node, type;\n        while (i--) {\n          node = nodes[i];\n          type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      parser.addNodeFilter('#cdata', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.type = 8;\n          node.name = '#comment';\n          node.value = '[CDATA[' + node.value + ']]';\n        }\n      });\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length, node;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new Node$1('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      editor.fire('init');\n      editor.focus(true);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader = function (editor) {\n      return editor.inline ? DOM$3.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc(), body, contentCssText;\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        editor.on('remove', function () {\n          var bodyEl = this.getBody();\n          DOM$3.removeClass(bodyEl, 'mce-content-body');\n          DOM$3.removeClass(bodyEl, 'mce-edit-focus');\n          DOM$3.setAttrib(bodyEl, 'contentEditable', null);\n        });\n        DOM$3.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = domGlobals.document;\n        editor.contentWindow = domGlobals.window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n        settings.root_name = targetElm.nodeName.toLowerCase();\n      }\n      body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$3.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils$1(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: Settings.shouldUseContentCssCors(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = Serializer$1(settings, editor);\n      editor.selection = Selection$1(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$h(editor);\n      setup$g(editor);\n      KeyboardOverrides.setup(editor);\n      ForceBlocks.setup(editor);\n      editor.fire('PreInit');\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$3.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      editor.fire('PostRender');\n      var directionality = Settings.getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.load({\n        initial: true,\n        format: 'html'\n      });\n      editor.startContent = editor.getContent({ format: 'raw' });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n      if (editor.contentStyles.length > 0) {\n        contentCssText = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText);\n      }\n      getStyleSheetLoader(editor).loadAll(editor.contentCSS, function (_) {\n        initEditor(editor);\n      }, function (urls) {\n        initEditor(editor);\n      });\n      if (settings.content_style) {\n        appendStyle(editor, settings.content_style);\n      }\n    };\n    var InitContentBody = { initContentBody: initContentBody };\n\n    var DOM$4 = DOMUtils$1.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (domGlobals.document.domain !== domGlobals.window.location.hostname && Env.ie && Env.ie < 12) {\n        var bodyUuid = Uuid.uuid('mce');\n        editor[bodyUuid] = function () {\n          InitContentBody.initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + domGlobals.document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$4.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = Element.fromTag('iframe');\n      setAll(iframe, customAttrs);\n      setAll(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$3(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var bodyId, bodyClass, iframeHTML;\n      iframeHTML = Settings.getDocType(editor) + '<html><head>';\n      if (Settings.getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      bodyId = Settings.getBodyId(editor);\n      bodyClass = Settings.getBodyClass(editor);\n      if (Settings.getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + Settings.getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var title = editor.editorManager.translate('Rich Text Area. Press ALT-0 for help.');\n      var ifr = createIframeElement(editor.id, title, o.height, Settings.getIframeAttrs(editor)).dom();\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$4.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$4.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$4.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$4.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        InitContentBody.initContentBody(editor);\n      }\n    };\n    var InitIframe = { init: init$1 };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      var contentCss = Settings.getContentCss(editor);\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map(contentCss, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor));\n    };\n\n    var DOM$5 = DOMUtils$1.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          ErrorReporter.pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(editor.settings.plugins.split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(editor.settings.icons);\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var defaultIcons = getAll();\n      var loadIcons = __assign({}, defaultIcons, IconManager.get(iconPackName).icons);\n      each$3(loadIcons, function (svgData, icon) {\n        if (!has(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = editor.settings.theme;\n      if (isString(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = editor.settings.theme;\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$5.create('div');\n      DOM$5.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(editor.settings.theme)) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(editor.settings.theme)) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var init$2 = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var boxInfo = renderThemeUi(editor);\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return InitContentBody.initContentBody(editor);\n      } else {\n        return InitIframe.init(editor, boxInfo);\n      }\n    };\n    var Init = { init: init$2 };\n\n    var DOM$6 = DOMUtils$1.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = Settings.getLanguageCode(editor);\n      var languageUrl = Settings.getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          ErrorReporter.languageLoadError(url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var settings = editor.settings, theme = settings.theme;\n      if (isString(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !ThemeManager.urls.hasOwnProperty(theme)) {\n          var themeUrl = settings.theme_url;\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Option.from(Settings.getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Option.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor) {\n      return Option.from(Settings.getIconPackName(editor)).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons.js',\n          name: Option.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor) {\n      getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor);\n      }).each(function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          ErrorReporter.iconsLoadError(urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (settings, suffix) {\n      if (isArray(settings.plugins)) {\n        settings.plugins = settings.plugins.join(' ');\n      }\n      Tools.each(settings.external_plugins, function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          ErrorReporter.pluginLoadError(name, url);\n        });\n        settings.plugins += ' ' + name;\n      });\n      Tools.each(settings.plugins.split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (dep) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: dep,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              dep = PluginManager.createUrl(defaultSettings, dep);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                ErrorReporter.pluginLoadError(dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              ErrorReporter.pluginLoadError(url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor);\n        loadPlugins(editor.settings, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        });\n      });\n    };\n    var render = function (editor) {\n      var settings = editor.settings, id = editor.id;\n      I18n.setCode(Settings.getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$6.unbind(domGlobals.window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$6.bind(domGlobals.window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      if (!settings.inline) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$6.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (settings.hidden_input && !NodeType.isTextareaOrInput(editor.getElement())) {\n          DOM$6.insertAfter(DOM$6.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$6.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (settings.submit_patch && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (settings.encoding === 'xml') {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$6.encode(e.content);\n          }\n        });\n      }\n      if (settings.add_form_submit_trigger) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (settings.add_unload_trigger) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n    var Render = { render: render };\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has$2(elm, cls) && state === false) {\n        remove$4(elm, cls);\n      } else if (state) {\n        add$3(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, state);\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom().contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Option.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = Element.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (EditorFocus.hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly === true;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly(editor)) {\n          each(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly(editor)) {\n          each(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var preventReadOnlyEvents = function (e) {\n      var target = e.target;\n      if (e.type === 'click' && target.tagName === 'A') {\n        e.preventDefault();\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        domGlobals.console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      Events.fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign({}, availableModes, (_a = {}, _a[mode] = __assign({}, api, {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            domGlobals.console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$4 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var hasOnlyOneChild$1 = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === '\\xA0';\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems$1 = function (elm) {\n      return Tools.grep(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === '\\xA0' || NodeType.isBr(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition$1.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition$1.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore$1 = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter$1 = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems$1(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n    var InsertList = {\n      isListFragment: isListFragment,\n      insertAtCaret: insertAtCaret,\n      isParentBlockLi: isParentBlockLi,\n      trimListItems: trimListItems,\n      listItems: listItems$1\n    };\n\n    var isAfterNbsp = function (container, offset) {\n      return NodeType.isText(container) && container.nodeValue[offset - 1] === '\\xA0';\n    };\n    var trimOrPadLeftRight = function (rng, html) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      var hasSiblingText = function (siblingName) {\n        return container[siblingName] && container[siblingName].nodeType === 3;\n      };\n      if (container.nodeType === 3) {\n        if (offset > 0) {\n          html = html.replace(/^&nbsp;/, ' ');\n        } else if (!hasSiblingText('previousSibling')) {\n          html = html.replace(/^ /, '&nbsp;');\n        }\n        if (offset < container.length) {\n          html = html.replace(/&nbsp;(<br>|)$/, ' ');\n        } else if (!hasSiblingText('nextSibling')) {\n          html = html.replace(/(&nbsp;| )(<br>|)$/, '&nbsp;');\n        }\n      }\n      return html;\n    };\n    var trimNbspAfterDeleteAndPadValue = function (rng, value) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      if (container.nodeType === 3 && rng.collapsed) {\n        if (container.data[offset] === '\\xA0') {\n          container.deleteData(offset, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value += ' ';\n          }\n        } else if (container.data[offset - 1] === '\\xA0') {\n          container.deleteData(offset - 1, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value = ' ' + value;\n          }\n        }\n      }\n      return value;\n    };\n\n    var isTableCell$5 = NodeType.matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var selectionSetContent = function (editor, content) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      if (rng.collapsed && isAfterNbsp(container, offset) && NodeType.isText(container)) {\n        container.insertData(offset - 1, ' ');\n        container.deleteData(offset, 1);\n        rng.setStart(container, offset);\n        rng.setEnd(container, offset);\n        editor.selection.setRng(rng);\n      }\n      editor.selection.setContent(content);\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          selectionSetContent(editor, value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Option.from(dom.getParent(elm, 'td,th')).map(Element.fromDom).each(PaddingBr.trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody(), elementUtils_1 = new ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          for (var testNode = node.parentNode; testNode && testNode !== root_1; testNode = testNode.parentNode) {\n            if (textInlineElements[node.nodeName.toLowerCase()] && elementUtils_1.compare(testNode, node)) {\n              dom.remove(node, true);\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var umarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var parentEditableFalseElm, parentBlock, nextRng;\n      var dom = editor.dom, selection = editor.selection;\n      var node, node2;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (editor.dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      editor.selection.scrollIntoView(marker);\n      parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      node = marker.previousSibling;\n      if (node && node.nodeType === 3) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          node2 = marker.nextSibling;\n          if (node2 && node2.nodeType === 3) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$5(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parser, serializer, parentNode, rootNode, fragment, args;\n      var marker, rng, node, bookmarkHtml, merge;\n      var selection = editor.selection, dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(selection.getRng(), value);\n      }\n      parser = editor.parser;\n      merge = details.merge;\n      serializer = Serializer({ validate: editor.settings.validate }, editor.schema);\n      bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;&#x200B;</span>';\n      args = {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      };\n      args = editor.fire('BeforeSetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        editor.selection.setRng(RangeNormalizer.normalize(editor.selection.getRng()));\n        editor.getDoc().execCommand('Delete', false, null);\n        value = trimNbspAfterDeleteAndPadValue(editor.selection.getRng(), value);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && InsertList.isListFragment(editor.schema, fragment) && InsertList.isParentBlockLi(dom, parentNode)) {\n        rng = InsertList.insertAtCaret(serializer, dom, editor.selection.getRng(), fragment);\n        editor.selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        selectionSetContent(editor, bookmarkHtml);\n        parentNode = selection.getNode();\n        rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      umarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(editor.dom, editor.selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n    var processValue = function (value) {\n      var details;\n      if (typeof value !== 'string') {\n        details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret$1 = function (editor, value) {\n      var result = processValue(value);\n      insertHtmlAtCaret(editor, result.content, result.details);\n    };\n    var InsertContent = { insertAtCaret: insertAtCaret$1 };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor) {\n      if (Outdent.backspaceDelete(editor, false)) {\n        return;\n      } else if (CefDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (BoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        DeleteUtils.paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor) {\n      if (CefDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (BoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var DeleteCommands = {\n      deleteCommand: deleteCommand,\n      forwardDeleteCommand: forwardDeleteCommand\n    };\n\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName);\n      };\n      var isRoot = function (elm) {\n        return eq(Element.fromDom(rootElm), elm);\n      };\n      return closest(Element.fromDom(elm), function (elm) {\n        return getProperty(elm).isSome();\n      }, isRoot).bind(getProperty);\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Option.from(DOMUtils$1.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Option.from(elm).map(Element.fromDom).filter(isElement).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom()).or(getComputedFontProp(propName, element.dom()));\n        }).getOr('');\n      };\n    };\n    var FontInfo = {\n      getFontSize: getFontProp('font-size'),\n      getFontFamily: compose(normalizeFontFamily, getFontProp('font-family')),\n      toPt: toPt\n    };\n\n    var findFirstCaretElement = function (editor) {\n      return CaretFinder.firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return NodeType.isText(container) ? container.parentNode : container;\n      });\n    };\n    var isRangeAtStartOfNode = function (rng, root) {\n      return rng.startContainer === root && rng.startOffset === 0;\n    };\n    var getCaretElement = function (editor) {\n      return Option.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        return isRangeAtStartOfNode(rng, root) ? Option.none() : Option.from(editor.selection.getStart(true));\n      });\n    };\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9\\.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = Settings.getFontStyleValues(editor);\n          var fontClasses = Settings.getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\"' + font + '\"';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontFamily(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontFamily(editor.getBody(), caretElement);\n      });\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontSize(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontSize(editor.getBody(), caretElement);\n      });\n    };\n\n    var each$g = Tools.each;\n    var map$3 = Tools.map, inArray$2 = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, customCommand, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n          self.editor.focus();\n        } else {\n          SelectionBookmark.restore(self.editor);\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$g(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        var self = this;\n        type = type || 'exec';\n        each$g(commandList, function (callback, command) {\n          each$g(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value ? { value: value } : undefined);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': function () {\n          },\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$g('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listElm, listParent;\n            self.execNativeCommand(command);\n            listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, value);\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            InsertContent.insertAtCaret(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            InsertNewLine.insert(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': function () {\n          },\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            var anchor;\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), NodeType.isContentEditableTrue);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'delete': function () {\n            DeleteCommands.deleteCommand(editor);\n          },\n          'forwardDelete': function () {\n            DeleteCommands.forwardDeleteCommand(editor);\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            InsertBr.insert(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var nodes = editor.selection.isCollapsed() ? [editor.dom.getParent(editor.selection.getNode(), editor.dom.isBlock)] : editor.selection.getSelectedBlocks();\n            var matches = map$3(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray$2(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (name, args) {\n        var handlers, i, l, callback;\n        name = name.toLowerCase();\n        args = args || {};\n        args.type = name;\n        if (!args.target) {\n          args.target = this.scope;\n        }\n        if (!args.preventDefault) {\n          args.preventDefault = function () {\n            args.isDefaultPrevented = always;\n          };\n          args.stopPropagation = function () {\n            args.isPropagationStopped = always;\n          };\n          args.stopImmediatePropagation = function () {\n            args.isImmediatePropagationStopped = always;\n          };\n          args.isDefaultPrevented = never;\n          args.isPropagationStopped = never;\n          args.isImmediatePropagationStopped = never;\n        }\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(args);\n        }\n        handlers = this.bindings[name];\n        if (handlers) {\n          for (i = 0, l = handlers.length; i < l; i++) {\n            callback = handlers[i];\n            if (callback.once) {\n              this.off(name, callback.func);\n            }\n            if (args.isImmediatePropagationStopped()) {\n              args.stopPropagation();\n              return args;\n            }\n            if (callback.func.call(this.scope, args) === false) {\n              args.preventDefault();\n              return args;\n            }\n          }\n        }\n        return args;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        var handlers, names, i;\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = { func: callback };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = this.bindings[name];\n            if (!handlers) {\n              handlers = this.bindings[name] = [];\n              this.toggleEvent(name, true);\n            }\n            if (prepend) {\n              handlers.unshift(wrappedCallback);\n            } else {\n              handlers.push(wrappedCallback);\n            }\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var i, handlers, bindingName, names, hi;\n        if (name) {\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = this.bindings[name];\n            if (!name) {\n              for (bindingName in this.bindings) {\n                this.toggleEvent(bindingName, false);\n                delete this.bindings[bindingName];\n              }\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                hi = handlers.length;\n                while (hi--) {\n                  if (handlers[hi].func === callback) {\n                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));\n                    this.bindings[name] = handlers;\n                  }\n                }\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[name];\n              }\n            }\n          }\n        } else {\n          for (name in this.bindings) {\n            this.toggleEvent(name, false);\n          }\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent = self.parent();\n          while (parent && !dispatcherArgs.isPropagationStopped()) {\n            parent.fire(name, dispatcherArgs, false);\n            parent = parent.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$7 = DOMUtils$1.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      if (editor.settings.event_root) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$7.select(editor.settings.event_root)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        preventReadOnlyEvents(e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var eventRootElm, delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      eventRootElm = getEventTarget(editor, eventName);\n      if (editor.settings.event_root) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            var name;\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                for (name in customEventRootDelegates) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                }\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$7.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$7.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$7.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign({}, Observable, {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        var name;\n        if (self.delegates) {\n          for (name in self.delegates) {\n            self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          }\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var each$h = Tools.each, explode$3 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$h(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var cmd;\n        cmd = cmdFunc;\n        if (typeof cmdFunc === 'string') {\n          cmdFunc = function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          cmdFunc = function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        }\n        each$h(explode$3(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, cmdFunc, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.parseShortcut = function (pattern) {\n        var id, key;\n        var shortcut = {};\n        each$h(explode$3(pattern.toLowerCase(), '+'), function (value) {\n          if (value in modifierNames) {\n            shortcut[value] = true;\n          } else {\n            if (/^[0-9]{2,}$/.test(value)) {\n              shortcut.keyCode = parseInt(value, 10);\n            } else {\n              shortcut.charCode = value.charCodeAt(0);\n              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n            }\n          }\n        });\n        id = [shortcut.keyCode];\n        for (key in modifierNames) {\n          if (shortcut[key]) {\n            id.push(key);\n          } else {\n            shortcut[key] = false;\n          }\n        }\n        shortcut.id = id.join(',');\n        if (shortcut.access) {\n          shortcut.alt = true;\n          if (Env.mac) {\n            shortcut.ctrl = true;\n          } else {\n            shortcut.shift = true;\n          }\n        }\n        if (shortcut.meta) {\n          if (Env.mac) {\n            shortcut.meta = true;\n          } else {\n            shortcut.ctrl = true;\n            shortcut.meta = false;\n          }\n        }\n        return shortcut;\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts;\n        shortcuts = Tools.map(explode$3(pattern, '>'), this.parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var each$i = Tools.each, trim$4 = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim$4(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(domGlobals.document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$i(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var items, breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], tr, outPath;\n        tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$i(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = o.reverse().join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + o.reverse().join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var create$5 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign({}, spec, { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$5();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var DOM$8 = DOMUtils$1.DOM;\n    var extend$3 = Tools.extend, each$j = Tools.each;\n    var resolve$3 = Tools.resolve;\n    var ie$2 = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        AddOnManager$1.languageLoad = this.settings.language_load;\n        AddOnManager$1.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = { registry: registry() };\n        var self = this;\n        var modeInstance = create$4(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        Render.render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        EditorFocus.focus(this, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return EditorFocus.hasFocus(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve$3(scope) : 0;\n          callback = resolve$3(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, Array.prototype.slice.call(arguments, 1));\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$8.show(self.getContainer());\n            DOM$8.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie$2 && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$8.hide(self.getContainer());\n            DOM$8.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = NodeType.isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!NodeType.isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$8.getParent(self.id, 'form')) {\n            each$j(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$8.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$8.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        var self = this;\n        var settings = self.settings;\n        var dom = self.dom;\n        var cls;\n        elm = elm || self.getBody();\n        if (self.hasVisual === undefined) {\n          self.hasVisual = settings.visual;\n        }\n        each$j(dom.select('table,a', elm), function (elm) {\n          var value;\n          switch (elm.nodeName) {\n          case 'TABLE':\n            cls = settings.visual_table_class || 'mce-item-table';\n            value = dom.getAttrib(elm, 'border');\n            if ((!value || value === '0') && self.hasVisual) {\n              dom.addClass(elm, cls);\n            } else {\n              dom.removeClass(elm, cls);\n            }\n            return;\n          case 'A':\n            if (!dom.getAttrib(elm, 'href')) {\n              value = dom.getAttrib(elm, 'name') || elm.id;\n              cls = settings.visual_anchor_class || 'mce-item-anchor';\n              if (value && self.hasVisual) {\n                dom.addClass(elm, cls);\n              } else {\n                dom.removeClass(elm, cls);\n              }\n            }\n            return;\n          }\n        });\n        self.fire('VisualAid', {\n          element: elm,\n          hasVisual: self.hasVisual\n        });\n      };\n      Editor.prototype.remove = function () {\n        remove$6(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM$9 = DOMUtils$1.DOM;\n    var explode$4 = Tools.explode, each$k = Tools.each, extend$4 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$k(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = domGlobals.document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign({}, Observable, {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '0.14',\n      releaseDate: '2019-08-19',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '', preInit, src;\n        documentBaseURL = URI.getDocumentBaseUrl(domGlobals.document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = domGlobals.document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            src = scripts[i].src;\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && domGlobals.document.currentScript) {\n            src = domGlobals.document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        FocusController.setup(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl, suffix;\n        baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        for (var name in pluginBaseUrls) {\n          AddOnManager$1.PluginManager.urls[name] = pluginBaseUrls[name];\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result, invalidInlineTargets;\n        invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = elm.name;\n            if (id && !DOM$9.get(id)) {\n              id = elm.name;\n            } else {\n              id = DOM$9.uniqueId();\n            }\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM$9.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var l, targets = [];\n          if (Env.ie && Env.ie < 11) {\n            ErrorReporter.initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            ErrorReporter.initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$k(settings.types, function (type) {\n              targets = targets.concat(DOM$9.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM$9.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            l = settings.elements || '';\n            if (l.length > 0) {\n              each$k(explode$4(l), function (id) {\n                var elm;\n                if (elm = DOM$9.get(id)) {\n                  targets.push(elm);\n                } else {\n                  each$k(domGlobals.document.forms, function (f) {\n                    each$k(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM$9.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$k(DOM$9.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM$9.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$k(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM$9.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$4({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$k(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                ErrorReporter.initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM$9.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor;\n        existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each$k(DOM$9.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', 0, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$k(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    function RangeUtils(dom) {\n      var walk = function (rng, callback) {\n        return RangeWalk.walk(dom, rng, callback);\n      };\n      var split = split$1;\n      var normalize = function (rng) {\n        return NormalizeRange.normalize(dom, rng).fold(constant(false), function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split,\n        normalize: normalize\n      };\n    }\n    (function (RangeUtils) {\n      RangeUtils.compareRanges = RangeCompare.isEq;\n      RangeUtils.getCaretRangeFromPoint = CaretRangeFromPoint.fromPoint;\n      RangeUtils.getSelectedNode = getSelectedNode;\n      RangeUtils.getNode = getNode;\n    }(RangeUtils || (RangeUtils = {})));\n    var RangeUtils$1 = RangeUtils;\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              domGlobals.clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$6 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$6();\n\n    var min = Math.min, max = Math.max, round$2 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x, y, w, h, targetW, targetH;\n      x = targetRect.x;\n      y = targetRect.y;\n      w = rect.w;\n      h = rect.h;\n      targetW = targetRect.w;\n      targetH = targetRect.h;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += round$2(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += round$2(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= h;\n      }\n      if (rel[4] === 'r') {\n        x -= w;\n      }\n      if (rel[3] === 'c') {\n        y -= round$2(h / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= round$2(w / 2);\n      }\n      return create$7(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$7(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1, y1, x2, y2;\n      x1 = max(rect.x, cropRect.x);\n      y1 = max(rect.y, cropRect.y);\n      x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$7(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp$1 = function (rect, clampRect, fixedSize) {\n      var underflowX1, underflowY1, overflowX2, overflowY2, x1, y1, x2, y2, cx2, cy2;\n      x1 = rect.x;\n      y1 = rect.y;\n      x2 = rect.x + rect.w;\n      y2 = rect.y + rect.h;\n      cx2 = clampRect.x + clampRect.w;\n      cy2 = clampRect.y + clampRect.h;\n      underflowX1 = max(0, clampRect.x - x1);\n      underflowY1 = max(0, clampRect.y - y1);\n      overflowX2 = max(0, x2 - cx2);\n      overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$7(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$7 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$7(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp$1,\n      create: create$7,\n      fromClientRect: fromClientRect\n    };\n\n    var each$l = Tools.each, extend$5 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (prop) {\n      var self = this;\n      var _super = self.prototype;\n      var prototype, name, member;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          var ret;\n          self._super = _super[name];\n          ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      prototype = new self();\n      initializing = false;\n      if (prop.Mixins) {\n        each$l(prop.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              prop[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          prop.Mixins = _super.Mixins.concat(prop.Mixins);\n        }\n      }\n      if (prop.Methods) {\n        each$l(prop.Methods.split(','), function (name) {\n          prop[name] = dummy;\n        });\n      }\n      if (prop.Properties) {\n        each$l(prop.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          prop[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (prop.Statics) {\n        each$l(prop.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (prop.Defaults && _super.Defaults) {\n        prop.Defaults = extend$5({}, _super.Defaults, prop.Defaults);\n      }\n      for (name in prop) {\n        member = prop[name];\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      }\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min$1 = Math.min, max$1 = Math.max, round$3 = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v, d, minRGB, maxRGB;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        minRGB = min$1(r, min$1(g, b));\n        maxRGB = max$1(r, max$1(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round$3(h),\n          s: round$3(s * 100),\n          v: round$3(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        var side, chroma, x, match;\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max$1(0, min$1(saturation, 1));\n        brightness = max$1(0, min$1(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round$3(255 * brightness);\n          return;\n        }\n        side = hue / 60;\n        chroma = brightness * saturation;\n        x = chroma * (1 - Math.abs(side % 2 - 1));\n        match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round$3(255 * (r + match));\n        g = round$3(255 * (g + match));\n        b = round$3(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils$1.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign({}, Observable, {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new domGlobals.XMLHttpRequest();\n        if (xhr) {\n          if (xhr.overrideMimeType) {\n            xhr.overrideMimeType(settings.content_type);\n          }\n          xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n          if (settings.crossDomain) {\n            xhr.withCredentials = true;\n          }\n          if (settings.content_type) {\n            xhr.setRequestHeader('Content-Type', settings.content_type);\n          }\n          if (settings.requestheaders) {\n            Tools.each(settings.requestheaders, function (header) {\n              xhr.setRequestHeader(header.key, header.value);\n            });\n          }\n          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n          xhr = XHR.fire('beforeSend', {\n            xhr: xhr,\n            settings: settings\n          }).xhr;\n          xhr.send(settings.data);\n          if (!settings.async) {\n            return ready();\n          }\n          Delay.setTimeout(ready, 10);\n        }\n      }\n    });\n\n    var extend$6 = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend$6({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend$6(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create$8 = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      localStorage = domGlobals.window.localStorage;\n    } catch (e) {\n      localStorage = create$8();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: TreeWalker,\n        DOMUtils: DOMUtils$1,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils$1,\n        Serializer: Serializer$1,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager$1,\n        Selection: Selection$1,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: Node$1,\n        Schema: Schema,\n        SaxParser: SaxParser$1,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: Serializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager$1,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils$1.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: AddOnManager$1.PluginManager,\n      ThemeManager: AddOnManager$1.ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}(window));\n","import tinymce from 'tinymce'\r\n\r\n// A theme is also required\r\nimport 'tinymce/themes/silver'\r\n\r\n// Any plugins you want to use has to be imported\r\nimport 'tinymce/plugins/code'\r\nimport 'tinymce/plugins/paste'\r\nimport 'tinymce/plugins/autolink'\r\nimport 'tinymce/plugins/fullscreen'\r\nimport 'tinymce/plugins/link'\r\nimport 'tinymce/plugins/lists'\r\nimport 'tinymce/plugins/media'\r\n// import 'tinymce/plugins/image'\r\n\r\nrequire.context(\r\n    'file-loader?name=[path][name].[ext]&context=node_modules/tinymce!tinymce/skins',\r\n    true,\r\n    /.*/\r\n)\r\n\r\ntinymce.init({\r\n    selector: '.tinymce',\r\n    plugins: 'code paste autolink fullscreen link lists media',\r\n    toolbar: 'bold italic bullist numlist removeformat | formatselect | link medias media | code fullscreen',\r\n    menubar: '',\r\n    paste_as_text: true,\r\n    entity_encoding: 'raw',\r\n    height: 500,\r\n    branding: false,\r\n    target_list: false,\r\n    image_class_list: [\r\n        { title: 'None', value: '' },\r\n        { title: 'Left', value: 'text-left' },\r\n        { title: 'Center', value: 'text-center' }\r\n    ],\r\n    image_dimensions: false,\r\n    object_resizing: false,\r\n    block_formats: 'Paragraph=p; Heading 2=h2; Heading 3=h3; Heading 4=h4; Preformatted=pre',\r\n    fix_list_elements: true,\r\n    relative_urls: false,\r\n    document_base_url: document.location.origin,\r\n    remove_script_host: true,\r\n    // convert_urls: true,\r\n    draggable_modal: true,\r\n    // content_css: 'http://www.ipsum.test/ipsum/admin/dist/main.css',\r\n    setup: function (editor) {\r\n        let id = this.id\r\n        editor.ui.registry.addButton('medias', {\r\n            // text: 'Mdias',\r\n            tooltip: 'Mdias',\r\n            icon: 'image',\r\n            onAction: function () {\r\n                editor.windowManager.openUrl({\r\n                    title: 'Mdias',\r\n                    url: document.getElementById(id).dataset.medias\r\n                })\r\n            }\r\n        })\r\n    }\r\n})\r\n\r\ntinymce.init({\r\n    selector: '.tinymce-simple',\r\n    plugins: 'code paste autolink link',\r\n    toolbar: 'bold italic removeformat | link | code',\r\n    menubar: '',\r\n    paste_as_text: true,\r\n    branding: false,\r\n    forced_root_block: '',\r\n    statusbar: false,\r\n    entity_encoding: 'raw'\r\n})\r\n","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (pred(value[i]) !== true) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var slice = Array.prototype.slice;\n    var rawIndexOf = function () {\n      var pIndexOf = Array.prototype.indexOf;\n      var fastIndex = function (xs, x) {\n        return pIndexOf.call(xs, x);\n      };\n      var slowIndex = function (xs, x) {\n        return slowIndexOf(xs, x);\n      };\n      return pIndexOf === undefined ? slowIndex : fastIndex;\n    }();\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      return findIndex(xs, pred).isSome();\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = slice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i, xs) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var slowIndexOf = function (xs, x) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (xs[i] === x) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i, xs) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = slice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var pure = function (x) {\n      return [x];\n    };\n    var sort = function (xs, comparator) {\n      var copy = slice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i, obj) {\n        return {\n          k: i,\n          v: f(x, i, obj)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i, obj);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$1 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var adt = Adt.generate([\n      { strict: [] },\n      { defaultedThunk: ['fallbackThunk'] },\n      { asOption: [] },\n      { asDefaultedOptionThunk: ['fallbackThunk'] },\n      { mergeWithThunk: ['baseThunk'] }\n    ]);\n    var defaulted = function (fallback) {\n      return adt.defaultedThunk(constant(fallback));\n    };\n    var mergeWith = function (base) {\n      return adt.mergeWithThunk(constant(base));\n    };\n    var strict = adt.strict;\n    var asOption = adt.asOption;\n    var defaultedThunk = adt.defaultedThunk;\n    var mergeWithThunk = adt.mergeWithThunk;\n\n    var exclude = function (obj, fields) {\n      var r = {};\n      each$1(obj, function (v, k) {\n        if (!contains(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var readOpt = function (key) {\n      return function (obj) {\n        return has(obj, key) ? Option.from(obj[key]) : Option.none();\n      };\n    };\n    var readOr = function (key, fallback) {\n      return function (obj) {\n        return has(obj, key) ? obj[key] : fallback;\n      };\n    };\n    var readOptFrom = function (obj, key) {\n      return readOpt(key)(obj);\n    };\n    var hasKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var wrap = function (key, value) {\n      var r = {};\n      r[key] = value;\n      return r;\n    };\n    var wrapAll = function (keyvalues) {\n      var r = {};\n      each(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$1 = function (results) {\n      var errors = [];\n      var values = [];\n      each(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude$1 = function (obj, fields) {\n      return exclude(obj, fields);\n    };\n    var readOpt$1 = function (key) {\n      return readOpt(key);\n    };\n    var readOr$1 = function (key, fallback) {\n      return readOr(key, fallback);\n    };\n    var readOptFrom$1 = function (obj, key) {\n      return readOptFrom(obj, key);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap(key, value);\n    };\n    var wrapAll$1 = function (keyvalues) {\n      return wrapAll(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n    var hasKey$1 = function (obj, key) {\n      return hasKey(obj, key);\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$2 = function (results) {\n      var values = [];\n      var errors = [];\n      each(results, function (obj) {\n        fold(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map$2 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult = function (res) {\n      return fold(res, Result.error, Result.value);\n    };\n    var fromResult = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult,\n      toResult: toResult,\n      svalue: svalue,\n      partition: partition$2,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map$2,\n      mapError: mapError,\n      fold: fold\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var typeAdt = Adt.generate([\n      {\n        setOf: [\n          'validator',\n          'valueType'\n        ]\n      },\n      { arrOf: ['valueType'] },\n      { objOf: ['fields'] },\n      { itemOf: ['validator'] },\n      {\n        choiceOf: [\n          'key',\n          'branches'\n        ]\n      },\n      { thunk: ['description'] },\n      {\n        func: [\n          'args',\n          'outputSchema'\n        ]\n      }\n    ]);\n    var fieldAdt = Adt.generate([\n      {\n        field: [\n          'name',\n          'presence',\n          'type'\n        ]\n      },\n      { state: ['name'] }\n    ]);\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: function () {\n            return '... (only showing first ten failures)';\n          }\n        }]) : errors;\n      return map(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingStrict = function (path, key, obj) {\n      return nu(path, function () {\n        return 'Could not find valid *strict* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu(path, function () {\n        return err;\n      });\n    };\n\n    var adt$1 = Adt.generate([\n      {\n        field: [\n          'key',\n          'okey',\n          'presence',\n          'prop'\n        ]\n      },\n      {\n        state: [\n          'okey',\n          'instantiator'\n        ]\n      }\n    ]);\n    var strictAccess = function (path, obj, key) {\n      return readOptFrom(obj, key).fold(function () {\n        return missingStrict(path, key, obj);\n      }, SimpleResult.svalue);\n    };\n    var fallbackAccess = function (obj, key, fallbackThunk) {\n      var v = readOptFrom(obj, key).fold(function () {\n        return fallbackThunk(obj);\n      }, identity);\n      return SimpleResult.svalue(v);\n    };\n    var optionAccess = function (obj, key) {\n      return SimpleResult.svalue(readOptFrom(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback) {\n      var opt = readOptFrom(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return SimpleResult.svalue(opt);\n    };\n    var cExtractOne = function (path, obj, field, strength) {\n      return field.fold(function (key, okey, presence, prop) {\n        var bundle = function (av) {\n          var result = prop.extract(path.concat([key]), strength, av);\n          return SimpleResult.map(result, function (res) {\n            return wrap(okey, strength(res));\n          });\n        };\n        var bundleAsOption = function (optValue) {\n          return optValue.fold(function () {\n            var outcome = wrap(okey, strength(Option.none()));\n            return SimpleResult.svalue(outcome);\n          }, function (ov) {\n            var result = prop.extract(path.concat([key]), strength, ov);\n            return SimpleResult.map(result, function (res) {\n              return wrap(okey, strength(Option.some(res)));\n            });\n          });\n        };\n        return function () {\n          return presence.fold(function () {\n            return SimpleResult.bind(strictAccess(path, obj, key), bundle);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(fallbackAccess(obj, key, fallbackThunk), bundle);\n          }, function () {\n            return SimpleResult.bind(optionAccess(obj, key), bundleAsOption);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(optionDefaultedAccess(obj, key, fallbackThunk), bundleAsOption);\n          }, function (baseThunk) {\n            var base = baseThunk(obj);\n            var result = SimpleResult.map(fallbackAccess(obj, key, constant({})), function (v) {\n              return deepMerge(base, v);\n            });\n            return SimpleResult.bind(result, bundle);\n          });\n        }();\n      }, function (okey, instantiator) {\n        var state = instantiator(obj);\n        return SimpleResult.svalue(wrap(okey, strength(state)));\n      });\n    };\n    var cExtract = function (path, obj, fields, strength) {\n      var results = map(fields, function (field) {\n        return cExtractOne(path, obj, field, strength);\n      });\n      return ResultCombine.consolidateObj(results, {});\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, strength, val) {\n        return getDelegate().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      var toDsl = function () {\n        return getDelegate().toDsl();\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var value$1 = function (validator) {\n      var extract = function (path, strength, val) {\n        return SimpleResult.bindError(validator(val, strength), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = function () {\n        return 'val';\n      };\n      var toDsl = function () {\n        return typeAdt.itemOf(validator);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var getSetKeys = function (obj) {\n      var keys$1 = keys(obj);\n      return filter(keys$1, function (k) {\n        return hasKey$1(obj, k);\n      });\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, f) {\n        return f.fold(function (key) {\n          return deepMerge(acc, wrap$1(key, true));\n        }, constant(acc));\n      }, {});\n      var extract = function (path, strength, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter(keys, function (k) {\n          return !hasKey$1(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, strength, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString,\n        toDsl: delegate.toDsl\n      };\n    };\n    var objOf = function (fields) {\n      var extract = function (path, strength, o) {\n        return cExtract(path, o, fields, strength);\n      };\n      var toString = function () {\n        var fieldStrings = map(fields, function (field) {\n          return field.fold(function (key, okey, presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (okey, instantiator) {\n            return 'state(' + okey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      var toDsl = function () {\n        return typeAdt.objOf(map(fields, function (f) {\n          return f.fold(function (key, okey, presence, prop) {\n            return fieldAdt.field(key, presence, prop);\n          }, function (okey, instantiator) {\n            return fieldAdt.state(okey);\n          });\n        }));\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, strength, array) {\n        var results = map(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), strength, a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      var toDsl = function () {\n        return typeAdt.arrOf(prop);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var setOf = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$1(validator)).extract(path, identity, keys);\n      };\n      var extract = function (path, strength, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map(validKeys, function (vk) {\n            return adt$1.field(vk, vk, strict(), prop);\n          });\n          return objOf(schema).extract(path, strength, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      var toDsl = function () {\n        return typeAdt.setOf(validator, prop);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n    var anyValue = constant(value$1(SimpleResult.svalue));\n    var arrOfObj = compose(arrOf, objOf);\n    var state = adt$1.state;\n    var field = adt$1.field;\n\n    var chooseFrom = function (path, strength, input, branches, ch) {\n      var fields = readOptFrom$1(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), strength, input);\n      });\n    };\n    var choose = function (key, branches) {\n      var extract = function (path, strength, input) {\n        var choice = readOptFrom$1(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, strength, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      var toDsl = function () {\n        return typeAdt.choiceOf(key, branches);\n      };\n      return {\n        extract: extract,\n        toString: toString,\n        toDsl: toDsl\n      };\n    };\n\n    var _anyValue = value$1(SimpleResult.svalue);\n    var arrOfObj$1 = function (objFields) {\n      return arrOfObj(objFields);\n    };\n    var arrOfVal = function () {\n      return arrOf(_anyValue);\n    };\n    var valueThunkOf = valueThunk;\n    var valueOf = function (validator) {\n      return value$1(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf$1 = function (validator, prop) {\n      return setOf(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extract = function (label, prop, strength, obj) {\n      var res = prop.extract([label], strength, obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extract(label, prop, identity, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    var asRawOrDie = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors) + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var chooseProcessor = function (key, branches) {\n      return choose(key, branches);\n    };\n    var choose$1 = function (key, branches) {\n      return choose(key, map$1(branches, objOf));\n    };\n    var anyValue$1 = constant(_anyValue);\n    var typedValue = function (validator, expectedType) {\n      return value$1(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      var every = function (iter, callbackFn) {\n        var result = iter.next();\n        while (!result.done) {\n          if (!callbackFn(result.value)) {\n            return false;\n          }\n          result = iter.next();\n        }\n        return true;\n      };\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      case 'Map':\n        return every(val.keys(), isPostMessageable) && every(val.values(), isPostMessageable);\n      case 'Set':\n        return every(val.keys(), isPostMessageable);\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$1(function (a) {\n      return isPostMessageable(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n    });\n\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var strict$1 = function (key) {\n      return field(key, key, strict(), anyValue());\n    };\n    var strictOf = function (key, schema) {\n      return field(key, key, strict(), schema);\n    };\n    var strictNumber = function (key) {\n      return strictOf(key, number);\n    };\n    var strictString = function (key) {\n      return strictOf(key, string);\n    };\n    var strictStringEnum = function (key, values) {\n      return field(key, key, strict(), validateEnum(values));\n    };\n    var strictBoolean = function (key) {\n      return strictOf(key, boolean);\n    };\n    var strictFunction = function (key) {\n      return strictOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field(key, key, asOption(), value$1(function (v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var strictObjOf = function (key, objSchema) {\n      return field(key, key, strict(), objOf(objSchema));\n    };\n    var strictArrayOfObj = function (key, objFields) {\n      return field(key, key, strict(), arrOfObj(objFields));\n    };\n    var strictArrayOf = function (key, schema) {\n      return field(key, key, strict(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted$1 = function (key, fallback) {\n      return field(key, key, defaulted(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field(key, key, defaulted(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n    var state$1 = function (okey, instantiator) {\n      return state(okey, instantiator);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$1(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu$1(0, 0);\n    };\n    var nu$1 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$1,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$3,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') {\n        return true;\n      }\n      if (str.length < substr.length) {\n        return false;\n      }\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var trim = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$2 = browser.isIE() ? ieContains : regularContains;\n\n    var isSource = function (component, simulatedEvent) {\n      return eq(component.element(), simulatedEvent.event().target());\n    };\n\n    var nu$4 = function (parts) {\n      if (!hasKey$1(parts, 'can') && !hasKey$1(parts, 'abort') && !hasKey$1(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return asRawOrDie('Extracting event.handler', objOfOnly([\n        defaulted$1('can', constant(true)),\n        defaulted$1('abort', constant(false)),\n        defaulted$1('run', noop)\n      ]), parts);\n    };\n    var all$1 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read = function (handler) {\n      return isFunction(handler) ? {\n        can: constant(true),\n        abort: constant(false),\n        run: handler\n      } : handler;\n    };\n    var fuse = function (handlers) {\n      var can = all$1(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return nu$4({\n        can: can,\n        abort: abort,\n        run: run\n      });\n    };\n\n    var touchstart = constant('touchstart');\n    var touchmove = constant('touchmove');\n    var touchend = constant('touchend');\n    var mousedown = constant('mousedown');\n    var mousemove = constant('mousemove');\n    var mouseout = constant('mouseout');\n    var mouseup = constant('mouseup');\n    var mouseover = constant('mouseover');\n    var focusin = constant('focusin');\n    var focusout = constant('focusout');\n    var keydown = constant('keydown');\n    var keyup = constant('keyup');\n    var input = constant('input');\n    var change = constant('change');\n    var click = constant('click');\n    var transitionend = constant('transitionend');\n    var selectstart = constant('selectstart');\n\n    var alloy = { tap: constant('alloy.tap') };\n    var focus = constant('alloy.focus');\n    var postBlur = constant('alloy.blur.post');\n    var postPaste = constant('alloy.paste.post');\n    var receive = constant('alloy.receive');\n    var execute = constant('alloy.execute');\n    var focusItem = constant('alloy.focus.item');\n    var tap = alloy.tap;\n    var tapOrClick = PlatformDetection$1.detect().deviceType.isTouch() ? alloy.tap : click;\n    var longpress = constant('alloy.longpress');\n    var sandboxClose = constant('alloy.sandbox.close');\n    var typeaheadCancel = constant('alloy.typeahead.cancel');\n    var systemInit = constant('alloy.system.init');\n    var windowScroll = constant('alloy.system.scroll');\n    var windowResize = constant('alloy.system.resize');\n    var attachedToDom = constant('alloy.system.attached');\n    var detachedFromDom = constant('alloy.system.detached');\n    var dismissRequested = constant('alloy.system.dismissRequested');\n    var focusShifted = constant('alloy.focusmanager.shifted');\n    var slotVisibility = constant('alloy.slotcontainer.visibility');\n    var changeTab = constant('alloy.change.tab');\n    var dismissTab = constant('alloy.dismiss.tab');\n    var highlight = constant('alloy.highlight');\n    var dehighlight = constant('alloy.dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element(), event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element(), event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, map$1(data, constant));\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event());\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n    var body = cached(function () {\n      return getBody(Element.fromDom(domGlobals.document));\n    });\n    var getBody = function (doc) {\n      var b = doc.dom().body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = Element.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Option.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope.dom());\n    };\n\n    var closest$1 = function (target, transform, isRoot) {\n      var delegate = closest(target, function (elem) {\n        return transform(elem).isSome();\n      }, isRoot);\n      return delegate.bind(transform);\n    };\n\n    var derive = function (configs) {\n      return wrapAll$1(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event().prevent();\n          }\n        })\n      };\n    };\n    var run = function (name, handler) {\n      return {\n        key: name,\n        value: nu$4({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component) {\n            action.apply(undefined, [component].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$4({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element(), name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event();\n        var target = component.getSystem().getByDom(ev.target()).fold(function () {\n          var closest = closest$1(ev.target(), function (el) {\n            return component.getSystem().getByDom(el).toOption();\n          }, constant(false));\n          return closest.getOr(component);\n        }, function (c) {\n          return c;\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute = runOnName(execute());\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var sort$1 = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort$1(required).join(', ') + ') were not specified. Specified keys were: ' + sort$1(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort$1(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort$1(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var MixedBag = function (required, optional) {\n      var everything = required.concat(optional);\n      if (everything.length === 0) {\n        throw new Error('You must specify at least one required or optional field.');\n      }\n      validateStrArr('required', required);\n      validateStrArr('optional', optional);\n      checkDupes(everything);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        var unsupported = filter(keys$1, function (key) {\n          return !contains(everything, key);\n        });\n        if (unsupported.length > 0) {\n          unsuppMessage(unsupported);\n        }\n        var r = {};\n        each(required, function (req) {\n          r[req] = constant(obj[req]);\n        });\n        each(optional, function (opt) {\n          r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n        });\n        return r;\n      };\n    };\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var offsetParent = function (element) {\n      return Option.from(element.dom().offsetParent).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var appendAt = function (parent, element, index) {\n      child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var get$1 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = Element.fromTag('div');\n      var clone = Element.fromDom(element.dom().cloneNode(true));\n      append(container, clone);\n      return get$1(container);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var clone = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow$1 = function (original) {\n      return clone(original, false);\n    };\n\n    var getHtml = function (element) {\n      var clone = shallow$1(element);\n      return getOuter(clone);\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq(originator, component.element()) && !eq(originator, target);\n    };\n    var events = derive([can(focus(), function (component, simulatedEvent) {\n        var originator = simulatedEvent.event().originator();\n        var target = simulatedEvent.event().target();\n        if (isRecursive(component, originator, target)) {\n          domGlobals.console.warn(focus() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        events: events\n    });\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix = constant('alloy-id-');\n    var idAttr = constant('data-alloy-id');\n\n    var prefix$1 = prefix();\n    var idAttr$1 = idAttr();\n    var write = function (label, elem) {\n      var id = generate$1(prefix$1 + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom(), idAttr$1, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement(elem) ? elem.dom()[idAttr$1] : null;\n      return Option.from(id);\n    };\n    var generate$2 = function (prefix) {\n      return generate$1(prefix);\n    };\n\n    var make = identity;\n\n    var NoContextApi = function (getComp) {\n      var fail = function (event) {\n        return function () {\n          throw new Error('The component must be in a context to send: ' + event + '\\n' + element(getComp().element()) + ' is not in context.');\n        };\n      };\n      return {\n        debugInfo: constant('fake'),\n        triggerEvent: fail('triggerEvent'),\n        triggerFocus: fail('triggerFocus'),\n        triggerEscape: fail('triggerEscape'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        broadcast: fail('broadcast'),\n        broadcastOn: fail('broadcastOn'),\n        broadcastEvent: fail('broadcastEvent'),\n        isConnected: constant(false)\n      };\n    };\n    var singleton = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$1('alloy-premade');\n    var premade = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return readOptFrom$1(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(undefined, [component.getApis()].concat([component].concat(rest)));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$5({\n          readState: function () {\n            return 'No State required';\n          }\n        });\n      }\n    };\n    var nu$5 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom = function (spec, all) {\n      var schema = map(all, function (a) {\n        return optionObjOf(a.name(), [\n          strict$1('config'),\n          defaulted$1('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, function (v) {\n        return v;\n      });\n      return {\n        list: all,\n        data: map$1(validated, function (optBlobThunk) {\n          var optBlob = optBlobThunk;\n          var output = optBlob.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return function () {\n            return output;\n          };\n        })\n      };\n    };\n    var getBehaviours = function (bData) {\n      return bData.list;\n    };\n    var getData = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each$1(data, function (detail, key) {\n        each$1(detail, function (value, indexKey) {\n          var chain = readOr$1(indexKey, [])(r);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$6 = function (s) {\n      return {\n        classes: s.classes !== undefined ? s.classes : [],\n        attributes: s.attributes !== undefined ? s.attributes : {},\n        styles: s.styles !== undefined ? s.styles : {}\n      };\n    };\n    var merge$1 = function (defnA, mod) {\n      return __assign({}, defnA, {\n        attributes: __assign({}, defnA.attributes, mod.attributes),\n        styles: __assign({}, defnA.styles, mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var nameAndMod = function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      };\n      var byAspect = byInnerKey(modsByBehaviour, nameAndMod);\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign({}, a.modification, b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$6({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      var sliced = array.slice(0);\n      try {\n        var sorted = sliced.sort(function (a, b) {\n          var aKey = a[keyName]();\n          var bKey = b[keyName]();\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: constant(purpose)\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: constant(purpose)\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose());\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: constant(name),\n        handler: constant(handler)\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign({}, base, nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map(tuples, function (c) {\n          return c.name();\n        }), null, 2)]);\n    };\n    var fuse$1 = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map(sortedTuples, function (tuple) {\n            return tuple.handler();\n          });\n          return fuse(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler()) : fuse$1(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter(eventOrder, function (o) {\n            return contains(tuples, function (t) {\n              return t.name() === o;\n            });\n          }).join(' > ') : tuples[0].name();\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var toInfo = function (spec) {\n      return asRaw('custom.definition', objOf([\n        field('dom', 'dom', strict(), objOf([\n          strict$1('tag'),\n          defaulted$1('styles', {}),\n          defaulted$1('classes', []),\n          defaulted$1('attributes', {}),\n          option('value'),\n          option('innerHtml')\n        ])),\n        strict$1('components'),\n        strict$1('uid'),\n        defaulted$1('events', {}),\n        defaulted$1('apis', {}),\n        field('eventOrder', 'eventOrder', mergeWith({\n          'alloy.execute': [\n            'disabling',\n            'alloy.base.behaviour',\n            'toggling',\n            'typeaheadevents'\n          ],\n          'alloy.focus': [\n            'alloy.base.behaviour',\n            'focusing',\n            'keying'\n          ],\n          'alloy.system.init': [\n            'alloy.base.behaviour',\n            'disabling',\n            'toggling',\n            'representing'\n          ],\n          'input': [\n            'alloy.base.behaviour',\n            'representing',\n            'streaming',\n            'invalidating'\n          ],\n          'alloy.system.detached': [\n            'alloy.base.behaviour',\n            'representing',\n            'item-events',\n            'tooltipping'\n          ],\n          'mousedown': [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events'\n          ],\n          'mouseover': [\n            'item-type-events',\n            'tooltipping'\n          ]\n        }), anyValue$1()),\n        option('domModification')\n      ]), spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign({}, detail.dom, {\n        uid: detail.uid,\n        domChildren: map(detail.components, function (comp) {\n          return comp.element();\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$6({});\n      }, nu$6);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read$2 = function (element, attr) {\n      var value = get$2(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read$2(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read$2(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$3 = function (element) {\n      return read$2(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$3(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$5 = function (element, classes) {\n      each(classes, function (x) {\n        remove$4(element, x);\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$2 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$4 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = Element.fromTag(tag);\n      set$2(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n      if (has$1(element, 'style') && trim(get$2(element, 'style')) === '') {\n        remove$1(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom().offsetWidth;\n    };\n\n    var get$5 = function (element) {\n      return element.dom().value;\n    };\n    var set$3 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom().value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = Element.fromTag(definition.tag);\n      setAll(subject, definition.attributes);\n      add$3(subject, definition.classes);\n      setAll$1(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$3(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$1 = function (spec) {\n      var behaviours = readOr$1('behaviours', {})(spec);\n      var keys$1 = filter(keys(behaviours), function (k) {\n        return behaviours[k] !== undefined;\n      });\n      return map(keys$1, function (k) {\n        return behaviours[k].me;\n      });\n    };\n    var generateFrom$1 = function (spec, all) {\n      return generateFrom(spec, all);\n    };\n    var generate$3 = function (spec) {\n      var all = getBehaviours$1(spec);\n      return generateFrom$1(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine(bData, baseModification, bList, definition) : infoModification;\n      return merge$1(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$3(spec);\n      var bList = getBehaviours(bBlob);\n      var bData = getData(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, function (c) {\n            return [c];\n          });\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: constant(spec),\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: constant(item),\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: constant(events)\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = readOr$1('components', [])(spec);\n      return map(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign({}, spec, {\n        events: __assign({}, DefaultEvents, specEvents),\n        components: components\n      });\n      return Result.value(build(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = Element.fromText(textContent);\n      return external({ element: element });\n    };\n    var external = function (spec) {\n      var extSpec = asRawOrDie('external.component', objOfOnly([\n        strict$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      extSpec.uid.each(function (uid) {\n        writeOnly(extSpec.element, uid);\n      });\n      var me = {\n        getSystem: systemApi.get,\n        config: Option.none,\n        hasConfigured: constant(false),\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: constant(extSpec.element),\n        spec: constant(spec),\n        readState: constant('No state'),\n        syncComponents: noop,\n        components: constant([]),\n        events: constant({})\n      };\n      return premade(me);\n    };\n    var uids = generate$2;\n    var build$1 = function (spec) {\n      return getPremade(spec).fold(function () {\n        var userSpecWithUid = spec.hasOwnProperty('uid') ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      }, function (prebuilt) {\n        return prebuilt;\n      });\n    };\n    var premade$1 = premade;\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$3 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var find$3 = function (queryElem) {\n      var dependent = closest(queryElem, function (elem) {\n        if (!isElement(elem)) {\n          return false;\n        }\n        var id = get$2(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$2(dep, 'id');\n        var doc = owner(dep);\n        return descendant$1(doc, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$1('aria-owns');\n      var link = function (elem) {\n        set$1(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$1(elem, 'aria-owns');\n      };\n      return {\n        id: constant(ariaId),\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$3(queryElem).exists(function (owner) {\n        return isPartOf(component, owner);\n      });\n    };\n    var isPartOf = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq(el, component.element());\n      }, constant(false)) || isAriaPartOf(component, queryElem);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n    var liftN = function (arr, f) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Option.none();\n        }\n      }\n      return Option.some(f.apply(null, r));\n    };\n\n    var unknown$3 = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          domGlobals.console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom(),\n            sequence: map(sequence, function (s) {\n              if (!contains([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = readOptFrom$1(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Option.some(eventConfig.get()[p]) : Option.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown$3);\n      } else {\n        return unknown$3;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant(ignoreEvent);\n\n    var menuFields = constant([\n      strict$1('menu'),\n      strict$1('selectedMenu')\n    ]);\n    var itemFields = constant([\n      strict$1('item'),\n      strict$1('selectedItem')\n    ]);\n    var schema = constant(objOf(itemFields().concat(menuFields())));\n    var itemSchema = constant(objOf(itemFields()));\n\n    var _initSize = strictObjOf('initSize', [\n      strict$1('numColumns'),\n      strict$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return strictOf('markers', itemSchema());\n    };\n    var tieredMenuMarkers = function () {\n      return strictObjOf('markers', [strict$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers = function (required) {\n      return strictObjOf('markers', map(required, strict$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      var trace = getTrace();\n      return field(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted(Option.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, strict());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, strict());\n    };\n    var output = function (name, value) {\n      return state$1(name, constant(value));\n    };\n    var snapshot = function (name) {\n      return state$1(name, identity);\n    };\n    var initSize = constant(_initSize);\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasKey$1(info, name) ? info[name]() : Option.none();\n      };\n      var wrappedApis = map$1(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$1(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign({}, wrappedExtra, wrappedApis, {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: function () {\n          return schemaSchema;\n        },\n        exhibit: function (info, base) {\n          return getConfig(info).bind(function (behaviourInfo) {\n            return readOptFrom$1(active, 'exhibit').map(function (exhibitor) {\n              return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n            });\n          }).getOr(nu$6({}));\n        },\n        name: function () {\n          return name;\n        },\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = readOr$1('events', function (a, b) {\n              return {};\n            })(active);\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll$1(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      strict$1('fields'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var create$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      strict$1('branchKey'),\n      strict$1('branches'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var createModes$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant(undefined);\n\n    var chooseChannels = function (channels, message) {\n      return message.universal() ? channels : filter(channels, function (ch) {\n        return contains(message.channels(), ch);\n      });\n    };\n    var events$1 = function (receiveConfig) {\n      return derive([run(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var targetChannels = chooseChannels(channels, message);\n          each(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie('channel[' + ch + '] data\\nReceiver: ' + element(component.element()), channelSchema, message.data());\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        events: events$1\n    });\n\n    var ReceivingSchema = [strictOf('channels', setOf$1(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted$1('schema', anyValue$1())\n      ])))];\n\n    var Receiving = create$1({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit = function (base, posConfig) {\n      return nu$6({\n        classes: [],\n        styles: posConfig.useFixed ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit\n    });\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$4(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$4(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$6 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api.max(element, value, inclusions);\n      set$2(element, 'max-height', absMax + 'px');\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n    var set$4 = function (element, h) {\n      api$1.set(element, h);\n    };\n    var get$7 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var isSafari = PlatformDetection$1.detect().browser.isSafari();\n    var get$8 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Option.some(paths);\n    };\n\n    var view = function (doc) {\n      var element = doc.dom() === domGlobals.document ? Option.none() : Option.from(doc.dom().defaultView.frameElement);\n      return element.map(Element.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        view: view,\n        owner: owner$1\n    });\n\n    var find$4 = function (element) {\n      var doc = Element.fromDom(domGlobals.document);\n      var scroll = get$8(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute, element), function (frames) {\n        var offset = viewport(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport(a);\n          return {\n            left: b.left + loc.left(),\n            top: b.top + loc.top()\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return Position(r.left + offset.left() + scroll.left(), r.top + offset.top() + scroll.top());\n      });\n    };\n\n    var pointed = Immutable('point', 'width', 'height');\n    var rect = Immutable('x', 'y', 'width', 'height');\n    var bounds = function (x, y, width, height) {\n      return {\n        x: constant(x),\n        y: constant(y),\n        width: constant(width),\n        height: constant(height),\n        right: constant(x + width),\n        bottom: constant(y + height)\n      };\n    };\n    var box = function (element) {\n      var xy = absolute(element);\n      var w = getOuter$2(element);\n      var h = getOuter$1(element);\n      return bounds(xy.left(), xy.top(), w, h);\n    };\n    var win = function () {\n      var width = domGlobals.window.innerWidth;\n      var height = domGlobals.window.innerHeight;\n      var doc = Element.fromDom(domGlobals.document);\n      var scroll = get$8(doc);\n      return bounds(scroll.left(), scroll.top(), width, height);\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right'\n    ];\n    var nu$7 = function (width, yoffset, classes) {\n      var getClasses = function (prop) {\n        return readOptFrom$1(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: function () {\n            return Position(xDelta, yDelta);\n          },\n          classesOn: function () {\n            return bind(alignmentsOn, getClasses);\n          },\n          classesOff: function () {\n            return bind(alignmentsOff, getClasses);\n          }\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerNorthwest: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        innerNortheast: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        innerNorth: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        innerSouthwest: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        innerSoutheast: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        innerSouth: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        innerWest: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerEast: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$7(0, 0, {});\n    };\n\n    var nu$8 = Immutable('x', 'y', 'bubble', 'direction', 'label');\n\n    var adt$2 = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var southeast = adt$2.southeast;\n    var southwest = adt$2.southwest;\n    var northeast = adt$2.northeast;\n    var northwest = adt$2.northwest;\n    var south = adt$2.south;\n    var north = adt$2.north;\n    var east = adt$2.east;\n    var west = adt$2.west;\n\n    var eastX = function (anchor) {\n      return anchor.x();\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x() + anchor.width() / 2 - element.width() / 2;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x() + anchor.width() - element.width();\n    };\n    var northY = function (anchor, element) {\n      return anchor.y() - element.height();\n    };\n    var southY = function (anchor) {\n      return anchor.y() + anchor.height();\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y() + anchor.height() / 2 - element.height() / 2;\n    };\n    var eastEdgeX = function (anchor) {\n      return anchor.x() + anchor.width();\n    };\n    var westEdgeX = function (anchor, element) {\n      return anchor.x() - element.width();\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$8(eastX(anchor), southY(anchor), bubbles.southeast(), southeast(), 'layout-se');\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$8(westX(anchor, element), southY(anchor), bubbles.southwest(), southwest(), 'layout-sw');\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$8(eastX(anchor), northY(anchor, element), bubbles.northeast(), northeast(), 'layout-ne');\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$8(westX(anchor, element), northY(anchor, element), bubbles.northwest(), northwest(), 'layout-nw');\n    };\n    var north$1 = function (anchor, element, bubbles) {\n      return nu$8(middleX(anchor, element), northY(anchor, element), bubbles.north(), north(), 'layout-n');\n    };\n    var south$1 = function (anchor, element, bubbles) {\n      return nu$8(middleX(anchor, element), southY(anchor), bubbles.south(), south(), 'layout-s');\n    };\n    var east$1 = function (anchor, element, bubbles) {\n      return nu$8(eastEdgeX(anchor), centreY(anchor, element), bubbles.east(), east(), 'layout-e');\n    };\n    var west$1 = function (anchor, element, bubbles) {\n      return nu$8(westEdgeX(anchor, element), centreY(anchor, element), bubbles.west(), west(), 'layout-w');\n    };\n    var all$2 = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n\n    var decision = MixedBag([\n      'x',\n      'y',\n      'width',\n      'height',\n      'maxHeight',\n      'direction',\n      'classes',\n      'label',\n      'candidateYforTest'\n    ], []);\n    var css = Immutable('position', 'left', 'top', 'right', 'bottom');\n\n    var adt$3 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionX = decision.x() - x;\n      var decisionY = decision.y() - y;\n      var decisionWidth = decision.width();\n      var decisionHeight = decision.height();\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Option.some(decisionX);\n      var top = Option.some(decisionY);\n      var right = Option.some(decisionRight);\n      var bottom = Option.some(decisionBottom);\n      var none = Option.none();\n      return cata(decision.direction(), function () {\n        return css(posName, left, top, none, none);\n      }, function () {\n        return css(posName, none, top, right, none);\n      }, function () {\n        return css(posName, left, none, none, bottom);\n      }, function () {\n        return css(posName, none, none, right, bottom);\n      }, function () {\n        return css(posName, left, top, none, none);\n      }, function () {\n        return css(posName, left, none, none, bottom);\n      }, function () {\n        return css(posName, left, top, none, none);\n      }, function () {\n        return css(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        return css('absolute', Option.some(decision.x()), Option.some(decision.y()), Option.none(), Option.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$4, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$8();\n        return find$4(element).translate(-scroll.left(), -scroll.top());\n      });\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds(position.left(), position.top(), width, height);\n    };\n    var viewport$1 = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds);\n      }, function (b) {\n        return origin.fold(b, b, bounds);\n      });\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    var relative = adt$3.relative;\n    var fixed = adt$3.fixed;\n\n    var nu$9 = function (x) {\n      return x;\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$4(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var schema$1 = function () {\n      return optionObjOf('layouts', [\n        strict$1('onLtr'),\n        strict$1('onRtl')\n      ]);\n    };\n    var get$9 = function (elem, info, defaultLtr, defaultRtl) {\n      var ltr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      }).getOr(defaultLtr);\n      var rtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      }).getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element());\n      var layouts = get$9(component.element(), anchorInfo, all$2(), allRtl());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var HotspotAnchor = [\n      strict$1('hotspot'),\n      option('bubble'),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement)\n    ];\n\n    var placement$1 = function (component, anchorInfo, origin) {\n      var anchorBox = bounds(anchorInfo.x, anchorInfo.y, anchorInfo.width, anchorInfo.height);\n      var layouts = get$9(component.element(), anchorInfo, all$2(), allRtl());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      strict$1('x'),\n      strict$1('y'),\n      defaulted$1('height', 0),\n      defaulted$1('width', 0),\n      defaulted$1('bubble', fallback()),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement$1)\n    ];\n\n    var zeroWidth = function () {\n      return '\\uFEFF';\n    };\n\n    var create$2 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$2 };\n\n    var adt$4 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$2 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$4.before;\n    var on = adt$4.on;\n    var after$1 = adt$4.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$1,\n      cata: cata$2,\n      getStart: getStart\n    };\n\n    var adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$5.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$5.domRange;\n    var relative$1 = adt$5.relative;\n    var exact = adt$5.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative$1,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var adt$6 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$6.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$6.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$6.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$a = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom().createRange();\n        r.setStart(textnode.dom(), o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$a(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Option.some(rect) : Option.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom());\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var NBSP = '\\xA0';\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Option.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom().createRange();\n      r.selectNode(target.dom());\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom().createRange();\n      cursorRange.selectNode(node.dom());\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom().getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Option.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Option.none();\n        }\n        var r = doc.dom().createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Option.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return Element.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      var anchor = Element.fromDom(selection.anchorNode);\n      var focus = Element.fromDom(selection.focusNode);\n      return after$2(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n    };\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n\n    var point = Immutable('element', 'offset');\n    var descendOnce = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText(last) ? get$a(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    var adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(function (point) {\n        return point;\n      }, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(function (point) {\n        return point;\n      }, function (point, scrollLeft, scrollTop) {\n        return point;\n      });\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left(), a.top());\n      }, Position(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$7.screen;\n    var absolute$1 = adt$7.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom();\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner(frame);\n        var compOwner = owner(component.element());\n        return eq(frameOwner, compOwner);\n      };\n      return Option.from(win.frameElement).map(Element.fromDom).filter(hasSameOwner).map(absolute);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner(component.element());\n      var outerScroll = get$8(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left(), outerScroll.top());\n    };\n\n    var capRect = function (left, top, width, height) {\n      var newLeft = left, newTop = top, newWidth = width, newHeight = height;\n      if (left < 0) {\n        newLeft = 0;\n        newWidth = width + left;\n      }\n      if (top < 0) {\n        newTop = 0;\n        newHeight = height + top;\n      }\n      var point = screen(Position(newLeft, newTop));\n      return Option.some(pointed(point, newWidth, newHeight));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point()\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left(), topLeft.top(), box.width(), box.height());\n        var layoutsLtr = function () {\n          return anchorInfo.showAbove ? [\n            northeast$1,\n            northwest$1,\n            southeast$1,\n            southwest$1,\n            north$1,\n            south$1\n          ] : [\n            southeast$1,\n            southwest$1,\n            northeast$1,\n            northwest$1,\n            south$1,\n            south$1\n          ];\n        };\n        var layoutsRtl = function () {\n          return anchorInfo.showAbove ? [\n            northwest$1,\n            northeast$1,\n            southwest$1,\n            southeast$1,\n            north$1,\n            south$1\n          ] : [\n            southwest$1,\n            southeast$1,\n            northwest$1,\n            northeast$1,\n            south$1,\n            north$1\n          ];\n        };\n        var layouts = get$9(elem, anchorInfo, layoutsLtr(), layoutsRtl());\n        return nu$9({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Option.none()\n        });\n      });\n    };\n    var ContentAnchorCommon = {\n      capRect: capRect,\n      calcNewAnchor: calcNewAnchor\n    };\n\n    var point$1 = Immutable('element', 'offset');\n    var descendOnce$1 = function (element, offset) {\n      return isText(element) ? point$1(element, offset) : descendOnce(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce$1(sel.start(), sel.soffset());\n        var modFinish = descendOnce$1(sel.finish(), sel.foffset());\n        return Selection.range(modStart.element(), modStart.offset(), modFinish.element(), modFinish.offset());\n      });\n    };\n    var placement$2 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom();\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getFirstRect$1(win, Selection.exactFromRange(sel)).orThunk(function () {\n          var x = Element.fromText(zeroWidth());\n          before(sel.start(), x);\n          return getFirstRect$1(win, Selection.exact(x, 0, x, 1)).map(function (rect) {\n            remove(x);\n            return rect;\n          });\n        });\n        return optRect.bind(function (rawRect) {\n          return ContentAnchorCommon.capRect(rawRect.left(), rawRect.top(), rawRect.width(), rawRect.height());\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement(sel.start()) ? Option.some(sel.start()) : parent(sel.start());\n      });\n      var elem = targetElement.getOr(component.element());\n      return ContentAnchorCommon.calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$2)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.bind(function (target) {\n        var rect = target.dom().getBoundingClientRect();\n        var nodeBox = ContentAnchorCommon.capRect(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element());\n        return ContentAnchorCommon.calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      strict$1('node'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$3)\n    ];\n\n    var eastX$1 = function (anchor) {\n      return anchor.x() + anchor.width();\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x() - element.width();\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y() - element.height() + anchor.height();\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y();\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$8(eastX$1(anchor), southY$1(anchor), bubbles.southeast(), southeast(), 'link-layout-se');\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$8(westX$1(anchor, element), southY$1(anchor), bubbles.southwest(), southwest(), 'link-layout-sw');\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$8(eastX$1(anchor), northY$1(anchor, element), bubbles.northeast(), northeast(), 'link-layout-ne');\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$8(westX$1(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest(), 'link-layout-nw');\n    };\n    var all$3 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2\n      ];\n    };\n\n    var placement$4 = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element());\n      var layouts = get$9(component.element(), submenuInfo, all$3(), allRtl$1());\n      return Option.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Option.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      strict$1('item'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      output('placement', placement$4)\n    ];\n\n    var AnchorSchema = choose$1('anchor', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var anchor = Immutable('anchorBox', 'origin');\n    var box$1 = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'deltaW',\n          'deltaH'\n        ]\n      }\n    ]);\n    var attempt = function (candidate, width, height, bounds) {\n      var candidateX = candidate.x();\n      var candidateY = candidate.y();\n      var bubbleLeft = candidate.bubble().offset().left();\n      var bubbleTop = candidate.bubble().offset().top();\n      var boundsX = bounds.x();\n      var boundsY = bounds.y();\n      var boundsWidth = bounds.width();\n      var boundsHeight = bounds.height();\n      var newX = candidateX + bubbleLeft;\n      var newY = candidateY + bubbleTop;\n      var xInBounds = newX >= boundsX;\n      var yInBounds = newY >= boundsY;\n      var originInBounds = xInBounds && yInBounds;\n      var xFit = newX + width <= boundsX + boundsWidth;\n      var yFit = newY + height <= boundsY + boundsHeight;\n      var sizeInBounds = xFit && yFit;\n      var deltaW = xInBounds ? Math.min(width, boundsX + boundsWidth - newX) : Math.abs(boundsX - (newX + width));\n      var deltaH = yInBounds ? Math.min(height, boundsY + boundsHeight - newY) : Math.abs(boundsY - (newY + height));\n      var maxX = bounds.x() + bounds.width();\n      var minX = Math.max(bounds.x(), newX);\n      var limitX = Math.min(minX, maxX);\n      var limitY = yInBounds ? newY : newY + (height - deltaH);\n      var upAvailable = constant(limitY + deltaH - boundsY);\n      var downAvailable = constant(boundsY + boundsHeight - limitY);\n      var maxHeight = cataVertical(candidate.direction(), downAvailable, downAvailable, upAvailable);\n      var reposition = decision({\n        x: limitX,\n        y: limitY,\n        width: deltaW,\n        height: deltaH,\n        maxHeight: maxHeight,\n        direction: candidate.direction(),\n        classes: {\n          on: candidate.bubble().classesOn(),\n          off: candidate.bubble().classesOff()\n        },\n        label: candidate.label(),\n        candidateYforTest: newY\n      });\n      return originInBounds && sizeInBounds ? adt$8.fit(reposition) : adt$8.nofit(reposition, deltaW, deltaH);\n    };\n    var attempts = function (candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width();\n      var panelHeight = elementBox.height();\n      var attemptBestFit = function (layout, reposition, deltaW, deltaH) {\n        var next = layout(anchorBox, elementBox, bubbles);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(adt$8.fit, function (newReposition, newDeltaW, newDeltaH) {\n          var improved = newDeltaH > deltaH || newDeltaW > deltaW;\n          return improved ? adt$8.nofit(newReposition, newDeltaW, newDeltaH) : adt$8.nofit(reposition, deltaW, deltaH);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(adt$8.fit, bestNext);\n      }, adt$8.nofit(decision({\n        x: anchorBox.x(),\n        y: anchorBox.y(),\n        width: elementBox.width(),\n        height: elementBox.height(),\n        maxHeight: elementBox.height(),\n        direction: southeast(),\n        classes: [],\n        label: 'none',\n        candidateYforTest: anchorBox.y()\n      }), -1, -1));\n      return abc.fold(identity, identity);\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: constant(getOuter$2(p)),\n        height: constant(getOuter$1(p))\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      var elementBox = elementSize(element);\n      return attempts(options.preference(), anchorBox, elementBox, bubbles, options.bounds());\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes();\n      remove$5(element, classInfo.off);\n      add$3(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction();\n      maxHeightFunction(element, decision.maxHeight());\n    };\n    var position = function (element, decision, options) {\n      var addPx = function (num) {\n        return num + 'px';\n      };\n      var newPosition = reposition(options.origin(), decision);\n      setOptions(element, {\n        position: Option.some(newPosition.position()),\n        left: newPosition.left().map(addPx),\n        top: newPosition.top().map(addPx),\n        right: newPosition.right().map(addPx),\n        bottom: newPosition.bottom().map(addPx)\n      });\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax(element, Math.floor(maxHeight));\n    };\n    var anchored = constant(function (element, available) {\n      setMaxHeight(element, available);\n      setAll$1(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable = constant(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var reparteeOptions = MixedBag([\n      'bounds',\n      'origin',\n      'preference',\n      'maxHeightFunction'\n    ], []);\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, getBounds, overrideOptions) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var anchorBox = anchor.anchorBox();\n      var origin = anchor.origin();\n      var options = reparteeOptions({\n        bounds: viewport$1(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction\n      });\n      go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position(element, decision, options);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n    };\n\n    var getFixedOrigin = function () {\n      return fixed(0, 0, domGlobals.window.innerWidth, domGlobals.window.innerHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute(component.element());\n      var bounds = component.element().dom().getBoundingClientRect();\n      return relative(position.left(), position.top(), bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee) {\n      var anchor = box$1(anchoring.anchorBox, origin);\n      simple(anchor, placee.element(), anchoring.bubble, anchoring.layouts, getBounds, anchoring.overrides);\n    };\n    var position$1 = function (component, posConfig, posState, anchor, placee) {\n      var boxElement = Option.none();\n      positionWithin(component, posConfig, posState, anchor, placee, boxElement);\n    };\n    var positionWithin = function (component, posConfig, posState, anchor, placee, boxElement) {\n      var boundsBox = boxElement.map(box);\n      return positionWithinBounds(component, posConfig, posState, anchor, placee, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, anchor, placee, bounds) {\n      var anchorage = asRawOrDie('positioning anchor.info', AnchorSchema, anchor);\n      set$2(placee.element(), 'position', 'fixed');\n      var oldVisibility = getRaw(placee.element(), 'visibility');\n      set$2(placee.element(), 'visibility', 'hidden');\n      var origin = posConfig.useFixed ? getFixedOrigin() : getRelativeOrigin(component);\n      var placer = anchorage.placement;\n      var getBounds = bounds.map(constant).or(posConfig.getBounds);\n      placer(component, anchorage, origin).each(function (anchoring) {\n        var doPlace = anchoring.placer.getOr(place);\n        doPlace(component, origin, anchoring, getBounds, placee);\n      });\n      oldVisibility.fold(function () {\n        remove$6(placee.element(), 'visibility');\n      }, function (vis) {\n        set$2(placee.element(), 'visibility', vis);\n      });\n      if (getRaw(placee.element(), 'left').isNone() && getRaw(placee.element(), 'top').isNone() && getRaw(placee.element(), 'right').isNone() && getRaw(placee.element(), 'bottom').isNone() && getRaw(placee.element(), 'position').is('fixed')) {\n        remove$6(placee.element(), 'position');\n      }\n    };\n    var getMode = function (component, pConfig, pState) {\n      return pConfig.useFixed ? 'fixed' : 'absolute';\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode\n    });\n\n    var PositionSchema = [\n      defaulted$1('useFixed', false),\n      option('getBounds')\n    ];\n\n    var Positioning = create$1({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach = function (parent, child) {\n      attachWith(parent, child, append);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element(), child.element());\n      if (inBody(parent.element())) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove(component.element());\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element()).bind(function (p) {\n        return component.getSystem().getByDom(p).fold(Option.none, Option.some);\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren = function (component) {\n      var subs = component.components();\n      each(subs, doDetach);\n      empty(component.element());\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemInternal(element, guiSystem, append);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemInternal(element, guiSystem, after);\n    };\n    var attachSystemInternal = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element());\n      var children$1 = children(guiSystem.element());\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element());\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove(guiSystem.element());\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (data) {\n        detachChildren(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen = function (sandbox, sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf$1 = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState = function (sandbox, sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element(), cssKey).fold(function () {\n        remove$1(sandbox.element(), attr);\n      }, function (v) {\n        set$1(sandbox.element(), attr, v);\n      });\n      set$2(sandbox.element(), cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      if (has$1(sandbox.element(), attr)) {\n        var oldValue = get$2(sandbox.element(), attr);\n        set$2(sandbox.element(), cssKey, oldValue);\n      } else {\n        remove$6(sandbox.element(), cssKey);\n      }\n    };\n    var cloak = function (sandbox, sConfig, sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$2(sandbox.element(), 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, sState) {\n      if (!hasPosition(sandbox.element())) {\n        remove$6(sandbox.element(), 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        cloak: cloak,\n        decloak: decloak,\n        open: open,\n        openWhileCloaked: openWhileCloaked,\n        close: close,\n        isOpen: isOpen,\n        isPartOf: isPartOf$1,\n        getState: getState\n    });\n\n    var events$2 = function (sandboxConfig, sandboxState) {\n      return derive([run(sandboxClose(), function (sandbox, simulatedEvent) {\n          close(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        events: events$2\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      strict$1('isPartOf'),\n      strict$1('getAttachPoint'),\n      defaulted$1('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init = function () {\n      var contents = Cell(Option.none());\n      var readState = constant('not-implemented');\n      var isOpen = function () {\n        return contents.get().isSome();\n      };\n      var set = function (c) {\n        contents.set(Option.some(c));\n      };\n      var get = function (c) {\n        return contents.get();\n      };\n      var clear = function () {\n        contents.set(Option.none());\n      };\n      return nu$5({\n        readState: readState,\n        isOpen: isOpen,\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        init: init\n    });\n\n    var Sandboxing = create$1({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant('dismiss.popups');\n    var mouseReleased = constant('mouse.released');\n\n    var schema$2 = objOfOnly([\n      defaulted$1('isExtraPart', constant(false)),\n      optionObjOf('fireEventInstead', [defaulted$1('event', dismissRequested())])\n    ]);\n    var receivingConfig = function (rawSpec) {\n      var c = receiving(rawSpec);\n      return Receiving.config(c);\n    };\n    var receiving = function (rawSpec) {\n      var spec = asRawOrDie('Dismissal', schema$2, rawSpec);\n      return {\n        channels: wrap$1(dismissPopups(), {\n          schema: objOfOnly([strict$1('target')]),\n          onReceive: function (sandbox, data) {\n            if (Sandboxing.isOpen(sandbox)) {\n              var isPart = Sandboxing.isPartOf(sandbox, data.target) || spec.isExtraPart(sandbox, data.target);\n              if (!isPart) {\n                spec.fireEventInstead.fold(function () {\n                  return Sandboxing.close(sandbox);\n                }, function (fe) {\n                  return emit(sandbox, fe.event);\n                });\n              }\n            }\n          }\n        })\n      };\n    };\n\n    var field$1 = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([state$1('dump', identity)]));\n    };\n    var get$b = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign({}, data.dump, derive$1(original));\n    };\n    var SketchBehaviours = {\n      field: field$1,\n      augment: augment,\n      get: get$b\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$9 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$9.single(true, constant(compSpec));\n      }\n      return readOptFrom$1(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$9.single(false, constant(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = valueThunk(detail, compSpec.config, compSpec.validated);\n        var childSpecs = readOptFrom$1(value, 'components').getOr([]);\n        var substituted = bind(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign({}, value, { components: substituted })];\n      }, function (req, valuesThunk) {\n        var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n        var preprocessor = compSpec.validated.preprocess.getOr(identity);\n        return preprocessor(values);\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called === true) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$1(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each$1(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single = adt$9.single;\n    var multiple = adt$9.multiple;\n    var placeholder = constant(_placeholder);\n\n    var adt$a = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted$1('factory', { sketch: identity });\n    var fSchema = defaulted$1('schema', []);\n    var fName = strict$1('name');\n    var fPname = field('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$1(typeSpec.name) + '>';\n    }), anyValue$1());\n    var fGroupSchema = state$1('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted$1('defaults', constant({}));\n    var fOverrides = defaulted$1('overrides', constant({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      strict$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Option.some, Option.none, Option.some, Option.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity, identity, identity, identity);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$a.required, requiredSpec);\n    var external$1 = convert(adt$a.external, externalSpec);\n    var optional = convert(adt$a.optional, optionalSpec);\n    var group = convert(adt$a.group, groupSpec);\n    var original = constant('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine$2 = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant(data.factory.sketch(combine$2(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant(internals),\n        externals: constant(externals)\n      };\n    };\n\n    var generate$4 = function (owner, parts) {\n      var r = {};\n      each(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign({}, g, {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind(parts, function (part) {\n        return part.fold(Option.none, Option.some, Option.none, Option.none).map(function (data) {\n          return strictObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components = function (owner, detail, internals) {\n      return substitutePlaces(Option.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOption();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = system.getByUid(uids[pk]);\n      });\n      return map$1(r, constant);\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$1(detail.partUids, function (pUid, k) {\n        return constant(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = system.getByUid(uids[pk]).getOrDie();\n      });\n      return map$1(r, constant);\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll$1(map(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue$1());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        generate: generate$4,\n        generateOne: generateOne,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [strictObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        strict$1('uid'),\n        defaulted$1('dom', {}),\n        defaulted$1('components', []),\n        snapshot('originalSpec'),\n        defaulted$1('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie$1 = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components$1 = components(owner, detail, subs.internals());\n      return factory(detail, components$1, specWithUid, subs.externals());\n    };\n    var supplyUid = function (spec) {\n      return spec.hasOwnProperty('uid') ? spec : __assign({}, spec, { uid: generate$2('uid') });\n    };\n\n    function isSketchSpec(spec) {\n      return spec.uid !== undefined;\n    }\n    var singleSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      strict$1('partFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var single$2 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign({\n        name: constant(config.name),\n        partFields: constant([]),\n        configFields: constant(config.configFields),\n        sketch: sketch\n      }, apis, extraApis);\n    };\n    var composite$1 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$4(config.name, config.partFields);\n      var apis = map$1(config.apis, makeApi);\n      var extraApis = map$1(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign({\n        name: constant(config.name),\n        partFields: constant(config.partFields),\n        configFields: constant(config.configFields),\n        sketch: sketch,\n        parts: constant(parts)\n      }, apis, extraApis);\n    };\n\n    var inside = function (target) {\n      return name(target) === 'input' && get$2(target, 'type') !== 'radio' || name(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [strict$1('find')];\n\n    var Composing = create$1({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else {\n        return r < min ? max : r;\n      }\n    };\n    var cap = function (value, min, max) {\n      if (value <= min) {\n        return min;\n      } else {\n        return value >= max ? max : value;\n      }\n    };\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element(), '.' + hConfig.highlightClass);\n      each(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element() === h;\n          })) {\n          remove$4(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight$1 = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$4(target.element(), hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight());\n      }\n    };\n    var highlight$1 = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element(), hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight$1(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw new Error(err);\n      }, function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight$1(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has$2(queryTarget.element(), hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, hState) {\n      return descendant$1(component.element(), '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOption();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      return Option.from(items[index]).fold(function () {\n        return Result.error('No element found with index ' + index);\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, hState) {\n      return descendant$1(component.element(), '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOption();\n      });\n    };\n    var getLast = function (component, hConfig, hState) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Option.some(items[items.length - 1]) : Option.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOption();\n      });\n    };\n    var getDelta = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      var current = findIndex(items, function (item) {\n        return has$2(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOption();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, hState) {\n      var items = descendants(component.element(), '.' + hConfig.itemClass);\n      return cat(map(items, function (i) {\n        return component.getSystem().getByDom(i).toOption();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight$1,\n        highlight: highlight$1,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      strict$1('highlightClass'),\n      strict$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$1({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = function () {\n      return [8];\n    };\n    var TAB = function () {\n      return [9];\n    };\n    var ENTER = function () {\n      return [13];\n    };\n    var ESCAPE = function () {\n      return [27];\n    };\n    var SPACE = function () {\n      return [32];\n    };\n    var LEFT = function () {\n      return [37];\n    };\n    var UP = function () {\n      return [38];\n    };\n    var RIGHT = function () {\n      return [39];\n    };\n    var DOWN = function () {\n      return [40];\n    };\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw();\n        return contains(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw();\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw();\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose$2 = function (transitions, event) {\n      var transition = find(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var focus$1 = function (element) {\n      element.dom().focus();\n    };\n    var blur = function (element) {\n      element.dom().blur();\n    };\n    var hasFocus = function (element) {\n      var doc = owner(element).dom();\n      return element.dom() === doc.activeElement;\n    };\n    var active = function (_doc) {\n      var doc = _doc !== undefined ? _doc.dom() : domGlobals.document;\n      return Option.from(doc.activeElement).map(Element.fromDom);\n    };\n    var search$1 = function (element) {\n      return active(owner(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom = function () {\n      var get = function (component) {\n        return search$1(component.element());\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element());\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element();\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted$1('focusManager', dom()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output('handler', me),\n          output('state', stateInit),\n          output('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose$2(rules, simulatedEvent.event()).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Option.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run(focus(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE().concat(ENTER()))(simulatedEvent.event());\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        return derive(onFocusHandler.toArray().concat([\n          run(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ]));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$3 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted$1('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted$1('firstTabstop', 0),\n        defaulted$1('useTabstopAt', constant(true)),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$3(element, sel);\n        }).getOr(element);\n        return get$6(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element(), tabbingConfig.selector);\n        var visibles = filter(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Option.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$3(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Option.some(true) : Option.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Option.some(true);\n        });\n      };\n      var go = function (component, simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element(), tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig, tabbingState) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant([\n        rule(and([\n          isShift,\n          inSet(TAB())\n        ]), goBackwards),\n        rule(inSet(TAB()), goForwards),\n        rule(inSet(ESCAPE()), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER())\n        ]), execute)\n      ]);\n      var getKeyupRules = constant([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Option.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$3(state$1('cyclic', constant(false)));\n\n    var CyclicType = create$3(state$1('cyclic', constant(true)));\n\n    var doDefaultExecute = function (component, simulatedEvent, focused) {\n      dispatch(component, focused, execute());\n      return Option.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      return inside(focused) && inSet(SPACE())(simulatedEvent.event()) ? Option.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (component, simulatedEvent) {\n      return Option.some(true);\n    };\n\n    var schema$3 = [\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('useSpace', false),\n      defaulted$1('useEnter', true),\n      defaulted$1('useControlEnter', false),\n      defaulted$1('useDown', false)\n    ];\n    var execute$1 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element());\n    };\n    var getKeydownRules = function (component, simulatedEvent, executeConfig, executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element()) ? SPACE() : [];\n      var enterExec = executeConfig.useEnter ? ENTER() : [];\n      var downExec = executeConfig.useDown ? DOWN() : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$1)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER())\n        ]), execute$1)] : []);\n    };\n    var getKeyupRules = function (component, simulatedEvent, executeConfig, executeState) {\n      return executeConfig.useSpace && !inside(component.element()) ? [rule(inSet(SPACE()), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$3, NoState.init, getKeydownRules, getKeyupRules, function () {\n      return Option.none();\n    });\n\n    var flatgrid = function (spec) {\n      var dimensions = Cell(Option.none());\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set(Option.some({\n          numRows: constant(numRows),\n          numColumns: constant(numColumns)\n        }));\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows();\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns();\n        });\n      };\n      return nu$5({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: d.numRows(),\n              numColumns: d.numColumns()\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$1 = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        flatgrid: flatgrid,\n        init: init$1\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element());\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element(), focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$2 = useV;\n    var south$2 = useV;\n    var move = useV;\n\n    var isHidden = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      var dom = element.dom();\n      return !isHidden(dom);\n    };\n\n    var indexInfo = MixedBag([\n      'index',\n      'candidates'\n    ], []);\n    var locate$2 = function (candidates, predicate) {\n      return findIndex(candidates, predicate).map(function (index) {\n        return indexInfo({\n          index: index,\n          candidates: candidates\n        });\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = curry(eq, current);\n      var candidates = descendants(container, selector);\n      var visible = filter(candidates, isVisible);\n      return locate$2(visible, predicate);\n    };\n    var findIndex$1 = function (elements, target) {\n      return findIndex(elements, function (elem) {\n        return eq(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row() * numCols + address.column();\n        return newIndex >= 0 && newIndex < values.length ? Option.some(values[newIndex]) : Option.none();\n      });\n    };\n    var cycleHorizontal = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Option.some({\n          row: constant(oldRow),\n          column: constant(newColumn)\n        });\n      });\n    };\n    var cycleVertical = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = cap(oldColumn, 0, colsInRow - 1);\n        return Option.some({\n          row: constant(newRow),\n          column: constant(newCol)\n        });\n      });\n    };\n    var cycleRight = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, -1);\n    };\n    var cycleUp = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, -1);\n    };\n    var cycleDown = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, +1);\n    };\n\n    var schema$4 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('captureTab', false),\n      initSize()\n    ];\n    var focusIn = function (component, gridConfig, gridState) {\n      descendant$1(component.element(), gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, gridConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, gridConfig, gridState) {\n      return findCurrent(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates(), identified.index(), gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (component, simulatedEvent, gridConfig, gridState) {\n      return gridConfig.captureTab ? Option.some(true) : Option.none();\n    };\n    var doEscape = function (component, simulatedEvent, gridConfig, gridState) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft = doMove(cycleLeft);\n    var moveRight = doMove(cycleRight);\n    var moveNorth = doMove(cycleUp);\n    var moveSouth = doMove(cycleDown);\n    var getKeydownRules$1 = constant([\n      rule(inSet(LEFT()), west$2(moveLeft, moveRight)),\n      rule(inSet(RIGHT()), east$2(moveLeft, moveRight)),\n      rule(inSet(UP()), north$2(moveNorth)),\n      rule(inSet(DOWN()), south$2(moveSouth)),\n      rule(and([\n        isShift,\n        inSet(TAB())\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB())\n      ]), handleTab),\n      rule(inSet(ESCAPE()), doEscape),\n      rule(inSet(SPACE().concat(ENTER())), execute$2)\n    ]);\n    var getKeyupRules$1 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$4, flatgrid, getKeydownRules$1, getKeyupRules$1, function () {\n      return Option.some(focusIn);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name(candidate) === 'button' && get$2(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Option.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Option.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index();\n        var candidates = identified.candidates();\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$5 = [\n      strict$1('selector'),\n      defaulted$1('getInitial', Option.none),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('executeOnMove', false),\n      defaulted$1('allowVertical', true)\n    ];\n    var findCurrent$1 = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, flowConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent$1(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$1 = function (component, flowConfig) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant$1(component.element(), flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig) {\n        return movement(component, simulatedEvent, flowConfig).bind(function () {\n          return flowConfig.executeOnMove ? execute$3(component, simulatedEvent, flowConfig) : Option.some(true);\n        });\n      };\n    };\n    var doEscape$1 = function (component, simulatedEvent, flowConfig, _flowState) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$2 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT().concat(flowConfig.allowVertical ? UP() : []);\n      var eastMovers = RIGHT().concat(flowConfig.allowVertical ? DOWN() : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$2(moveLeft$1, moveRight$1))),\n        rule(inSet(eastMovers), doMove$1(east$2(moveLeft$1, moveRight$1))),\n        rule(inSet(ENTER()), execute$3),\n        rule(inSet(SPACE()), execute$3),\n        rule(inSet(ESCAPE()), doEscape$1)\n      ];\n    };\n    var getKeyupRules$2 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var FlowType = typical(schema$5, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Option.some(focusIn$1);\n    });\n\n    var outcome = MixedBag([\n      'rowIndex',\n      'columnIndex',\n      'cell'\n    ], []);\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Option.from(matrix[rowIndex]).bind(function (row) {\n        return Option.from(row[columnIndex]).map(function (cell) {\n          return outcome({\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          });\n        });\n      });\n    };\n    var cycleHorizontal$1 = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical$1 = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = cap(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cap(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cap(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = cap(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, -1);\n    };\n    var cycleUp$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, -1);\n    };\n    var cycleDown$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$6 = [\n      strictObjOf('selectors', [\n        strict$1('row'),\n        strict$1('cell')\n      ]),\n      defaulted$1('cycles', true),\n      defaulted$1('previousSelector', Option.none),\n      defaulted$1('execute', defaultExecute)\n    ];\n    var focusIn$2 = function (component, matrixConfig) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant$1(component.element(), selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$4 = function (component, simulatedEvent, matrixConfig) {\n      return search$1(component.element()).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove$2 = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$3(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex$1(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex$1(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell();\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1, moveLeft$2);\n    var moveRight$3 = doMove$2(cycleRight$1, moveRight$2);\n    var moveNorth$1 = doMove$2(cycleUp$1, moveUp);\n    var moveSouth$1 = doMove$2(cycleDown$1, moveDown);\n    var getKeydownRules$3 = constant([\n      rule(inSet(LEFT()), west$2(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT()), east$2(moveLeft$3, moveRight$3)),\n      rule(inSet(UP()), north$2(moveNorth$1)),\n      rule(inSet(DOWN()), south$2(moveSouth$1)),\n      rule(inSet(SPACE().concat(ENTER())), execute$4)\n    ]);\n    var getKeyupRules$3 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var MatrixType = typical(schema$6, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Option.some(focusIn$2);\n    });\n\n    var schema$7 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('moveOnTab', false)\n    ];\n    var execute$5 = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$3 = function (component, menuConfig) {\n      descendant$1(component.element(), menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.moveOnTab ? move(moveUp$1)(component, simulatedEvent, menuConfig) : Option.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.moveOnTab ? move(moveDown$1)(component, simulatedEvent, menuConfig) : Option.none();\n    };\n    var getKeydownRules$4 = constant([\n      rule(inSet(UP()), move(moveUp$1)),\n      rule(inSet(DOWN()), move(moveDown$1)),\n      rule(and([\n        isShift,\n        inSet(TAB())\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB())\n      ]), fireTab),\n      rule(inSet(ENTER()), execute$5),\n      rule(inSet(SPACE()), execute$5)\n    ]);\n    var getKeyupRules$4 = constant([rule(inSet(SPACE()), stopEventForFirefox)]);\n    var MenuType = typical(schema$7, NoState.init, getKeydownRules$4, getKeyupRules$4, function () {\n      return Option.some(focusIn$3);\n    });\n\n    var schema$8 = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules$5 = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE()), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER())\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER())\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB())\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB())\n        ]), specialInfo.onTab),\n        rule(inSet(UP()), specialInfo.onUp),\n        rule(inSet(DOWN()), specialInfo.onDown),\n        rule(inSet(LEFT()), specialInfo.onLeft),\n        rule(inSet(RIGHT()), specialInfo.onRight),\n        rule(inSet(SPACE()), specialInfo.onSpace),\n        rule(inSet(ESCAPE()), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules$5 = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE()), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$8, NoState.init, getKeydownRules$5, getKeyupRules$5, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid$1 = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid$1,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var Keying = createModes$1({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element(), component.element());\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!hasKey$1(keyState, 'setGridSize')) {\n            domGlobals.console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var preserve = function (f, container) {\n      var ownerDoc = owner(container);\n      var refocus = active(ownerDoc).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq(focused, elem);\n        };\n        return hasFocus(container) ? Option.some(container) : descendant(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(ownerDoc).filter(function (newFocus) {\n          return eq(newFocus, oldFocus);\n        }).fold(function () {\n          focus$1(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var set$5 = function (component, replaceConfig, replaceState, data) {\n      detachChildren(component);\n      preserve(function () {\n        var children = map(data, component.getSystem().build);\n        each(children, function (l) {\n          attach(component, l);\n        });\n      }, component.element());\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append$2 = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append, appendee);\n    };\n    var prepend$1 = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend, prependee);\n    };\n    var remove$7 = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find(children, function (child) {\n        return eq(removee.element(), child.element());\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Option.from(children[replaceeIndex]).map(function (replacee) {\n        remove$7(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        append: append$2,\n        prepend: prepend$1,\n        remove: remove$7,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$5,\n        contents: contents\n    });\n\n    var Replacing = create$1({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var onLoad = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        onLoad: onLoad,\n        onUnload: onUnload,\n        setValue: setValue,\n        getValue: getValue,\n        getState: getState$1\n    });\n\n    var events$3 = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, se) {\n          onLoad(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, se) {\n          onUnload(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad)];\n      return derive(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        events: events$3\n    });\n\n    var memory = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$5({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = function () {\n      };\n      return nu$5({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return readOptFrom$1(dataByValue.get(), itemString).orThunk(function () {\n          return readOptFrom$1(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each(items, function (item) {\n          newDataByValue[item.value] = item;\n          readOptFrom$1(item, 'meta').each(function (meta) {\n            readOptFrom$1(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign({}, currentDataByValue, newDataByValue));\n        dataByText.set(__assign({}, currentDataByText, newDataByText));\n      };\n      return nu$5({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$2 = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        memory: memory,\n        dataset: dataset,\n        manual: manual,\n        init: init$2\n    });\n\n    var setValue$1 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).fold(function () {\n        return store.getFallbackEntry(key);\n      }, function (data) {\n        return data;\n      });\n    };\n    var onLoad$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$1(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      strict$1('getFallbackEntry'),\n      strict$1('getDataKey'),\n      strict$1('setValue'),\n      output('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$1,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$2 = function (component, repConfig, repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$2 = function (component, repConfig, repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$2 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      strict$1('getValue'),\n      defaulted$1('setValue', noop),\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$2,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$3 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$3,\n        getValue: getValue$3,\n        onLoad: onLoad$3,\n        onUnload: onUnload$2,\n        state: memory\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted$1('resetOnDom', false)\n    ];\n\n    var Representing = create$1({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var events$4 = function (name, eventHandlers) {\n      var events = derive(eventHandlers);\n      return create$1({\n        fields: [strict$1('enabled')],\n        name: name,\n        active: { events: constant(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$4(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$1(component.element());\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur$1 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur(component.element());\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element());\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        focus: focus$2,\n        blur: blur$1,\n        isFocused: isFocused\n    });\n\n    var exhibit$1 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$6(mod);\n    };\n    var events$5 = function (focusConfig) {\n      return derive([run(focus(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event().prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$1,\n        events: events$5\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted$1('stopMousedown', false),\n      defaulted$1('ignore', false)\n    ];\n\n    var Focusing = create$1({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element(), toggleClass);\n        } else {\n          remove$4(component.element(), toggleClass);\n        }\n      });\n    };\n    var toggle = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on$1 = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$6 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on$1 : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad$4 = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        onLoad: onLoad$4,\n        toggle: toggle,\n        isOn: isOn,\n        on: on$1,\n        off: off,\n        set: set$6\n    });\n\n    var exhibit$2 = function (base, toggleConfig, toggleState) {\n      return nu$6({});\n    };\n    var events$6 = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle);\n      var load = loadEvent(toggleConfig, toggleState, onLoad$4);\n      return derive(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$2,\n        events: events$6\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$1(component.element(), 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted$1('selected', false),\n      option('toggleClass'),\n      defaulted$1('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted$1('syncWithExpanded', false),\n          output('update', updatePressed)\n        ],\n        checked: [output('update', updateChecked)],\n        expanded: [output('update', updateExpanded)],\n        selected: [output('update', updateSelected)],\n        none: [output('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$1({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search$1(item.element()).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant(hoverEvent);\n    var focus$3 = constant(focusEvent);\n\n    var builder = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign({}, detail.domModification, { attributes: __assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes, { 'aria-haspopup': detail.hasSubmenu }, detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', [\n            run(tapOrClick(), emitExecute),\n            cutter(mousedown()),\n            run(mouseover(), onHover),\n            run(focusItem(), Focusing.focus)\n          ])\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$9 = [\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted$1('ignoreFocus', false),\n      defaulted$1('domModification', {}),\n      output('builder', builder),\n      defaulted$1('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive([stopper(focusItem())])\n      };\n    };\n    var schema$a = [\n      strict$1('dom'),\n      strict$1('components'),\n      output('builder', builder$1)\n    ];\n\n    var owner$2 = function () {\n      return 'item-widget';\n    };\n    var parts = constant([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (component) {\n                    return detail.data;\n                  },\n                  setValue: function () {\n                  }\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder$2 = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts());\n      var components$1 = components(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event().target()) ? Option.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element());\n            return Option.none();\n          } else {\n            return Option.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components$1,\n        domModification: detail.domModification,\n        events: derive([\n          runOnExecute(function (component, simulatedEvent) {\n            focusWidget(component).each(function (widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(mouseover(), onHover),\n          run(focusItem(), function (component, simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Option.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element());\n                return Option.none();\n              } else {\n                return Option.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$b = [\n      strict$1('uid'),\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('autofocus', false),\n      defaulted$1('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted$1('domModification', {}),\n      defaultUidsSchema(parts()),\n      output('builder', builder$2)\n    ];\n\n    var itemSchema$1 = choose$1('type', {\n      widget: schema$b,\n      item: schema$9,\n      separator: schema$a\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$1 = constant([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie('menu.spec item', itemSchema$1, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return u.hasOwnProperty('uid') ? u : __assign({}, u, { uid: generate$2('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$c = constant([\n      strict$1('value'),\n      strict$1('items'),\n      strict$1('dom'),\n      strict$1('components'),\n      defaulted$1('eventOrder', {}),\n      field$1('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output('config', configureGrid)\n        ],\n        matrix: [\n          output('config', configureMatrix),\n          strict$1('rowSelector')\n        ],\n        menu: [\n          defaulted$1('moveOnTab', true),\n          output('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted$1('fakeFocus', false),\n      defaulted$1('focusManager', dom()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus$4 = constant('alloy.menu-focus');\n\n    var make$1 = function (detail, components, spec, externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Option.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive([\n          run(focus$3(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event();\n            menu.getSystem().getByDom(event.target()).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus$4(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event().item();\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite$1({\n      name: 'Menu',\n      configFields: schema$c(),\n      partFields: parts$1(),\n      factory: make$1\n    });\n\n    var transpose = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return readOptFrom$1(byMenu, finish).bind(function (triggerItem) {\n        return readOptFrom$1(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Option.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$5 = function (menus, expansions) {\n      var items = {};\n      each$1(menus, function (menuItems, menu) {\n        each(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose(expansions);\n      var menuPaths = map$1(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$1(items, function (menu) {\n        return readOptFrom$1(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$3 = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = Cell(Option.none());\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.set(Option.none());\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign({}, menus.get(), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(Option.some(sPrimary));\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$5(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var expand = function (itemValue) {\n        return readOptFrom$1(expansions.get(), itemValue).map(function (menu) {\n          var current = readOptFrom$1(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return readOptFrom$1(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Option.some(path.slice(1)) : Option.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return readOptFrom$1(paths.get(), itemValue);\n      };\n      var lookupMenu = function (menuValue) {\n        return readOptFrom$1(menus.get(), menuValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(function (primaryName) {\n          return lookupMenu(primaryName).bind(function (prep) {\n            return prep.type === 'prepared' ? Option.some(prep.menu) : Option.none();\n          });\n        });\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear\n      };\n    };\n    var LayeredState = { init: init$3 };\n\n    var make$2 = function (detail, rawUiSpec) {\n      var submenuParentItems = Cell(Option.none());\n      var buildMenus = function (container, primaryName, menus) {\n        return map$1(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign({ dom: spec.dom }, spec, {\n              value: name,\n              items: spec.items,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var toDirectory = function (container) {\n        return map$1(detail.data.menus, function (data, menuName) {\n          return bind(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element(), focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Option.some(prep.menu) : Option.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each(others, function (o) {\n          remove$5(o.element(), [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element(), '.' + detail.markers.item);\n          var parentItems = filter(items, function (i) {\n            return get$2(i, 'aria-haspopup') === 'true';\n          });\n          each(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(Option.some(r));\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each$1(parentItems, function (v, k) {\n          var expanded = contains(path, k);\n          set$1(v.element(), 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Option.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Option.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each(rest, function (r) {\n                add$2(r.element(), detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element())) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              remove$5(activeMenu.element(), [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Option.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        var value = getItemValue(item);\n        return layeredState.expand(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return Option.from(path[0]).bind(function (menuName) {\n            return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n              var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element())) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu);\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Option.some(item);\n              }\n            });\n          });\n        });\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element()) ? Option.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element()) ? Option.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$3(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOption().bind(function (item) {\n              return f(container, item).map(function () {\n                return true;\n              });\n            });\n          });\n        };\n      };\n      var events = derive([\n        run(focus$4(), function (sandbox, simulatedEvent) {\n          var menu = simulatedEvent.event().menu();\n          Highlighting.highlight(sandbox, menu);\n          var value = getItemValue(simulatedEvent.event().item());\n          layeredState.refresh(value).each(function (path) {\n            return closeOthers(sandbox, layeredState, path);\n          });\n        }),\n        runOnExecute(function (component, simulatedEvent) {\n          var target = simulatedEvent.event().target();\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, function () {\n            });\n          });\n        }),\n        runOnAttached(function (container, simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade$1(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event().item();\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var collapseMenuApi = function (container) {\n        Highlighting.getHighlighted(container).each(function (currentMenu) {\n          Highlighting.getHighlighted(currentMenu).each(function (currentItem) {\n            collapseLeft(container, currentItem);\n          });\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element(), focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem = constant('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem$1 = function (text) {\n      return {\n        value: generate$1(collapseItem()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single$2({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onCollapseMenu'),\n        defaulted$1('highlightImmediately', true),\n        strictObjOf('data', [\n          strict$1('primary'),\n          strict$1('menus'),\n          strict$1('expansions')\n        ]),\n        defaulted$1('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        strict$1('dom'),\n        defaulted$1('navigateOnHover', true),\n        defaulted$1('stayInDom', false),\n        field$1('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted$1('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        }\n      },\n      factory: make$2,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem$1\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, anchor, menuSpec) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Option.some(true);\n        },\n        onExecute: function () {\n          return Option.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.position(lazySink().getOrDie(), anchor, menu);\n        },\n        onOpenSubmenu: function (tmenu, item, submenu) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, {\n            anchor: 'submenu',\n            item: item\n          }, submenu);\n        }\n      });\n    };\n    var factory = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.open(sandbox, thing);\n      };\n      var showAt = function (sandbox, anchor, thing) {\n        var getBounds = Option.none();\n        showWithin(sandbox, anchor, thing, getBounds);\n      };\n      var showWithin = function (sandbox, anchor, thing, boxElement) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithin(sink, anchor, sandbox, boxElement);\n        });\n        detail.onShow(sandbox);\n      };\n      var showWithinBounds = function (sandbox, anchor, thing, bounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, anchor, sandbox, bounds);\n        });\n        detail.onShow(sandbox);\n      };\n      var showMenuAt = function (sandbox, anchor, menuSpec) {\n        var menu = makeMenu(detail, sandbox, anchor, menuSpec);\n        Sandboxing.open(sandbox, menu);\n        detail.onShow(sandbox);\n      };\n      var hide = function (sandbox) {\n        Sandboxing.close(sandbox);\n        detail.onHide(sandbox);\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        hide: hide,\n        getContent: getContent,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            }\n          }),\n          receivingConfig(__assign({ isExtraPart: constant(false) }, detail.fireDismissalEventInstead.map(function (fe) {\n            return { fireEventInstead: { event: fe.event } };\n          }).getOr({})))\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single$2({\n      name: 'InlineView',\n      configFields: [\n        strict$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field$1('inlineBehaviours', [\n          Sandboxing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n        defaulted$1('getRelated', Option.none),\n        defaulted$1('eventOrder', Option.none)\n      ],\n      factory: factory,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        }\n      }\n    });\n\n    var events$7 = function (optAction) {\n      var executeHandler = function (action) {\n        return run(execute(), function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      var onMousedown = function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      };\n      var pointerEvents = PlatformDetection$1.detect().deviceType.isTouch() ? [run(tap(), onClick)] : [\n        run(click(), onClick),\n        run(mousedown(), onMousedown)\n      ];\n      return derive(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents\n      ]));\n    };\n\n    var factory$1 = function (detail) {\n      var events = events$7(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return readOptFrom$1(detail.dom, 'attributes').bind(function (attrs) {\n          return readOptFrom$1(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single$2({\n      name: 'Button',\n      factory: factory$1,\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('dom'),\n        defaulted$1('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasKey$1(spec, 'uid') ? spec.uid : generate$2('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).fold(Option.none, Option.some);\n      };\n      var asSpec = function () {\n        return __assign({}, spec, { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var defaultIcon = function (icons) {\n      return Option.from(icons()['temporary-placeholder']).getOr('!not found!');\n    };\n    var get$c = function (name, icons) {\n      return Option.from(icons()[name]).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getOr = function (name, icons, fallback) {\n      return Option.from(icons()[name]).or(fallback).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getFirst$1 = function (names, icons) {\n      return findMap(names, function (name) {\n        return Option.from(icons()[name]);\n      }).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$2 = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Option.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon'],\n              innerHtml: getFirst$1(iconChoices, detail.iconProvider)\n            }\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body']\n            },\n            components: [memBannerText.asSpec()],\n            behaviours: derive$1([Replacing.config({})])\n          }\n        ].concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(Button.sketch({\n          dom: {\n            tag: 'button',\n            classes: [\n              'tox-notification__dismiss',\n              'tox-button',\n              'tox-button--naked',\n              'tox-button--icon'\n            ]\n          },\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-icon'],\n                innerHtml: get$c('close', detail.iconProvider),\n                attributes: { 'aria-label': detail.translationProvider('Close') }\n              }\n            }],\n          action: function (comp) {\n            detail.onAction(comp);\n          }\n        })),\n        apis: apis\n      };\n    };\n    var Notification = single$2({\n      name: 'Notification',\n      factory: factory$2,\n      configFields: [\n        option('level'),\n        strict$1('progress'),\n        strict$1('icon'),\n        strict$1('onAction'),\n        strict$1('text'),\n        strict$1('iconProvider'),\n        strict$1('translationProvider')\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var backstage = extras.backstage;\n      var getEditorContainer = function (editor) {\n        return editor.inline ? editor.getElement() : editor.getContentAreaContainer();\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          var firstItem = notifications.slice(0, 1)[0];\n          var container = getEditorContainer(editor);\n          firstItem.moveRel(container, 'tc-tc');\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (settings, closeCallback) {\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains([\n            'success',\n            'error',\n            'warning',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Option.from(settings.icon),\n          onAction: close,\n          iconProvider: backstage.shared.providers.icons,\n          translationProvider: backstage.shared.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: extras.backstage.shared.getSink,\n          fireDismissalEventInstead: {}\n        }));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$2.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, {\n              anchor: 'makeshift',\n              x: x,\n              y: y\n            }, premade$1(notification));\n          },\n          moveRel: function (element, rel) {\n            InlineView.showAt(notificationWrapper, extras.backstage.shared.anchors.banner(), premade$1(notification));\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var isText$1 = function (node) {\n      return node.nodeType === domGlobals.Node.TEXT_NODE;\n    };\n    var outcome$1 = Adt.generate([\n      { aborted: [] },\n      { edge: ['element'] },\n      { success: ['info'] }\n    ]);\n    var phase = Adt.generate([\n      { abort: [] },\n      { kontinue: [] },\n      { finish: ['info'] }\n    ]);\n    var repeat = function (dom, node, offset, process, walker, recent) {\n      var terminate = function () {\n        return recent.fold(outcome$1.aborted, outcome$1.edge);\n      };\n      var recurse = function () {\n        var next = walker();\n        if (next) {\n          return repeat(dom, next, Option.none(), process, walker, Option.some(node));\n        } else {\n          return terminate();\n        }\n      };\n      if (dom.isBlock(node)) {\n        return terminate();\n      } else if (!isText$1(node)) {\n        return recurse();\n      } else {\n        var text = node.textContent;\n        return process(phase, node, text, offset).fold(outcome$1.aborted, function () {\n          return recurse();\n        }, outcome$1.success);\n      }\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var walker = new global$3(node, rootNode || dom.getRoot());\n      return repeat(dom, node, Option.some(offset), process, walker.prev, Option.none());\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect$4(Element.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = Element.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append(wrapper, Element.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom());\n        parent(wrapper).each(function (elm) {\n          return elm.dom().normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom(), getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect$4 = function (elm) {\n      return closest$3(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var whiteSpace = /[\\u00a0 \\t\\r\\n]/;\n    var parse = function (text, index, ch, minChars) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (whiteSpace.test(char)) {\n          return Option.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      if (i === -1 || index - i < minChars) {\n        return Option.none();\n      }\n      return Option.some(text.substring(i + 1, index));\n    };\n    var getText = function (rng, ch) {\n      var text = rng.toString().substring(ch.length);\n      return text.replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Option.none();\n      }\n      var findTriggerCh = function (phase, element, text, optOffset) {\n        var index = optOffset.getOr(text.length);\n        return parse(text, index, ch, 1).fold(function () {\n          return text.match(whiteSpace) ? phase.abort() : phase.kontinue();\n        }, function (newText) {\n          var range = initRange.cloneRange();\n          range.setStart(element, index - newText.length - 1);\n          range.setEnd(initRange.endContainer, initRange.endOffset);\n          return text.length < minChars ? phase.abort() : phase.finish({\n            text: getText(range, ch),\n            range: range,\n            triggerChar: ch\n          });\n        });\n      };\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerCh).fold(Option.none, Option.none, Option.some);\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect$4(Element.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom());\n        return Option.some({\n          range: range,\n          text: getText(range, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && detect$4(Element.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point$2 = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n\n    var isText$2 = function (node) {\n      return node.nodeType === domGlobals.Node.TEXT_NODE;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === domGlobals.Node.ELEMENT_NODE;\n    };\n    var toLast = function (node) {\n      if (isText$2(node)) {\n        return point$2(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point$2(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point$2(node, offset);\n      }\n    };\n\n    var isStartOfWord = function (dom) {\n      var process = function (phase, element, text, optOffset) {\n        var index = optOffset.getOr(text.length);\n        return index === 0 ? phase.kontinue() : phase.finish(/\\s/.test(text.charAt(index - 1)));\n      };\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return repeatLeft(dom, leaf.element, leaf.offset, process).fold(constant(true), constant(true), identity);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Option.none();\n      }\n      var lookupData = global$4.all(map(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction\n          };\n        });\n      }));\n      return Option.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      state$1('type', function () {\n        return 'autocompleteitem';\n      }),\n      state$1('active', function () {\n        return false;\n      }),\n      state$1('disabled', function () {\n        return false;\n      }),\n      defaulted$1('meta', {}),\n      strictString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      strictString('type'),\n      strictString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted$1('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      strictFunction('fetch'),\n      strictFunction('onAction')\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$1(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, function (x) {\n          return x;\n        });\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field('value', 'value', defaultedThunk(function () {\n        return generate$1('menuitem-value');\n      }), anyValue$1()),\n      defaulted$1('meta', {})\n    ];\n\n    var menuItemSchema = objOf([\n      strictString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      strictString('type'),\n      strictFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      strictFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var fancyTypes = [\n      'inserttable',\n      'colorswatch'\n    ];\n    var fancyMenuItemSchema = objOf([\n      strictString('type'),\n      strictStringEnum('fancytype', fancyTypes),\n      defaultedFunction('onAction', noop)\n    ]);\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element(), '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex(descendants$1, function (c) {\n          var thisTop = c.dom().getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom().getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Option.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Option.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$1('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var TooltippingSchema = [\n      strict$1('lazySink'),\n      strict$1('tooltipDom'),\n      defaulted$1('exclusive', true),\n      defaulted$1('tooltipComponents', []),\n      defaulted$1('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted$1('anchor', function (comp) {\n        return {\n          anchor: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ]),\n            onRtl: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$4 = function () {\n      var timer = Cell(Option.none());\n      var popup = Cell(Option.none());\n      var getTooltip = function () {\n        return popup.get();\n      };\n      var setTooltip = function (s) {\n        popup.set(Option.some(s));\n      };\n      var clearTooltip = function () {\n        popup.set(Option.none());\n      };\n      var clearTimer = function () {\n        timer.get().each(function (t) {\n          domGlobals.clearTimeout(t);\n        });\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(Option.some(domGlobals.setTimeout(function () {\n          f();\n        }, delay)));\n      };\n      var isShowing = function () {\n        return popup.get().isSome();\n      };\n      var readState = constant('not-implemented');\n      return nu$5({\n        getTooltip: getTooltip,\n        isShowing: isShowing,\n        setTooltip: setTooltip,\n        clearTooltip: clearTooltip,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        init: init$4\n    });\n\n    var ExclusivityChannel = generate$1('tooltip.exclusive');\n    var ShowTooltipEvent = generate$1('tooltip.show');\n    var HideTooltipEvent = generate$1('tooltip.hide');\n\n    var hideAllExclusive = function (component, tConfig, tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$8 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive(tooltipConfig.mode === 'normal' ? [\n              run(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, tooltipConfig.anchor(comp), popup);\n        }\n      };\n      return derive(flatten([\n        [\n          run(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(receive(), function (comp, message) {\n            var receivingData = message;\n            if (contains(receivingData.channels(), ExclusivityChannel)) {\n              hide(comp);\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run(highlight(), function (comp, se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(dehighlight(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        events: events$8\n    });\n\n    var Tooltipping = create$1({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom().attributes !== undefined ? elem.dom().attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign({}, b, (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom().classList, 0);\n    };\n    var fromHtml$2 = function (html) {\n      var elem = Element.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$1(elem) };\n      return __assign({\n        tag: name(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var iconClassRtl = 'tox-collection__item-icon-rtl';\n    var classForPreset = function (presets) {\n      return readOptFrom$1(presetClasses, presets).getOr(navClass);\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$6.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has(replace, search) ? replace[search] : segment;\n      });\n      return global$6.mac ? updated.join('') : updated.join('+');\n    };\n    var ConvertShortcut = { convertText: convertText };\n\n    var renderIcon = function (iconHtml) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [iconClass],\n          innerHtml: iconHtml\n        }\n      };\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$5.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass],\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              attributes: { style: style.styleAttr }\n            },\n            components: [text(global$5.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: ConvertShortcut.convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            iconClass,\n            checkmarkClass\n          ],\n          innerHtml: get$c('checkmark', icons)\n        }\n      };\n    };\n    var renderSubmenuCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$c('chevron-right', icons)\n        }\n      };\n    };\n\n    var renderColorStructure = function (itemText, itemValue, iconSvg, providerBackstage) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var title = itemText.map(function (text) {\n          return ' title=\"' + providerBackstage.translate(text) + '\"';\n        }).getOr('');\n        if (itemValue === colorPickerCommand) {\n          return fromHtml$2('<button class=\"' + common + ' tox-swatches__picker-btn\"' + title + '>' + icon + '</button>');\n        } else if (itemValue === removeColorCommand) {\n          return fromHtml$2('<div class=\"' + common + ' tox-swatch--remove\"' + title + '>' + icon + '</div>');\n        } else {\n          return fromHtml$2('<div class=\"' + common + '\" style=\"background-color: ' + itemValue + '\" data-mce-color=\"' + itemValue + '\"' + title + '></div>');\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderNormalItemStructure = function (info, icon, renderIcons, textRender, rtlClass) {\n      var leftIcon = renderIcons ? info.checkMark.orThunk(function () {\n        return icon.or(Option.some('')).map(renderIcon);\n      }) : Option.none();\n      var domTitle = info.ariaLabel.map(function (label) {\n        return { attributes: { title: global$5.translate(label) } };\n      }).getOr({});\n      var dom = merge({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ].concat(rtlClass ? [iconClassRtl] : [])\n      }, domTitle);\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Option.some(renderHtml(html));\n      });\n      var menuItem = {\n        dom: dom,\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var rtlIcon = [\n      'list-num-default',\n      'list-num-lower-alpha',\n      'list-num-lower-greek',\n      'list-num-lower-roman',\n      'list-num-upper-alpha',\n      'list-num-upper-roman'\n    ];\n    var rtlTransform = [\n      'list-bull-circle',\n      'list-bull-default',\n      'list-bull-square'\n    ];\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Option.none();\n      }\n      var getIconName = function (iconName) {\n        return iconName.map(function (name) {\n          return global$5.isRtl() && contains(rtlIcon, name) ? name + '-rtl' : name;\n        });\n      };\n      var needRtlClass = global$5.isRtl() && info.iconContent.exists(function (name) {\n        return contains(rtlTransform, name);\n      });\n      var icon = getIconName(info.iconContent).map(function (iconName) {\n        return getOr(iconName, providersBackstage.icons, fallbackIcon);\n      });\n      var textRender = Option.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      if (info.presets === 'color') {\n        return renderColorStructure(info.ariaLabel, info.value, icon, providersBackstage);\n      } else {\n        return renderNormalItemStructure(info, icon, renderIcons, textRender, needRtlClass);\n      }\n    };\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$5 = function (component, disableConfig, disableState) {\n      if (disableConfig.disabled) {\n        disable(component, disableConfig);\n      }\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains(nativeDisabled, name(component.element()));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element(), 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$1(component.element(), 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$1(component.element(), 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$2(component.element(), 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$1(component.element(), 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$1(component.element(), 'aria-disabled', 'false');\n    };\n    var disable = function (component, disableConfig, disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element(), disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable = function (component, disableConfig, disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$4(component.element(), disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$7 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable : enable;\n      f(component, disableConfig, disableState);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$5,\n        set: set$7\n    });\n\n    var exhibit$3 = function (base, disableConfig, disableState) {\n      return nu$6({ classes: disableConfig.disabled ? disableConfig.disableClass.map(pure).getOr([]) : [] });\n    };\n    var events$9 = function (disableConfig, disableState) {\n      return derive([\n        abort(execute(), function (component, simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$5)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$3,\n        events: events$9\n    });\n\n    var DisableSchema = [\n      defaulted$1('disabled', false),\n      defaulted$1('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$1({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (onDestroy !== null && onDestroy !== undefined) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = {\n      'alloy.execute': [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'item-events'\n      ]\n    };\n\n    var componentRenderPipeline = function (xs) {\n      return bind(xs, function (o) {\n        return o.toArray();\n      });\n    };\n    var renderCommonItem = function (spec, structure, itemResponse) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(spec.disabled),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: merge({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                anchor: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external({ element: Element.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var escapeRegExp = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n    var encodeText = function (text) {\n      return global$7.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$5.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escapeRegExp(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Option.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Option.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Option.none(),\n        checkMark: Option.none(),\n        caret: Option.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: function () {\n          return {};\n        },\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: function () {\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage) {\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Option.none(),\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Option.none(),\n        checkMark: useText ? Option.some(renderCheckmark(providersBackstage.icons)) : Option.none(),\n        caret: Option.none(),\n        value: spec.value\n      }, providersBackstage, true);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$2 = constant(generate$4(owner$2(), parts()));\n\n    var cellOverEvent = generate$1('cell-over');\n    var cellExecuteEvent = generate$1('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run(mouseover(), Focusing.focus),\n            run(execute(), emitExecute),\n            run(tapOrClick(), emitExecute)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind(cells, function (cellRow) {\n        return map(cellRow, premade$1);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 1 + 'x' + (row + 1));\n    };\n    function renderInsertTableMenuItem(spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$1('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [text('0x0')],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2().widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var row = e.event().row();\n                  var col = e.event().col();\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row, col)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  spec.onAction({\n                    numRows: e.event().row() + 1,\n                    numColumns: e.event().col() + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    }\n\n    var hexColour = function (hexString) {\n      return { value: constant(hexString) };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value().replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: constant(hexString) };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value());\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red()) + toHex(rgbaColour.green()) + toHex(rgbaColour.blue());\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: constant(red),\n        green: constant(green),\n        blue: constant(blue),\n        alpha: constant(alpha)\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue() || 0) % 360;\n      var saturation = hsv.saturation() / 100;\n      var brightness = hsv.value() / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round(255 * (r + match));\n      g = round(255 * (g + match));\n      b = round(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Option.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Option.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Option.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Option.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red() + ',' + rgba.green() + ',' + rgba.blue() + ',' + rgba.alpha() + ')';\n    };\n    var redColour = constant(rgbaColour(255, 0, 0, 1));\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$8.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$8.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      var canvas = domGlobals.document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      var ctx = canvas.getContext('2d');\n      var byteAsHex = function (colorByte, alphaByte) {\n        var bg = 255;\n        var alpha = alphaByte / 255;\n        var colorByteWithWhiteBg = Math.round(colorByte * alpha + bg * (1 - alpha));\n        return ('0' + colorByteWithWhiteBg.toString(16)).slice(-2).toUpperCase();\n      };\n      var asHexColor = function (color) {\n        if (/^[0-9A-Fa-f]{6}$/.test(color)) {\n          return '#' + color.toUpperCase();\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        var rgba = ctx.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0], g = rgba[1], b = rgba[2], a = rgba[3];\n        return '#' + byteAsHex(r, a) + byteAsHex(g, a) + byteAsHex(b, a);\n      };\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: asHexColor(colorMap[i]),\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n    var Settings = {\n      mapColors: mapColors,\n      getColorCols: getColorCols,\n      hasCustomColors: hasCustomColors,\n      getColorMap: getColorMap,\n      getColors: getColors,\n      getCurrentColors: getCurrentColors,\n      addColor: addColor\n    };\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireBeforeRenderUI = function (editor) {\n      return editor.fire('BeforeRenderUI');\n    };\n    var fireResizeContent = function (editor) {\n      return editor.fire('ResizeContent');\n    };\n    var fireTextColorChange = function (editor, data) {\n      editor.fire('TextColorChange', data);\n    };\n    var Events = {\n      fireSkinLoaded: fireSkinLoaded,\n      fireResizeEditor: fireResizeEditor,\n      fireBeforeRenderUI: fireBeforeRenderUI,\n      fireResizeContent: fireResizeContent,\n      fireTextColorChange: fireTextColorChange\n    };\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = Settings.getColors(editor);\n      var defaultCols = calcCols(colors.length);\n      return Settings.getColorCols(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            Settings.addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, '#000000');\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getMenuColors = function (colors, hasCustom) {\n      return colors.concat(Settings.getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getMenuColors(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var setIconFillAndStroke = function (pathId, color) {\n        splitButtonApi.setIconFill(pathId, color);\n        splitButtonApi.setIconStroke(pathId, color);\n      };\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      setIconFillAndStroke(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = Option.from(getCurrentColor(editor, format));\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value();\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch(Settings.getColors(editor), Settings.hasCustomColors(editor)),\n        onAction: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            applyColor(editor, format, lastColor.get(), function () {\n            });\n          }\n        },\n        onItemAction: function (splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            Events.fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            setIconColor(splitButtonApi, name, lastColor.get());\n          }\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var getOnSubmit = function (callback) {\n          return function (api) {\n            var data = api.getData();\n            callback(Option.from(data.colorpicker));\n            api.close();\n          };\n        };\n        var onAction = function (api, details) {\n          if (details.name === 'hex-valid') {\n            if (details.value) {\n              api.enable('ok');\n            } else {\n              api.disable('ok');\n            }\n          }\n        };\n        var initialData = { colorpicker: value };\n        var submit = getOnSubmit(callback);\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: submit,\n          onClose: function () {\n          },\n          onCancel: function () {\n            callback(Option.none());\n          }\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(null);\n      var lastBackColor = Cell(null);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n    var ColorSwatch = {\n      register: register$1,\n      getColors: getMenuColors,\n      getFetch: getFetch,\n      colorPickerDialog: colorPickerDialog,\n      getCurrentColor: getCurrentColor,\n      getColorCols: getColorCols$1,\n      calcCols: calcCols\n    };\n\n    var chunk$1 = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk(items, numColumns);\n        return map(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts().items({\n                preprocess: columns !== 'auto' ? chunk$1({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts().items({\n            preprocess: chunk$1({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts().items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk$1({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers$1 = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components$1 = [Menu.parts().items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers$1(presets)\n      };\n    };\n\n    var hasIcon = function (item) {\n      return item.icon !== undefined || item.type === 'togglemenuitem' || item.type === 'choicemenuitem';\n    };\n    var menuHasIcons = function (xs) {\n      return exists(xs, hasIcon);\n    };\n    var handleError = function (error) {\n      domGlobals.console.error(formatError(error));\n      domGlobals.console.log(error);\n      return Option.none();\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components$1,\n        items: items\n      };\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Option.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage));\n          });\n        } else {\n          return Option.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers$1(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    function renderColorSwatchItem(spec, backstage) {\n      var items = ColorSwatch.getColors(backstage.colorinput.getColors(), backstage.colorinput.hasCustomColors());\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n        return false;\n      }, backstage.shared.providers);\n      var widgetSpec = deepMerge(__assign({}, menuSpec, {\n        markers: markers$1(presets),\n        movement: deriveMenuMovement(columns, presets)\n      }));\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2().widget(Menu.sketch(widgetSpec))]\n      };\n    }\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var valueOpt = function (obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key) ? Option.some(obj[key]) : Option.none();\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return valueOpt(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        caret: Option.none(),\n        checkMark: Option.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse);\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var caret = renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        caret: Option.some(caret),\n        checkMark: Option.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage) {\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: Option.none(),\n        textContent: spec.text,\n        htmlContent: Option.none(),\n        ariaLabel: spec.text,\n        checkMark: Option.some(renderCheckmark(providersBackstage.icons)),\n        caret: Option.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, true);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var hasIcon$1 = function (item) {\n      return item.icon !== undefined || item.type === 'togglemenuitem' || item.type === 'choicemenuitem';\n    };\n    var menuHasIcons$1 = function (xs) {\n      return exists(xs, hasIcon$1);\n    };\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons) {\n      if (menuHasIcons === void 0) {\n        menuHasIcons = true;\n      }\n      var providersBackstage = backstage.shared.providers;\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Option.some(normal(d, itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Option.some(nested(d, itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Option.some(toggle$1(d, itemResponse, providersBackstage));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Option.some(separator(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(d, backstage);\n        });\n      default: {\n          domGlobals.console.error('Unknown item in general menu', item);\n          return Option.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons$1(items);\n      return cat(map(items, function (item) {\n        if (item.type === 'separator') {\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Option.some(separator(d));\n          });\n        } else {\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Option.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage) {\n      var hasIcons = menuHasIcons$1(items);\n      var alloyItems = cat(map(items, function (item) {\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, hasIcons);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(merge(item, { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers$1(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$2 = function (editor, sharedBackstage) {\n      var activeAutocompleter = Cell(Option.none());\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect$4(lastElement.getOr(Element.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.set(Option.none());\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Option.from(m.columns);\n        }).getOr(1);\n        return bind(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return domGlobals.console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: cancelIfNecessary,\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set(Option.some({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          }));\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Option.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, {\n          anchor: 'node',\n          root: Element.fromDom(editor.getBody()),\n          node: Option.from(ac.element)\n        }, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')));\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last$2(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n    };\n    var Autocompleter = { register: register$2 };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: constant(target),\n        x: constant(x),\n        y: constant(y),\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: constant(raw)\n      };\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (!filter(rawEvent)) {\n          return;\n        }\n        var target = Element.fromDom(rawEvent.target);\n        var stop = function () {\n          rawEvent.stopPropagation();\n        };\n        var prevent = function () {\n          rawEvent.preventDefault();\n        };\n        var kill = compose(prevent, stop);\n        var evt = mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n        handler(evt);\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = constant(true);\n    var bind$3 = function (element, event, handler) {\n      return bind$2(element, event, filter$1, handler);\n    };\n    var capture$1 = function (element, event, handler) {\n      return capture(element, event, filter$1, handler);\n    };\n\n    var closest$4 = function (scope, selector, isRoot) {\n      return closest$3(scope, selector, isRoot).isSome();\n    };\n\n    function DelayedFunction (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = domGlobals.setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          domGlobals.clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    }\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw();\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Option.none();\n      }\n      return Option.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x());\n      var distY = Math.abs(touch.clientY - data.y());\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = Cell(Option.none());\n      var longpress$1 = DelayedFunction(function (event) {\n        startData.set(Option.none());\n        settings.triggerEvent(longpress(), event);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: constant(touch.clientX),\n            y: constant(touch.clientY),\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          startData.set(Option.some(data));\n        });\n        return Option.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Option.none());\n            }\n          });\n        });\n        return Option.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq(data.target(), event.target());\n        };\n        return startData.get().filter(isSame).map(function (data) {\n          return settings.triggerEvent(tap(), event);\n        });\n      };\n      var handlers = wrapAll$1([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return readOptFrom$1(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw();\n      return keyEv.which === BACKSPACE()[0] && !contains([\n        'input',\n        'textarea'\n      ], name(event.target())) && !closest$4(event.target(), '[contenteditable=\"true\"]');\n    };\n    var isFirefox = PlatformDetection$1.detect().browser.isFirefox();\n    var settingsSchema = objOfOnly([\n      strictFunction('triggerEvent'),\n      defaulted$1('stopBackspace', true)\n    ]);\n    var bindFocus = function (container, handler) {\n      if (isFirefox) {\n        return capture$1(container, 'focus', handler);\n      } else {\n        return bind$3(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox) {\n        return capture$1(container, 'blur', handler);\n      } else {\n        return bind$3(container, 'focusout', handler);\n      }\n    };\n    var setup$1 = function (container, rawSettings) {\n      var settings = asRawOrDie('Getting GUI events settings', settingsSchema, rawSettings);\n      var pointerEvents = PlatformDetection$1.detect().deviceType.isTouch() ? [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'gesturestart'\n      ] : [\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind$3(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = Cell(Option.none());\n      var onPaste = bind$3(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(Option.some(domGlobals.setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0)));\n      });\n      var onKeydown = bind$3(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace === true && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = Cell(Option.none());\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(Option.some(domGlobals.setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0)));\n      });\n      var unbind = function () {\n        each(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.get().each(domGlobals.clearTimeout);\n        focusoutTimeout.get().each(domGlobals.clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive$2 = function (rawEvent, rawTarget) {\n      var source = readOptFrom$1(rawEvent, 'target').map(function (getTarget) {\n        return getTarget();\n      }).getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: constant(event),\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: constant(false),\n        event: constant(event),\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$b = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$b.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler();\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element(), descHandler.purpose());\n          return adt$b.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element(), descHandler.purpose());\n          return adt$b.complete();\n        } else {\n          return parent(handlerInfo.element()).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element(), descHandler.purpose());\n            return adt$b.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element(), descHandler.purpose());\n            return adt$b.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(function () {\n        return true;\n      }, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, function () {\n        return false;\n      });\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive$2(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each(listeners, function (listener) {\n        var descHandler = listener.descHandler();\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      var rawTarget = rawEvent.target();\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive$2(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = Immutable('element', 'descHandler');\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: constant(id),\n        descHandler: constant(handler)\n      };\n    };\n    function EventRegistry () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each$1(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).fold(function () {\n          return Option.none();\n        }, function (id) {\n          var reader = readOpt$1(id);\n          return handlers.bind(reader).map(function (descHandler) {\n            return eventHandler(elem, descHandler);\n          });\n        });\n      };\n      var filterByType = function (type) {\n        return readOptFrom$1(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        var readType = readOpt$1(type);\n        var handlers = readType(registry);\n        return closest$1(target, function (elem) {\n          return findHandler(handlers, elem);\n        }, isAboveRoot);\n      };\n      var unregisterId = function (id) {\n        each$1(registry, function (handlersById, eventName) {\n          if (handlersById.hasOwnProperty(id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    }\n\n    function Registry () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element();\n        return read$1(elem).fold(function () {\n          return write('uid-', component.element());\n        }, function (uid) {\n          return uid;\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element()) + '\\nCannot use it for: ' + element(component.element()) + '\\n' + 'The conflicting element is' + (inBody(conflict.element()) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasKey$1(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events());\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element()).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return readOpt$1(id)(components);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    }\n\n    var factory$3 = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$b(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single$2({\n      name: 'Container',\n      factory: factory$3,\n      configFields: [\n        defaulted$1('components', []),\n        field$1('containerBehaviours', []),\n        defaulted$1('events', {}),\n        defaulted$1('domModification', {}),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element()).fold(function () {\n          return true;\n        }, function (parent) {\n          return eq(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$1(root.element(), {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target(), function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$1(target);\n          }, function (_alloyId) {\n            monitorEvent(focus(), target, function (logger) {\n              triggerHandler(lookup, focus(), {\n                originator: constant(originator),\n                kill: noop,\n                prevent: noop,\n                target: constant(target)\n              }, target, logger);\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element(), simulatedEvent.event());\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove$1(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: constant(true)\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText(component.element())) {\n          registry.register(component);\n          each(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element(), { target: constant(component.element()) });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText(component.element())) {\n          each(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach(root, component);\n      };\n      var remove$1 = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove(root.element());\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each(receivers, function (receiver) {\n          var descHandler = receiver.descHandler();\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: constant(true),\n          data: constant(message)\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: constant(false),\n          channels: constant(channels),\n          data: constant(message)\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: constant(root),\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove$1,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var settings = editor.settings;\n      var skin = settings.skin;\n      var skinUrl = settings.skin_url;\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$9.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Option.from(editor.settings.min_width).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Option.from(editor.settings.min_height).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Option.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Option.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Option.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var keys$1 = keys(editor.settings);\n      var toolbarKeys = filter(keys$1, function (key) {\n        return /^toolbar([1-9])$/.test(key);\n      });\n      var toolbars = map(toolbarKeys, function (key) {\n        return editor.getParam(key, false, 'string');\n      });\n      var toolbarArray = filter(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Option.some(toolbarArray) : Option.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, function () {\n        return true;\n      });\n    };\n    var ToolbarDrawer;\n    (function (ToolbarDrawer) {\n      ToolbarDrawer['default'] = '';\n      ToolbarDrawer['floating'] = 'floating';\n      ToolbarDrawer['sliding'] = 'sliding';\n    }(ToolbarDrawer || (ToolbarDrawer = {})));\n    var getToolbarDrawer = function (editor) {\n      return editor.getParam('toolbar_drawer', '', 'string');\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var fixedContainerElement = function (editor) {\n      var selector = fixedContainerSelector(editor);\n      var isInline = editor.getParam('inline', false, 'boolean');\n      return selector.length > 0 && isInline ? descendant$1(body(), selector) : Option.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.getParam('inline', false, 'boolean') && fixedContainerElement(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerElement(editor);\n      return fixedContainer.getOr(body());\n    };\n    var isDraggableModal = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n\n    var formChangeEvent = generate$1('form-component-change');\n    var formCloseEvent = generate$1('form-close');\n    var formCancelEvent = generate$1('form-cancel');\n    var formActionEvent = generate$1('form-action');\n    var formSubmitEvent = generate$1('form-submit');\n    var formBlockEvent = generate$1('form-block');\n    var formUnblockEvent = generate$1('form-unblock');\n    var formTabChangeEvent = generate$1('form-tabchange');\n    var formResizeEvent = generate$1('form-resize');\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$c(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                }\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var schema$d = constant([\n      defaulted$1('prefix', 'form-field'),\n      field$1('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$3 = constant([\n      optional({\n        schema: [strict$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude$1(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [strict$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, spec, externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive([runOnAttached(function (component, simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$1(detail.prefix);\n            ps.label().each(function (label) {\n              set$1(label.element(), 'for', id);\n              set$1(field.element(), 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$1(detail.prefix);\n              set$1(descriptor.element(), 'id', descriptorId);\n              set$1(field.element(), 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite$1({\n      name: 'FormField',\n      configFields: schema$d(),\n      partFields: parts$3(),\n      factory: factory$4,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [strictOf('others', setOf$1(Result.value, anyValue$1()))];\n\n    var init$5 = function (spec) {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return readOptFrom$1(coupled, name).getOrThunk(function () {\n            var builder = readOptFrom$1(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        init: init$5\n    });\n\n    var Coupling = create$1({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var events$a = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive([\n        run(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        events: events$a\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$5({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$6 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        throttle: throttle,\n        init: init$6\n    });\n\n    var setup$2 = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last$2(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      strictOf('stream', choose$1('mode', {\n        throttle: [\n          strict$1('delay'),\n          defaulted$1('stopEvent', true),\n          output('streams', {\n            setup: setup$2,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted$1('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$1({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu$a = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$a(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure$1 = function (a) {\n      return nu$a(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$a,\n      pure: pure$1\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$3 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$3(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$3(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$3(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$3(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$b = function (baseFn) {\n      return make$3(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$2 = function (a) {\n      return make$3(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$b,\n      pure: pure$2\n    };\n\n    var suffix = constant('sink');\n    var partType = constant(optional({\n      name: suffix(),\n      overrides: constant({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: true })]),\n        events: derive([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var anchor = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Option.from(tieredMenu.sketch(__assign({}, externals.menu(), {\n            uid: generate$2(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, menu);\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, {\n                anchor: 'submenu',\n                item: item\n              }, submenu);\n              Sandboxing.decloak(sandbox);\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Option.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open$1 = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close$1 = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close$1 : open$1;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$7(hotspot.element());\n      if (useMinWidth) {\n        set$2(menu.element(), 'min-width', buttonWidth + 'px');\n      } else {\n        set$4(menu.element(), buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var makeSandbox = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element());\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element());\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id(),\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          receivingConfig({ isExtraPart: constant(false) })\n        ])\n      };\n    };\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element();\n      var value = get$5(el);\n      var node = el.dom();\n      if (get$2(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Option.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Option.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Option.none();\n      }\n    };\n\n    var schema$e = constant([\n      option('data'),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('tag', 'input'),\n      defaulted$1('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted$1('styles', {}),\n      defaulted$1('eventOrder', {}),\n      field$1('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted$1('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: detail.selectOnFocus === false ? noop : function (component) {\n            var input = component.element();\n            var value = get$5(input);\n            input.dom().setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign({}, focusBehaviours(detail), augment(detail.inputBehaviours, [Representing.config({\n          store: {\n            mode: 'manual',\n            initialValue: detail.data.getOr(undefined),\n            getValue: function (input) {\n              return get$5(input.element());\n            },\n            setValue: function (input, data) {\n              var current = get$5(input.element());\n              if (current !== data) {\n                set$3(input.element(), data);\n              }\n            }\n          },\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom$2 = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var itemExecute = constant('alloy.typeahead.itemexecute');\n\n    var make$4 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element(), 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open$1(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind(menus, function (menu) {\n              return filter(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$5(comp.element());\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$3(comp.element(), detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$5(component.element()).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Option.none();\n                      });\n                    });\n                  });\n                };\n                open$1(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Option.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Option.some(true);\n            }\n            return Option.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Option.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Option.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event().item());\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event().item(), Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search$1(sandbox.element()).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom$2(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign({}, focusBehaviours$1, augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted$1('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$f = constant([\n      option('lazySink'),\n      strict$1('fetch'),\n      defaulted$1('minChars', 5),\n      defaulted$1('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Option.none()),\n      defaulted$1('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted$1('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted$1('selectsOver', true),\n        defaulted$1('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted$1('inputClasses', []),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('matchWidth', true),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('dismissOnBlur', true),\n      markers(['openClass']),\n      option('initialData'),\n      field$1('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      state$1('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$e()).concat(sandboxFields()));\n    var parts$4 = constant([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOption().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite$1({\n      name: 'Typeahead',\n      configFields: schema$f(),\n      partFields: parts$4(),\n      factory: make$4\n    });\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel = function (label, providersBackstage) {\n      return FormField.parts().label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has(item, 'getSubmenuItems');\n    };\n    var separator$1 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator(acc[acc.length - 1]) ? acc.concat([separator$1]) : acc;\n          } else if (has(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator(item)) {\n        return item;\n      } else {\n        var itemValue = readOptFrom$1(item, 'value').getOrThunk(function () {\n          return generate$1('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build$2 = function (items, itemResponse, backstage) {\n      var primary = generate$1('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Option.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage);\n      var submenus = map$1(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Option.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var renderAutocomplete = function (spec, backstage) {\n      var pLabel = renderLabel(spec.label.getOr('?'), backstage.shared.providers);\n      var pField = FormField.parts().field({\n        factory: Typeahead,\n        dismissOnBlur: false,\n        inputClasses: ['tox-textfield'],\n        minChars: 1,\n        fetch: function (input) {\n          var value = Representing.getValue(input);\n          var items = spec.getItems(value);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage);\n          return Future.pure(tdata);\n        },\n        markers: { openClass: 'dog' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') }\n      });\n      return renderFormField(Option.some(pLabel), pField);\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var factory$5 = function (detail, spec) {\n      return {\n        uid: detail.uid,\n        dom: dom$2(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single$2({\n      name: 'Input',\n      configFields: schema$e(),\n      factory: factory$5\n    });\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name$1 = name(elem);\n      return contains(ariaElements, name$1);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      remove$4(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element())) {\n          set$1(component.element(), 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element())) {\n          set$1(component.element(), 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run$1 = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element());\n      return has$2(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run$1,\n        isInvalid: isInvalid\n    });\n\n    var events$b = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive([run(validatorInfo.onEvent, function (component) {\n            run$1(component, invalidConfig, invalidState).get(identity);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run$1(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        events: events$b\n    });\n\n    var InvalidateSchema = [\n      strict$1('invalidClass'),\n      defaulted$1('getRoot', Option.none),\n      optionObjOf('notify', [\n        defaulted$1('aria', 'alert'),\n        defaulted$1('getContainer', Option.none),\n        defaulted$1('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        strict$1('validate'),\n        defaulted$1('onEvent', 'input'),\n        defaulted$1('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$1({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var exhibit$4 = function (base, tabConfig) {\n      return nu$6({\n        attributes: wrapAll$1([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$4\n    });\n\n    var TabstopSchema = [defaulted$1('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$1({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var schema$g = constant([\n      strict$1('dom'),\n      strict$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Option.none()),\n      field$1('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      strict$1('toggleClass'),\n      defaulted$1('eventOrder', {}),\n      option('lazySink'),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$5 = constant([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$6 = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return readOptFrom$1(detail.dom, 'attributes').bind(function (attrs) {\n          return readOptFrom$1(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        }\n      };\n      var triggerExecute = function (comp, se) {\n        emitExecute(comp);\n        return Option.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox(detail, hotspot, {\n                  onOpen: function () {\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Option.some(true);\n            },\n            onEscape: function (comp, se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Option.some(true);\n              } else {\n                return Option.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$7(Option.some(action)),\n        eventOrder: __assign({}, detail.eventOrder, (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          }), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite$1({\n      name: 'Dropdown',\n      configFields: schema$g(),\n      partFields: parts$5(),\n      factory: factory$6,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        }\n      }\n    });\n\n    var exhibit$5 = function (base, unselectConfig) {\n      return nu$6({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$c = function (unselectConfig) {\n      return derive([abort(selectstart(), constant(true))]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        events: events$c,\n        exhibit: exhibit$5\n    });\n\n    var Unselecting = create$1({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Option.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n              return false;\n            }, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$1('color-input-change');\n    var colorSwatchChangeEvent = generate$1('color-swatch-change');\n    var colorPickerCancelEvent = generate$1('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts().field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(function () {\n          });\n        },\n        inputBehaviours: derive$1([\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element());\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = Element.fromTag('span');\n                  set$2(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                Settings.addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: Option.some({\n          onRtl: function () {\n            return [southeast$1];\n          },\n          onLtr: function () {\n            return [southwest$1];\n          }\n        }),\n        components: [],\n        fetch: ColorSwatch.getFetch(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$2(colorButton.element(), 'background-color', se.event().color());\n              });\n            }),\n            run(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event().value());\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run(colorPickerCancelEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: constant(hue),\n        saturation: constant(saturation),\n        value: constant(value)\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red() / 255;\n      var g = rgbaColour.green() / 255;\n      var b = rgbaColour.blue() / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var calcHex = function (value) {\n      var hue = (100 - value) / 100 * 360;\n      var hsv = hsvColour(hue, 100, 100);\n      var rgb = fromHsv(hsv);\n      return fromRgba(rgb);\n    };\n\n    var fieldsUpdate = constant(generate$1('rgb-hex-update'));\n    var sliderUpdate = constant(generate$1('slider-update'));\n    var paletteUpdate = constant(generate$1('palette-update'));\n\n    var platform = PlatformDetection$1.detect();\n    var isTouch = platform.deviceType.isTouch();\n    var labelPart = optional({\n      schema: [strict$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            var touchEvents = derive([runActionExtra(touchstart(), a, [detail])]);\n            var mouseEvents = derive([\n              runActionExtra(mousedown(), a, [detail]),\n              runActionExtra(mousemove(), function (l, det) {\n                if (det.mouseIsDown.get()) {\n                  a(l, det);\n                }\n              }, [detail])\n            ]);\n            return { events: isTouch ? touchEvents : mouseEvents };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [state$1('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        var touchEvents = derive([\n          run(touchstart(), setValueFrom),\n          run(touchmove(), setValueFrom)\n        ]);\n        var mouseEvents = derive([\n          run(mousedown(), setValueFrom),\n          run(mousemove(), function (spectrum, se) {\n            if (detail.mouseIsDown.get()) {\n              setValueFrom(spectrum, se);\n            }\n          })\n        ]);\n        return {\n          behaviours: derive$1(isTouch ? [] : [\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: isTouch ? touchEvents : mouseEvents\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var isTouch$1 = PlatformDetection$1.detect().deviceType.isTouch();\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant(_sliderChangeEvent);\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event().raw();\n      if (isTouch$1) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Option.some(touchEvent.touches[0]).map(function (t) {\n          return Position(t.clientX, t.clientY);\n        }) : Option.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Option.some(mouseEvent).map(function (me) {\n          return Position(me.clientX, me.clientY);\n        }) : Option.none();\n      }\n    };\n\n    var t = 'top', r$1 = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range$2 = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range$2(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range$2(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r$1);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: constant(x) };\n    };\n    var yValue = function (y) {\n      return { y: constant(y) };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: constant(x),\n        y: constant(y)\n      };\n    };\n    var fireSliderChange = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds = function (component) {\n      return component.element().dom().getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds(component);\n      var spectrumBounds = getBounds(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x) {\n      return { x: constant(x) };\n    };\n    var findValueOfOffset = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue(xValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$1(spectrum, sliderValue(min));\n    };\n    var setToMax = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$1(spectrum, sliderValue(max));\n    };\n    var moveBy = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x(), minX(detail), maxX(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue(xValue));\n      return Option.some(xValue);\n    };\n    var handleMovement = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left();\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Option.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Option.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x(), edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$7(thumb.element()) / 2;\n      set$2(thumb.element(), 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft = handleMovement(-1);\n    var onRight = handleMovement(1);\n    var onUp = Option.none;\n    var onDown = Option.none;\n    var edgeActions = {\n      'top-left': Option.none(),\n      'top': Option.none(),\n      'top-right': Option.none(),\n      'right': Option.some(setToREdge),\n      'bottom-right': Option.none(),\n      'bottom': Option.none(),\n      'bottom-left': Option.none(),\n      'left': Option.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: constant(y) };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y(), minY(detail), maxY(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$1(yValue));\n      return Option.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top();\n      });\n    };\n    var findOffsetOfValue$2 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Option.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Option.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$2(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y(), edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$6(thumb.element()) / 2;\n      set$2(thumb.element(), 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Option.none;\n    var onRight$1 = Option.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Option.none(),\n      'top': Option.some(setToTEdge),\n      'top-right': Option.none(),\n      'right': Option.none(),\n      'bottom-right': Option.none(),\n      'bottom': Option.some(setToBEdge),\n      'bottom-left': Option.none(),\n      'left': Option.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange$3 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x, y) {\n      return {\n        x: constant(x),\n        y: constant(y)\n      };\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value.left());\n      var yValue = findValueOfOffset$1(spectrum, detail, value.top());\n      var val = sliderValue$2(xValue, yValue);\n      fireSliderChange$3(spectrum, val);\n      return val;\n    };\n    var moveBy$2 = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x() : f(currentValue(detail).x(), minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y() : f(currentValue(detail).y(), minY(detail), maxY(detail), step(detail));\n      fireSliderChange$3(spectrum, sliderValue$2(xValue, yValue));\n      return Option.some(xValue);\n    };\n    var handleMovement$2 = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, isVerticalMovement, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x(), edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y(), edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$7(thumb.element()) / 2;\n      var thumbYRadius = get$6(thumb.element()) / 2;\n      set$2(thumb.element(), 'left', xPos - thumbXRadius + 'px');\n      set$2(thumb.element(), 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1, false);\n    var onRight$2 = handleMovement$2(1, false);\n    var onUp$2 = handleMovement$2(-1, true);\n    var onDown$2 = handleMovement$2(1, true);\n    var edgeActions$2 = {\n      'top-left': Option.some(setToTLEdgeXY),\n      'top': Option.some(setToTEdgeXY),\n      'top-right': Option.some(setToTREdgeXY),\n      'right': Option.some(setToREdgeXY),\n      'bottom-right': Option.some(setToBREdgeXY),\n      'bottom': Option.some(setToBEdgeXY),\n      'bottom-left': Option.some(setToBLEdgeXY),\n      'left': Option.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        getValueFromEvent: getValueFromEvent$2,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var isTouch$2 = PlatformDetection$1.detect().deviceType.isTouch();\n    var SliderSchema = [\n      defaulted$1('stepSize', 1),\n      defaulted$1('onChange', noop),\n      defaulted$1('onChoose', noop),\n      defaulted$1('onInit', noop),\n      defaulted$1('onDragStart', noop),\n      defaulted$1('onDragEnd', noop),\n      defaulted$1('snapToGrid', false),\n      defaulted$1('rounded', true),\n      option('snapStart'),\n      strictOf('model', choose$1('mode', {\n        x: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell({\n              x: constant(spec.mode.minX),\n              y: constant(spec.mode.minY)\n            });\n          }),\n          strict$1('getInitialValue'),\n          output('manager', TwoDModel)\n        ]\n      })),\n      field$1('sliderBehaviours', [\n        Keying,\n        Representing\n      ])\n    ].concat(!isTouch$2 ? [state$1('mouseIsDown', function () {\n        return Cell(false);\n      })] : []);\n\n    var isTouch$3 = PlatformDetection$1.detect().deviceType.isTouch();\n    var sketch = function (detail, components, _spec, _externals) {\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var changeValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n        detail.onChange(slider, thumb, newValue);\n        return Option.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var touchEvents = [\n        run(touchstart(), function (slider, _simulatedEvent) {\n          detail.onDragStart(slider, getThumb(slider));\n        }),\n        run(touchend(), function (slider, _simulatedEvent) {\n          detail.onDragEnd(slider, getThumb(slider));\n        })\n      ];\n      var mouseEvents = [\n        run(mousedown(), function (slider, simulatedEvent) {\n          simulatedEvent.stop();\n          detail.onDragStart(slider, getThumb(slider));\n          detail.mouseIsDown.set(true);\n        }),\n        run(mouseup(), function (slider, _simulatedEvent) {\n          detail.onDragEnd(slider, getThumb(slider));\n        })\n      ];\n      var uiEventsArr = isTouch$3 ? touchEvents : mouseEvents;\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, flatten([\n          !isTouch$3 ? [Keying.config({\n              mode: 'special',\n              focusIn: function (slider) {\n                return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(constant(true));\n              }\n            })] : [],\n          [\n            Representing.config({\n              store: {\n                mode: 'manual',\n                getValue: function (_) {\n                  return modelDetail.value.get();\n                }\n              }\n            }),\n            Receiving.config({\n              channels: {\n                'mouse.released': {\n                  onReceive: function (slider, se) {\n                    var wasDown = detail.mouseIsDown.get();\n                    detail.mouseIsDown.set(false);\n                    if (wasDown) {\n                      getPart(slider, detail, 'thumb').each(function (thumb) {\n                        var value = modelDetail.value.get();\n                        detail.onChoose(slider, thumb, value);\n                      });\n                    }\n                  }\n                }\n              }\n            })\n          ]\n        ])),\n        events: derive([\n          run(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event().value());\n          }),\n          runOnAttached(function (slider, simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          })\n        ].concat(uiEventsArr)),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          changeValue: changeValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite$1({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch,\n      apis: {\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts().spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts().thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant({ y: constant(0) })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate(), { value: value });\n        }\n      });\n    };\n    var HueSlider = { sliderFactory: sliderFactory };\n\n    var owner$3 = 'form';\n    var schema$h = [field$1('formBehaviours', [Representing])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne(owner$3, getPartName(name), config);\n        };\n        return {\n          field: field,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite(owner$3, schema$h, fieldParts, make$5, spec);\n    };\n    var toResult$1 = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$5 = function (detail, components, spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$1(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult$1(opt, 'missing current');\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each$1(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$1('valid-input');\n    var invalidInput = generate$1('invalid-input');\n    var validatingInput = generate$1('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts().label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts().field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts()['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value() });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red();\n        var green = rgb.green();\n        var blue = rgb.blue();\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$2(preview.element(), 'background-color', '#' + hex.value());\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: constant(Cell(Option.some(255))),\n          green: constant(Cell(Option.some(255))),\n          blue: constant(Cell(Option.some(255))),\n          hex: constant(Cell(Option.some('ffffff')))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop]().get();\n        };\n        var set = function (prop, value) {\n          state[prop]().set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red();\n          var green = rgb.green();\n          var blue = rgb.blue();\n          set('red', Option.some(red));\n          set('green', Option.some(green));\n          set('blue', Option.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event();\n          if (data.type() !== 'hex') {\n            set(data.type(), Option.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Option.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate(), { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Option.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type() === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event();\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value());\n          } else {\n            onValidRgb(form, data.type(), data.value());\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run(validInput, onValidInput),\n                run(invalidInput, onInvalidInput),\n                run(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value() });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single$2({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n    var RgbForm = { rgbFormFactory: rgbFormFactory };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts().spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts().thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setSliderColour = function (slider, rgba) {\n        var canvas = slider.components()[0].element().dom();\n        setColour(canvas, toString(rgba));\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant({\n          x: constant(0),\n          y: constant(0)\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate(), { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element().dom(), toString(redColour()));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Option.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single$2({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setRgba: function (_apis, slider, rgba) {\n            setSliderColour(slider, rgba);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n    var SaturationBrightnessPalette = { paletteFactory: paletteFactory };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = RgbForm.rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = SaturationBrightnessPalette.paletteFactory(translate, getClass);\n        var state = { paletteRgba: constant(Cell(redColour())) };\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            var rgba = fromHex(hex);\n            state.paletteRgba().set(rgba);\n            sbPalette.setRgba(palette, rgba);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var runUpdates = function (anyInSystem, hex, updates) {\n          each(updates, function (update) {\n            update(anyInSystem, hex);\n          });\n        };\n        var paletteUpdates = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event().value();\n            var oldRgb = state.paletteRgba().get();\n            var hsvColour$1 = fromRgb(oldRgb);\n            var newHsvColour = hsvColour(hsvColour$1.hue(), value.x(), 100 - value.y());\n            var rgb = fromHsv(newHsvColour);\n            var nuHex = fromRgba(rgb);\n            runUpdates(form, nuHex, updates);\n          };\n        };\n        var sliderUpdates = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event().value();\n            var hex = calcHex(value.y());\n            runUpdates(form, hex, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            HueSlider.sliderFactory(translate, getClass),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run(paletteUpdate(), paletteUpdates()),\n              run(sliderUpdate(), sliderUpdates())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single$2({\n        name: 'ColourPicker',\n        configFields: [\n          strict$1('dom'),\n          defaulted$1('onValidHex', noop),\n          defaulted$1('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n    var ColourPicker = { makeFactory: makeFactory };\n\n    var self$1 = function () {\n      return Composing.config({ find: Option.some });\n    };\n    var memento = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child(comp.element(), index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOption();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = ColourPicker.makeFactory(translate, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  domGlobals.console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Option.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return Object.prototype.hasOwnProperty.call(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = Cell(Option.none());\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = Cell(Option.none());\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('editor-foo-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element().dom()) : global$a.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element().dom(), spec.settings);\n                })).then(function (ea) {\n                  initialValue.get().each(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.set(Option.none());\n                  editorApi.set(Option.some(ea));\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(Option.some(value));\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var processors = objOf([\n      defaulted$1('preprocess', identity),\n      defaulted$1('postprocess', identity)\n    ]);\n    var memento$1 = function (mem, rawProcessors) {\n      var ps = asRawOrDie('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element());\n      }, function (c, v) {\n        return setter(c.element(), v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$5, set$3);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$1, set);\n    };\n    var memory$1 = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento$1,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory$1\n    };\n\n    var extensionsAccepted = '.jpg,.jpeg,.png,.gif';\n    var filterByExtension = function (files) {\n      var re = new RegExp('(' + extensionsAccepted.split(/\\s*,\\s*/).join('|') + ')$', 'i');\n      return filter(from$1(files), function (file) {\n        return re.test(file.name);\n      });\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event().raw();\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var files = simulatedEvent.event().raw().target.files;\n        handleFiles(component, files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [cutter(tapOrClick())])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragover', stopper),\n              run('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element().dom().click();\n                  },\n                  buttonBehaviours: derive$1([Tabstopping.config({})])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts().field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$1('alloy-fake-before-tabstop');\n    var afterObject = generate$1('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus$1 = function (container, targetComp) {\n      var target = targetComp.element();\n      if (has$2(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has$2(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest$4(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), constant(false));\n    };\n    var NavigableObject = {\n      isPseudoStop: isPseudoStop,\n      onFocus: onFocus$1,\n      craft: craft\n    };\n\n    var platformNeedsSandboxing = !(PlatformDetection$1.detect().browser.isIE() || PlatformDetection$1.detect().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$1(frameComponent.element(), 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element().dom().contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$1(frameComponent.element(), 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({}), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return NavigableObject.craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Option.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts().field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    function create$5(width, height) {\n      return resize(domGlobals.document.createElement('canvas'), width, height);\n    }\n    function clone$1(canvas) {\n      var tCanvas = create$5(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    }\n    function get2dContext(canvas) {\n      return canvas.getContext('2d');\n    }\n    function resize(canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n\n    function getWidth(image) {\n      return image.naturalWidth || image.width;\n    }\n    function getHeight(image) {\n      return image.naturalHeight || image.height;\n    }\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof window.setImmediate === 'function' && window.setImmediate || function (fn) {\n        domGlobals.setTimeout(fn, 1);\n      };\n      function bind(fn, thisArg) {\n        return function () {\n          return fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise$1 = window.Promise ? window.Promise : promise();\n\n    function blobToImage(blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = domGlobals.URL.createObjectURL(blob);\n        var image = new domGlobals.Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        function loaded() {\n          removeListeners();\n          resolve(image);\n        }\n        function error() {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        }\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          loaded();\n        }\n      });\n    }\n    function dataUriToBlobSync(uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Option.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = domGlobals.atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Option.some(new domGlobals.Blob(byteArrays, { type: mimetype }));\n    }\n    function dataUriToBlob(uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    }\n    function canvasToBlob(canvas, type, quality) {\n      type = type || 'image/png';\n      if (domGlobals.HTMLCanvasElement.prototype.toBlob) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    }\n    function canvasToDataURL(canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    }\n    function blobToCanvas(blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$5(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    }\n    function blobToDataUri(blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    function revokeImageUrl(image) {\n      domGlobals.URL.revokeObjectURL(image.src);\n    }\n\n    function create$6(getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      function toBlob() {\n        return Promise$1.resolve(blob);\n      }\n      function toDataURL() {\n        return uri;\n      }\n      function toBase64() {\n        return uri.split(',')[1];\n      }\n      function toAdjustedBlob(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      }\n      function toAdjustedDataURL(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      }\n      function toAdjustedBase64(type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      }\n      function toCanvas() {\n        return getCanvas.then(clone$1);\n      }\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    }\n    function fromBlob(blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$6(blobToCanvas(blob), blob, uri);\n      });\n    }\n    function fromCanvas(canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$6(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    }\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    function clamp(value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    }\n    function identity$1() {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    }\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    function multiply(matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    }\n    function adjustContrast(matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustBrightness(matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustColors(matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n\n    function colorFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyColorFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      }\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function convoluteFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyConvoluteFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pIn, pOut, aMatrix) {\n        function clamp(value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        }\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      }\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function functionColorFilter(colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        function applyLookup(pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        }\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    }\n    function complexAdjustableColorFilter(matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity$1(), adjust));\n      };\n    }\n    function basicColorFilter(matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    }\n    function basicConvolutionFilter(kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    }\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity$1(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    function scale(image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    }\n    function _scale(image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$5(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    }\n\n    function rotate(ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    }\n    function applyRotate(image, type, angle) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function flip(ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    }\n    function applyFlip(image, type, axis) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    }\n    function crop(ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    }\n    function applyCrop(image, type, x, y, w, h) {\n      var canvas = create$5(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    }\n    function resize$1(ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    }\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var renderIcon$1 = function (iconHtml, behaviours) {\n      return __assign({\n        dom: {\n          tag: 'span',\n          innerHtml: iconHtml,\n          classes: [\n            'tox-icon',\n            'tox-tbtn__icon-wrap'\n          ]\n        }\n      }, behaviours);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$c(iconName, iconsProvider), {});\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$c(iconName, iconsProvider), { behaviours: derive$1([Replacing.config({})]) });\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var internalToolbarButtonExecute = generate$1('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = {\n      'alloy.execute': [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'toolbar-button-events'\n      ]\n    };\n\n    var updateMenuText = generate$1('update-menu-text');\n    var updateMenuIcon = generate$1('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event().raw() });\n        Dropdown.close(dropdown);\n        return Option.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var memDropdown = record(Dropdown.sketch(__assign({}, role, {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Option.some({\n            dom: {\n              tag: 'div',\n              classes: [prefix + '__select-chevron'],\n              innerHtml: get$c('chevron-down', sharedBackstage.providers.icons)\n            }\n          })\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(spec.dropdownBehaviours.concat([\n          DisablingConfigs.button(spec.disabled),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event().text()))]);\n              });\n            }),\n            run(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event().icon(), sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ])),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function () {\n          return Future.nu(spec.fetch);\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element();\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$1(elm, 'aria-pressed', true);\n          } else {\n            remove$4(elm, 'tox-tbtn--enabled');\n            remove$1(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has$2(component.element(), 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (callback) {\n          spec.fetch(function (items) {\n            callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(spec.disabled),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Option.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Option.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = (!spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button']).concat(icon.isSome() ? ['tox-button--icon'] : [], spec.borderless ? ['tox-button--naked'] : [], extraClasses);\n      var dom = __assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml, { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Option.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          domGlobals.console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        return renderMenuButton(spec, 'tox-tbtn', backstage, Option.none());\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign({}, spec, { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        domGlobals.console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Option.none(), FormField.parts().field(__assign({ factory: Button }, renderButtonSpec(spec, Option.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$i = constant([\n      defaulted$1('field1Name', 'field1'),\n      defaulted$1('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers(['lockClass']),\n      defaulted$1('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$6 = constant([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [strict$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$7 = function (detail, components, spec, externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Option.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasKey$1(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasKey$1(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite$1({\n      name: 'FormCoupledInputs',\n      configFields: schema$i(),\n      partFields: parts$6(),\n      factory: factory$7,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return Object.prototype.hasOwnProperty.call(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Option.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Option.some(size.value);\n        } else {\n          return Option.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var noSizeConversion = function (input) {\n      return Option.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOption();\n      var oValue = parseSize(otherFieldText).toOption();\n      return liftN([\n        cValue,\n        oValue\n      ], function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$1('ratio-event');\n      var pLock = FormCoupledInputs.parts().lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__lock'\n              ],\n              innerHtml: get$c('lock', providersBackstage.icons)\n            }\n          },\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__unlock'\n              ],\n              innerHtml: get$c('unlock', providersBackstage.icons)\n            }\n          }\n        ],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(spec.disabled),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts().field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({ disabled: spec.disabled }),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run(focusin(), function (component, simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run(change(), function (component, simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts().field1(formGroup([\n        FormField.parts().label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts().field2(formGroup([\n        FormField.parts().label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: spec.disabled,\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          config('size-input-events2', [run(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event().isField1();\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant(generate$1('undo'));\n    var redo = constant(generate$1('redo'));\n    var zoom = constant(generate$1('zoom'));\n    var back = constant(generate$1('back'));\n    var apply = constant(generate$1('apply'));\n    var swap = constant(generate$1('swap'));\n    var transform = constant(generate$1('transform'));\n    var tempTransform = constant(generate$1('temp-transform'));\n    var transformApply = constant(generate$1('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant('save-state');\n    var disable$1 = constant('disable');\n    var enable$1 = constant('enable');\n    var external$2 = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable$1,\n      enable: enable$1\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Option.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Option.some(icon),\n          tooltip: Option.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var none = Option.none();\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external$2.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external$2.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop$1(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run(external$2.disable(), function (comp, se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: none,\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$2(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run(external$2.disable(), function (comp, se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip$1, 'h');\n      var verticalFlip = makeValueTransform(flip$1, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate$1, -90);\n      var clockwiseRotate = makeValueTransform(rotate$1, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run(external$2.disable(), function (comp, se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts().label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts().spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts().thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant({ x: constant(value) })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x() / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run(external$2.disable(), function (comp, se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run(external$2.enable(), function (comp, se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness$1, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast$1, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma$1, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize$1(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, thumb, value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x() / 100;\n                var g = Representing.getValue(green).x() / 100;\n                var b = Representing.getValue(blue).x() / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Option.some(sharpen$1);\n      var invertTransform = Option.some(invert$1);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, none, cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, none, resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, none, noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, none, noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, none, noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, none, noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, none, noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    function getDocumentSize(doc) {\n      var documentElement, body, scrollWidth, clientWidth;\n      var offsetWidth, scrollHeight, clientHeight, offsetHeight;\n      var max = Math.max;\n      documentElement = doc.documentElement;\n      body = doc.body;\n      scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || domGlobals.document;\n      var downButton;\n      var start, stop, drag, startX, startY;\n      settings = settings || {};\n      var handleElement = doc.getElementById(settings.handle || id);\n      start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var handleElm, cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (domGlobals.window.getComputedStyle) {\n          cursor = domGlobals.window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$b('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$b(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      stop = function (e) {\n        updateWithTouchData(e);\n        global$b(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$b(handleElement).off();\n      };\n      global$b(handleElement).on('mousedown touchstart', start);\n    }\n\n    var count = 0;\n    function CropRect (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var instance;\n      var handles;\n      var dragHelpers;\n      var blockers;\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      function getAbsoluteRect(outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      }\n      function getRelativeRect(outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      }\n      function getInnerRect() {\n        return getRelativeRect(clampRect, currentRect);\n      }\n      function moveRect(handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$c.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      }\n      function render() {\n        function createDragHelper(handle) {\n          var startRect;\n          return new DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        }\n        global$b('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$e.each(blockers, function (blocker) {\n          global$b('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$e.each(handles, function (handle) {\n          global$b('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\" title=\"' + handle.label + '\">');\n        });\n        dragHelpers = global$e.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$b(containerElm).on('focusin focusout', function (e) {\n          global$b(e.target).attr('aria-grabbed', e.type === 'focus' ? 'true' : 'false');\n        });\n        global$b(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$e.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          function moveAndBlock(evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          }\n          switch (e.keyCode) {\n          case global$f.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$f.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$f.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$f.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$f.ENTER:\n          case global$f.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      }\n      function toggleVisibility(state) {\n        var selectors;\n        selectors = global$e.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$e.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$b(selectors, containerElm).show();\n        } else {\n          global$b(selectors, containerElm).hide();\n        }\n      }\n      function repaint(rect) {\n        function updateElementRect(name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$b('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        }\n        global$e.each(handles, function (handle) {\n          global$b('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      }\n      function setRect(rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      }\n      function setViewPortRect(rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      }\n      function setInnerRect(rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      }\n      function setClampRect(rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      }\n      function destroy() {\n        global$e.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      }\n      render();\n      instance = global$e.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$d);\n      return instance;\n    }\n\n    var loadImage = function (image) {\n      return new global$4(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = Cell(Option.none());\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$7(panel.element());\n          var panelH = get$6(panel.element());\n          var width = img.dom().naturalWidth * zoom;\n          var height = img.dom().naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll$1(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll$1(bg.element(), css);\n          });\n          cropRect.get().each(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$7(panel.element());\n          var panelH = get$6(panel.element());\n          var width = img.dom().naturalWidth;\n          var height = img.dom().naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = Element.fromTag('img');\n        set$1(img, 'src', url);\n        return loadImage(img.dom()).then(function () {\n          return memContainer.getOpt(anyInSystem).map(function (panel) {\n            var aImg = external({ element: img });\n            Replacing.replaceAt(panel, 1, Option.some(aImg));\n            var lastViewRect = viewRectState.get();\n            var viewRect = {\n              x: 0,\n              y: 0,\n              w: img.dom().naturalWidth,\n              h: img.dom().naturalHeight\n            };\n            viewRectState.set(viewRect);\n            var rect = global$c.inflate(viewRect, -20, -20);\n            rectState.set(rect);\n            if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n              zoomFit(panel, img);\n            }\n            repaintImg(panel, img);\n            return img;\n          });\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element();\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element().dom();\n                    var cRect = CropRect({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, function () {\n                    });\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(Option.some(cRect));\n                  });\n                })])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Option.some(icon),\n        disabled: disabled,\n        tooltip: Option.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      function add(state) {\n        var removed;\n        removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      }\n      function undo() {\n        if (canUndo()) {\n          return data[--index];\n        }\n      }\n      function redo() {\n        if (canRedo()) {\n          return data[++index];\n        }\n      }\n      function canUndo() {\n        return index > 0;\n      }\n      function canRedo() {\n        return index !== -1 && index < data.length - 1;\n      }\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = Cell(Option.none());\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().fold(function () {\n          return blobState.get();\n        }, function (temp) {\n          return temp;\n        });\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(Option.some(newTempState));\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: domGlobals.URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        domGlobals.URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$e.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.get().each(destroyState);\n        tempState.set(Option.none());\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(Option.some(newState));\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(function () {\n        }, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event().direction();\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        return blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url).then(function (oImg) {\n            updateButtonUndoStates(anyInSystem);\n            swap();\n            unblock(anyInSystem);\n            return oImg;\n          });\n        }).catch(function (err) {\n          domGlobals.console.log(err);\n          unblock(anyInSystem);\n          return err;\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event().swap();\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event().swap();\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event().transform(), noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event().transform());\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event().transform(), simulatedEvent.event().swap());\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event().transform();\n        var swap = simulatedEvent.event().swap();\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run(internal.undo(), undo),\n            run(internal.redo(), redo),\n            run(internal.zoom(), zoom),\n            run(internal.back(), back),\n            run(internal.apply(), apply),\n            run(internal.transform(), transform),\n            run(internal.tempTransform(), tempTransform),\n            run(internal.transformApply(), transformApply),\n            run(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var factory$8 = function (detail, spec) {\n      var options = map(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$5(select.element());\n              },\n              setValue: function (select, newValue) {\n                var found = find(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$3(select.element(), newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single$2({\n      name: 'HtmlSelect',\n      configFields: [\n        strict$1('options'),\n        field$1('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted$1('selectClasses', []),\n        defaulted$1('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$8\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts().field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({ disabled: spec.disabled }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Option.none() : Option.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield__icon-js'],\n          innerHtml: get$c('chevron-down', providersBackstage.icons)\n        }\n      });\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: spec.disabled,\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({ disabled: spec.disabled }),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Option.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element());\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var pField = FormField.parts().field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: spec.placeholder.fold(function () {\n        }, function (placeholder) {\n          return { placeholder: providersBackstage.translate(placeholder) };\n        }),\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [Disabling.config({\n          disabled: spec.disabled,\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        })];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Option.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Option.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var wrap$2 = function (delegate) {\n      var toCached = function () {\n        return wrap$2(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap$2(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap$2(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = domGlobals.setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              domGlobals.clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign({}, delegate, {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$c = function (worker) {\n      return wrap$2(Future.nu(worker));\n    };\n    var value$2 = function (value) {\n      return wrap$2(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap$2(Future.pure(Result.error(error)));\n    };\n    var fromResult$1 = function (result) {\n      return wrap$2(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap$2(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$c(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$c,\n      wrap: wrap$2,\n      pure: value$2,\n      value: value$2,\n      error: error$1,\n      fromResult: fromResult$1,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$2 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: function () {\n        }\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: function () {\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Option.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Option.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$2, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$1('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts().field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: { 'aria-errormessage': errorId },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element());\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$1(invalidComp.element(), 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      completer((validation.status === 'invalid' ? Result.error : Result.value)(validation.message));\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({ disabled: spec.disabled }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'dog' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox-icon',\n              'tox-control-wrap__status-icon-' + name\n            ],\n            innerHtml: get$c(icon, providersBackstage.icons),\n            attributes: __assign({\n              'title': providersBackstage.translate(label),\n              'aria-live': 'polite'\n            }, errId.fold(function () {\n              return {};\n            }, function (id) {\n              return { id: id };\n            }))\n          }\n        };\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Option.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$1('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({ disabled: spec.disabled })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Option.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var urlData = Representing.getValue(field);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: spec.disabled,\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          config('url-input-events', [run(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element().dom();\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element().dom();\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element().dom().click();\n        return Option.some(true);\n      };\n      var pField = FormField.parts().field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({ disabled: spec.disabled }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts().label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return {\n          dom: {\n            tag: 'span',\n            classes: [\n              'tox-icon',\n              'tox-checkbox-icon__' + className\n            ],\n            innerHtml: get$c(iconName, providerBackstage.icons)\n          }\n        };\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: spec.disabled,\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var renderListbox = function (spec, providersBackstage) {\n      var pLabel = renderLabel(spec.label, providersBackstage);\n      var pField = FormField.parts().field({\n        factory: HtmlSelect,\n        dom: { classes: ['mce-select-field'] },\n        selectBehaviours: derive$1([Tabstopping.config({})]),\n        options: spec.values,\n        data: spec.initialValue.getOr(undefined)\n      });\n      return renderFormField(Option.some(pLabel), pField);\n    };\n\n    var renderLabel$2 = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Option.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var renderCollection = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$3(se.event().target(), '[data-collection-item-value]').each(function (target) {\n            f(comp, target, get$2(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var escapeAttribute = function (ch) {\n        if (ch === '\"') {\n          return '&quot;';\n        }\n        return ch;\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map(items, function (item) {\n          var itemText = global$5.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          return '<div class=\"tox-collection__item\" tabindex=\"-1\" data-collection-item-value=\"' + escapeAttribute(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns > 1 && spec.columns !== 'auto' ? chunk(htmlLines, spec.columns) : [htmlLines];\n        var html = map(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set(comp.element(), html.join(''));\n      };\n      var collectionEvents = [\n        run(mouseover(), runOnItem(function (comp, tgt) {\n          focus$1(tgt);\n        })),\n        run(tapOrClick(), runOnItem(function (comp, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        })),\n        run(focusin(), runOnItem(function (comp, tgt, itemValue) {\n          descendant$1(comp.element(), '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run(focusout(), runOnItem(function (comp, tgt, itemValue) {\n          descendant$1(comp.element(), '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n        })),\n        runOnExecute(runOnItem(function (comp, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var pField = FormField.parts().field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ])\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var make$6 = function (render) {\n      return function (parts, spec, backstage) {\n        return readOptFrom$1(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$6(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$6(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$6(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alloy: make$6(identity),\n      alertbanner: make$6(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$6(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$6(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      listbox: make$6(function (spec, backstage) {\n        return renderListbox(spec, backstage.shared.providers);\n      }),\n      label: make$6(function (spec, backstage) {\n        return renderLabel$2(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      autocomplete: make$6(function (spec, backstage) {\n        return renderAutocomplete(spec, backstage);\n      }),\n      button: make$6(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$6(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$6(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$6(renderColorPicker),\n      dropzone: make$6(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$6(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      selectbox: make$6(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$6(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$6(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$6(renderCustomEditor),\n      htmlpanel: make$6(renderHtmlPanel),\n      imagetools: make$6(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$6(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$6(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return readOptFrom$1(factories, spec.type).fold(function () {\n        domGlobals.console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var westEdgeX$1 = function (anchor) {\n      return anchor.x();\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x() + anchor.width() / 2 - element.width() / 2;\n    };\n    var eastEdgeX$1 = function (anchor, element) {\n      return anchor.x() + anchor.width() - element.width();\n    };\n    var northY$2 = function (anchor) {\n      return anchor.y();\n    };\n    var southY$2 = function (anchor, element) {\n      return anchor.y() + anchor.height() - element.height();\n    };\n    var southeast$3 = function (anchor, element, bubbles) {\n      return nu$8(westEdgeX$1(anchor), southY$2(anchor, element), bubbles.innerSoutheast(), southeast(), 'layout-se');\n    };\n    var southwest$3 = function (anchor, element, bubbles) {\n      return nu$8(eastEdgeX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouthwest(), southwest(), 'layout-sw');\n    };\n    var northeast$3 = function (anchor, element, bubbles) {\n      return nu$8(westEdgeX$1(anchor), northY$2(anchor), bubbles.innerNortheast(), northeast(), 'layout-ne');\n    };\n    var northwest$3 = function (anchor, element, bubbles) {\n      return nu$8(eastEdgeX$1(anchor, element), northY$2(anchor), bubbles.innerNorthwest(), northwest(), 'layout-nw');\n    };\n    var north$3 = function (anchor, element, bubbles) {\n      return nu$8(middleX$1(anchor, element), northY$2(anchor), bubbles.innerNorth(), north(), 'layout-n');\n    };\n    var south$3 = function (anchor, element, bubbles) {\n      return nu$8(middleX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouth(), south(), 'layout-s');\n    };\n\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getToolbarAnchor = function (bodyElement, lazyAnchorbar, useFixedToolbarContainer) {\n      var fixedToolbarAnchor = function () {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: Option.from(bodyElement()),\n          bubble: nu$7(-12, -12, bubbleAlignments),\n          layouts: {\n            onRtl: function () {\n              return [northeast$3];\n            },\n            onLtr: function () {\n              return [northwest$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: nu$7(-12, 12, bubbleAlignments),\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          }\n        };\n      };\n      return useFixedToolbarContainer ? fixedToolbarAnchor : standardAnchor;\n    };\n    var getBannerAnchor = function (bodyElement, lazyAnchorbar, useFixedToolbarContainer) {\n      var fixedToolbarAnchor = function () {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: Option.from(bodyElement()),\n          layouts: {\n            onRtl: function () {\n              return [north$3];\n            },\n            onLtr: function () {\n              return [north$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$1];\n            },\n            onLtr: function () {\n              return [south$1];\n            }\n          }\n        };\n      };\n      return useFixedToolbarContainer ? fixedToolbarAnchor : standardAnchor;\n    };\n    var getToolbarOverflowAnchor = function (lazyMoreButton) {\n      return function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyMoreButton(),\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          }\n        };\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          anchor: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Option.some(Selection.range(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor = function (bodyElement) {\n      return function (element) {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, lazyMoreButton) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return Element.fromDom(editor.getBody());\n      };\n      return {\n        toolbar: getToolbarAnchor(bodyElement, lazyAnchorbar, useFixedToolbarContainer),\n        toolbarOverflow: getToolbarOverflowAnchor(lazyMoreButton),\n        banner: getBannerAnchor(bodyElement, lazyAnchorbar, lazyMoreButton),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor(bodyElement)\n      };\n    };\n    var Anchors = { getAnchors: getAnchors };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = ColorSwatch.colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors$1 = function (editor) {\n      return function () {\n        return Settings.hasCustomColors(editor);\n      };\n    };\n    var getColors$1 = function (editor) {\n      return function () {\n        return Settings.getColors(editor);\n      };\n    };\n    var getColorCols$2 = function (editor) {\n      return function () {\n        return ColorSwatch.getColorCols(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors$1(editor),\n        getColors: getColors$1(editor),\n        getColorCols: getColorCols$2(editor)\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            icon: 'bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            icon: 'italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            icon: 'underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            icon: 'strike-through',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            icon: 'superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            icon: 'subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            icon: 'code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            icon: 'align-left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            icon: 'align-center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            icon: 'align-right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            icon: 'align-justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = 'custom-' + fmt.title.toLowerCase();\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatName,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatName,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign({}, acc, { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$3 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = {\n          type: 'submenu',\n          isSelected: constant(false),\n          getStylePreview: function () {\n            return Option.none();\n          }\n        };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = generate$1(item.title);\n        var customSpec = {\n          type: 'formatter',\n          format: formatName,\n          isSelected: isSelectedFor(formatName),\n          getStylePreview: getPreviewFor(formatName)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasKey$1(item, 'items')) {\n            var newItems_1 = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), {\n              getStyleItems: function () {\n                return newItems_1;\n              }\n            });\n          } else if (hasKey$1(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$7 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styleAttr: editor.formatter.getCssText(format)\n          }) : Option.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('init', function () {\n        var formats = getStyleFormats(editor);\n        var enriched = register$3(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$3(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var trim$1 = global$e.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$7 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(Element.fromDom(root), selector), function (element) {\n        return element.dom();\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$1('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$7('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$7('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim$1(target.title).length > 0;\n    };\n    var find$5 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$5 };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$1(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = domGlobals.localStorage.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          domGlobals.console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        domGlobals.console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      domGlobals.localStorage.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n      var itemsWithoutUrl = filter(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$1(global$e.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getOpt = function (obj, key) {\n      return hasOwnProperty$2.call(obj, key) ? Option.some(obj[key]) : Option.none();\n    };\n    var getTextSetting = function (settings, name, defaultValue) {\n      var value = getOpt(settings, name).getOr(defaultValue);\n      return isString(value) ? Option.some(value) : Option.none();\n    };\n    var getPicker = function (settings) {\n      return Option.some(settings.file_picker_callback).filter(isFunction);\n    };\n    var getPickerTypes = function (settings) {\n      var optFileTypes = Option.some(settings.file_picker_types).filter(isTruthy);\n      var optLegacyTypes = Option.some(settings.file_browser_callback_types).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(settings).fold(function () {\n        return false;\n      }, function (_picker) {\n        return optTypes.fold(function () {\n          return true;\n        }, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (settings, filetype) {\n      var pickerTypes = getPickerTypes(settings);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(settings) : Option.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(settings) : Option.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor.settings, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = global$e.extend({ filetype: filetype }, Option.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getLinkInformation = function (editor) {\n      if (editor.settings.typeahead_urls === false) {\n        return Option.none();\n      }\n      return Option.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(editor.settings, 'anchor_top', '#top').getOrUndefined(),\n        anchorBottom: getTextSetting(editor.settings, 'anchor_bottom', '#bottom').getOrUndefined()\n      });\n    };\n    var getValidationHandler = function (editor) {\n      var validatorHandler = editor.settings.filepicker_validator_handler;\n      return isFunction(validatorHandler) ? Option.some(validatorHandler) : Option.none();\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var isDraggableModal$1 = function (editor) {\n      return function () {\n        return isDraggableModal(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal$1(editor) };\n    };\n\n    var init$8 = function (sink, editor, lazyAnchorbar, lazyMoreButton) {\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$5.translate\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: Anchors.getAnchors(editor, lazyAnchorbar, lazyMoreButton),\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$7(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor)\n      };\n      return backstage;\n    };\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n\n    var schema$j = constant([\n      strict$1('dom'),\n      defaulted$1('shell', true),\n      field$1('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function (detail) {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$7 = constant([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$9 = function (detail, components, spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          domGlobals.console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Option.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite$1({\n      name: 'Toolbar',\n      configFields: schema$j(),\n      partFields: parts$7(),\n      factory: factory$9,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var generate$6 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant(b), function (v) {\n          return {\n            len: v.finish(),\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output$1 = Immutable('within', 'extra', 'withinWidth');\n    var apportion = function (units, total, len) {\n      var parray = generate$6(units, function (unit, current) {\n        var width = len(unit);\n        return Option.some({\n          element: constant(unit),\n          start: constant(current),\n          finish: constant(current + width),\n          width: constant(width)\n        });\n      });\n      var within = filter(parray, function (unit) {\n        return unit.finish() <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width();\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: constant(within),\n        extra: constant(extra),\n        withinWidth: constant(withinWidth)\n      };\n    };\n    var toUnit = function (parray) {\n      return map(parray, function (unit) {\n        return unit.element();\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output$1(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output$1(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output$1(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra().length === 0 ? Option.some(divide) : Option.none();\n    };\n    var partition$3 = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within();\n      var extra = divide.extra();\n      var withinWidth = divide.withinWidth();\n      if (extra.length === 1 && extra[0].width() <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setStoredGroups = function (toolbar, storedGroups) {\n      var bGroups = map(storedGroups, function (g) {\n        return premade$1(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (overflow, overflowButton) {\n      return overflow.bind(function (overf) {\n        return search$1(overf.element()).bind(function (focusedElm) {\n          return overf.getSystem().getByDom(focusedElm).toOption();\n        });\n      }).orThunk(function () {\n        return overflowButton.filter(Focusing.isFocused);\n      });\n    };\n    var refresh = function (toolbar, detail, overflow, isOpen) {\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowButton = getPart(toolbar, detail, 'overflow-button');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$2(primary.element(), 'visibility', 'hidden');\n      var focusedComp = findFocusedComp(overflow, overflowButton);\n      overflow.each(function (overf) {\n        Toolbar.setGroups(overf, []);\n      });\n      var groups = detail.builtGroups.get();\n      setStoredGroups(primary, groups.concat([overflowGroup]));\n      var total = get$7(primary.element());\n      var overflows = partition$3(total, groups, function (comp) {\n        return get$7(comp.element());\n      }, overflowGroup);\n      if (overflows.extra().length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        overflow.each(function (overf) {\n          Toolbar.setGroups(overf, []);\n        });\n      } else {\n        setStoredGroups(primary, overflows.within());\n        overflow.each(function (overf) {\n          setStoredGroups(overf, overflows.extra());\n        });\n      }\n      remove$6(primary.element(), 'visibility');\n      reflow(primary.element());\n      overflow.each(function (overf) {\n        overflowButton.each(function (button) {\n          return Toggling.set(button, isOpen(overf));\n        });\n        focusedComp.each(Focusing.focus);\n      });\n    };\n\n    var schema$k = constant([\n      strict$1('items'),\n      markers(['itemSelector']),\n      field$1('tgroupBehaviours', [Keying])\n    ]);\n    var parts$8 = constant([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$a = function (detail, components, spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite$1({\n      name: 'ToolbarGroup',\n      configFields: schema$k(),\n      partFields: parts$8(),\n      factory: factory$a\n    });\n\n    var schema$l = constant([\n      field$1('splitToolbarBehaviours', []),\n      state$1('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n    var spec = function (detail, components, spec, externals, extras) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      var setGroups = function (toolbar, groups) {\n        doSetGroups(toolbar, groups);\n        extras.refresh(toolbar, detail);\n      };\n      var getMoreButton = function (toolbar) {\n        return getPart(toolbar, detail, 'overflow-button');\n      };\n      var getOverflow = function (toolbar) {\n        return extras.getOverflow(toolbar);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: __assign({}, extras.coupling, {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign({}, externals['overflow-group'](), {\n                  items: [Button.sketch(__assign({}, externals['overflow-button'](), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            })\n          }),\n          config('toolbar-toggle-events', [run(toolbarToggleEvent, function (toolbar) {\n              extras.toggleToolbar(toolbar, detail, externals);\n            })])\n        ]),\n        apis: {\n          setGroups: setGroups,\n          refresh: function (toolbar) {\n            extras.refresh(toolbar, detail);\n          },\n          getMoreButton: function (toolbar) {\n            return getMoreButton(toolbar);\n          },\n          getOverflow: function (toolbar) {\n            return getOverflow(toolbar);\n          },\n          toggle: function (toolbar) {\n            extras.toggleToolbar(toolbar, detail, externals);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n\n    var schema$m = constant([\n      markers(['overflowToggledClass']),\n      strict$1('getAnchor'),\n      strict$1('lazySink')\n    ].concat(schema$l()));\n    var parts$9 = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$j(),\n        name: 'primary'\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$j(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Option.none();\n                }\n              })])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var toggleToolbar = function (toolbar, detail, externals) {\n      var sandbox = Coupling.getCoupled(toolbar, 'sandbox');\n      if (Sandboxing.isOpen(sandbox)) {\n        Sandboxing.close(sandbox);\n      } else {\n        Sandboxing.open(sandbox, externals.overflow());\n      }\n    };\n    var isOpen$1 = function (over) {\n      return over.getSystem().isConnected();\n    };\n    var refresh$1 = function (toolbar, detail) {\n      var overflow = Sandboxing.getState(Coupling.getCoupled(toolbar, 'sandbox'));\n      refresh(toolbar, detail, overflow, isOpen$1);\n      overflow.each(function (overf) {\n        var sink = detail.lazySink(toolbar).getOrDie();\n        var anchor = detail.getAnchor(toolbar);\n        Positioning.position(sink, anchor, overf);\n      });\n    };\n    var makeSandbox$1 = function (toolbar, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, overf) {\n        refresh$1(toolbar, detail);\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          Toggling.on(button);\n          ariaOwner.link(button.element());\n        });\n        Keying.focusIn(overf);\n      };\n      var onClose = function () {\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          Toggling.off(button);\n          Focusing.focus(button);\n          ariaOwner.unlink(button.element());\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id() }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Option.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(toolbar, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(toolbar).getOrDie();\n            }\n          })\n        ])\n      };\n    };\n    var factory$b = function (detail, components, spec$1, externals) {\n      return spec(detail, components, spec$1, externals, {\n        refresh: refresh$1,\n        toggleToolbar: toggleToolbar,\n        getOverflow: function (toolbar) {\n          return Sandboxing.getState(Coupling.getCoupled(toolbar, 'sandbox'));\n        },\n        coupling: {\n          sandbox: function (toolbar) {\n            return makeSandbox$1(toolbar, detail);\n          }\n        }\n      });\n    };\n    var SplitFloatingToolbar = composite$1({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$m(),\n      partFields: parts$9(),\n      factory: factory$b,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        getMoreButton: function (apis, toolbar) {\n          return apis.getMoreButton(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element();\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$5(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$4(component.element(), slideConfig.openClass);\n      add$2(component.element(), slideConfig.closedClass);\n      set$2(component.element(), getDimensionProperty(slideConfig), '0px');\n      reflow(component.element());\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$4(component.element(), slideConfig.closedClass);\n      add$2(component.element(), slideConfig.openClass);\n      remove$6(component.element(), getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$2(component.element(), getDimensionProperty(slideConfig), getDimension(slideConfig, component.element()));\n      reflow(component.element());\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element());\n      });\n      slideState.setCollapsed();\n      set$2(component.element(), getDimensionProperty(slideConfig), size);\n      reflow(component.element());\n      var root = getAnimationRoot(component, slideConfig);\n      remove$4(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element());\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Option.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has$2(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element());\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element());\n      var startPartialGrow = function () {\n        set$2(component.element(), getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element());\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$4(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$2(component.element(), getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$2 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element(), getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element());\n        set$2(component.element(), getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) === true || isShrinking(component, slideConfig) === true;\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        refresh: refresh$2,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit$6 = function (base, slideConfig) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$6({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$6({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$d = function (slideConfig, slideState) {\n      return derive([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event().raw();\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element(), slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        exhibit: exhibit$6,\n        events: events$d\n    });\n\n    var SlidingSchema = [\n      strict$1('closedClass'),\n      strict$1('openClass'),\n      strict$1('shrinkingClass'),\n      strict$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted$1('expanded', false),\n      strictOf('dimension', choose$1('property', {\n        width: [\n          output('property', 'width'),\n          output('getDimension', function (elem) {\n            return get$7(elem) + 'px';\n          })\n        ],\n        height: [\n          output('property', 'height'),\n          output('getDimension', function (elem) {\n            return get$6(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$9 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$5({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        init: init$9\n    });\n\n    var Sliding = create$1({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var schema$n = constant([markers([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ])].concat(schema$l()));\n    var parts$a = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$j(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$j(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Option.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var toggleToolbar$1 = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overf) {\n        refresh$3(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var isOpen$2 = function (overf) {\n      return Sliding.hasGrown(overf);\n    };\n    var refresh$3 = function (toolbar, detail) {\n      var overflow = getPart(toolbar, detail, 'overflow');\n      refresh(toolbar, detail, overflow, isOpen$2);\n      overflow.each(Sliding.refresh);\n    };\n    var factory$c = function (detail, components, spec$1, externals) {\n      return spec(detail, components, spec$1, externals, {\n        refresh: refresh$3,\n        toggleToolbar: toggleToolbar$1,\n        getOverflow: function (toolbar) {\n          return getPart(toolbar, detail, 'overflow');\n        },\n        coupling: {}\n      });\n    };\n    var SplitSlidingToolbar = composite$1({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$n(),\n      partFields: parts$a(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        getMoreButton: function (apis, toolbar) {\n          return apis.getMoreButton(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        }\n      }\n    });\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([strictBoolean('readonly')]);\n    var setDisabledAll = function (element, state) {\n      all('*', element.element()).forEach(function (elm) {\n        element.getSystem().getByDom(elm).each(function (comp) {\n          if (comp.hasConfigured(Disabling)) {\n            Disabling.set(comp, state);\n          }\n        });\n      });\n    };\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element();\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var toggleToReadOnly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      broadcastReadonly(uiComponents, readonly);\n      all('*', outerContainer.element()).forEach(function (elm) {\n        outerContainer.getSystem().getByDom(elm).each(function (comp) {\n          if (comp.hasConfigured(Disabling)) {\n            Disabling.set(comp, readonly);\n          }\n        });\n      });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.readonly) {\n          toggleToReadOnly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return toggleToReadOnly(uiComponents, editor.readonly);\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var createReadonlyReceivingForOverflow = function (getOverflow) {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            getOverflow(comp).each(function (toolbar) {\n              setDisabledAll(toolbar, data.readonly);\n            });\n          }\n        }, _a)\n      });\n    };\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts().items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName, getOverflow) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached]),\n        createReadonlyReceivingForOverflow(getOverflow)\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec, getOverflow) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Option.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Option.some('more-drawer'),\n            disabled: false,\n            tooltip: Option.some('More...'),\n            primary: false,\n            borderless: false\n          }, Option.none(), toolbarSpec.backstage.shared.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName, getOverflow)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec, SplitFloatingToolbar.getOverflow);\n      var primary = SplitFloatingToolbar.parts().primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign({}, baseSpec, {\n        lazySink: toolbarSpec.getSink,\n        getAnchor: function () {\n          return toolbarSpec.backstage.shared.anchors.toolbarOverflow();\n        },\n        parts: __assign({}, baseSpec.parts, {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow']\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts().primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts().overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec, SplitSlidingToolbar.getOverflow);\n      return SplitSlidingToolbar.sketch(__assign({}, baseSpec, {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        components: [Toolbar.parts().groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName, constant(Option.none()))\n      });\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      strictString('type'),\n      strictFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf([strictString('type')].concat(baseMenuButtonFields));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      strictString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted$1('columns', 1),\n      strictFunction('onAction'),\n      strictFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      strictString('type'),\n      strictFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', function () {\n        return false;\n      }),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted$1('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted$1('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted$1('type', 'contextform'),\n      defaultedFunction('initValue', function () {\n        return '';\n      }),\n      optionString('label'),\n      strictArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var contextToolbarSchema = objOf([\n      defaulted$1('type', 'contexttoolbar'),\n      strictString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var getState$2 = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        getState: getState$2\n    });\n\n    var events$e = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          detachChildren(component);\n          each(newComponents, function (c) {\n            attach(component, component.getSystem().build(c));\n          });\n        });\n      };\n      return derive([\n        run(receive(), function (component, message) {\n          var channel = reflectingConfig.channel;\n          if (contains(message.channels(), channel)) {\n            update(component, message.data());\n          }\n        }),\n        runOnAttached(function (comp, se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        events: events$e\n    });\n\n    var init$a = function (spec) {\n      var cell = Cell(Option.none());\n      var set = function (optS) {\n        return cell.set(optS);\n      };\n      var clear = function () {\n        return cell.set(Option.none());\n      };\n      var get = function () {\n        return cell.get();\n      };\n      var readState = function () {\n        return cell.get().getOr('none');\n      };\n      return {\n        readState: readState,\n        get: get,\n        set: set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        init: init$a\n    });\n\n    var ReflectingSchema = [\n      strict$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var Reflecting = create$1({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$o = constant([\n      strict$1('toggleClass'),\n      strict$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted$1('getHotspot', Option.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Option.none()),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      strict$1('dom'),\n      onHandler('onOpen'),\n      field$1('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'arrow',\n      defaults: function (detail) {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'button',\n      defaults: function (detail) {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$b = constant([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$d = function (detail, components, spec, externals) {\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Option.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Option.some(true);\n      };\n      var buttonEvents = merge(derive([runOnAttached(function (component, simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$1('aria');\n            set$1(descriptor.element(), 'id', descriptorId);\n            set$1(component.element(), 'aria-describedby', descriptorId);\n          });\n        })]), events$7(Option.some(action)));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        eventOrder: __assign({}, detail.eventOrder, {\n          'alloy.execute': [\n            'disabling',\n            'toggling',\n            'alloy.base.behaviour'\n          ]\n        }),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite$1({\n      name: 'SplitDropdown',\n      configFields: schema$o(),\n      partFields: parts$b(),\n      factory: factory$d\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$1('focus-button');\n    var rtlIcon$1 = [\n      'checklist',\n      'ordered-list'\n    ];\n    var rtlTransform$1 = [\n      'indent',\n      'outdent',\n      'table-insert-column-after',\n      'table-insert-column-before',\n      'unordered-list'\n    ];\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _a;\n      var getIconName = function (iconName) {\n        return global$5.isRtl() && contains(rtlIcon$1, iconName) ? iconName + '-rtl' : iconName;\n      };\n      var needsRtlClass = global$5.isRtl() && icon.exists(function (name) {\n        return contains(rtlTransform$1, name);\n      });\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []).concat(needsRtlClass ? ['tox-tbtn__icon-rtl'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_a = {}, _a[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _a),\n        buttonBehaviours: derive$1([config('common-button-display-events', [run(mousedown(), function (button, se) {\n              se.event().prevent();\n              emit(button, focusButtonEvent);\n            })])].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Option.none(), Option.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(spec.disabled)\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Option.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(function () {\n            return false;\n          }), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _a;\n      var displayChannel = generate$1('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant$1(comp.element(), 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant$1(comp.element(), 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$1(comp.element(), 'aria-pressed', state);\n            descendant$1(comp.element(), 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant$1(comp.element(), 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: merge({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (a, b, c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(false),\n          config('split-dropdown-events', [\n            run(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _a),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts().button(renderCommonStructure(spec.icon, spec.text, Option.none(), Option.some(displayChannel), Option.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts().arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$c('chevron-down', sharedBackstage.providers.icons)\n            }\n          }),\n          SplitDropdown.parts()['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute$1 = function (memInput, original) {\n      return run(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event().buttonApi());\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign({}, rest, {\n        type: 'button',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign({}, rest, {\n        type: 'togglebutton',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var generateOne$1 = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate$7 = function (memInput, buttons, providersBackstage) {\n      var mementos = map(buttons, function (button) {\n        return record(generateOne$1(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Option.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Option.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var renderContextForm = function (ctx, backstage) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Option.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Option.none();\n            }\n          })])\n      }));\n      var commands = generate$7(memInput, ctx.commands, backstage.shared.providers);\n      return renderToolbar({\n        uid: generate$1('context-toolbar'),\n        initGroups: [\n          {\n            title: Option.none(),\n            items: [memInput.asSpec()]\n          },\n          {\n            title: Option.none(),\n            items: commands.asSpecs()\n          }\n        ],\n        onEscape: Option.none,\n        cyclicKeying: true,\n        backstage: backstage,\n        getSink: function () {\n          return Result.error('');\n        }\n      });\n    };\n    var ContextForm = { renderContextForm: renderContextForm };\n\n    var forwardSlideEvent = generate$1('forward-slide');\n    var backSlideEvent = generate$1('backward-slide');\n    var changeSlideEvent = generate$1('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element(), 'visibility');\n          });\n          remove$4(comp.element(), resizingClass);\n          remove$6(comp.element(), 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, se) {\n              InlineView.getContent(comp).each(function (c) {\n              });\n              remove$4(comp.element(), resizingClass);\n              remove$6(comp.element(), 'width');\n            }),\n            run(changeSlideEvent, function (comp, se) {\n              remove$6(comp.element(), 'width');\n              var currentWidth = get$7(comp.element());\n              InlineView.setContent(comp, se.event().contents());\n              add$2(comp.element(), resizingClass);\n              var newWidth = get$7(comp.element());\n              set$2(comp.element(), 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event().focus().bind(function (f) {\n                  focus$1(f);\n                  return search$1(comp.element());\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active();\n                });\n              });\n              global$2.setTimeout(function () {\n                set$2(comp.element(), 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active()\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event().forwardContents(),\n                focus: Option.none()\n              });\n            }),\n            run(backSlideEvent, function (comp, se) {\n              last(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade$1(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Option.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var getHorizontalBounds = function (editor, scroll, contentAreaBox) {\n      var x = Math.max(scroll.left(), contentAreaBox.x());\n      var contentBoxWidth = contentAreaBox.right() - x;\n      var maxViewportWidth = domGlobals.window.innerWidth - (x - scroll.left());\n      var width = Math.min(contentBoxWidth, maxViewportWidth);\n      return {\n        x: x,\n        width: width\n      };\n    };\n    var getIframeBounds = function (editor, scroll, contentAreaBox) {\n      var _a = getHorizontalBounds(editor, scroll, contentAreaBox), x = _a.x, width = _a.width;\n      var containerBox = box(Element.fromDom(editor.getContainer()));\n      var y = Math.max(scroll.top(), contentAreaBox.y());\n      var contentBoxHeight = containerBox.bottom() - y;\n      var maxViewportHeight = domGlobals.window.innerHeight - (y - scroll.top());\n      var height = Math.min(contentBoxHeight, maxViewportHeight);\n      return bounds(x, y, width, height);\n    };\n    var getInlineBounds = function (editor, scroll, contentAreaBox) {\n      var _a = getHorizontalBounds(editor, scroll, contentAreaBox), x = _a.x, width = _a.width;\n      var containerBox = box(Element.fromDom(editor.getContainer()));\n      var windowHeight = domGlobals.window.innerHeight;\n      var scrollTop = scroll.top();\n      if (containerBox.y() >= contentAreaBox.bottom()) {\n        var bottom = Math.min(windowHeight + scrollTop, containerBox.y());\n        var height = bottom - scrollTop;\n        return bounds(x, scrollTop, width, height);\n      } else {\n        var y = Math.max(scrollTop, containerBox.bottom());\n        var height = windowHeight - (y - scrollTop);\n        return bounds(x, y, width, height);\n      }\n    };\n    var getDistractionFreeBounds = function (editor, scroll, contentAreaBox) {\n      var _a = getHorizontalBounds(editor, scroll, contentAreaBox), x = _a.x, width = _a.width;\n      return bounds(x, scroll.top(), width, domGlobals.window.innerHeight);\n    };\n\n    var ancestor$2 = function (scope, transform, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n\n    var matchTargetWith = function (elem, toolbars) {\n      return findMap(toolbars, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom()) ? Option.some({\n          toolbarApi: toolbarApi,\n          elem: elem\n        }) : Option.none();\n      });\n    };\n    var lookup$1 = function (scopes, editor) {\n      var isRoot = function (elem) {\n        return elem.dom() === editor.getBody();\n      };\n      var startNode = Element.fromDom(editor.selection.getNode());\n      return matchTargetWith(startNode, scopes.inNodeScope).orThunk(function () {\n        return matchTargetWith(startNode, scopes.inEditorScope).orThunk(function () {\n          return ancestor$2(startNode, function (elem) {\n            return matchTargetWith(elem, scopes.inNodeScope);\n          }, isRoot);\n        });\n      });\n    };\n    var ToolbarLookup = { lookup: lookup$1 };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarApi) {\n        var contextForm = getOrDie(createContextForm(toolbarApi));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign({}, toolbarApi.launch, {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarApi) {\n        createContextToolbar(toolbarApi).each(function (contextToolbar) {\n          if (toolbarApi.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n    var ToolbarScopes = { categorise: categorise };\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var unbindCell = Cell(Option.none());\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var unbind = editor.formatter.formatChanged(name, api.setActive).unbind;\n          unbindCell.set(Option.some(unbind));\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return function () {\n          return unbindCell.get().each(function (unbind) {\n            return unbind();\n          });\n        };\n      };\n    };\n    var onActionToggleFormat = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n\n    var generateSelectItems = function (editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Option.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Option.none();\n          } else {\n            return Option.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Option.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, dataset, spec) {\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, dataset, spec) {\n      var _a = createMenuItems(editor, backstage, dataset, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return {\n          getComponent: function () {\n            return comp;\n          }\n        };\n      };\n      var onSetup = function (api) {\n        spec.setInitialValue.each(function (f) {\n          return f(api.getComponent());\n        });\n        return spec.nodeChangeHandler.map(function (f) {\n          var handler = f(api.getComponent());\n          editor.on('NodeChange', handler);\n          return function () {\n            editor.off('NodeChange', handler);\n          };\n        }).getOr(noop);\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Option.none() : Option.some(''),\n        icon: spec.icon,\n        tooltip: Option.from(spec.tooltip),\n        role: Option.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = readOptFrom$1(editor.settings, settingName).getOr(defaults);\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify'\n      }\n    ];\n    var getSpec = function (editor) {\n      var getMatchingValue = function () {\n        return find(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          return Option.none();\n        };\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(function () {\n          return 'left';\n        }, function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuIcon(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuIcon(comp);\n      });\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      return {\n        tooltip: 'Align',\n        icon: Option.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      var spec = getSpec(editor);\n      return createSelectButton(editor, backstage, spec.dataset, spec);\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var spec = getSpec(editor);\n      var menuItems = createMenuItems(editor, backstage, spec.dataset, spec);\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$1 = function (editor) {\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          if (isSystemFontStack(font)) {\n            return Option.from({\n              title: 'System Font',\n              format: font\n            });\n          } else {\n            return Option.none();\n          }\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Option.some({\n            tag: 'div',\n            styleAttr: item.indexOf('dings') === -1 ? 'font-family:' + item : ''\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(function () {\n          return font;\n        }, function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      var spec = getSpec$1(editor);\n      return createSelectButton(editor, backstage, spec.dataset, spec);\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var spec = getSpec$1(editor);\n      var menuItems = createMenuItems(editor, backstage, spec.dataset, spec);\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var toLegacy = function (fontSize) {\n      return get(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Option.none();\n        var items = dataset.data;\n        var px = editor.queryCommandValue('FontSize');\n        if (px) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(px, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find(items, function (item) {\n              return item.format === px || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          px: px\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function () {\n        return constant(Option.none());\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, px = _a.px;\n        var text = matchOpt.fold(function () {\n          return px;\n        }, function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      var spec = getSpec$2(editor);\n      return createSelectButton(editor, backstage, spec.dataset, spec);\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var spec = getSpec$2(editor);\n      var menuItems = createMenuItems(editor, backstage, spec.dataset, spec);\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles, parents) {\n      var styles = getStyles();\n      return findMap(parents, function (parent) {\n        return find(styles, function (fmt) {\n          return editor.formatter.matchNode(parent, fmt.format);\n        });\n      }).orThunk(function () {\n        if (editor.formatter.match('p')) {\n          return Option.some({\n            title: 'Paragraph',\n            format: 'p'\n          });\n        }\n        return Option.none();\n      });\n    };\n    var getCurrentSelectionParents = function (editor) {\n      var currentNode = editor.selection.getStart(true) || editor.getBody();\n      return editor.dom.getParents(currentNode, function () {\n        return true;\n      }, editor.getBody());\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$3 = function (editor) {\n      var getMatchingValue = function (nodeChangeEvent) {\n        return findNearest(editor, function () {\n          return dataset.data;\n        }, nodeChangeEvent);\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styleAttr: editor.formatter.getCssText(format)\n          });\n        };\n      };\n      var updateSelectMenuText = function (parents, comp) {\n        var detectedFormat = getMatchingValue(parents);\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function (e) {\n          return updateSelectMenuText(e.parents, comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        var parents = getCurrentSelectionParents(editor);\n        updateSelectMenuText(parents, comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      var spec = getSpec$3(editor);\n      return createSelectButton(editor, backstage, spec.dataset, spec);\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var spec = getSpec$3(editor);\n      var menuItems = createMenuItems(editor, backstage, spec.dataset, spec);\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec$4 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Option.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styleAttr: editor.formatter.getCssText(format)\n          }) : Option.none();\n        };\n      };\n      var updateSelectMenuText = function (parents, comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, function () {\n          return flattenedItems;\n        }, parents);\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Option.some(function (comp) {\n        return function (e) {\n          return updateSelectMenuText(e.parents, comp);\n        };\n      });\n      var setInitialValue = Option.some(function (comp) {\n        var parents = getCurrentSelectionParents(editor);\n        updateSelectMenuText(parents, comp);\n      });\n      return {\n        tooltip: 'Formats',\n        icon: Option.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: constant(Option.none()),\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var data = backstage.styleselect;\n      return createSelectButton(editor, backstage, data, getSpec$4(editor));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var data = backstage.styleselect;\n      var menuItems = createMenuItems(editor, backstage, data, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Option.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras) {\n      return get(types, spec.type).fold(function () {\n        domGlobals.console.error('skipping button defined by', spec);\n        return Option.none();\n      }, function (render) {\n        return Option.some(render(spec, extras));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map(defaultToolbar, function (group) {\n        var items = filter(group.items, function (subItem) {\n          return has(buttons, subItem) || has(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has(t, 'name') && has(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        domGlobals.console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, extras, prefixes) {\n      return get(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Option.none();\n        });\n      }, function (spec) {\n        return extractFrom(spec, extras);\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map(toolbarGroups, function (group) {\n        var items = bind(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, extras, prefixes).toArray();\n        });\n        return {\n          title: Option.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var register$4 = function (editor, registryContextToolbars, sink, extras) {\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Option.some(true);\n        }\n      }));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var getBounds = function () {\n        var scroll = get$8();\n        var contentAreaBox = box(Element.fromDom(editor.getContentAreaContainer()));\n        if (editor.inline && !toolbarOrMenubarEnabled) {\n          return Option.some(getDistractionFreeBounds(editor, scroll, contentAreaBox));\n        } else if (editor.inline) {\n          return Option.some(getInlineBounds(editor, scroll, contentAreaBox));\n        } else {\n          return Option.some(getIframeBounds(editor, scroll, contentAreaBox));\n        }\n      };\n      var getViewportTop = function () {\n        var isToolbarDocked = get$4(Element.fromDom(editor.getContainer()), 'position') === 'fixed';\n        return toolbarOrMenubarEnabled && isToolbarDocked ? editor.getContainer().getBoundingClientRect().bottom : 0;\n      };\n      var shouldContextToolbarHide = function () {\n        var nodeBounds = lastElement.get().map(function (ele) {\n          return ele.getBoundingClientRect();\n        }).getOr(editor.selection.getRng().getBoundingClientRect());\n        var viewportHeight = defaultView(Element.fromDom(editor.getBody())).dom().innerHeight;\n        var aboveViewport = nodeBounds.bottom < getViewportTop();\n        var belowViewport = nodeBounds.top > viewportHeight;\n        return aboveViewport || belowViewport;\n      };\n      var hideOrRepositionIfNecessary = function () {\n        lastAnchor.get().each(function (anchor) {\n          var contextBarEle = contextbar.element();\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$2(contextBarEle, 'display', 'none');\n          } else {\n            Positioning.positionWithinBounds(sink, anchor, contextbar, getBounds());\n          }\n        });\n      };\n      editor.on('init', function () {\n        editor.on('ScrollWindow', hideOrRepositionIfNecessary);\n        if (!editor.inline) {\n          var scroller = defaultView(Element.fromDom(editor.getBody()));\n          var onScroll_1 = bind$3(scroller, 'scroll', hideOrRepositionIfNecessary);\n          editor.on('remove', function () {\n            onScroll_1.unbind();\n          });\n        }\n      });\n      var lastAnchor = Cell(Option.none());\n      var lastElement = Cell(Option.none());\n      var timer = Cell(null);\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return ToolbarScopes.categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar(toolbarApi);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildToolbar = function (ctx) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        return ctx.type === 'contexttoolbar' ? function () {\n          var allButtons = merge(buttons, scopes.formNavigators);\n          var initGroups = identifyButtons(editor, {\n            buttons: allButtons,\n            toolbar: ctx.items\n          }, extras, Option.some(['form:']));\n          return renderToolbar({\n            uid: generate$1('context-toolbar'),\n            initGroups: initGroups,\n            onEscape: Option.none,\n            cyclicKeying: true,\n            backstage: extras.backstage,\n            getSink: function () {\n              return Result.error('');\n            }\n          });\n        }() : function () {\n          return ContextForm.renderContextForm(ctx, extras.backstage);\n        }();\n      };\n      editor.on(showContextToolbarEvent, function (e) {\n        var scopes = getScopes();\n        readOptFrom$1(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n          launchContext(ctx, e.target === editor ? Option.none() : Option.some(e));\n          InlineView.getContent(contextbar).each(Keying.focusIn);\n        });\n      });\n      var bubbleSize = 12;\n      var bubbleAlignments = {\n        valignCentre: [],\n        alignCentre: [],\n        alignLeft: ['tox-pop--align-left'],\n        alignRight: ['tox-pop--align-right'],\n        right: ['tox-pop--right'],\n        left: ['tox-pop--left'],\n        bottom: ['tox-pop--bottom'],\n        top: ['tox-pop--top']\n      };\n      var anchorOverrides = { maxHeightFunction: expandable() };\n      var lineAnchorSpec = {\n        bubble: nu$7(bubbleSize, 0, bubbleAlignments),\n        layouts: {\n          onLtr: function () {\n            return [east$1];\n          },\n          onRtl: function () {\n            return [west$1];\n          }\n        },\n        overrides: anchorOverrides\n      };\n      var anchorSpec = {\n        bubble: nu$7(0, bubbleSize, bubbleAlignments),\n        layouts: {\n          onLtr: function () {\n            return [\n              north$1,\n              south$1,\n              northeast$1,\n              southeast$1,\n              northwest$1,\n              southwest$1,\n              north$3,\n              south$3,\n              northeast$3,\n              southeast$3,\n              northwest$3,\n              southwest$3\n            ];\n          },\n          onRtl: function () {\n            return [\n              north$1,\n              south$1,\n              northwest$1,\n              southwest$1,\n              northeast$1,\n              southeast$1,\n              north$3,\n              south$3,\n              northwest$3,\n              southwest$3,\n              northeast$3,\n              southeast$3\n            ];\n          }\n        },\n        overrides: anchorOverrides\n      };\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? extras.backstage.shared.anchors.node(element) : extras.backstage.shared.anchors.cursor();\n        var anchor = deepMerge(anchorage, position === 'line' ? lineAnchorSpec : anchorSpec);\n        return anchor;\n      };\n      var launchContext = function (toolbarApi, elem) {\n        clearTimer();\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var sElem = elem.map(Element.fromDom);\n        var anchor = getAnchor(toolbarApi.position, sElem);\n        lastAnchor.set(Option.some(anchor));\n        lastElement.set(elem);\n        var contextBarEle = contextbar.element();\n        remove$6(contextBarEle, 'display');\n        InlineView.showWithinBounds(contextbar, anchor, wrapInPopDialog(toolbarSpec), getBounds());\n        if (shouldContextToolbarHide()) {\n          set$2(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = function () {\n        var scopes = getScopes();\n        ToolbarLookup.lookup(scopes, editor).fold(function () {\n          lastAnchor.set(Option.none());\n          InlineView.hide(contextbar);\n        }, function (info) {\n          launchContext(info.toolbarApi, Option.some(info.elem.dom()));\n        });\n      };\n      var clearTimer = function () {\n        var current = timer.get();\n        if (current !== null) {\n          global$2.clearTimeout(current);\n          timer.set(null);\n        }\n      };\n      var resetTimer = function (t) {\n        clearTimer();\n        timer.set(t);\n      };\n      editor.on('init', function () {\n        editor.on('click keyup SetContent ObjectResized ResizeEditor', function (e) {\n          resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n        });\n        editor.on('focusout', function (e) {\n          global$2.setEditorTimeout(editor, function () {\n            if (search$1(sink.element()).isNone() && search$1(contextbar.element()).isNone()) {\n              lastAnchor.set(Option.none());\n              InlineView.hide(contextbar);\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.readonly) {\n            lastAnchor.set(Option.none());\n            InlineView.hide(contextbar);\n          }\n        });\n        editor.on('NodeChange', function (e) {\n          search$1(contextbar.element()).fold(function () {\n            resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n          }, function (_) {\n          });\n        });\n      });\n    };\n    var ContextToolbar = { register: register$4 };\n\n    var setup$3 = function (editor, mothership, uiMothership) {\n      var onMousedown = bind$3(Element.fromDom(domGlobals.document), 'mousedown', function (evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([dismissPopups()], { target: evt.target() });\n        });\n      });\n      var onTouchstart = bind$3(Element.fromDom(domGlobals.document), 'touchstart', function (evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([dismissPopups()], { target: evt.target() });\n        });\n      });\n      var onMouseup = bind$3(Element.fromDom(domGlobals.document), 'mouseup', function (evt) {\n        if (evt.raw().button === 0) {\n          each([\n            mothership,\n            uiMothership\n          ], function (ship) {\n            ship.broadcastOn([mouseReleased()], { target: evt.target() });\n          });\n        }\n      });\n      var onContentMousedown = function (raw) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([dismissPopups()], { target: Element.fromDom(raw.target) });\n        });\n      };\n      editor.on('mousedown', onContentMousedown);\n      editor.on('touchstart', onContentMousedown);\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          each([\n            mothership,\n            uiMothership\n          ], function (ship) {\n            ship.broadcastOn([mouseReleased()], { target: Element.fromDom(raw.target) });\n          });\n        }\n      };\n      editor.on('mouseup', onContentMouseup);\n      var onWindowScroll = function (evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(windowScroll(), evt);\n        });\n      };\n      editor.on('ScrollWindow', onWindowScroll);\n      var onWindowResize = function (evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(windowResize(), evt);\n        });\n      };\n      editor.on('ResizeWindow', onWindowResize);\n      editor.on('remove', function () {\n        editor.off('mousedown', onContentMousedown);\n        editor.off('touchstart', onContentMousedown);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ScrollWindow', onWindowScroll);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n    var Events$1 = { setup: setup$3 };\n\n    var schema$p = constant([\n      defaulted$1('shell', false),\n      strict$1('makeItem'),\n      defaulted$1('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function (detail) {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$c = constant([itemsPart]);\n    var name$2 = constant('CustomList');\n\n    var factory$e = function (detail, components, spec, external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          domGlobals.console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Option.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite$1({\n      name: name$2(),\n      configFields: schema$p(),\n      partFields: parts$c(),\n      factory: factory$e,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var parts$d = AlloyParts;\n    var partType$1 = PartType;\n\n    var factory$f = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Option.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run(mouseover(), function (comp, se) {\n              descendant$1(comp.element(), '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$3(se.event().target(), '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run(focusShifted(), function (comp, se) {\n              se.event().prevFocus().bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOption();\n              }).each(function (prev) {\n                se.event().newFocus().bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOption();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Option.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single$2({\n      factory: factory$f,\n      name: 'silver.Menubar',\n      configFields: [\n        strict$1('dom'),\n        strict$1('uid'),\n        strict$1('onEscape'),\n        strict$1('backstage'),\n        defaulted$1('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var owner$4 = 'container';\n    var schema$q = [field$1('slotBehaviours', [])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$2 = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne(owner$4, getPartName$1(name), config);\n        };\n        return {\n          slot: slot,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite(owner$4, schema$q, fieldParts, make$7, spec);\n    };\n    var make$7 = function (detail, components, spec) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        if (def === void 0) {\n          def = undefined;\n        }\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, key) {\n        return get$2(comp.element(), 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element();\n          remove$6(element, 'display');\n          remove$1(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element();\n          set$2(element, 'display', 'none');\n          set$1(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$b(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$1({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, makeApi);\n    var SlotContainer = __assign({}, slotApis, { sketch: sketch$2 });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$4 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return Option.from(editor.queryCommandValue('ToggleSidebar')).is(name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element().dom();\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run(slotVisibility(), function (sidepanel, se) {\n              var data = se.event();\n              var optSidePanelSpec = find(specs, function (config) {\n                return config.name === data.name();\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible() ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var fixSize = generate$1('FixSizeEvent');\n    var autoSize = generate$1('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element(), 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$7(slider.element()) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run(fixSize, function (comp, se) {\n              set$2(comp.element(), 'width', se.event().width());\n            }),\n            run(autoSize, function (comp, se) {\n              remove$6(comp.element(), 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var renderSpinner = function (providerBackstage) {\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-label': providerBackstage.translate('Loading...') },\n          classes: ['tox-throbber__busy-spinner']\n        },\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onTab: function () {\n              return Option.some(true);\n            },\n            onShiftTab: function () {\n              return Option.some(true);\n            }\n          }),\n          Focusing.config({})\n        ])\n      };\n    };\n    var toggleThrobber = function (comp, state, providerBackstage) {\n      var element = comp.element();\n      if (state === true) {\n        Replacing.set(comp, [renderSpinner(providerBackstage)]);\n        remove$6(element, 'display');\n        remove$1(element, 'aria-hidden');\n      } else {\n        Replacing.set(comp, []);\n        set$2(element, 'display', 'none');\n        set$1(element, 'aria-hidden', 'true');\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([Replacing.config({})]),\n        components: []\n      };\n    };\n    var setup$5 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = Cell(Option.none());\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          toggleThrobber(lazyThrobber(), state, sharedBackstage.providers);\n          throbberState.set(state);\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.get().each(global$2.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$2.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(Option.some(timerId));\n        } else {\n          toggle(e.state);\n          timer.set(Option.none());\n        }\n      });\n    };\n\n    var factory$g = function (detail, components, spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$d.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$d.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getToolbar: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$d.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$d.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        getMoreButton: function (comp) {\n          var toolbar = parts$d.getPart(comp, detail, 'toolbar');\n          return toolbar.bind(function (toolbar) {\n            return toolbar.getApis().getMoreButton(toolbar);\n          });\n        },\n        getThrobber: function (comp) {\n          return parts$d.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$d.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$d.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType$1.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [strict$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.split === ToolbarDrawer.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.split === ToolbarDrawer.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                uid: generate$1('multiple-toolbar-item'),\n                backstage: spec.backstage,\n                cyclicKeying: false,\n                getSink: spec.getSink,\n                initGroups: [],\n                onEscape: function () {\n                  return Option.none();\n                }\n              });\n            },\n            setupItem: function (mToolbar, tc, data, index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape')\n      ]\n    });\n    var partToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Option.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            backstage: spec.backstage,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton\n            }\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape'),\n        strict$1('getSink')\n      ]\n    });\n    var partSocket = partType$1.optional({\n      name: 'socket',\n      schema: [strict$1('dom')]\n    });\n    var partSidebar = partType$1.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [strict$1('dom')]\n    });\n    var partThrobber = partType$1.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [strict$1('dom')]\n    });\n    var OuterContainer = composite$1({\n      name: 'OuterContainer',\n      factory: factory$g,\n      configFields: [\n        strict$1('dom'),\n        strict$1('behaviours')\n      ],\n      partFields: [\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map(ts, function (g) {\n            return map(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        getMoreButton: function (apis, comp) {\n          return apis.getMoreButton(comp);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | forecolor backcolor | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable tableprops deletetable row column cell'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make$8 = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = merge(defaultMenus, registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter(menubar, function (menuName) {\n        return userDefinedMenus ? registry.menus.hasOwnProperty(menuName) && registry.menus[menuName].hasOwnProperty('items') || defaultMenus.hasOwnProperty(menuName) : defaultMenus.hasOwnProperty(menuName);\n      });\n      var menus = map(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make$8({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        Events.fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var SkinLoaded = { fireSkinLoaded: fireSkinLoaded$1 };\n\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      var skinUiCss;\n      if (skinUrl) {\n        skinUiCss = skinUrl + '/skin.min.css';\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && skinUiCss) {\n        global$7.DOM.styleSheetLoader.load(skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Option.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Option.none()));\n      }\n    };\n\n    var DOM = global$7.DOM;\n    var detection = PlatformDetection$1.detect();\n    var isTouch$4 = detection.deviceType.isTouch();\n    var setupEvents = function (editor) {\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(Position(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(Position(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resize = function () {\n        var docEle = editor.getDoc().documentElement;\n        var outer = lastWindowDimensions.get();\n        var inner = lastDocumentDimensions.get();\n        if (outer.left() !== contentWindow.innerWidth || outer.top() !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(Position(contentWindow.innerWidth, contentWindow.innerHeight));\n          Events.fireResizeContent(editor);\n        } else if (inner.left() !== docEle.offsetWidth || inner.top() !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(Position(docEle.offsetWidth, docEle.offsetHeight));\n          Events.fireResizeContent(editor);\n        }\n      };\n      DOM.bind(contentWindow, 'resize', resize);\n      var elementLoad = capture$1(Element.fromDom(editor.getBody()), 'load', resize);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        DOM.unbind(contentWindow, 'resize', resize);\n      });\n    };\n    var render = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      iframe(editor);\n      attachSystemAfter(Element.fromDom(args.targetNode), uiComponents.mothership);\n      attachSystem(body(), uiComponents.uiMothership);\n      editor.on('init', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(uiComponents.outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(uiComponents.outerContainer, rawUiConfig.sidebar);\n        setupEvents(editor);\n      });\n      var socket = OuterContainer.getSocket(uiComponents.outerContainer).getOrDie('Could not find expected socket element');\n      if (isTouch$4 === true) {\n        setAll$1(socket.element(), {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (ui, value) {\n        OuterContainer.toggleSidebar(uiComponents.outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(uiComponents.outerContainer);\n      });\n      var drawer = getToolbarDrawer(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (drawer === ToolbarDrawer.sliding || drawer === ToolbarDrawer.floating) {\n        editor.on('ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n          }\n          lastToolbarWidth.set(width);\n        });\n      }\n      return {\n        iframeContainer: socket.element().dom(),\n        editorContainer: uiComponents.outerContainer.element().dom()\n      };\n    };\n    var Iframe = {\n      render: render,\n      getBehaviours: function (_) {\n        return [];\n      }\n    };\n\n    var getOrigin = function (element, scroll) {\n      return offsetParent(element).orThunk(function () {\n        var marker = Element.fromTag('span');\n        before(element, marker);\n        var offsetParent$1 = offsetParent(marker);\n        remove(marker);\n        return offsetParent$1;\n      }).map(function (offsetP) {\n        var loc = absolute(offsetP);\n        return loc.translate(-scroll.left(), -scroll.top());\n      }).getOrThunk(function () {\n        return Position(0, 0);\n      });\n    };\n\n    var adt$c = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left(), -change.top());\n      };\n    };\n    var add$4 = function (change) {\n      return function (point) {\n        return point.translate(change.left(), change.top());\n      };\n    };\n    var transform$1 = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, Position(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform$1([\n        add$4(origin),\n        subtract(scroll)\n      ]), transform$1([subtract(scroll)]), transform$1([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform$1([add$4(origin)]), transform$1([]), transform$1([add$4(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform$1([]), transform$1([subtract(origin)]), transform$1([\n        add$4(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left() - a2.left()) <= xRange && Math.abs(a1.top() - a2.top()) <= yRange;\n    };\n    var toStyles = function (coord, scroll, origin) {\n      return coord.fold(function (x, y) {\n        return {\n          position: 'absolute',\n          left: x + 'px',\n          top: y + 'px'\n        };\n      }, function (x, y) {\n        return {\n          position: 'absolute',\n          left: x - origin.left() + 'px',\n          top: y - origin.top() + 'px'\n        };\n      }, function (x, y) {\n        return {\n          position: 'fixed',\n          left: x + 'px',\n          top: y + 'px'\n        };\n      });\n    };\n    var translate$1 = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return adt$c.offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return adt$c.absolute(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return adt$c.fixed(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left()), optY.getOr(original.top()));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, adt$c.offset), absorbOne(asAbsolute, adt$c.absolute), absorbOne(asFixed, adt$c.fixed));\n    };\n    var offset = adt$c.offset;\n    var absolute$2 = adt$c.absolute;\n    var fixed$1 = adt$c.fixed;\n\n    var appear = function (component, contextualInfo) {\n      add$2(component.element(), contextualInfo.transitionClass);\n      remove$4(component.element(), contextualInfo.fadeOutClass);\n      add$2(component.element(), contextualInfo.fadeInClass);\n    };\n    var disappear = function (component, contextualInfo) {\n      add$2(component.element(), contextualInfo.transitionClass);\n      remove$4(component.element(), contextualInfo.fadeInClass);\n      add$2(component.element(), contextualInfo.fadeOutClass);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y() < viewport.bottom() && box.bottom() > viewport.y();\n    };\n    var isCompletelyVisible = function (box, viewport) {\n      return box.y() >= viewport.y() && box.bottom() <= viewport.bottom();\n    };\n    var getAttr = function (elem, attr) {\n      return has$1(elem, attr) ? Option.some(parseInt(get$2(elem, attr), 10)) : Option.none();\n    };\n    var getPrior = function (component, dockInfo) {\n      var elem = component.element();\n      return getAttr(elem, dockInfo.leftAttr).bind(function (left) {\n        return getAttr(elem, dockInfo.topAttr).map(function (top) {\n          var w = get$7(component.element());\n          var h = get$6(component.element());\n          return bounds(left, top, w, h);\n        });\n      });\n    };\n    var setPrior = function (component, dockInfo, absLeft, absTop) {\n      var elem = component.element();\n      set$1(elem, dockInfo.leftAttr, absLeft);\n      set$1(elem, dockInfo.topAttr, absTop);\n    };\n    var clearPrior = function (component, dockInfo) {\n      var elem = component.element();\n      remove$1(elem, dockInfo.leftAttr);\n      remove$1(elem, dockInfo.topAttr);\n    };\n    var morphToAbsolute = function (component, dockInfo, viewport) {\n      return getPrior(component, dockInfo).bind(function (box) {\n        if (isCompletelyVisible(box, viewport)) {\n          clearPrior(component, dockInfo);\n          return Option.some(absolute$2(box.x(), box.y()));\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var morphToFixed = function (component, dockInfo, viewport, scroll, origin) {\n      var loc = absolute(component.element());\n      var box = bounds(loc.left(), loc.top(), get$7(component.element()), get$6(component.element()));\n      if (!isCompletelyVisible(box, viewport)) {\n        setPrior(component, dockInfo, loc.left(), loc.top());\n        var coord = absolute$2(loc.left(), loc.top());\n        var asFixed$1 = asFixed(coord, scroll, origin);\n        var viewportPt = absolute$2(viewport.x(), viewport.y());\n        var fixedViewport = asFixed(viewportPt, scroll, origin);\n        var fixedY = box.y() <= viewport.y() ? fixedViewport.top() : fixedViewport.top() + viewport.height() - box.height();\n        return Option.some(fixed$1(asFixed$1.left(), fixedY));\n      } else {\n        return Option.none();\n      }\n    };\n    var getMorph = function (component, dockInfo, viewport, scroll, origin) {\n      var isDocked = getRaw(component.element(), 'position').is('fixed');\n      return isDocked ? morphToAbsolute(component, dockInfo, viewport) : morphToFixed(component, dockInfo, viewport, scroll, origin);\n    };\n\n    var refresh$4 = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (elem) {\n          var box$1 = box(elem);\n          var isVisible = isPartiallyVisible(box$1, viewport);\n          var method = isVisible ? appear : disappear;\n          method(component, contextInfo);\n        });\n      });\n      var doc = owner(component.element());\n      var scroll = get$8(doc);\n      var origin = getOrigin(component.element(), scroll);\n      getMorph(component, config, viewport, scroll, origin).each(function (morph) {\n        var styles = toStyles(morph, scroll, origin);\n        setAll$1(component.element(), styles);\n      });\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        refresh: refresh$4\n    });\n\n    var events$f = function (dockInfo, dockState) {\n      return derive([\n        run(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (eq(component.element(), simulatedEvent.event().target())) {\n              remove$4(component.element(), contextInfo.transitionClass);\n              simulatedEvent.stop();\n            }\n          });\n        }),\n        run(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        events: events$f\n    });\n\n    var defaultLazyViewport = function (_component) {\n      var scroll = get$8();\n      return bounds(scroll.left(), scroll.top(), domGlobals.window.innerWidth, domGlobals.window.innerHeight);\n    };\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        strict$1('fadeInClass'),\n        strict$1('fadeOutClass'),\n        strict$1('transitionClass'),\n        strict$1('lazyContext')\n      ]),\n      defaulted$1('lazyViewport', defaultLazyViewport),\n      strict$1('leftAttr'),\n      strict$1('topAttr')\n    ];\n\n    var Docking = create$1({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis\n    });\n\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var floatContainer;\n      var DOM = global$7.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var splitSetting = getToolbarDrawer(editor);\n      var split = splitSetting === ToolbarDrawer.sliding || splitSetting === ToolbarDrawer.floating;\n      inline(editor);\n      var calcPosition = function (offset) {\n        if (offset === void 0) {\n          offset = 0;\n        }\n        var location = absolute(Element.fromDom(editor.getBody()));\n        return {\n          top: Math.round(location.top() - get$6(floatContainer.element())) + offset,\n          left: Math.round(location.left())\n        };\n      };\n      var setChromePosition = function (toolbar) {\n        var isDocked = getRaw(floatContainer.element(), 'position').is('fixed');\n        var offset = split ? toolbar.fold(function () {\n          return 0;\n        }, function (tbar) {\n          return tbar.components().length > 1 ? get$6(tbar.components()[1].element()) : 0;\n        }) : 0;\n        var position = calcPosition(offset);\n        if (isDocked) {\n          setAll(floatContainer.element(), tupleMap(position, function (value, key) {\n            return {\n              k: 'data-dock-' + key,\n              v: value\n            };\n          }));\n        } else {\n          setAll$1(floatContainer.element(), map$1(position, function (value) {\n            return value + 'px';\n          }));\n        }\n        Docking.refresh(floatContainer);\n      };\n      var updateChromeUi = function () {\n        var toolbar = OuterContainer.getToolbar(uiComponents.outerContainer);\n        if (split) {\n          OuterContainer.refreshToolbar(uiComponents.outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          setChromePosition(toolbar);\n        }\n      };\n      var show = function () {\n        set$2(uiComponents.outerContainer.element(), 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiComponents.uiMothership.element(), 'display');\n        updateChromeUi();\n      };\n      var hide = function () {\n        if (uiComponents.outerContainer) {\n          set$2(uiComponents.outerContainer.element(), 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$2(uiComponents.uiMothership.element(), 'display', 'none');\n      };\n      var render = function () {\n        if (floatContainer) {\n          show();\n          return;\n        }\n        floatContainer = uiComponents.outerContainer;\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, uiComponents.mothership);\n        attachSystem(uiContainer, uiComponents.uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(uiComponents.outerContainer, identifyMenus(editor, rawUiConfig));\n        if (!useFixedToolbarContainer) {\n          set$2(floatContainer.element(), 'position', 'absolute');\n        }\n        updateChromeUi();\n        show();\n        editor.on('NodeChange ResizeWindow', updateChromeUi);\n        editor.on('activate', show);\n        editor.on('deactivate', hide);\n        editor.nodeChanged();\n      };\n      editor.on('focus', render);\n      editor.on('blur hide', hide);\n      editor.on('init', function () {\n        if (editor.hasFocus()) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      return { editorContainer: uiComponents.outerContainer.element().dom() };\n    };\n    var getBehaviours$2 = function (editor) {\n      return useFixedContainer(editor) ? [] : [\n        Docking.config({\n          leftAttr: 'data-dock-left',\n          topAttr: 'data-dock-top',\n          contextual: {\n            lazyContext: function (_) {\n              return Option.from(editor).map(function (ed) {\n                return Element.fromDom(ed.getBody());\n              });\n            },\n            fadeInClass: 'tox-toolbar-dock-fadein',\n            fadeOutClass: 'tox-toolbar-dock-fadeout',\n            transitionClass: 'tox-toolbar-dock-transition'\n          }\n        }),\n        Focusing.config({})\n      ];\n    };\n    var Inline = {\n      render: render$1,\n      getBehaviours: getBehaviours$2\n    };\n\n    var register$5 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      global$e.each(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          onAction: function () {\n            return editor.execCommand(item.cmd);\n          },\n          icon: item.icon,\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      var alignNoneToolbarButton = {\n        name: 'alignnone',\n        text: 'No alignment',\n        cmd: 'JustifyNone',\n        icon: 'align-none'\n      };\n      editor.ui.registry.addButton(alignNoneToolbarButton.name, {\n        tooltip: alignNoneToolbarButton.text,\n        onAction: function () {\n          return editor.execCommand(alignNoneToolbarButton.cmd);\n        },\n        icon: alignNoneToolbarButton.icon\n      });\n    };\n    var AlignmentButtons = { register: register$5 };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$e.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: toggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name = 'h' + i;\n        editor.ui.registry.addToggleButton(name, {\n          text: name.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name),\n          onAction: toggleFormat(editor, name)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$e.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$e.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          },\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems = function (editor) {\n      global$e.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: toggleFormat(editor, 'code')\n      });\n    };\n    var register$6 = function (editor) {\n      registerButtons(editor);\n      registerMenuItems(editor);\n    };\n    var SimpleControls = { register: register$6 };\n\n    var toggleUndoRedoState = function (api, editor, type) {\n      var checkState = function () {\n        return editor.undoManager ? editor.undoManager[type]() : false;\n      };\n      var onUndoStateChange = function () {\n        api.setDisabled(editor.readonly || !checkState());\n      };\n      api.setDisabled(!checkState());\n      editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      return function () {\n        return editor.off('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      };\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var register$7 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons$1(editor);\n    };\n    var UndoRedo = { register: register$7 };\n\n    var toggleVisualAidState = function (api, editor) {\n      api.setActive(editor.hasVisual);\n      var onVisualAid = function (e) {\n        api.setActive(e.hasVisual);\n      };\n      editor.on('VisualAid', onVisualAid);\n      return function () {\n        return editor.off('VisualAid', onVisualAid);\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: function (api) {\n          return toggleVisualAidState(api, editor);\n        },\n        onAction: function () {\n          editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: function () {\n          return editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var register$8 = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems$2(editor);\n    };\n    var VisualAid = { register: register$8 };\n\n    var toggleOutdentState = function (api, editor) {\n      api.setDisabled(!editor.queryCommandState('outdent'));\n      var onNodeChange = function () {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      };\n      editor.on('NodeChange', onNodeChange);\n      return function () {\n        return editor.off('NodeChange', onNodeChange);\n      };\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: function (api) {\n          return toggleOutdentState(api, editor);\n        },\n        onAction: function () {\n          return editor.execCommand('outdent');\n        }\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: function () {\n          return editor.execCommand('indent');\n        }\n      });\n    };\n    var register$9 = function (editor) {\n      registerButtons$2(editor);\n    };\n    var IndentOutdent = { register: register$9 };\n\n    var register$a = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n    var ComplexControls = { register: register$a };\n\n    var setup$6 = function (editor, backstage) {\n      AlignmentButtons.register(editor);\n      SimpleControls.register(editor);\n      ComplexControls.register(editor, backstage);\n      UndoRedo.register(editor);\n      ColorSwatch.register(editor);\n      VisualAid.register(editor);\n      IndentOutdent.register(editor);\n    };\n    var FormatControls = { setup: setup$6 };\n\n    var nu$d = function (x, y) {\n      return {\n        anchor: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose$1 = function (pos, dx, dy) {\n      return nu$d(pos.x + dx, pos.y + dy);\n    };\n    var fromPageXY = function (e) {\n      return nu$d(e.pageX, e.pageY);\n    };\n    var fromClientXY = function (e) {\n      return nu$d(e.clientX, e.clientY);\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$7.DOM.getPos(element);\n      return transpose$1(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        anchor: 'selection',\n        root: Element.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor$1 = function (editor) {\n      return {\n        anchor: 'node',\n        node: Option.some(Element.fromDom(editor.selection.getNode())),\n        root: Element.fromDom(editor.getBody())\n      };\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.settings.contextmenu_never_use_native || false;\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return get(editor.settings, name).map(patchPipeConfig).getOrThunk(function () {\n        return filter(patchPipeConfig(defaultItems), function (item) {\n          return has(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var Settings$1 = {\n      shouldNeverUseNative: shouldNeverUseNative,\n      getContextMenu: getContextMenu,\n      isContextMenuDisabled: isContextMenuDisabled\n    };\n\n    var isSeparator$1 = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator$3 = { type: 'separator' };\n    var makeContextItem = function (item) {\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator$3;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            icon: item.icon,\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          return {\n            type: 'menuitem',\n            text: item.text,\n            icon: item.icon,\n            onAction: noarg(item.onAction)\n          };\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last(xs).filter(function (item) {\n        return !isSeparator$1(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator$3];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator$3]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var items = foldl(menuConfig, function (acc, name) {\n        if (has(contextMenus, name)) {\n          var items_1 = contextMenus[name].update(selectedElement);\n          if (isString(items_1)) {\n            return addContextMenuGroup(acc, items_1.split(' '));\n          } else if (items_1.length > 0) {\n            var allItems = map(items_1, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([name]);\n        }\n      }, []);\n      if (items.length > 0 && isSeparator$1(items[items.length - 1])) {\n        items.pop();\n      }\n      return items;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !Settings$1.shouldNeverUseNative(editor);\n    };\n    var setup$7 = function (editor, lazySink, backstage) {\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run(dismissRequested(), function (comp, se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      editor.on('init', function () {\n        editor.on('contextmenu', function (e) {\n          if (Settings$1.shouldNeverUseNative(editor)) {\n            e.preventDefault();\n          }\n          if (isNativeOverrideKeyEvent(editor, e) || Settings$1.isContextMenuDisabled(editor)) {\n            return;\n          }\n          var isTriggeredByKeyboardEvent = e.button !== 2 || e.target === editor.getBody();\n          var anchorSpec = isTriggeredByKeyboardEvent ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = Settings$1.getContextMenu(editor);\n          var selectedElement = isTriggeredByKeyboardEvent ? editor.selection.getStart(true) : e.target;\n          var items = generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n          build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage).map(function (menuData) {\n            e.preventDefault();\n            InlineView.showMenuAt(contextmenu, anchorSpec, {\n              menu: { markers: markers$1('normal') },\n              data: menuData\n            });\n          });\n        });\n      });\n    };\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Option.some(parseInt(val, 10));\n      }\n      return Option.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var Utils = {\n      parseToInt: parseToInt,\n      numToPx: numToPx\n    };\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element()).filter(isElement).each(function (root) {\n        var initZIndex = get$2(root, initialAttribute);\n        if (has$1(root, initialAttribute)) {\n          set$2(root, 'z-index', initZIndex);\n        } else {\n          remove$6(root, 'z-index');\n        }\n        remove$1(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element()).filter(isElement).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$1(root, initialAttribute, zindex);\n        });\n        set$2(root, 'z-index', get$4(blocker.element(), 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n\n    var get$d = function (component, snapsInfo) {\n      var element = component.element();\n      var x = parseInt(get$2(element, snapsInfo.leftAttr), 10);\n      var y = parseInt(get$2(element, snapsInfo.topAttr), 10);\n      return isNaN(x) || isNaN(y) ? Option.none() : Option.some(Position(x, y));\n    };\n    var set$8 = function (component, snapsInfo, pt) {\n      var element = component.element();\n      set$1(element, snapsInfo.leftAttr, pt.left() + 'px');\n      set$1(element, snapsInfo.topAttr, pt.top() + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element();\n      remove$1(element, snapsInfo.leftAttr);\n      remove$1(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get$d(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed) {\n        return fixed$1(fixed.left() + delta.left(), fixed.top() + delta.top());\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set$8(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed$1(fixedCoord.left(), fixedCoord.top()),\n          extra: Option.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output(),\n          extra: spanned.extra()\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor();\n        var inRange = withinRange(newCoord, sensor, snap.range().left(), snap.range().top(), scroll, origin);\n        return inRange ? Option.some({\n          output: constant(absorb(snap.output(), newCoord, scroll, origin)),\n          extra: snap.extra\n        }) : Option.none();\n      });\n    };\n\n    var getCurrentCoord = function (target) {\n      return getRaw(target, 'left').bind(function (left) {\n        return getRaw(target, 'top').bind(function (top) {\n          return getRaw(target, 'position').map(function (position) {\n            var nu = position === 'fixed' ? fixed$1 : offset;\n            return nu(parseInt(left, 10), parseInt(top, 10));\n          });\n        });\n      }).getOrThunk(function () {\n        var location = absolute(target);\n        return absolute$2(location.left(), location.top());\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = cap(absoluteCoord.left(), bounds.x(), bounds.width() - startData.width);\n      var newY = cap(absoluteCoord.top(), bounds.y(), bounds.height() - startData.height);\n      var newCoords = absolute$2(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left(), offset$1.top());\n      }, function () {\n        return newCoords;\n      }, function () {\n        var fixed = asFixed(newCoords, scroll, origin);\n        return fixed$1(fixed.left(), fixed.top());\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate$1(currentCoord, delta.left(), delta.top());\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed$1(fixedCoord.left(), fixedCoord.top());\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element());\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element());\n        var scroll = get$8(doc);\n        var origin = getOrigin(target, scroll);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll, origin, delta, startData);\n        var styles = toStyles(newCoord, scroll, origin);\n        setAll$1(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$1(comp.element()),\n        width: getOuter$2(comp.element())\n      };\n    };\n\n    var defaultLazyViewport$1 = function () {\n      var scroll = get$8();\n      return {\n        x: scroll.left,\n        y: scroll.top,\n        width: constant(domGlobals.window.innerWidth),\n        height: constant(domGlobals.window.innerHeight),\n        bottom: constant(scroll.top() + domGlobals.window.innerHeight),\n        right: constant(scroll.left() + domGlobals.window.innerWidth)\n      };\n    };\n    var SnapSchema = optionObjOf('snaps', [\n      strict$1('getSnapPoints'),\n      onHandler('onSensor'),\n      strict$1('leftAttr'),\n      strict$1('topAttr'),\n      defaulted$1('lazyViewport', defaultLazyViewport$1)\n    ]);\n\n    var init$b = function (dragApi) {\n      return derive([\n        run(mousedown(), dragApi.forceDrop),\n        run(mouseup(), dragApi.drop),\n        run(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event());\n        }),\n        run(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Option.from(Position(event.x(), event.y()));\n    };\n    var getDelta$1 = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var handlers = function (dragConfig, dragState) {\n      var updateStartState = function (comp) {\n        dragState.setStartData(calcStartData(dragConfig, comp));\n      };\n      return derive([\n        run(windowScroll(), updateStartState),\n        run(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event().raw();\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var dragApi = {\n            drop: function () {\n              stop();\n            },\n            delayDrop: function () {\n              delayDrop.schedule();\n            },\n            forceDrop: function () {\n              stop();\n            },\n            move: function (event) {\n              delayDrop.cancel();\n              var delta = dragState.update(MouseData, event);\n              var dragStartData = dragState.getStartData().getOrThunk(function () {\n                return calcStartData(dragConfig, component);\n              });\n              delta.each(function (dlt) {\n                dragBy(component, dragConfig, dragStartData, dlt);\n              });\n            }\n          };\n          var blocker = component.getSystem().build(Container.sketch({\n            dom: {\n              styles: {\n                'left': '0px',\n                'top': '0px',\n                'width': '100%',\n                'height': '100%',\n                'position': 'fixed',\n                'z-index': '1000000000000000'\n              },\n              classes: [dragConfig.blockerClass]\n            },\n            events: init$b(dragApi)\n          }));\n          var stop = function () {\n            discard(blocker);\n            dragConfig.snaps.each(function (snapInfo) {\n              stopDrag(component, snapInfo);\n            });\n            var target = dragConfig.getTarget(component.element());\n            dragState.reset();\n            dragConfig.onDrop(component, target);\n          };\n          var delayDrop = DelayedFunction(stop, 200);\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })\n      ]);\n    };\n    var schema$r = [\n      defaulted$1('useFixed', false),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      onHandler('onDrop'),\n      defaultedFunction('getBounds', win),\n      SnapSchema,\n      output('dragger', { handlers: handlers })\n    ];\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Option.some(Position(touch.clientX, touch.clientY));\n    };\n    var getData$2 = function (event) {\n      var raw = event.raw();\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Option.none();\n    };\n    var getDelta$2 = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        getData: getData$2,\n        getDelta: getDelta$2\n    });\n\n    var handlers$1 = function (dragConfig, dragState) {\n      var updateStartState = function (comp) {\n        dragState.setStartData(calcStartData(dragConfig, comp));\n      };\n      return derive([\n        run(windowScroll(), updateStartState),\n        run(touchstart(), function (component, simulatedEvent) {\n          updateStartState(component);\n          simulatedEvent.stop();\n        }),\n        run(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var delta = dragState.update(TouchData, simulatedEvent.event());\n          var dragStartData = dragState.getStartData().getOrThunk(function () {\n            return calcStartData(dragConfig, component);\n          });\n          delta.each(function (dlt) {\n            dragBy(component, dragConfig, dragStartData, dlt);\n          });\n        }),\n        run(touchend(), function (component, simulatedEvent) {\n          dragConfig.snaps.each(function (snapInfo) {\n            stopDrag(component, snapInfo);\n          });\n          var target = dragConfig.getTarget(component.element());\n          dragState.reset();\n          dragConfig.onDrop(component, target);\n        })\n      ]);\n    };\n    var schema$s = [\n      defaulted$1('useFixed', false),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      defaulted$1('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema,\n      output('dragger', { handlers: handlers$1 })\n    ];\n\n    var mouse = schema$r;\n    var touch = schema$s;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        mouse: mouse,\n        touch: touch\n    });\n\n    var init$c = function () {\n      var previous = Option.none();\n      var startData = Option.none();\n      var reset = function () {\n        previous = Option.none();\n        startData = Option.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Option.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        init: init$c\n    });\n\n    var Dragging = createModes$1({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: MixedBag([\n          'sensor',\n          'range',\n          'output'\n        ], ['extra'])\n      },\n      state: DragState\n    });\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var calcCappedSize = function (originalSize, delta, minSize, maxSize) {\n      var newSize = originalSize + delta;\n      var minOverride = minSize.filter(function (min) {\n        return newSize < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return newSize > max;\n      });\n      return minOverride.or(maxOverride).getOr(newSize);\n    };\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight, deltas.top(), getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth, deltas.left(), getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize$3 = function (editor, deltas, resizeType) {\n      var container = Element.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$6(container), get$7(container));\n      each$1(dimensions, function (val, dim) {\n        return set$2(container, dim, Utils.numToPx(val));\n      });\n      Events.fireResizeEditor(editor);\n    };\n\n    var isHidden$1 = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            }\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent = parents[i];\n          if (parent.nodeType === 1 && !isHidden$1(parent)) {\n            var args = editor.fire('ResolveName', {\n              name: parent.nodeName.toLowerCase(),\n              target: parent\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n    var ElementPath = { renderElementPath: renderElementPath };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            run(tapOrClick(), function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[tapOrClick()] = [\n          'wordcount-events',\n          'alloy.base.behaviour'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderResizeHandlerIcon = function (resizeType) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__resize-handle'],\n            attributes: { title: providersBackstage.translate('Resize') },\n            innerHtml: get$c('resize-handle', providersBackstage.icons)\n          },\n          behaviours: derive$1([Dragging.config({\n              mode: 'mouse',\n              repositionTarget: false,\n              onDrag: function (comp, target, delta) {\n                resize$3(editor, delta, resizeType);\n              },\n              blockerClass: 'tox-blocker'\n            })])\n        };\n      };\n      var renderBranding = function () {\n        var label = global$5.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getResizeType = function (editor) {\n        var fallback = !contains$1(editor.settings.plugins, 'autoresize');\n        var resize = editor.getParam('resize', fallback);\n        if (resize === false) {\n          return ResizeTypes.None;\n        } else if (resize === 'both') {\n          return ResizeTypes.Both;\n        } else {\n          return ResizeTypes.Vertical;\n        }\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(ElementPath.renderElementPath(editor, {}));\n        }\n        if (contains$1(editor.settings.plugins, 'wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeType = getResizeType(editor);\n        if (resizeType !== ResizeTypes.None) {\n          components.push(renderResizeHandlerIcon(resizeType));\n        }\n        return components;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$8 = function (editor) {\n      var isInline = editor.getParam('inline', false, 'boolean');\n      var mode = isInline ? Inline : Iframe;\n      var lazyOuterContainer = Option.none();\n      var platform = PlatformDetection$1.detect();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var dirAttributes = global$5.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var sink = build$1({\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-silver-sink',\n            'tox-tinymce-aux'\n          ].concat(platformClasses)\n        }, dirAttributes),\n        behaviours: derive$1([Positioning.config({ useFixed: false })])\n      });\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyMoreButton = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getMoreButton(container);\n        }).getOrDie('Could not find more button element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$8(sink, editor, lazyAnchorBar, lazyMoreButton);\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var partMenubar = OuterContainer.parts().menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarDrawer = function (editor) {\n        return getToolbarDrawer(editor);\n      };\n      var partToolbar = OuterContainer.parts().toolbar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        },\n        split: toolbarDrawer(editor),\n        lazyToolbar: lazyToolbar,\n        lazyMoreButton: lazyMoreButton\n      });\n      var partMultipleToolbar = OuterContainer.parts()['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        onEscape: function () {\n        }\n      });\n      var partSocket = OuterContainer.parts().socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts().sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts().throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var statusbar = editor.getParam('statusbar', true, 'boolean') && !isInline ? Option.some(renderStatusbar(editor, backstage.shared.providers)) : Option.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var hasToolbarDrawer = toolbarDrawer(editor) !== ToolbarDrawer.default;\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          if (hasToolbarDrawer) {\n            domGlobals.console.warn('Toolbar drawer cannot be applied when multiple toolbars are active');\n          }\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var editorComponents = flatten([\n        hasMenubar ? [partMenubar] : [],\n        getPartToolbar(),\n        useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()],\n        isInline ? [] : [socketSidebarContainer]\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isInline && !hasMenubar && !hasToolbar && !hasMultipleToolbar;\n      var attributes = __assign({ role: 'application' }, global$5.isRtl() ? { dir: 'rtl' } : {}, isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1(mode.getBehaviours(editor).concat([Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a'\n          })]))\n      }));\n      lazyOuterContainer = Option.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      Events$1.setup(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: function () {\n          }\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function (elm) {\n        var DOM = global$7.DOM;\n        var baseWidth = editor.getParam('width', DOM.getStyle(elm, 'width'));\n        var baseHeight = getHeightSetting(editor);\n        var minWidth = getMinWidthSetting(editor);\n        var minHeight = getMinHeightSetting(editor);\n        var parsedWidth = Utils.parseToInt(baseWidth).bind(function (w) {\n          return Utils.numToPx(minWidth.map(function (mw) {\n            return Math.max(w, mw);\n          }));\n        }).getOr(Utils.numToPx(baseWidth));\n        var parsedHeight = Utils.parseToInt(baseHeight).bind(function (h) {\n          return minHeight.map(function (mh) {\n            return Math.max(h, mh);\n          });\n        }).getOr(baseHeight);\n        var stringWidth = Utils.numToPx(parsedWidth);\n        if (isValidValue('div', 'width', stringWidth)) {\n          set$2(outerContainer.element(), 'width', stringWidth);\n        }\n        if (!editor.inline) {\n          var stringHeight = Utils.numToPx(parsedHeight);\n          if (isValidValue('div', 'height', stringHeight)) {\n            set$2(outerContainer.element(), 'height', stringHeight);\n          } else {\n            set$2(outerContainer.element(), 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        FormatControls.setup(editor, backstage);\n        setup$7(editor, lazySink, backstage);\n        setup$4(editor);\n        setup$5(editor, lazyThrobber, backstage.shared);\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: !editor.settings.menu ? {} : map$1(editor.settings.menu, function (menu) {\n            return merge(menu, { items: menu.items });\n          }),\n          menubar: editor.settings.menubar,\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return editor.getParam('toolbar', true);\n          }),\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        ContextToolbar.register(editor, contextToolbars, sink, { backstage: backstage });\n        var elm = editor.getElement();\n        var height = setEditorSize(elm);\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n    var Render = { setup: setup$8 };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Option.from(get$2(describedElement, 'id')).fold(function () {\n        var id = generate$1('dialog-describe');\n        set$1(describeElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(describedElement, 'aria-describedby', describeId);\n    };\n\n    var AriaLabel = {\n      labelledBy: function (labelledElement, labelElement) {\n        var labelId = Option.from(get$2(labelledElement, 'id')).fold(function () {\n          var id = generate$1('dialog-label');\n          set$1(labelElement, 'id', id);\n          return id;\n        }, identity);\n        set$1(labelledElement, 'aria-labelledby', labelId);\n      }\n    };\n\n    var schema$t = constant([\n      strict$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted$1('useTabstopAt', constant(true)),\n      defaulted$1('eventOrder', {}),\n      field$1('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity };\n    var parts$e = constant([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor$1(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [strict$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign({}, spec, {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted$1('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted$1('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var factory$h = function (detail, components, spec, externals) {\n      var dialogBusyEvent = generate$1('alloy.dialog.busy');\n      var dialogIdleEvent = generate$1('alloy.dialog.idle');\n      var busyBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Option.some(true);\n          },\n          onShiftTab: function () {\n            return Option.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var showDialog = function (dialog) {\n        var sink = detail.lazySink(dialog).getOrDie();\n        var busyComp = Cell(Option.none());\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign({}, externalBlocker, {\n          components: externalBlocker.components.concat([premade$1(dialog)]),\n          behaviours: derive$1([config('dialog-blocker-events', [\n              run(dialogIdleEvent, function (blocker, se) {\n                if (has$1(dialog.element(), 'aria-busy')) {\n                  remove$1(dialog.element(), 'aria-busy');\n                  busyComp.get().each(function (bc) {\n                    return Replacing.remove(dialog, bc);\n                  });\n                }\n              }),\n              run(dialogBusyEvent, function (blocker, se) {\n                set$1(dialog.element(), 'aria-busy', 'true');\n                var getBusySpec = se.event().getBusySpec();\n                busyComp.get().each(function (bc) {\n                  Replacing.remove(dialog, bc);\n                });\n                var busySpec = getBusySpec(dialog, busyBehaviours);\n                var busy = blocker.getSystem().build(busySpec);\n                busyComp.set(Option.some(busy));\n                Replacing.append(dialog, premade$1(busy));\n                if (busy.hasConfigured(Keying)) {\n                  Keying.focusIn(busy);\n                }\n              })\n            ])])\n        }));\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        parent(dialog.element()).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        emitWith(dialog, dialogBusyEvent, { getBusySpec: getBusySpec });\n      };\n      var setIdle = function (dialog) {\n        emit(dialog, dialogIdleEvent);\n      };\n      var modalEventsId = generate$1('modal-events');\n      var eventOrder = __assign({}, detail.eventOrder, { 'alloy.system.attached': [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []) });\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              AriaLabel.labelledBy(c.element(), getPartOrDie(c, detail, 'title').element());\n              describedBy(c.element(), getPartOrDie(c, detail, 'body').element());\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite$1({\n      name: 'ModalDialog',\n      configFields: schema$t(),\n      partFields: parts$e(),\n      factory: factory$h,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var alertBannerFields = [\n      strictString('type'),\n      strictString('text'),\n      strictStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      strictString('icon'),\n      defaulted$1('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        strictString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      strictString('type'),\n      strictString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      strictString('type'),\n      strictString('name'),\n      strictString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      strictString('type'),\n      strictString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOfObj('items', [\n        strictString('text'),\n        strictString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      strictString('width'),\n      strictString('height')\n    ]);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted$1('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      strictString('value'),\n      defaulted$1('meta', {})\n    ]);\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictString('scriptId'),\n      strictString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var htmlPanelFields = [\n      strictString('type'),\n      strictString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var imageToolsFields = formComponentWithLabelFields.concat([strictOf('currentState', objOf([\n        strict$1('blob'),\n        strictString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted$1('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj$1([\n      strictString('value'),\n      strictString('text'),\n      strictString('icon')\n    ]);\n\n    var createLabelFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictString('label'),\n        itemsField\n      ];\n    };\n\n    var tableFields = [\n      strictString('type'),\n      strictArrayOf('header', string),\n      strictArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var createItemsField = function (name) {\n      return field('items', 'items', strict(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema$2, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema$2 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      strictString('type'),\n      defaulted$1('classes', []),\n      strictArrayOf('items', itemSchema$2)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('tab-name');\n      }), string),\n      strictString('title'),\n      strictArrayOf('items', itemSchema$2)\n    ];\n    var tabPanelFields = [\n      strictString('type'),\n      strictArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var baseButtonFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogButtonFields = baseButtonFields.concat([strictString('text')]);\n    var normalButtonFields = [strictStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])].concat(dialogButtonFields);\n    var menuButtonFields = [strictStringEnum('type', ['menu'])].concat(baseButtonFields, baseMenuButtonFields);\n    var dialogButtonSchema = choose$1('type', {\n      submit: normalButtonFields,\n      cancel: normalButtonFields,\n      custom: normalButtonFields,\n      menu: menuButtonFields\n    });\n    var dialogSchema = objOf([\n      strictString('title'),\n      strictOf('body', chooseProcessor('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      strictArrayOf('buttons', dialogButtonSchema),\n      defaulted$1('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted$1('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Option.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var fields = bind(getNamedItems(structure), function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [strictOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var urlDialogButtonSchema = objOf([strictStringEnum('type', [\n        'cancel',\n        'custom'\n      ])].concat(dialogButtonFields));\n    var urlDialogSchema = objOf([\n      strictString('title'),\n      strictString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var extract$1 = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract$1(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract$1(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each$1(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(NavigableObject.isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                domGlobals.console.error(err);\n                return {};\n              }, function (vals) {\n                return vals;\n              });\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$i = function (detail, spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$7(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single$2({\n      name: 'TabButton',\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('value'),\n        field('dom', 'dom', mergeWithThunk(function (spec) {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$1('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue$1()),\n        option('action'),\n        defaulted$1('domModification', {}),\n        field$1('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        strict$1('view')\n      ],\n      factory: factory$i\n    });\n\n    var schema$u = constant([\n      strict$1('tabs'),\n      strict$1('dom'),\n      defaulted$1('clickToDismiss', false),\n      field$1('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail, tabSpec) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$f = constant([tabsPart]);\n\n    var factory$j = function (detail, components, spec, externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        'components': components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$1(tab.element(), 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$1(tab.element(), 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element();\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite$1({\n      name: 'Tabbar',\n      configFields: schema$u(),\n      partFields: parts$f(),\n      factory: factory$j\n    });\n\n    var factory$k = function (detail, spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single$2({\n      name: 'Tabview',\n      configFields: [field$1('tabviewBehaviours', [Replacing])],\n      factory: factory$k\n    });\n\n    var schema$v = constant([\n      defaulted$1('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted$1('tabs', []),\n      field$1('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        strict$1('dom'),\n        strictObjOf('markers', [\n          strict$1('tabClass'),\n          strict$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts$g = constant([\n      barPart,\n      viewPart\n    ]);\n\n    var factory$l = function (detail, components, spec, externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            set$1(tabview.element(), 'aria-labelledby', get$2(button.element(), 'id'));\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$b(detail.tabSectionBehaviours),\n        events: derive(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event().button();\n              changeTab$1(button);\n            }),\n            run(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event().button();\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite$1({\n      name: 'TabSection',\n      configFields: schema$v(),\n      partFields: parts$g(),\n      factory: factory$l,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map(allTabs, function (tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom().getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, dialogBody) {\n      var rootElm = ancestor$1(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$4(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(domGlobals.document.documentElement.clientHeight, domGlobals.window.innerHeight);\n      } else {\n        maxHeight = Math.max(domGlobals.document.documentElement.offsetHeight, domGlobals.document.documentElement.scrollHeight);\n      }\n      var dialogChrome = dialog.dom().getBoundingClientRect().height - dialogBody.dom().getBoundingClientRect().height;\n      return maxHeight - dialogChrome;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor$1(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        maxTabHeight.get().map(function (height) {\n          set$2(tabview, 'height', '0');\n          return Math.min(height, getMaxTabviewHeight(dialog, dialogBody));\n        }).each(function (height) {\n          set$2(tabview, 'height', height + 'px');\n        });\n      });\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = Cell(Option.none());\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            descendant$1(comp.element(), '[role=\"tabpanel\"]').each(function (tabview) {\n              set$2(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOption().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeight.set(maxTabHeightOpt);\n              });\n              updateTabviewHeight(comp.element(), tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$2.requestAnimationFrame(function () {\n                updateTabviewHeight(comp.element(), tabview, maxTabHeight);\n              });\n            });\n          }),\n          run(windowResize(), function (comp) {\n            descendant$1(comp.element(), '[role=\"tabpanel\"]').each(function (tabview) {\n              updateTabviewHeight(comp.element(), tabview, maxTabHeight);\n            });\n          }),\n          run(formResizeEvent, function (comp, se) {\n            descendant$1(comp.element(), '[role=\"tabpanel\"]').each(function (tabview) {\n              var oldFocus = active();\n              set$2(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              var newHeight = tabview.dom().getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(Option.from(newHeight));\n                updateTabviewHeight(comp.element(), tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  set$2(tabview, 'height', h + 'px');\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$1);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(NavigableObject.isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll$1([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts().tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts().tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts().tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$1('update-dialog');\n    var titleChannel = generate$1('update-title');\n    var bodyChannel = generate$1('update-body');\n    var footerChannel = generate$1('update-footer');\n    var bodySendMessageChannel = generate$1('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Option.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Option.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Option.none(), backstage, false);\n      return ModalDialog.parts().body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [NavigableObject.craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(NavigableObject.isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts().body(bodySpec);\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), NavigableObject.onFocus),\n        fireApiEvent(formCloseEvent, function (api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run(formUnblockEvent, function (c, se) {\n          return extras.onUnblock();\n        }),\n        run(formBlockEvent, function (c, se) {\n          return extras.onBlock(se.event());\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event(), c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return initCommonEvents(fireApiEvent, extras).concat([fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name() });\n        })]);\n    };\n    var initDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event(), c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return initCommonEvents(fireApiEvent, extras).concat([\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name() });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var current = active();\n          spec.onAction(api, {\n            name: event.name(),\n            value: event.value()\n          });\n          active().fold(function () {\n            focusIn();\n          }, function (focused) {\n            if (!contains$2(component.element(), focused) || has$1(focused, 'disabled')) {\n              focusIn();\n            } else if (contains$2(focused, current.getOrNull()) && has$1(current.getOrDie(), 'disabled')) {\n              focusIn();\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name(),\n            oldTabName: event.oldName()\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ]);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup$2 = function (compInSystem, footerButtons, buttonName) {\n      return find(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup$2(compInSystem, footerButtons, buttonName);\n        };\n        return Option.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml$2('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts().footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Option.some(comp);\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var validateData = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        return Representing.getValue(valueComp);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = merge(prevData, newData);\n          var newInternalData = validateData(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: '<svg width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z\" fill-rule=\"evenodd\"></path></svg>'\n            }\n          }],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml$2('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Option.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$3(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts().title(renderTitle(spec, Option.none(), providersBackstage));\n      var pHandle = ModalDialog.parts().draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts().close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getEventExtras = function (lazyDialog, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (d, bs) {\n            return {\n              dom: {\n                tag: 'div',\n                classes: ['tox-dialog__busy-spinner'],\n                attributes: { 'aria-label': blockEvent.message() },\n                styles: {\n                  left: '0px',\n                  right: '0px',\n                  bottom: '0px',\n                  top: '0px',\n                  position: 'absolute'\n                }\n              },\n              behaviours: bs,\n              components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n            };\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Option.some(incoming);\n      };\n      return build$1(ModalDialog.sketch({\n        lazySink: backstage.shared.getSink,\n        onEscape: function (c) {\n          emit(c, formCancelEvent);\n          return Option.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !NavigableObject.isPseudoStop(elem);\n        },\n        modalBehaviours: derive$1([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({}),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), 'tox-dialog__disable-scroll');\n            }),\n            runOnDetached(function () {\n              remove$4(body(), 'tox-dialog__disable-scroll');\n            })\n          ])\n        ].concat(spec.extraBehaviours)),\n        eventOrder: (_a = {}, _a[execute()] = ['execute-on-form'], _a[receive()] = [\n          'reflecting',\n          'receiving'\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          'reflecting',\n          'messages',\n          'execute-on-form',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'execute-on-form',\n          'messages',\n          'reflecting',\n          'scroll-lock'\n        ], _a),\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog'].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: [\n          spec.header,\n          spec.body\n        ].concat(spec.footer.toArray()),\n        dragBlockClass: 'tox-dialog-wrap',\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"tox-dialog-wrap\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-dialog-wrap__backdrop']\n                }\n              }]\n          }\n        }\n      }));\n    };\n\n    var renderDialog = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var footer = renderModalFooter({ buttons: dialogInit.internalDialog.buttons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra));\n      var dialogSize = dialogInit.internalDialog.size !== 'normal' ? dialogInit.internalDialog.size === 'large' ? ['tox-dialog--width-lg'] : ['tox-dialog--width-md'] : [];\n      var spec = {\n        header: header,\n        body: body,\n        footer: Option.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: function () {\n            return dialog;\n          },\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Option.none();\n        } else {\n          return Option.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra));\n      var styles = __assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      }), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$g(internalDialog.url, { base_uri: new global$g(domGlobals.window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = Cell(Option.none());\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind$3(Element.fromDom(domGlobals.window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$g(e.raw().origin))) {\n                var data = e.raw().data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(Option.some(unbind));\n          }),\n          runOnDetached(function () {\n            messageHandlerUnbinder.get().each(function (unbinder) {\n              return unbinder.unbind();\n            });\n          })\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant$1(comp.element(), 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom().contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$1('dialog-label');\n      var dialogContentId = generate$1('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Option.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var memFooter = record(renderInlineFooter({ buttons: dialogInit.internalDialog.buttons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function () {\n        },\n        onUnblock: function () {\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      });\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = '' + dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Option.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !NavigableObject.isPseudoStop(elem) && (name(elem) !== 'button' || get$2(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, se) {\n              Keying.focusIn(comp);\n            })])),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: function () {\n          return dialog;\n        },\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var hiddenHeader = {\n      dom: {\n        tag: 'div',\n        styles: { display: 'none' },\n        classes: ['tox-dialog__header']\n      }\n    };\n    var defaultHeader = {\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__header']\n      }\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts().close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts().title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts().body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml$2('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts().footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog$1 = function (spec) {\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function () {\n          spec.onCancel();\n          return Option.some(true);\n        },\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog'].concat(spec.extraClasses)\n        },\n        components: [\n          deepMerge(spec.headerOverride.getOr(defaultHeader), {\n            components: [\n              spec.partSpecs.title,\n              spec.partSpecs.close\n            ]\n          }),\n          spec.partSpecs.body,\n          spec.partSpecs.footer\n        ],\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"tox-dialog-wrap\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-dialog-wrap__backdrop']\n                }\n              }]\n          }\n        },\n        modalBehaviours: derive$1([config('basic-dialog-events', [\n            run(formCancelEvent, function (comp, se) {\n              spec.onCancel();\n            }),\n            run(formSubmitEvent, function (comp, se) {\n              spec.onSubmit();\n            })\n          ])])\n      });\n    };\n\n    var setup$9 = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'cancel', extras.backstage));\n        var alertDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          headerOverride: Option.some(hiddenHeader),\n          partSpecs: {\n            title: pUntitled(),\n            close: pClose(function () {\n              closeDialog();\n            }, sharedBackstage.providers),\n            body: pBodyMessage(message, sharedBackstage.providers),\n            footer: pFooter(pFooterGroup([], [memFooterClose.asSpec()]))\n          },\n          onCancel: function () {\n            return closeDialog();\n          },\n          onSubmit: noop,\n          extraClasses: ['tox-alert-dialog']\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$a = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Option.none()\n        }, 'cancel', extras.backstage);\n        var confirmDialog = build$1(renderDialog$1({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          headerOverride: Option.some(hiddenHeader),\n          partSpecs: {\n            title: pUntitled(),\n            close: pClose(function () {\n              closeDialog(false);\n            }, sharedBackstage.providers),\n            body: pBodyMessage(message, sharedBackstage.providers),\n            footer: pFooter(pFooterGroup([], [\n              footerNo,\n              memFooterYes.asSpec()\n            ]))\n          },\n          onCancel: function () {\n            return closeDialog(false);\n          },\n          onSubmit: function () {\n            return closeDialog(true);\n          },\n          extraClasses: ['tox-confirm-dialog']\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData$1 = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var setup$b = function (extras) {\n      var alertDialog = setup$9(extras);\n      var confirmDialog = setup$a(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, extras.backstage.shared.anchors.toolbar(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, extras.backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, extras.editor, extras.backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, extras.backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData$1(internalInitialData, dataValidator);\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              InlineView.hide(inlineDialog);\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, extras.backstage, ariaAttrs);\n          var inlineDialog = build$1(InlineView.sketch({\n            lazySink: extras.backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {},\n            inlineBehaviours: derive$1([config('window-manager-inline-events', [run(dismissRequested(), function (comp, se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])])\n          }));\n          InlineView.showAt(inlineDialog, anchor, premade$1(dialogUi.dialog));\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n    var WindowManager = { setup: setup$b };\n\n    function Theme () {\n      global$1.add('silver', function (editor) {\n        var _a = Render.setup(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = WindowManager.setup({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}(window));\n","// Exports the \"code\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/code')\n//   ES2015:\n//     import 'tinymce/plugins/code'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n    var Content = {\n      setContent: setContent,\n      getContent: getContent\n    };\n\n    var open = function (editor) {\n      var editorContent = Content.getContent(editor);\n      editor.windowManager.open({\n        title: 'Source Code',\n        size: 'large',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'textarea',\n              name: 'code'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: { code: editorContent },\n        onSubmit: function (api) {\n          Content.setContent(editor, api.getData().code);\n          api.close();\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('code', {\n        icon: 'sourcecode',\n        tooltip: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n      editor.ui.registry.addMenuItem('code', {\n        icon: 'sourcecode',\n        text: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('code', function (editor) {\n        Commands.register(editor);\n        Buttons.register(editor);\n        return {};\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"paste\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/paste')\n//   ES2015:\n//     import 'tinymce/plugins/paste'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])powerpaste([, ]|$)/.test(editor.settings.plugins) && global$1.get('powerpaste')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n    var Api = { get: get };\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n    var Events = {\n      firePastePreProcess: firePastePreProcess,\n      firePastePostProcess: firePastePostProcess,\n      firePastePlainTextToggle: firePastePlainTextToggle,\n      firePaste: firePaste\n    };\n\n    var togglePlainTextPaste = function (editor, clipboard) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        Events.firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        Events.firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n    var Actions = { togglePlainTextPaste: togglePlainTextPaste };\n\n    var register = function (editor, clipboard) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        Actions.togglePlainTextPaste(editor, clipboard);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var slice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n    var mapM = function (array, fn) {\n      var futures = map(array, fn);\n      return par$1(futures);\n    };\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var InternalHtml = {\n      mark: mark,\n      unmark: unmark,\n      isMarked: isMarked,\n      internalHtmlMime: function () {\n        return internalMimeType;\n      }\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$4.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$4.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n    };\n    var Newlines = {\n      isPlainText: isPlainText,\n      convert: convert,\n      toBRs: toBRs,\n      toBlockElements: toBlockElements\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var Settings = {\n      shouldBlockDrop: shouldBlockDrop,\n      shouldPasteDataImages: shouldPasteDataImages,\n      shouldFilterDrop: shouldFilterDrop,\n      getPreProcess: getPreProcess,\n      getPostProcess: getPostProcess,\n      getWebkitStyles: getWebkitStyles,\n      shouldRemoveWebKitStyles: shouldRemoveWebKitStyles,\n      shouldMergeFormats: shouldMergeFormats,\n      isSmartPasteEnabled: isSmartPasteEnabled,\n      isPasteAsTextEnabled: isPasteAsTextEnabled,\n      getRetainStyleProps: getRetainStyleProps,\n      getWordValidElements: getWordValidElements,\n      shouldConvertWordFakeLists: shouldConvertWordFakeLists,\n      shouldUseDefaultFilters: shouldUseDefaultFilters\n    };\n\n    function filter$1(content, items) {\n      global$4.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$9();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$4.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return '\\xA0';\n      }\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var isMsEdge = function () {\n      return domGlobals.navigator.userAgent.indexOf(' Edge/') !== -1;\n    };\n    var Utils = {\n      filter: filter$1,\n      innerText: innerText,\n      trimHtml: trimHtml,\n      createIdGenerator: createIdGenerator,\n      isMsEdge: isMsEdge\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found, patterns;\n      patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$4.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$8(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$4.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (Settings.getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$8('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$8('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var retainStyleProperties, validStyles;\n      retainStyleProperties = Settings.getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$4.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = Utils.filter(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          '\\xA0'\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join('\\xA0') : '';\n          }\n        ]\n      ]);\n      var validElements = Settings.getWordValidElements(editor);\n      var schema = global$9({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$4.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (Settings.shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$a({ validate: editor.settings.validate }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return Settings.shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n    var WordFilter = {\n      preProcess: preProcess,\n      isWordContent: isWordContent\n    };\n\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = Events.firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = Events.firePastePreProcess(editor, content, internal, isWordHtml);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, preProcessArgs.content, internal, isWordHtml);\n      } else {\n        return processResult(preProcessArgs.content, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = WordFilter.isWordContent(html);\n      var content = isWordHtml ? WordFilter.preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n    var ProcessFilters = { process: process };\n\n    var removeMeta = function (editor, html) {\n      var body = editor.dom.create('body', {}, html);\n      global$4.each(body.querySelectorAll('meta'), function (elm) {\n        return elm.parentNode.removeChild(elm);\n      });\n      return body.innerHTML;\n    };\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(removeMeta(editor, html), {\n        merge: Settings.shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$4.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html) {\n      if (Settings.isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n    var SmartPaste = {\n      isImageUrl: isImageUrl,\n      isAbsoluteUrl: isAbsoluteUrl,\n      insertContent: insertContent\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var isNewLineChar = function (c) {\n      return c === '\\n' || c === '\\r';\n    };\n    var isNewline = function (text, idx) {\n      return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    };\n    var normalizeWhitespace = function (text) {\n      var result = foldl(text, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === '\\xA0') {\n          if (acc.pcIsSpace || acc.str === '' || acc.str.length === text.length - 1 || isNewline(text, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + '\\xA0'\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : InternalHtml.isMarked(html);\n      var args = ProcessFilters.process(editor, InternalHtml.unmark(html), internal);\n      if (args.cancelled === false) {\n        SmartPaste.insertContent(editor, args.content);\n      }\n    };\n    var pasteText = function (editor, text) {\n      var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      var normalizedText = normalizeWhitespace(encodedText);\n      var html = Newlines.convert(normalizedText, editor.settings.forced_root_block, editor.settings.forced_root_block_attrs);\n      pasteHtml$1(editor, html, false);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      var content = getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n      return Utils.isMsEdge() ? global$4.extend(content, { 'text/html': '' }) : content;\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var getBase64FromUri = function (uri) {\n      var idx;\n      idx = uri.indexOf(',');\n      if (idx !== -1) {\n        return uri.substr(idx + 1);\n      }\n      return null;\n    };\n    var isValidDataUriImage = function (settings, imgElm) {\n      return settings.images_dataimg_filter ? settings.images_dataimg_filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = Utils.createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var base64 = getBase64FromUri(imageItem.uri);\n      var id = uniqueId();\n      var name = editor.settings.images_reuse_filename && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new domGlobals.Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor.settings, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0, existingBlobInfo = void 0;\n        existingBlobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.base64() === base64;\n        });\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return mapM(items, function (item) {\n        return Future.nu(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      });\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (editor.settings.paste_data_images && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).get(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return domGlobals.navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$5.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$2.webkit && domGlobals.navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$2.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            Events.firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content, isPlainTextHtml;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : InternalHtml.isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = Utils.trimHtml(content);\n        pasteBin.remove();\n        isPlainTextHtml = internal === false && Newlines.isPlainText(content);\n        if (!content.length || isPlainTextHtml) {\n          plainTextMode = true;\n        }\n        if (plainTextMode) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = Utils.innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, InternalHtml.internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$2.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = InternalHtml.isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$3.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$2.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!editor.settings.paste_data_images && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attr('src');\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!editor.settings.allow_html_data_urls && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$2.ie && editor.inline ? domGlobals.document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      var pasteBinElm;\n      lastRngCell.set(editor.selection.getRng());\n      pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$2.ie || global$2.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var pasteBinElm, pasteBinClones, i, dirtyWrappers, cleanWrapper;\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      pasteBinClones = global$4.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      pasteBinElm = pasteBinClones.shift();\n      global$4.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (i = dirtyWrappers.length - 1; i >= 0; i--) {\n        cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('PreInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var noop = function () {\n    };\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$2.iOS === false && clipboardData !== undefined && typeof clipboardData.setData === 'function' && Utils.isMsEdge() !== true;\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(InternalHtml.internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = InternalHtml.mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        global$3.setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            global$3.setTimeout(function () {\n              editor.execCommand('Delete');\n            }, 0);\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), noop);\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n    var CutCopy = { register: register$1 };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (Settings.shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!Settings.shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var dropContent, rng;\n        rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, InternalHtml.internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && Settings.shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$3.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = Utils.trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (Settings.shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n    var DragDrop = { setup: setup };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = Settings.getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = Settings.getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n    var PrePostProcess = { setup: setup$1 };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!WordFilter.isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$4.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = Utils.filter(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = Utils.filter(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = Settings.getWebkitStyles(editor);\n      var webKitStyles;\n      if (Settings.shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$2.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$2.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n    var Quirks = { setup: setup$2 };\n\n    var makeSetupHandler = function (editor, clipboard) {\n      return function (api) {\n        api.setActive(clipboard.pasteFormat.get() === 'text');\n        var pastePlainTextToggleHandler = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n        return function () {\n          return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n        };\n      };\n    };\n    var register$2 = function (editor, clipboard) {\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n    };\n    var Buttons = { register: register$2 };\n\n    function Plugin () {\n      global$1.add('paste', function (editor) {\n        if (DetectProPlugin.hasProPlugin(editor) === false) {\n          var draggingInternallyState = Cell(false);\n          var pasteFormat = Cell(Settings.isPasteAsTextEnabled(editor) ? 'text' : 'html');\n          var clipboard = Clipboard(editor, pasteFormat);\n          var quirks = Quirks.setup(editor);\n          Buttons.register(editor, clipboard);\n          Commands.register(editor, clipboard);\n          PrePostProcess.setup(editor);\n          CutCopy.register(editor);\n          DragDrop.setup(editor, clipboard, draggingInternallyState);\n          return Api.get(clipboard, quirks);\n        }\n      });\n    }\n\n    Plugin();\n\n}(window));\n","// Exports the \"autolink\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autolink')\n//   ES2015:\n//     import 'tinymce/plugins/autolink'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getAutoLinkPattern = function (editor) {\n      return editor.getParam('autolink_pattern', /^(https?:\\/\\/|ssh:\\/\\/|ftp:\\/\\/|file:\\/|www\\.|(?:mailto:)?[A-Z0-9._%+\\-]+@)(.+)$/i);\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target', false);\n    };\n    var Settings = {\n      getAutoLinkPattern: getAutoLinkPattern,\n      getDefaultLinkTarget: getDefaultLinkTarget\n    };\n\n    var rangeEqualsDelimiterOrSpace = function (rangeString, delimiter) {\n      return rangeString === delimiter || rangeString === ' ' || rangeString.charCodeAt(0) === 160;\n    };\n    var handleEclipse = function (editor) {\n      parseCurrentLine(editor, -1, '(');\n    };\n    var handleSpacebar = function (editor) {\n      parseCurrentLine(editor, 0, '');\n    };\n    var handleEnter = function (editor) {\n      parseCurrentLine(editor, -1, '');\n    };\n    var scopeIndex = function (container, index) {\n      if (index < 0) {\n        index = 0;\n      }\n      if (container.nodeType === 3) {\n        var len = container.data.length;\n        if (index > len) {\n          index = len;\n        }\n      }\n      return index;\n    };\n    var setStart = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setStart(container, scopeIndex(container, offset));\n      } else {\n        rng.setStartBefore(container);\n      }\n    };\n    var setEnd = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setEnd(container, scopeIndex(container, offset));\n      } else {\n        rng.setEndAfter(container);\n      }\n    };\n    var parseCurrentLine = function (editor, endOffset, delimiter) {\n      var rng, end, start, endContainer, bookmark, text, matches, prev, len, rngText;\n      var autoLinkPattern = Settings.getAutoLinkPattern(editor);\n      var defaultLinkTarget = Settings.getDefaultLinkTarget(editor);\n      if (editor.selection.getNode().tagName === 'A') {\n        return;\n      }\n      rng = editor.selection.getRng(true).cloneRange();\n      if (rng.startOffset < 5) {\n        prev = rng.endContainer.previousSibling;\n        if (!prev) {\n          if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n            return;\n          }\n          prev = rng.endContainer.firstChild.nextSibling;\n        }\n        len = prev.length;\n        setStart(rng, prev, len);\n        setEnd(rng, prev, len);\n        if (rng.endOffset < 5) {\n          return;\n        }\n        end = rng.endOffset;\n        endContainer = prev;\n      } else {\n        endContainer = rng.endContainer;\n        if (endContainer.nodeType !== 3 && endContainer.firstChild) {\n          while (endContainer.nodeType !== 3 && endContainer.firstChild) {\n            endContainer = endContainer.firstChild;\n          }\n          if (endContainer.nodeType === 3) {\n            setStart(rng, endContainer, 0);\n            setEnd(rng, endContainer, endContainer.nodeValue.length);\n          }\n        }\n        if (rng.endOffset === 1) {\n          end = 2;\n        } else {\n          end = rng.endOffset - 1 - endOffset;\n        }\n      }\n      start = end;\n      do {\n        setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n        setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n        end -= 1;\n        rngText = rng.toString();\n      } while (rngText !== ' ' && rngText !== '' && rngText.charCodeAt(0) !== 160 && end - 2 >= 0 && rngText !== delimiter);\n      if (rangeEqualsDelimiterOrSpace(rng.toString(), delimiter)) {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n        end += 1;\n      } else if (rng.startOffset === 0) {\n        setStart(rng, endContainer, 0);\n        setEnd(rng, endContainer, start);\n      } else {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n      }\n      text = rng.toString();\n      if (text.charAt(text.length - 1) === '.') {\n        setEnd(rng, endContainer, start - 1);\n      }\n      text = rng.toString().trim();\n      matches = text.match(autoLinkPattern);\n      if (matches) {\n        if (matches[1] === 'www.') {\n          matches[1] = 'http://www.';\n        } else if (/@$/.test(matches[1]) && !/^mailto:/.test(matches[1])) {\n          matches[1] = 'mailto:' + matches[1];\n        }\n        bookmark = editor.selection.getBookmark();\n        editor.selection.setRng(rng);\n        editor.execCommand('createlink', false, matches[1] + matches[2]);\n        if (defaultLinkTarget !== false) {\n          editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n        }\n        editor.selection.moveToBookmark(bookmark);\n        editor.nodeChanged();\n      }\n    };\n    var setup = function (editor) {\n      var autoUrlDetectState;\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n          return handleEnter(editor);\n        }\n      });\n      if (global$1.ie && global$1.ie <= 11) {\n        editor.on('focus', function () {\n          if (!autoUrlDetectState) {\n            autoUrlDetectState = true;\n            try {\n              editor.execCommand('AutoUrlDetect', false, true);\n            } catch (ex) {\n            }\n          }\n        });\n        return;\n      }\n      editor.on('keypress', function (e) {\n        if (e.keyCode === 41) {\n          return handleEclipse(editor);\n        }\n      });\n      editor.on('keyup', function (e) {\n        if (e.keyCode === 32) {\n          return handleSpacebar(editor);\n        }\n      });\n    };\n    var Keys = { setup: setup };\n\n    function Plugin () {\n      global.add('autolink', function (editor) {\n        Keys.setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"fullscreen\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/fullscreen')\n//   ES2015:\n//     import 'tinymce/plugins/fullscreen'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isFunction = isType('function');\n\n    var slice = Array.prototype.slice;\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var keys = Object.keys;\n    var each = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom();\n      each(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n    var Events = { fireFullscreenStateChanged: fireFullscreenStateChanged };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var DOM = global$1.DOM;\n    var getScrollPos = function () {\n      var vp = DOM.getViewPort();\n      return {\n        x: vp.x,\n        y: vp.y\n      };\n    };\n    var setScrollPos = function (pos) {\n      domGlobals.window.scrollTo(pos.x, pos.y);\n    };\n    var visualViewport = domGlobals.window['visualViewport'];\n    var isSafari = PlatformDetection$1.detect().browser.isSafari();\n    var viewportUpdate = !isSafari || visualViewport === undefined ? {\n      bind: noop,\n      unbind: noop\n    } : function () {\n      var editorContainer = value();\n      var update = function () {\n        domGlobals.window.requestAnimationFrame(function () {\n          editorContainer.on(function (container) {\n            return setAll(container, {\n              top: visualViewport.offsetTop + 'px',\n              left: visualViewport.offsetLeft + 'px',\n              height: visualViewport.height + 'px',\n              width: visualViewport.width + 'px'\n            });\n          });\n        });\n      };\n      var bind = function (element) {\n        editorContainer.set(element);\n        update();\n        visualViewport.addEventListener('resize', update);\n        visualViewport.addEventListener('scroll', update);\n      };\n      var unbind = function () {\n        editorContainer.on(function () {\n          visualViewport.removeEventListener('scroll', update);\n          visualViewport.removeEventListener('resize', update);\n        });\n        editorContainer.clear();\n      };\n      return {\n        bind: bind,\n        unbind: unbind\n      };\n    }();\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = domGlobals.document.body;\n      var documentElement = domGlobals.document.documentElement;\n      var editorContainerStyle;\n      var editorContainer, iframe, iframeStyle;\n      var fullscreenInfo = fullscreenState.get();\n      editorContainer = editor.getContainer();\n      editorContainerStyle = editorContainer.style;\n      iframe = editor.getContentAreaContainer().firstChild;\n      iframeStyle = iframe.style;\n      if (!fullscreenInfo) {\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height\n        };\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        DOM.addClass(body, 'tox-fullscreen');\n        DOM.addClass(documentElement, 'tox-fullscreen');\n        DOM.addClass(editorContainer, 'tox-fullscreen');\n        viewportUpdate.bind(Element.fromDom(editorContainer));\n        editor.on('remove', viewportUpdate.unbind);\n        fullscreenState.set(newFullScreenInfo);\n        Events.fireFullscreenStateChanged(editor, true);\n      } else {\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        if (fullscreenInfo.containerWidth) {\n          editorContainerStyle.width = fullscreenInfo.containerWidth;\n        }\n        if (fullscreenInfo.containerHeight) {\n          editorContainerStyle.height = fullscreenInfo.containerHeight;\n        }\n        DOM.removeClass(body, 'tox-fullscreen');\n        DOM.removeClass(documentElement, 'tox-fullscreen');\n        DOM.removeClass(editorContainer, 'tox-fullscreen');\n        setScrollPos(fullscreenInfo.scrollPos);\n        fullscreenState.set(null);\n        Events.fireFullscreenStateChanged(editor, false);\n        viewportUpdate.unbind();\n        editor.off('remove', viewportUpdate.unbind);\n      }\n    };\n    var Actions = { toggleFullscreen: toggleFullscreen };\n\n    var register = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        Actions.toggleFullscreen(editor, fullscreenState);\n      });\n    };\n    var Commands = { register: register };\n\n    var makeSetupHandler = function (editor, fullscreenState) {\n      return function (api) {\n        api.setActive(fullscreenState.get() !== null);\n        var editorEventCallback = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('FullscreenStateChanged', editorEventCallback);\n        return function () {\n          return editor.off('FullscreenStateChanged', editorEventCallback);\n        };\n      };\n    };\n    var register$1 = function (editor, fullscreenState) {\n      editor.ui.registry.addToggleMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        shortcut: 'Meta+Shift+F',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n      editor.ui.registry.addToggleButton('fullscreen', {\n        tooltip: 'Fullscreen',\n        icon: 'fullscreen',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('fullscreen', function (editor) {\n        var fullscreenState = Cell(null);\n        if (editor.settings.inline) {\n          return Api.get(fullscreenState);\n        }\n        Commands.register(editor, fullscreenState);\n        Buttons.register(editor, fullscreenState);\n        editor.addShortcut('Meta+Shift+F', '', 'mceFullScreen');\n        return Api.get(fullscreenState);\n      });\n    }\n\n    Plugin();\n\n}(window));\n","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var Settings = {\n      assumeExternalTargets: assumeExternalTargets,\n      hasContextToolbar: hasContextToolbar,\n      getLinkList: getLinkList,\n      getDefaultLinkTarget: getDefaultLinkTarget,\n      getTargetList: getTargetList,\n      getRelList: getRelList,\n      getLinkClassList: getLinkClassList,\n      shouldShowLinkTitle: shouldShowLinkTitle,\n      allowUnsafeLinkTarget: allowUnsafeLinkTarget,\n      useQuickLink: useQuickLink\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var appendClickRemove = function (link, evt) {\n      domGlobals.document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      domGlobals.document.body.removeChild(link);\n    };\n    var open = function (url) {\n      if (!global$4.ie || global$4.ie > 10) {\n        var link = domGlobals.document.createElement('a');\n        link.target = '_blank';\n        link.href = url;\n        link.rel = 'noreferrer noopener';\n        var evt = domGlobals.document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, domGlobals.window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        appendClickRemove(link, evt);\n      } else {\n        var win = domGlobals.window.open('', '_blank');\n        if (win) {\n          win.opener = null;\n          var doc = win.document;\n          doc.open();\n          doc.write('<meta http-equiv=\"refresh\" content=\"0; url=' + global$3.DOM.encode(url) + '\">');\n          doc.close();\n        }\n      }\n    };\n    var OpenUrl = { open: open };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var slice = Array.prototype.slice;\n    var rawIndexOf = function () {\n      var pIndexOf = Array.prototype.indexOf;\n      var fastIndex = function (xs, x) {\n        return pIndexOf.call(xs, x);\n      };\n      var slowIndex = function (xs, x) {\n        return slowIndexOf(xs, x);\n      };\n      return pIndexOf === undefined ? slowIndex : fastIndex;\n    }();\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var slowIndexOf = function (xs, x) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (xs[i] === x) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$5.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$5.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var isLink = function (elm) {\n      return elm && elm.nodeName === 'A' && !!elm.href;\n    };\n    var hasLinks = function (elements) {\n      return global$5.grep(elements, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (html) {\n      if (/</.test(html) && (!/^<a [^>]+>[^<]+<\\/a>$/.test(html) || html.indexOf('href=') === -1)) {\n        return false;\n      }\n      return true;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      return foldl([\n        'title',\n        'rel',\n        'class',\n        'target'\n      ], function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (anchorElm.hasOwnProperty('innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var link = function (editor, attachState, data) {\n      editor.undoManager.transact(function () {\n        var selectedElm = editor.selection.getNode();\n        var anchorElm = getAnchorElement(editor, selectedElm);\n        var linkAttrs = getLinkAttrs(data);\n        if (!(Settings.getRelList(editor).length > 0) && Settings.allowUnsafeLinkTarget(editor) === false) {\n          var newRel = applyRelTargetRules(linkAttrs.rel, linkAttrs.target === '_blank');\n          linkAttrs.rel = newRel ? newRel : null;\n        }\n        if (Option.from(linkAttrs.target).isNone()) {\n          linkAttrs.target = Settings.getDefaultLinkTarget(editor);\n        }\n        linkAttrs.href = handleExternalTargets(linkAttrs.href, Settings.assumeExternalTargets(editor));\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlink = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          var anchorElm = editor.dom.getParent(node, 'a[href]', editor.getBody());\n          if (anchorElm) {\n            editor.dom.remove(anchorElm, true);\n          }\n        }\n        editor.focus();\n      });\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n    var Utils = {\n      link: link,\n      unlink: unlink,\n      isLink: isLink,\n      hasLinks: hasLinks,\n      getHref: getHref,\n      isOnlyTextSelected: isOnlyTextSelected,\n      getAnchorElement: getAnchorElement,\n      getAnchorText: getAnchorText,\n      applyRelTargetRules: applyRelTargetRules,\n      hasProtocol: hasProtocol\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$5.each(list, function (item) {\n        var text = isString(item.text) ? item.text : isString(item.title) ? item.title : '';\n        if (item.menu !== undefined) ; else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Option.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'selectbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        return Option.some(item).filter(function (i) {\n          return i.value === value;\n        });\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Option.none();\n    };\n    var findCatalog = function (settings, fieldName) {\n      if (fieldName === 'link') {\n        return settings.catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return settings.catalogs.anchor;\n      } else {\n        return Option.none();\n      }\n    };\n    var init = function (initialData, linkSettings) {\n      var persistentText = Cell(initialData.text);\n      var onUrlChange = function (data) {\n        if (persistentText.get().length <= 0) {\n          var urlText = data.url.meta.text !== undefined ? data.url.meta.text : data.url.value;\n          return Option.some({ text: urlText });\n        } else {\n          return Option.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkSettings, change.name).getOr([]);\n        return getDelta(persistentText.get(), change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        if (change.name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], change.name)) {\n          return onCatalogChange(getData(), change);\n        } else if (change.name === 'text') {\n          persistentText.set(getData().text);\n          return Option.none();\n        } else {\n          return Option.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$6.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('//') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Option.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign({}, oldData, { href: 'mailto:' + url });\n        }\n      }) : Option.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !Utils.hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www[\\.|\\d\\.]/i.test(url);\n        return suggestProtocol ? Option.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required http:// prefix?',\n          preprocess: function (oldData) {\n            return __assign({}, oldData, { href: 'http://' + url });\n          }\n        }) : Option.none();\n      };\n    };\n    var preprocess = function (editor, assumeExternalTargets, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets)\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return Future.pure(data);\n      }, function (transform) {\n        return Future.nu(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Option.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Option.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = Settings.getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Option.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Option.some(JSON.parse(text));\n      } catch (err) {\n        return Option.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = Settings.getLinkList(editor);\n      return Future.nu(function (callback) {\n        if (isString(linkList)) {\n          global$7.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Option.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Option.some(output));\n          });\n        } else {\n          callback(Option.from(linkList));\n        }\n      }).map(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            return [{\n                text: 'None',\n                value: ''\n              }].concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = Settings.getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = initialTarget.is('_blank');\n        var enforceSafe = Settings.allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return Utils.applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Option.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = Settings.getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Option.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Option.none();\n      }\n      return Option.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Option.some(val) : Option.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = Utils.isOnlyTextSelected(editor.selection.getContent());\n      var text = onlyText ? Option.some(Utils.getAnchorText(editor.selection, anchor)) : Option.none();\n      var url = anchor ? Option.some(dom.getAttrib(anchor, 'href')) : Option.none();\n      var target = anchor ? Option.from(dom.getAttrib(anchor, 'target')) : Option.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).map(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Option.from(linkNode),\n          flags: { titleEnabled: Settings.shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info, assumeExternalTargets) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          Utils.unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Option.from(data[key]).filter(function (value) {\n            return !info.anchor[key].is(value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : function () {\n          }\n        };\n        DialogConfirms.preprocess(editor, assumeExternalTargets, changedData).get(function (pData) {\n          Utils.link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = Utils.getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      return {\n        url: {\n          value: info.anchor.url.getOr(''),\n          meta: {\n            attach: function () {\n            },\n            text: info.anchor.url.fold(function () {\n              return '';\n            }, function () {\n              return info.anchor.text.getOr('');\n            }),\n            original: { value: info.anchor.url.getOr('') }\n          }\n        },\n        text: info.anchor.text.getOr(''),\n        title: info.anchor.title.getOr(''),\n        anchor: info.anchor.url.getOr(''),\n        link: info.anchor.url.getOr(''),\n        rel: info.anchor.rel.getOr(''),\n        target: info.anchor.target.or(defaultTarget).getOr(''),\n        linkClass: info.anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Option.from(Settings.getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var dialogDelta = DialogChanges.init(initialData, settings);\n      var catalogs = settings.catalogs;\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open$1 = function (editor) {\n      var data = collectData(editor);\n      data.map(function (info) {\n        var onSubmit = handleSubmit(editor, info, Settings.assumeExternalTargets(editor));\n        return makeDialog(info, onSubmit, editor);\n      }).get(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n    var Dialog = { open: open$1 };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = Utils.getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          OpenUrl.open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        Dialog.open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var leftClickedOnAHref = function (editor) {\n      return function (elm) {\n        var sel, rng, node;\n        if (Settings.hasContextToolbar(editor) && Utils.isLink(elm)) {\n          sel = editor.selection;\n          rng = sel.getRng();\n          node = rng.startContainer;\n          if (node.nodeType === 3 && sel.isCollapsed() && rng.startOffset > 0 && rng.startOffset < node.data.length) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$2.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        var nodeChangeHandler = function (e) {\n          return api.setActive(!editor.readonly && !!Utils.getAnchorElement(editor, e.element));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        api.setDisabled(!Utils.hasLinks(editor.dom.getParents(editor.selection.getStart())));\n        var nodeChangeHandler = function (e) {\n          return api.setDisabled(!Utils.hasLinks(e.parents));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n    var Actions = {\n      openDialog: openDialog,\n      gotoSelectedLink: gotoSelectedLink,\n      leftClickedOnAHref: leftClickedOnAHref,\n      setupGotoLinks: setupGotoLinks,\n      toggleActiveState: toggleActiveState,\n      toggleEnabledState: toggleEnabledState\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (Settings.useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          Actions.openDialog(editor)();\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n    var Keyboard = { setup: setup };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: Actions.openDialog(editor),\n        onSetup: Actions.toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return Utils.unlink(editor);\n        },\n        onSetup: Actions.toggleEnabledState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: Actions.gotoSelectedLink(editor),\n        onSetup: Actions.toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: Actions.openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return Utils.unlink(editor);\n        },\n        onSetup: Actions.toggleEnabledState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var noLink = 'link';\n      var inLink = 'link unlink openlink';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return Utils.hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!Utils.getAnchorElement(editor, node));\n        return function () {\n        };\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: Actions.toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!Utils.getAnchorElement(editor, node) && Settings.hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = Utils.getAnchorElement(editor);\n          return !!elm ? Utils.getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!Utils.getAnchorElement(editor, node));\n              return Actions.toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var anchor = Utils.getAnchorElement(editor);\n              var value = formApi.getValue();\n              if (!anchor) {\n                var attachState = {\n                  href: value,\n                  attach: function () {\n                  }\n                };\n                var onlyText = Utils.isOnlyTextSelected(editor.selection.getContent());\n                var text = onlyText ? Option.some(Utils.getAnchorText(editor.selection, anchor)).filter(function (t) {\n                  return t.length > 0;\n                }).or(Option.from(value)) : Option.none();\n                Utils.link(editor, attachState, {\n                  href: value,\n                  text: text,\n                  title: Option.none(),\n                  rel: Option.none(),\n                  target: Option.none(),\n                  class: Option.none()\n                });\n                formApi.hide();\n              } else {\n                editor.dom.setAttrib(anchor, 'href', value);\n                collapseSelectionToEnd(editor);\n                formApi.hide();\n              }\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              Utils.unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              Actions.gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n    var Controls = {\n      setupButtons: setupButtons,\n      setupMenuItems: setupMenuItems,\n      setupContextMenu: setupContextMenu,\n      setupContextToolbars: setupContextToolbars\n    };\n\n    function Plugin () {\n      global$1.add('link', function (editor) {\n        Controls.setupButtons(editor);\n        Controls.setupMenuItems(editor);\n        Controls.setupContextMenu(editor);\n        Controls.setupContextToolbars(editor);\n        Actions.setupGotoLinks(editor);\n        Commands.register(editor);\n        Keyboard.setup(editor);\n      });\n    }\n\n    Plugin();\n\n}(window));\n","// Exports the \"lists\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/lists')\n//   ES2015:\n//     import 'tinymce/plugins/lists'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var slice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var reverse = function (xs) {\n      var r = slice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var ELEMENT$1 = ELEMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var liftN = function (arr, f) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Option.none();\n        }\n      }\n      return Option.some(f.apply(null, r));\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var fireListEvent = function (editor, action, element) {\n      return editor.fire('ListMutation', {\n        action: action,\n        element: element\n      });\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var htmlElement = function (scope) {\n      return Global$1.getOrDie('HTMLElement', scope);\n    };\n    var isPrototypeOf = function (x) {\n      var scope = resolve('ownerDocument.defaultView', x);\n      return htmlElement(scope).prototype.isPrototypeOf(x);\n    };\n    var HTMLElement = { isPrototypeOf: isPrototypeOf };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = function (node) {\n      return node && /^(OL|UL|DL)$/.test(node.nodeName);\n    };\n    var isOlUlNode = function (node) {\n      return node && /^(OL|UL)$/.test(node.nodeName);\n    };\n    var isListItemNode = function (node) {\n      return node && /^(LI|DT|DD)$/.test(node.nodeName);\n    };\n    var isDlItemNode = function (node) {\n      return node && /^(DT|DD)$/.test(node.nodeName);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isBr = function (node) {\n      return node && node.nodeName === 'BR';\n    };\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isLastChild = function (node) {\n      return node.parentNode.lastChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      if (dom.isBlock(node.nextSibling) && !isBr(node.previousSibling)) {\n        return true;\n      }\n      return false;\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n    var NodeType = {\n      isTextNode: isTextNode,\n      isListNode: isListNode,\n      isOlUlNode: isOlUlNode,\n      isDlItemNode: isDlItemNode,\n      isListItemNode: isListItemNode,\n      isTableCellNode: isTableCellNode,\n      isBr: isBr,\n      isFirstChild: isFirstChild,\n      isLastChild: isLastChild,\n      isTextBlock: isTextBlock,\n      isBlock: isBlock,\n      isBogusBr: isBogusBr,\n      isEmpty: isEmpty,\n      isChildOfBody: isChildOfBody\n    };\n\n    var getParentList = function (editor) {\n      var selectionStart = editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return NodeType.isListNode(elm);\n      });\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return NodeType.isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$4.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return NodeType.isListItemNode(block);\n      });\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter(getSelectedListItems(editor), NodeType.isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter(editor.selection.getSelectedBlocks(), NodeType.isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$4.unique(listRoots);\n    };\n    var isList = function (editor) {\n      var list = getParentList(editor);\n      return HTMLElement.isPrototypeOf(list);\n    };\n    var Selection = {\n      isList: isList,\n      getParentList: getParentList,\n      getSelectedSubLists: getSelectedSubLists,\n      getSelectedListItems: getSelectedListItems,\n      getClosestListRootElm: getClosestListRootElm,\n      getSelectedDlItems: getSelectedDlItems,\n      getSelectedListRoots: getSelectedListRoots\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var node, textBlock, blockName, hasContentNode;\n      if (editor.settings.forced_root_block) {\n        blockName = editor.settings.forced_root_block;\n      }\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === editor.settings.forced_root_block) {\n          dom.setAttribs(textBlock, editor.settings.forced_root_block_attrs);\n        }\n        if (!NodeType.isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (NodeType.isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!editor.settings.forced_root_block) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode && (!global$6.ie || global$6.ie > 10)) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before(original, nu);\n      var children$1 = children(original);\n      append$1(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var joinSegment = function (parent, child) {\n      append(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      liftN([\n        last(head$1),\n        head(tail)\n      ], joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: Element.fromTag(listType, scope),\n        item: Element.fromTag('li', scope)\n      };\n      append(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append$1(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = Element.fromTag('li', scope);\n      setAll(item, attr);\n      append$1(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList$1 = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).map(isList$1).getOr(false);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).map(isList$1).getOr(false);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone(li),\n          listAttributes: clone(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = merge({}, source.listAttributes);\n    };\n    var previousSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      for (var i = start - 1; i >= 0; i--) {\n        if (entries[i].depth === depth) {\n          return Option.some(entries[i]);\n        }\n        if (entries[i].depth < depth) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var normalizeEntries = function (entries) {\n      each(entries, function (entry, i) {\n        previousSiblingEntry(entries, i).each(function (matchingEntry) {\n          cloneListProperties(entry, matchingEntry);\n        });\n      });\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList$1).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList$1).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList$1(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      return map(entries, function (entry) {\n        var content = fromElements(entry.content);\n        return Element.fromDom(createTextBlock(editor, content.dom()));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      normalizeEntries(entries);\n      return composeList(editor.contentDocument, entries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).map(isIndented).getOr(false);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each(filter(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(Selection.getSelectedListItems(editor), Element.fromDom);\n      return liftN([\n        find(selectedListItems, not(hasFirstChildList)),\n        find(reverse(selectedListItems), not(hasFirstChildList))\n      ], function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        var composedLists = composeEntries(editor, entrySet.entries);\n        each(composedLists, function (composedList) {\n          fireListEvent(editor, indentation === 'Indent' ? 'IndentList' : 'OutdentList', composedList.dom());\n        });\n        before$1(entrySet.sourceList, composedLists);\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var DOM = global$7.DOM;\n    var splitList = function (editor, ul, li) {\n      var tmpRng, fragment, bookmarks, node, newBlock;\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM.remove(targetNode);\n      };\n      bookmarks = DOM.select('span[data-mce-type=\"bookmark\"]', ul);\n      newBlock = createTextBlock(editor, li);\n      tmpRng = DOM.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      fragment = tmpRng.extractContents();\n      for (node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM.insertAfter(fragment, ul);\n      }\n      DOM.insertAfter(newBlock, ul);\n      if (NodeType.isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM.remove(li);\n      if (NodeType.isEmpty(editor.dom, ul)) {\n        DOM.remove(ul);\n      }\n    };\n    var SplitList = { splitList: splitList };\n\n    var outdentDlItem = function (editor, item) {\n      if (is$1(item, 'dd')) {\n        mutate(item, 'dt');\n      } else if (is$1(item, 'dt')) {\n        parent(item).each(function (dl) {\n          return SplitList.splitList(editor, dl.dom(), item.dom());\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (is$1(item, 'dt')) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each(dlItems, indentDlItem);\n      } else {\n        each(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (NodeType.isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$1.getNode(container, offset);\n      if (NodeType.isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && NodeType.isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && NodeType.isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n    var Range = {\n      getNormalizedPoint: getNormalizedPoint,\n      normalizeRange: normalizeRange\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(Selection.getSelectedListRoots(editor), Element.fromDom);\n      var dlItems = map(Selection.getSelectedDlItems(editor), Element.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(Range.normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var DOM$1 = global$7.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          offsetNode = DOM$1.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM$1.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      function restoreEndPoint(start) {\n        var container, offset, node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM$1.remove(node);\n          if (!container.hasChildNodes() && DOM$1.isBlock(container)) {\n            container.appendChild(DOM$1.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      }\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM$1.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return Range.normalizeRange(rng);\n    };\n    var Bookmark = {\n      createBookmark: createBookmark,\n      resolveBookmark: resolveBookmark\n    };\n\n    var isCustomList = function (list) {\n      return /\\btox\\-/.test(list.className);\n    };\n\n    var listToggleActionFromListName = function (listName) {\n      switch (listName) {\n      case 'UL':\n        return 'ToggleUlList';\n      case 'OL':\n        return 'ToggleOlList';\n      case 'DL':\n        return 'ToggleDLList';\n      }\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && NodeType.isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (NodeType.isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [], dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$5.each(siblings, function (node) {\n        if (NodeType.isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || NodeType.isBr(node)) {\n          if (NodeType.isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global$8.isBookmarkNode(node)) {\n          if (NodeType.isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      if (detail === void 0) {\n        detail = {};\n      }\n      var rng = editor.selection.getRng(true);\n      var bookmark;\n      var listItemName = 'LI';\n      var root = Selection.getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      bookmark = Bookmark.createBookmark(rng);\n      global$5.each(getSelectedTextBlocks(editor, rng, root), function (block) {\n        var listBlock, sibling;\n        sibling = block.previousSibling;\n        if (sibling && NodeType.isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n          listBlock = sibling;\n          block = dom.rename(block, listItemName);\n          sibling.appendChild(block);\n        } else {\n          listBlock = dom.create(listName);\n          block.parentNode.insertBefore(listBlock, block);\n          listBlock.appendChild(block);\n          block = dom.rename(block, listItemName);\n        }\n        removeStyles(dom, block, [\n          'margin',\n          'margin-right',\n          'margin-bottom',\n          'margin-left',\n          'margin-top',\n          'padding',\n          'padding-right',\n          'padding-bottom',\n          'padding-left',\n          'padding-top'\n        ]);\n        updateListWithDetails(dom, listBlock, detail);\n        mergeWithAdjacentLists(editor.dom, listBlock);\n      });\n      editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && NodeType.isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList = function (editor, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = editor.dom.rename(list, listName);\n        updateListWithDetails(editor.dom, newList, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), newList);\n      } else {\n        updateListWithDetails(editor.dom, list, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), list);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n        global$5.each([parentList].concat(lists), function (elm) {\n          updateList(editor, elm, listName, detail);\n        });\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail) && !isCustomList(parentList)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          var newList = editor.dom.rename(parentList, listName);\n          mergeWithAdjacentLists(editor.dom, newList);\n          editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n          fireListEvent(editor, listToggleActionFromListName(listName), newList);\n        }\n      } else {\n        applyList(editor, listName, detail);\n        fireListEvent(editor, listToggleActionFromListName(listName), parentList);\n      }\n    };\n    var toggleList = function (editor, listName, detail) {\n      var parentList = Selection.getParentList(editor);\n      var selectedSubLists = Selection.getSelectedSubLists(editor);\n      detail = detail ? detail : {};\n      if (parentList && selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n    var ToggleList = {\n      toggleList: toggleList,\n      mergeWithAdjacentLists: mergeWithAdjacentLists\n    };\n\n    var DOM$2 = global$7.DOM;\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n          if (NodeType.isEmpty(dom, parentNode)) {\n            DOM$2.remove(parentNode);\n          }\n        } else {\n          DOM$2.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (NodeType.isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n    var NormalizeLists = {\n      normalizeList: normalizeList,\n      normalizeLists: normalizeLists\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      if (NodeType.isTextNode(node) && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      var nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n      var walker = new global$2(node, root);\n      if (isForward) {\n        if (NodeType.isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (NodeType.isTextNode(node) && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !NodeType.isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node, targetElm;\n      targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!NodeType.isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var node, listNode;\n      var ul = fromElm.parentNode;\n      if (!NodeType.isChildOfBody(dom, fromElm) || !NodeType.isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (NodeType.isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (NodeType.isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      node = toElm.lastChild;\n      if (node && NodeType.isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (NodeType.isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains = contains$1(Element.fromDom(toElm), Element.fromDom(fromElm));\n      var nestedLists = contains ? dom.getParents(fromElm, NodeType.isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each(nestedLists, function (list) {\n        if (NodeType.isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = Bookmark.createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = Bookmark.createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = Bookmark.resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      if (li) {\n        var ul = li.parentNode;\n        if (ul === editor.getBody() && NodeType.isEmpty(dom, ul)) {\n          return true;\n        }\n        var rng_1 = Range.normalizeRange(selection.getRng());\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng_1, isForward, root), 'LI', root);\n        if (otherLi_1 && otherLi_1 !== li) {\n          editor.undoManager.transact(function () {\n            if (isForward) {\n              mergeForward(editor, rng_1, otherLi_1, li);\n            } else {\n              if (NodeType.isFirstChild(li)) {\n                outdentListSelection(editor);\n              } else {\n                mergeBackward(editor, rng_1, li, otherLi_1);\n              }\n            }\n          });\n          return true;\n        } else if (!otherLi_1) {\n          if (!isForward && rng_1.startOffset === 0 && rng_1.endOffset === 0) {\n            editor.undoManager.transact(function () {\n              flattenListSelection(editor);\n            });\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = Range.normalizeRange(editor.selection.getRng());\n        var otherLi_2 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_2) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            ToggleList.mergeWithAdjacentLists(dom, otherLi_2.parentNode);\n            editor.selection.select(otherLi_2, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || Selection.getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          NormalizeLists.normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Delete = {\n      setup: setup,\n      backspaceDelete: backspaceDelete\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          Delete.backspaceDelete(editor, isForward);\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n    var Commands = { register: register };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var Settings = { shouldIndentOnTab: shouldIndentOnTab };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup$1 = function (editor) {\n      if (Settings.shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      Delete.setup(editor);\n    };\n    var Keyboard = { setup: setup$1 };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (buttonApi) {\n        var nodeChangeHandler = function (e) {\n          var tableCellIndex = findIndex(e.parents, NodeType.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$5.grep(parents, NodeType.isListNode);\n          buttonApi.setActive(lists.length > 0 && lists[0].nodeName === listName && !isCustomList(lists[0]));\n        };\n        editor.on('NodeChange', nodeChangeHandler);\n        return function () {\n          return editor.off('NodeChange', nodeChangeHandler);\n        };\n      };\n    };\n    var register$1 = function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$5.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      var exec = function (command) {\n        return function () {\n          return editor.execCommand(command);\n        };\n      };\n      if (!hasPlugin(editor, 'advlist')) {\n        editor.ui.registry.addToggleButton('numlist', {\n          icon: 'ordered-list',\n          active: false,\n          tooltip: 'Numbered list',\n          onAction: exec('InsertOrderedList'),\n          onSetup: listState(editor, 'OL')\n        });\n        editor.ui.registry.addToggleButton('bullist', {\n          icon: 'unordered-list',\n          active: false,\n          tooltip: 'Bullet list',\n          onAction: exec('InsertUnorderedList'),\n          onSetup: listState(editor, 'UL')\n        });\n      }\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('lists', function (editor) {\n        Keyboard.setup(editor);\n        Buttons.register(editor);\n        Commands.register(editor);\n        return Api.get(editor);\n      });\n    }\n\n    Plugin();\n\n}(window));\n","// Exports the \"media\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/media')\n//   ES2015:\n//     import 'tinymce/plugins/media'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.0.14 (2019-08-19)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isFunction = isType('function');\n\n    var slice = Array.prototype.slice;\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n\n    var getScripts = function (editor) {\n      return editor.getParam('media_scripts');\n    };\n    var getAudioTemplateCallback = function (editor) {\n      return editor.getParam('audio_template_callback');\n    };\n    var getVideoTemplateCallback = function (editor) {\n      return editor.getParam('video_template_callback');\n    };\n    var hasLiveEmbeds = function (editor) {\n      return editor.getParam('media_live_embeds', true);\n    };\n    var shouldFilterHtml = function (editor) {\n      return editor.getParam('media_filter_html', true);\n    };\n    var getUrlResolver = function (editor) {\n      return editor.getParam('media_url_resolver');\n    };\n    var hasAltSource = function (editor) {\n      return editor.getParam('media_alt_source', true);\n    };\n    var hasPoster = function (editor) {\n      return editor.getParam('media_poster', true);\n    };\n    var hasDimensions = function (editor) {\n      return editor.getParam('media_dimensions', true);\n    };\n    var Settings = {\n      getScripts: getScripts,\n      getAudioTemplateCallback: getAudioTemplateCallback,\n      getVideoTemplateCallback: getVideoTemplateCallback,\n      hasLiveEmbeds: hasLiveEmbeds,\n      shouldFilterHtml: shouldFilterHtml,\n      getUrlResolver: getUrlResolver,\n      hasAltSource: hasAltSource,\n      hasPoster: hasPoster,\n      hasDimensions: hasDimensions\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.html.SaxParser');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var trimPx = function (value) {\n      return value.replace(/px$/, '');\n    };\n    var addPx = function (value) {\n      return /^[0-9.]+$/.test(value) ? value + 'px' : value;\n    };\n    var getSize = function (name) {\n      return function (elm) {\n        return elm ? trimPx(elm.style[name]) : '';\n      };\n    };\n    var setSize = function (name) {\n      return function (elm, value) {\n        if (elm) {\n          elm.style[name] = addPx(value);\n        }\n      };\n    };\n    var Size = {\n      getMaxWidth: getSize('maxWidth'),\n      getMaxHeight: getSize('maxHeight'),\n      setMaxWidth: setSize('maxWidth'),\n      setMaxHeight: setSize('maxHeight')\n    };\n\n    var getVideoScriptMatch = function (prefixes, src) {\n      if (prefixes) {\n        for (var i = 0; i < prefixes.length; i++) {\n          if (src.indexOf(prefixes[i].filter) !== -1) {\n            return prefixes[i];\n          }\n        }\n      }\n    };\n\n    var DOM = global$3.DOM;\n    var getEphoxEmbedIri = function (elm) {\n      return DOM.getAttrib(elm, 'data-ephox-embed-iri');\n    };\n    var isEphoxEmbed = function (html) {\n      var fragment = DOM.createFragment(html);\n      return getEphoxEmbedIri(fragment.firstChild) !== '';\n    };\n    var htmlToDataSax = function (prefixes, html) {\n      var data = {};\n      global$2({\n        validate: false,\n        allow_conditional_comments: true,\n        start: function (name, attrs) {\n          if (!data.source1 && name === 'param') {\n            data.source1 = attrs.map.movie;\n          }\n          if (name === 'iframe' || name === 'object' || name === 'embed' || name === 'video' || name === 'audio') {\n            if (!data.type) {\n              data.type = name;\n            }\n            data = global$1.extend(attrs.map, data);\n          }\n          if (name === 'script') {\n            var videoScript = getVideoScriptMatch(prefixes, attrs.map.src);\n            if (!videoScript) {\n              return;\n            }\n            data = {\n              type: 'script',\n              source1: attrs.map.src,\n              width: String(videoScript.width),\n              height: String(videoScript.height)\n            };\n          }\n          if (name === 'source') {\n            if (!data.source1) {\n              data.source1 = attrs.map.src;\n            } else if (!data.source2) {\n              data.source2 = attrs.map.src;\n            }\n          }\n          if (name === 'img' && !data.poster) {\n            data.poster = attrs.map.src;\n          }\n        }\n      }).parse(html);\n      data.source1 = data.source1 || data.src || data.data;\n      data.source2 = data.source2 || '';\n      data.poster = data.poster || '';\n      return data;\n    };\n    var ephoxEmbedHtmlToData = function (html) {\n      var fragment = DOM.createFragment(html);\n      var div = fragment.firstChild;\n      return {\n        type: 'ephox-embed-iri',\n        source1: getEphoxEmbedIri(div),\n        source2: '',\n        poster: '',\n        width: Size.getMaxWidth(div),\n        height: Size.getMaxHeight(div)\n      };\n    };\n    var htmlToData = function (prefixes, html) {\n      return isEphoxEmbed(html) ? ephoxEmbedHtmlToData(html) : htmlToDataSax(prefixes, html);\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var guess = function (url) {\n      var mimes = {\n        mp3: 'audio/mpeg',\n        m4a: 'audio/x-m4a',\n        wav: 'audio/wav',\n        mp4: 'video/mp4',\n        webm: 'video/webm',\n        ogg: 'video/ogg',\n        swf: 'application/x-shockwave-flash'\n      };\n      var fileEnd = url.toLowerCase().split('.').pop();\n      var mime = mimes[fileEnd];\n      return mime ? mime : '';\n    };\n    var Mime = { guess: guess };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.html.Writer');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var DOM$1 = global$3.DOM;\n    var setAttributes = function (attrs, updatedAttrs) {\n      var name;\n      var i;\n      var value;\n      var attr;\n      for (name in updatedAttrs) {\n        value = '' + updatedAttrs[name];\n        if (attrs.map[name]) {\n          i = attrs.length;\n          while (i--) {\n            attr = attrs[i];\n            if (attr.name === name) {\n              if (value) {\n                attrs.map[name] = value;\n                attr.value = value;\n              } else {\n                delete attrs.map[name];\n                attrs.splice(i, 1);\n              }\n            }\n          }\n        } else if (value) {\n          attrs.push({\n            name: name,\n            value: value\n          });\n          attrs.map[name] = value;\n        }\n      }\n    };\n    var normalizeHtml = function (html) {\n      var writer = global$5();\n      var parser = global$2(writer);\n      parser.parse(html);\n      return writer.getContent();\n    };\n    var updateHtmlSax = function (html, data, updateAll) {\n      var writer = global$5();\n      var sourceCount = 0;\n      var hasImage;\n      global$2({\n        validate: false,\n        allow_conditional_comments: true,\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          switch (name) {\n          case 'video':\n          case 'object':\n          case 'embed':\n          case 'img':\n          case 'iframe':\n            if (data.height !== undefined && data.width !== undefined) {\n              setAttributes(attrs, {\n                width: data.width,\n                height: data.height\n              });\n            }\n            break;\n          }\n          if (updateAll) {\n            switch (name) {\n            case 'video':\n              setAttributes(attrs, {\n                poster: data.poster,\n                src: ''\n              });\n              if (data.source2) {\n                setAttributes(attrs, { src: '' });\n              }\n              break;\n            case 'iframe':\n              setAttributes(attrs, { src: data.source1 });\n              break;\n            case 'source':\n              sourceCount++;\n              if (sourceCount <= 2) {\n                setAttributes(attrs, {\n                  src: data['source' + sourceCount],\n                  type: data['source' + sourceCount + 'mime']\n                });\n                if (!data['source' + sourceCount]) {\n                  return;\n                }\n              }\n              break;\n            case 'img':\n              if (!data.poster) {\n                return;\n              }\n              hasImage = true;\n              break;\n            }\n          }\n          writer.start(name, attrs, empty);\n        },\n        end: function (name) {\n          if (name === 'video' && updateAll) {\n            for (var index = 1; index <= 2; index++) {\n              if (data['source' + index]) {\n                var attrs = [];\n                attrs.map = {};\n                if (sourceCount < index) {\n                  setAttributes(attrs, {\n                    src: data['source' + index],\n                    type: data['source' + index + 'mime']\n                  });\n                  writer.start('source', attrs, true);\n                }\n              }\n            }\n          }\n          if (data.poster && name === 'object' && updateAll && !hasImage) {\n            var imgAttrs = [];\n            imgAttrs.map = {};\n            setAttributes(imgAttrs, {\n              src: data.poster,\n              width: data.width,\n              height: data.height\n            });\n            writer.start('img', imgAttrs, true);\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var isEphoxEmbed$1 = function (html) {\n      var fragment = DOM$1.createFragment(html);\n      return DOM$1.getAttrib(fragment.firstChild, 'data-ephox-embed-iri') !== '';\n    };\n    var updateEphoxEmbed = function (html, data) {\n      var fragment = DOM$1.createFragment(html);\n      var div = fragment.firstChild;\n      Size.setMaxWidth(div, data.width);\n      Size.setMaxHeight(div, data.height);\n      return normalizeHtml(div.outerHTML);\n    };\n    var updateHtml = function (html, data, updateAll) {\n      return isEphoxEmbed$1(html) ? updateEphoxEmbed(html, data) : updateHtmlSax(html, data, updateAll);\n    };\n    var UpdateHtml = { updateHtml: updateHtml };\n\n    var urlPatterns = [\n      {\n        regex: /youtu\\.be\\/([\\w\\-_\\?&=.]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube\\.com(.+)v=([^&]+)(&([a-z0-9&=\\-_]+))?/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$2?$4',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube.com\\/embed\\/([a-z0-9\\?&=\\-_]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/(.*)\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$2?title=0&amp;byline=0',\n        allowFullscreen: true\n      },\n      {\n        regex: /maps\\.google\\.([a-z]{2,3})\\/maps\\/(.+)msid=(.+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//maps.google.com/maps/ms?msid=$2&output=embed\"',\n        allowFullscreen: false\n      },\n      {\n        regex: /dailymotion\\.com\\/video\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /dai\\.ly\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      }\n    ];\n    var getUrl = function (pattern, url) {\n      var match = pattern.regex.exec(url);\n      var newUrl = pattern.url;\n      var _loop_1 = function (i) {\n        newUrl = newUrl.replace('$' + i, function () {\n          return match[i] ? match[i] : '';\n        });\n      };\n      for (var i = 0; i < match.length; i++) {\n        _loop_1(i);\n      }\n      return newUrl.replace(/\\?$/, '');\n    };\n    var matchPattern = function (url) {\n      var pattern = urlPatterns.filter(function (pattern) {\n        return pattern.regex.test(url);\n      });\n      if (pattern.length > 0) {\n        return global$1.extend({}, pattern[0], { url: getUrl(pattern[0], url) });\n      } else {\n        return null;\n      }\n    };\n\n    var getIframeHtml = function (data) {\n      var allowFullscreen = data.allowFullscreen ? ' allowFullscreen=\"1\"' : '';\n      return '<iframe src=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\"' + allowFullscreen + '></iframe>';\n    };\n    var getFlashHtml = function (data) {\n      var html = '<object data=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" type=\"application/x-shockwave-flash\">';\n      if (data.poster) {\n        html += '<img src=\"' + data.poster + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" />';\n      }\n      html += '</object>';\n      return html;\n    };\n    var getAudioHtml = function (data, audioTemplateCallback) {\n      if (audioTemplateCallback) {\n        return audioTemplateCallback(data);\n      } else {\n        return '<audio controls=\"controls\" src=\"' + data.source1 + '\">' + (data.source2 ? '\\n<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</audio>';\n      }\n    };\n    var getVideoHtml = function (data, videoTemplateCallback) {\n      if (videoTemplateCallback) {\n        return videoTemplateCallback(data);\n      } else {\n        return '<video width=\"' + data.width + '\" height=\"' + data.height + '\"' + (data.poster ? ' poster=\"' + data.poster + '\"' : '') + ' controls=\"controls\">\\n' + '<source src=\"' + data.source1 + '\"' + (data.source1mime ? ' type=\"' + data.source1mime + '\"' : '') + ' />\\n' + (data.source2 ? '<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</video>';\n      }\n    };\n    var getScriptHtml = function (data) {\n      return '<script src=\"' + data.source1 + '\"></script>';\n    };\n    var dataToHtml = function (editor, dataIn) {\n      var data = global$1.extend({}, dataIn);\n      if (!data.source1) {\n        global$1.extend(data, htmlToData(Settings.getScripts(editor), data.embed));\n        if (!data.source1) {\n          return '';\n        }\n      }\n      if (!data.source2) {\n        data.source2 = '';\n      }\n      if (!data.poster) {\n        data.poster = '';\n      }\n      data.source1 = editor.convertURL(data.source1, 'source');\n      data.source2 = editor.convertURL(data.source2, 'source');\n      data.source1mime = Mime.guess(data.source1);\n      data.source2mime = Mime.guess(data.source2);\n      data.poster = editor.convertURL(data.poster, 'poster');\n      var pattern = matchPattern(data.source1);\n      if (pattern) {\n        data.source1 = pattern.url;\n        data.type = pattern.type;\n        data.allowFullscreen = pattern.allowFullscreen;\n        data.width = data.width || String(pattern.w);\n        data.height = data.height || String(pattern.h);\n      }\n      if (data.embed) {\n        return UpdateHtml.updateHtml(data.embed, data, true);\n      } else {\n        var videoScript = getVideoScriptMatch(Settings.getScripts(editor), data.source1);\n        if (videoScript) {\n          data.type = 'script';\n          data.width = String(videoScript.width);\n          data.height = String(videoScript.height);\n        }\n        var audioTemplateCallback = Settings.getAudioTemplateCallback(editor);\n        var videoTemplateCallback = Settings.getVideoTemplateCallback(editor);\n        data.width = data.width || '300';\n        data.height = data.height || '150';\n        global$1.each(data, function (value, key) {\n          data[key] = editor.dom.encode('' + value);\n        });\n        if (data.type === 'iframe') {\n          return getIframeHtml(data);\n        } else if (data.source1mime === 'application/x-shockwave-flash') {\n          return getFlashHtml(data);\n        } else if (data.source1mime.indexOf('audio') !== -1) {\n          return getAudioHtml(data, audioTemplateCallback);\n        } else if (data.type === 'script') {\n          return getScriptHtml(data);\n        } else {\n          return getVideoHtml(data, videoTemplateCallback);\n        }\n      }\n    };\n\n    var cache = {};\n    var embedPromise = function (data, dataToHtml, handler) {\n      return new global$4(function (res, rej) {\n        var wrappedResolve = function (response) {\n          if (response.html) {\n            cache[data.source1] = response;\n          }\n          return res({\n            url: data.source1,\n            html: response.html ? response.html : dataToHtml(data)\n          });\n        };\n        if (cache[data.source1]) {\n          wrappedResolve(cache[data.source1]);\n        } else {\n          handler({ url: data.source1 }, wrappedResolve, rej);\n        }\n      });\n    };\n    var defaultPromise = function (data, dataToHtml) {\n      return new global$4(function (res) {\n        res({\n          html: dataToHtml(data),\n          url: data.source1\n        });\n      });\n    };\n    var loadedData = function (editor) {\n      return function (data) {\n        return dataToHtml(editor, data);\n      };\n    };\n    var getEmbedHtml = function (editor, data) {\n      var embedHandler = Settings.getUrlResolver(editor);\n      return embedHandler ? embedPromise(data, loadedData(editor), embedHandler) : defaultPromise(data, loadedData(editor));\n    };\n    var isCached = function (url) {\n      return cache.hasOwnProperty(url);\n    };\n    var Service = {\n      getEmbedHtml: getEmbedHtml,\n      isCached: isCached\n    };\n\n    var unwrap = function (data) {\n      var unwrapped = merge(data, {\n        source1: data.source1.value,\n        source2: get(data, 'source2').bind(function (source2) {\n          return get(source2, 'value');\n        }).getOr(''),\n        poster: get(data, 'poster').bind(function (poster) {\n          return get(poster, 'value');\n        }).getOr('')\n      });\n      get(data, 'dimensions').each(function (dimensions) {\n        each([\n          'width',\n          'height'\n        ], function (prop) {\n          get(dimensions, prop).each(function (value) {\n            return unwrapped[prop] = value;\n          });\n        });\n      });\n      return unwrapped;\n    };\n    var wrap = function (data) {\n      var wrapped = merge(data, {\n        source1: { value: get(data, 'source1').getOr('') },\n        source2: { value: get(data, 'source2').getOr('') },\n        poster: { value: get(data, 'poster').getOr('') }\n      });\n      each([\n        'width',\n        'height'\n      ], function (prop) {\n        get(data, prop).each(function (value) {\n          var dimensions = wrapped.dimensions || {};\n          dimensions[prop] = value;\n          wrapped.dimensions = dimensions;\n        });\n      });\n      return wrapped;\n    };\n    var handleError = function (editor) {\n      return function (error) {\n        var errorMessage = error && error.msg ? 'Media embed handler error: ' + error.msg : 'Media embed handler threw unknown error.';\n        editor.notificationManager.open({\n          type: 'error',\n          text: errorMessage\n        });\n      };\n    };\n    var snippetToData = function (editor, embedSnippet) {\n      return htmlToData(Settings.getScripts(editor), embedSnippet);\n    };\n    var isMediaElement = function (element) {\n      return element.getAttribute('data-mce-object') || element.getAttribute('data-ephox-embed-iri');\n    };\n    var getEditorData = function (editor) {\n      var element = editor.selection.getNode();\n      var snippet = isMediaElement(element) ? editor.serializer.serialize(element, { selection: true }) : '';\n      return merge({ embed: snippet }, htmlToData(Settings.getScripts(editor), snippet));\n    };\n    var addEmbedHtml = function (api, editor) {\n      return function (response) {\n        if (isString(response.url) && response.url.trim().length > 0) {\n          var html = response.html;\n          var snippetData = snippetToData(editor, html);\n          var nuData = __assign({}, snippetData, {\n            source1: response.url,\n            embed: html\n          });\n          api.setData(wrap(nuData));\n        }\n      };\n    };\n    var selectPlaceholder = function (editor, beforeObjects) {\n      var afterObjects = editor.dom.select('img[data-mce-object]');\n      for (var i = 0; i < beforeObjects.length; i++) {\n        for (var y = afterObjects.length - 1; y >= 0; y--) {\n          if (beforeObjects[i] === afterObjects[y]) {\n            afterObjects.splice(y, 1);\n          }\n        }\n      }\n      editor.selection.select(afterObjects[0]);\n    };\n    var handleInsert = function (editor, html) {\n      var beforeObjects = editor.dom.select('img[data-mce-object]');\n      editor.insertContent(html);\n      selectPlaceholder(editor, beforeObjects);\n      editor.nodeChanged();\n    };\n    var submitForm = function (prevData, newData, editor) {\n      newData.embed = UpdateHtml.updateHtml(newData.embed, newData);\n      if (newData.embed && (prevData.source1 === newData.source1 || Service.isCached(newData.source1))) {\n        handleInsert(editor, newData.embed);\n      } else {\n        Service.getEmbedHtml(editor, newData).then(function (response) {\n          handleInsert(editor, response.html);\n        }).catch(handleError(editor));\n      }\n    };\n    var showDialog = function (editor) {\n      var editorData = getEditorData(editor);\n      var currentData = Cell(editorData);\n      var initialData = wrap(editorData);\n      var getSourceData = function (api) {\n        return unwrap(api.getData());\n      };\n      var handleSource1 = function (prevData, api) {\n        var serviceData = getSourceData(api);\n        if (prevData.source1 !== serviceData.source1) {\n          addEmbedHtml(win, editor)({\n            url: serviceData.source1,\n            html: ''\n          });\n          Service.getEmbedHtml(editor, serviceData).then(addEmbedHtml(win, editor)).catch(handleError(editor));\n        }\n      };\n      var handleEmbed = function (api) {\n        var data = unwrap(api.getData());\n        var dataFromEmbed = snippetToData(editor, data.embed);\n        api.setData(wrap(dataFromEmbed));\n      };\n      var mediaInput = [{\n          name: 'source1',\n          type: 'urlinput',\n          filetype: 'media',\n          label: 'Source'\n        }];\n      var sizeInput = !Settings.hasDimensions(editor) ? [] : [{\n          type: 'sizeinput',\n          name: 'dimensions',\n          label: 'Constrain proportions',\n          constrain: true\n        }];\n      var generalTab = {\n        title: 'General',\n        name: 'general',\n        items: flatten([\n          mediaInput,\n          sizeInput\n        ])\n      };\n      var embedTextarea = {\n        type: 'textarea',\n        name: 'embed',\n        label: 'Paste your embed code below:'\n      };\n      var embedTab = {\n        title: 'Embed',\n        items: [embedTextarea]\n      };\n      var advancedFormItems = [];\n      if (Settings.hasAltSource(editor)) {\n        advancedFormItems.push({\n          name: 'source2',\n          type: 'urlinput',\n          filetype: 'media',\n          label: 'Alternative source URL'\n        });\n      }\n      if (Settings.hasPoster(editor)) {\n        advancedFormItems.push({\n          name: 'poster',\n          type: 'urlinput',\n          filetype: 'image',\n          label: 'Media poster (Image URL)'\n        });\n      }\n      var advancedTab = {\n        title: 'Advanced',\n        name: 'advanced',\n        items: advancedFormItems\n      };\n      var tabs = [\n        generalTab,\n        embedTab\n      ];\n      if (advancedFormItems.length > 0) {\n        tabs.push(advancedTab);\n      }\n      var body = {\n        type: 'tabpanel',\n        tabs: tabs\n      };\n      var win = editor.windowManager.open({\n        title: 'Insert/Edit Media',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        onSubmit: function (api) {\n          var serviceData = getSourceData(api);\n          submitForm(currentData.get(), serviceData, editor);\n          api.close();\n        },\n        onChange: function (api, detail) {\n          switch (detail.name) {\n          case 'source1':\n            handleSource1(currentData.get(), api);\n            break;\n          case 'embed':\n            handleEmbed(api);\n            break;\n          default:\n            break;\n          }\n          currentData.set(getSourceData(api));\n        },\n        initialData: initialData\n      });\n    };\n    var Dialog = { showDialog: showDialog };\n\n    var get$1 = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      return { showDialog: showDialog };\n    };\n    var Api = { get: get$1 };\n\n    var register = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      editor.addCommand('mceMedia', showDialog);\n    };\n    var Commands = { register: register };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var sanitize = function (editor, html) {\n      if (Settings.shouldFilterHtml(editor) === false) {\n        return html;\n      }\n      var writer = global$5();\n      var blocked;\n      global$2({\n        validate: false,\n        allow_conditional_comments: false,\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          blocked = true;\n          if (name === 'script' || name === 'noscript') {\n            return;\n          }\n          for (var i = 0; i < attrs.length; i++) {\n            if (attrs[i].name.indexOf('on') === 0) {\n              return;\n            }\n            if (attrs[i].name === 'style') {\n              attrs[i].value = editor.dom.serializeStyle(editor.dom.parseStyle(attrs[i].value), name);\n            }\n          }\n          writer.start(name, attrs, empty);\n          blocked = false;\n        },\n        end: function (name) {\n          if (blocked) {\n            return;\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var Sanitize = { sanitize: sanitize };\n\n    var createPlaceholderNode = function (editor, node) {\n      var placeHolder;\n      var name = node.name;\n      placeHolder = new global$7('img', 1);\n      placeHolder.shortEnded = true;\n      retainAttributesAndInnerHtml(editor, node, placeHolder);\n      placeHolder.attr({\n        'width': node.attr('width') || '300',\n        'height': node.attr('height') || (name === 'audio' ? '30' : '150'),\n        'style': node.attr('style'),\n        'src': global$8.transparentSrc,\n        'data-mce-object': name,\n        'class': 'mce-object mce-object-' + name\n      });\n      return placeHolder;\n    };\n    var createPreviewIframeNode = function (editor, node) {\n      var previewWrapper;\n      var previewNode;\n      var shimNode;\n      var name = node.name;\n      previewWrapper = new global$7('span', 1);\n      previewWrapper.attr({\n        'contentEditable': 'false',\n        'style': node.attr('style'),\n        'data-mce-object': name,\n        'class': 'mce-preview-object mce-object-' + name\n      });\n      retainAttributesAndInnerHtml(editor, node, previewWrapper);\n      previewNode = new global$7(name, 1);\n      previewNode.attr({\n        src: node.attr('src'),\n        allowfullscreen: node.attr('allowfullscreen'),\n        style: node.attr('style'),\n        class: node.attr('class'),\n        width: node.attr('width'),\n        height: node.attr('height'),\n        frameborder: '0'\n      });\n      shimNode = new global$7('span', 1);\n      shimNode.attr('class', 'mce-shim');\n      previewWrapper.append(previewNode);\n      previewWrapper.append(shimNode);\n      return previewWrapper;\n    };\n    var retainAttributesAndInnerHtml = function (editor, sourceNode, targetNode) {\n      var attrName;\n      var attrValue;\n      var attribs;\n      var ai;\n      var innerHtml;\n      attribs = sourceNode.attributes;\n      ai = attribs.length;\n      while (ai--) {\n        attrName = attribs[ai].name;\n        attrValue = attribs[ai].value;\n        if (attrName !== 'width' && attrName !== 'height' && attrName !== 'style') {\n          if (attrName === 'data' || attrName === 'src') {\n            attrValue = editor.convertURL(attrValue, attrName);\n          }\n          targetNode.attr('data-mce-p-' + attrName, attrValue);\n        }\n      }\n      innerHtml = sourceNode.firstChild && sourceNode.firstChild.value;\n      if (innerHtml) {\n        targetNode.attr('data-mce-html', escape(Sanitize.sanitize(editor, innerHtml)));\n        targetNode.firstChild = null;\n      }\n    };\n    var isPageEmbedWrapper = function (node) {\n      var nodeClass = node.attr('class');\n      return nodeClass && /\\btiny-pageembed\\b/.test(nodeClass);\n    };\n    var isWithinEmbedWrapper = function (node) {\n      while (node = node.parent) {\n        if (node.attr('data-ephox-embed-iri') || isPageEmbedWrapper(node)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var placeHolderConverter = function (editor) {\n      return function (nodes) {\n        var i = nodes.length;\n        var node;\n        var videoScript;\n        while (i--) {\n          node = nodes[i];\n          if (!node.parent) {\n            continue;\n          }\n          if (node.parent.attr('data-mce-object')) {\n            continue;\n          }\n          if (node.name === 'script') {\n            videoScript = getVideoScriptMatch(Settings.getScripts(editor), node.attr('src'));\n            if (!videoScript) {\n              continue;\n            }\n          }\n          if (videoScript) {\n            if (videoScript.width) {\n              node.attr('width', videoScript.width.toString());\n            }\n            if (videoScript.height) {\n              node.attr('height', videoScript.height.toString());\n            }\n          }\n          if (node.name === 'iframe' && Settings.hasLiveEmbeds(editor) && global$8.ceFalse) {\n            if (!isWithinEmbedWrapper(node)) {\n              node.replace(createPreviewIframeNode(editor, node));\n            }\n          } else {\n            if (!isWithinEmbedWrapper(node)) {\n              node.replace(createPlaceholderNode(editor, node));\n            }\n          }\n        }\n      };\n    };\n    var Nodes = {\n      createPreviewIframeNode: createPreviewIframeNode,\n      createPlaceholderNode: createPlaceholderNode,\n      placeHolderConverter: placeHolderConverter\n    };\n\n    var setup = function (editor) {\n      editor.on('preInit', function () {\n        var specialElements = editor.schema.getSpecialElements();\n        global$1.each('video audio iframe object'.split(' '), function (name) {\n          specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n        });\n        var boolAttrs = editor.schema.getBoolAttrs();\n        global$1.each('webkitallowfullscreen mozallowfullscreen allowfullscreen'.split(' '), function (name) {\n          boolAttrs[name] = {};\n        });\n        editor.parser.addNodeFilter('iframe,video,audio,object,embed,script', Nodes.placeHolderConverter(editor));\n        editor.serializer.addAttributeFilter('data-mce-object', function (nodes, name) {\n          var i = nodes.length;\n          var node;\n          var realElm;\n          var ai;\n          var attribs;\n          var innerHtml;\n          var innerNode;\n          var realElmName;\n          var className;\n          while (i--) {\n            node = nodes[i];\n            if (!node.parent) {\n              continue;\n            }\n            realElmName = node.attr(name);\n            realElm = new global$7(realElmName, 1);\n            if (realElmName !== 'audio' && realElmName !== 'script') {\n              className = node.attr('class');\n              if (className && className.indexOf('mce-preview-object') !== -1) {\n                realElm.attr({\n                  width: node.firstChild.attr('width'),\n                  height: node.firstChild.attr('height')\n                });\n              } else {\n                realElm.attr({\n                  width: node.attr('width'),\n                  height: node.attr('height')\n                });\n              }\n            }\n            realElm.attr({ style: node.attr('style') });\n            attribs = node.attributes;\n            ai = attribs.length;\n            while (ai--) {\n              var attrName = attribs[ai].name;\n              if (attrName.indexOf('data-mce-p-') === 0) {\n                realElm.attr(attrName.substr(11), attribs[ai].value);\n              }\n            }\n            if (realElmName === 'script') {\n              realElm.attr('type', 'text/javascript');\n            }\n            innerHtml = node.attr('data-mce-html');\n            if (innerHtml) {\n              innerNode = new global$7('#text', 3);\n              innerNode.raw = true;\n              innerNode.value = Sanitize.sanitize(editor, unescape(innerHtml));\n              realElm.append(innerNode);\n            }\n            node.replace(realElm);\n          }\n        });\n      });\n      editor.on('SetContent', function () {\n        editor.$('span.mce-preview-object').each(function (index, elm) {\n          var $elm = editor.$(elm);\n          if ($elm.find('span.mce-shim').length === 0) {\n            $elm.append('<span class=\"mce-shim\"></span>');\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var setup$1 = function (editor) {\n      editor.on('ResolveName', function (e) {\n        var name;\n        if (e.target.nodeType === 1 && (name = e.target.getAttribute('data-mce-object'))) {\n          e.name = name;\n        }\n      });\n    };\n    var ResolveName = { setup: setup$1 };\n\n    var setup$2 = function (editor) {\n      editor.on('click keyup', function () {\n        var selectedNode = editor.selection.getNode();\n        if (selectedNode && editor.dom.hasClass(selectedNode, 'mce-preview-object')) {\n          if (editor.dom.getAttrib(selectedNode, 'data-mce-selected')) {\n            selectedNode.setAttribute('data-mce-selected', '2');\n          }\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        var objectType = e.target.getAttribute('data-mce-object');\n        if (objectType === 'audio' || objectType === 'script') {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var target = e.target;\n        var html;\n        if (target.getAttribute('data-mce-object')) {\n          html = target.getAttribute('data-mce-html');\n          if (html) {\n            html = unescape(html);\n            target.setAttribute('data-mce-html', escape(UpdateHtml.updateHtml(html, {\n              width: String(e.width),\n              height: String(e.height)\n            })));\n          }\n        }\n      });\n    };\n    var Selection = { setup: setup$2 };\n\n    var stateSelectorAdapter = function (editor, selector) {\n      return function (buttonApi) {\n        return editor.selection.selectorChangedWithUnbind(selector.join(','), buttonApi.setActive).unbind;\n      };\n    };\n    var register$1 = function (editor) {\n      editor.ui.registry.addToggleButton('media', {\n        tooltip: 'Insert/edit media',\n        icon: 'embed',\n        onAction: function () {\n          editor.execCommand('mceMedia');\n        },\n        onSetup: stateSelectorAdapter(editor, [\n          'img[data-mce-object]',\n          'span[data-mce-object]',\n          'div[data-ephox-embed-iri]'\n        ])\n      });\n      editor.ui.registry.addMenuItem('media', {\n        icon: 'embed',\n        text: 'Media...',\n        onAction: function () {\n          editor.execCommand('mceMedia');\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('media', function (editor) {\n        Commands.register(editor);\n        Buttons.register(editor);\n        ResolveName.setup(editor);\n        FilterContent.setup(editor);\n        Selection.setup(editor);\n        return Api.get(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","var map = {\n\t\"./content/default/content.css\": 41,\n\t\"./content/default/content.min.css\": 42,\n\t\"./content/document/content.css\": 43,\n\t\"./content/document/content.min.css\": 44,\n\t\"./content/writer/content.css\": 45,\n\t\"./content/writer/content.min.css\": 46,\n\t\"./ui/oxide-dark/content.css\": 47,\n\t\"./ui/oxide-dark/content.inline.css\": 48,\n\t\"./ui/oxide-dark/content.inline.min.css\": 49,\n\t\"./ui/oxide-dark/content.min.css\": 50,\n\t\"./ui/oxide-dark/content.mobile.css\": 51,\n\t\"./ui/oxide-dark/content.mobile.min.css\": 52,\n\t\"./ui/oxide-dark/fonts/tinymce-mobile.woff\": 53,\n\t\"./ui/oxide-dark/skin.css\": 54,\n\t\"./ui/oxide-dark/skin.min.css\": 55,\n\t\"./ui/oxide-dark/skin.mobile.css\": 56,\n\t\"./ui/oxide-dark/skin.mobile.min.css\": 57,\n\t\"./ui/oxide/content.css\": 58,\n\t\"./ui/oxide/content.inline.css\": 59,\n\t\"./ui/oxide/content.inline.min.css\": 60,\n\t\"./ui/oxide/content.min.css\": 61,\n\t\"./ui/oxide/content.mobile.css\": 62,\n\t\"./ui/oxide/content.mobile.min.css\": 63,\n\t\"./ui/oxide/fonts/tinymce-mobile.woff\": 64,\n\t\"./ui/oxide/skin.css\": 65,\n\t\"./ui/oxide/skin.min.css\": 66,\n\t\"./ui/oxide/skin.mobile.css\": 67,\n\t\"./ui/oxide/skin.mobile.min.css\": 68\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 40;","module.exports = __webpack_public_path__ + \"skins/content/default/content.css\";","module.exports = __webpack_public_path__ + \"skins/content/default/content.min.css\";","module.exports = __webpack_public_path__ + \"skins/content/document/content.css\";","module.exports = __webpack_public_path__ + \"skins/content/document/content.min.css\";","module.exports = __webpack_public_path__ + \"skins/content/writer/content.css\";","module.exports = __webpack_public_path__ + \"skins/content/writer/content.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/content.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/content.inline.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/content.inline.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/content.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/content.mobile.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/content.mobile.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/fonts/tinymce-mobile.woff\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/skin.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/skin.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/skin.mobile.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide-dark/skin.mobile.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/content.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/content.inline.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/content.inline.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/content.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/content.mobile.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/content.mobile.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/fonts/tinymce-mobile.woff\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/skin.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/skin.min.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/skin.mobile.css\";","module.exports = __webpack_public_path__ + \"skins/ui/oxide/skin.mobile.min.css\";"],"sourceRoot":""}